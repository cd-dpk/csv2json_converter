[
{title:"Typescript: resolve relative import path when using symlinks",
id:"https://stackoverflow.com/questions/75059874",
body:"<p>This seems like a dumb question, but I struggle to find the answer.</p>
<h2>The situation</h2>
<p>Here is my folder structure:</p>
<pre class=""lang-bash prettyprint-override""><code>myProject/
├── module1/
│   ├── config.ts
│   └── init.ts #symlink
├── module2/
│   ├── config.ts
│   └── init.ts #symlink
└── symlinks/
    └── init.ts # the real not duplicated file
</code></pre>
<p>The file <code>init.js</code> import local files like so:</p>
<pre class=""lang-js prettyprint-override""><code>import config from './config'

// ...
</code></pre>
<h2>The problem</h2>
<p>The problem is that typescript throws <strong><code>Cannot find module './config' or its corresponding type declarations</code></strong></p>
<p>I tried playing with typescript option <code>preserveSymlinks</code> but it didn't solve my problem</p>
<p>I know about other ways to achieve my goal but it's overkill for just one file and it doesn't solve relaying on a relative path (like creating a npm module, creating a function and pass relative file content as parameter or even generating files at runtime...)</p>
<p>=&gt; I am working with <strong>typescript</strong> in a <strong>monorepo</strong>.</p>
<p><strong>Is it possible to use symlinks this way? If no, are there other (simple) alternatives?</strong></p>
<p><strong>EDIT:</strong> I have made <a href=""https://github.com/top-kat/typescript-symlinks-test"" rel=""noreferrer"">this example repo</a>, you can use it as a base for experiments</p>
",
tags:"<javascript><node.js><typescript><symlink><monorepo>",
score:12,
creationDate:2023-01-09 15:59:12,
creationDate:2023-03-24 00:53:25,
score:-5,
acceptedResponderReputation:253,
acceptedResponder:4436970,
QuestionerReputation:8638,
Questioner:5309984}
{title:"File Download Using Spring Boot and MSSQL",
id:"https://stackoverflow.com/questions/75718498",
body:"<p>I am working on uploading and downloading files using Spring Boot, JSP and MSSQL. I am able to run the upload and download function, BUT the file that I downloaded from the database is <strong>corrupted</strong>. Can anyone help me with this?</p>
<p>this is my spring version</p>
<pre><code>    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;3.0.3-SNAPSHOT&lt;/version&gt;
        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
</code></pre>
<p>my controller</p>
<pre><code>@RequestMapping(value = &quot;/uploadFile&quot;, method = RequestMethod.POST)
public ResponseEntity &lt; Object &gt; upload(@RequestPart(required = false) MultipartFile file) throws IOException {
    try {
        if (file != null) {
            tmDAO.storeFile(file, tm);
        }
        return new ResponseEntity &lt; Object &gt; (&quot;success&quot;, HttpStatus.OK);
    } catch (Exception e) {
        System.out.println(e.getMessage());
    }
}

@RequestMapping(&quot;/downloadFile/{id}&quot;)
public String downloadFile(@PathVariable(&quot;id&quot;) String id,
    HttpServletResponse res) throws IOException {
    FileModel fm = tmDAO.getFile(id);
    try {
        File file = new File(fm.getName());
        FileOutputStream fos = new FileOutputStream(file);
        res.setContentLength(fm.getData().length);
        res.setHeader(&quot;Content-Disposition&quot;, &quot;attachment; filename=&quot; + fm.getName());
        fos.write(fm.getData(), 0, fm.getData().length);
        fos.flush();
        fos.close();
    } catch (Exception e) {
        System.out.println(e.getMessage());
    }
    return &quot;string&quot;;
}
</code></pre>
<p>Service</p>
<pre><code>    
@Override
public FileModel storeFile(MultipartFile file, TeachingMaterial tm) throws IOException {
    String fileName = StringUtils.cleanPath(file.getOriginalFilename());
    FileModel fileModel = new FileModel(UUID.randomUUID().toString(), tm.getContributor(), fileName,
    file.getContentType(), file.getBytes(), tm.getClassName(), tm.getSubjectName(), tm.getSlots());
    return fileRepo.save(fileModel);
}

@Override
public FileModel getFile(String id) throws IOException {
    Optional &lt; FileModel &gt; fm = fileRepo.findById(id);
    if (fm.isPresent()) {
        return fm.get();
    }
    return null;
}
</code></pre>
<p>FileModel.java</p>
<pre><code>@Entity
@Table(name = &quot;FILES&quot;)
public class FileModel {
    @Id
    private String id;
    private String contributor;
    private String name;
    private String type;
    @Lob
    private byte[] data;
    private String className;
    private String subjectName;
    private String slots;

    public FileModel() {
        super();
    }

    public FileModel(String id, String contributor, String name, String type, byte[] data, String className,
            String subjectName, String slots) {
        super();
        this.id = id;
        this.contributor = contributor;
        this.name = name;
        this.type = type;
        this.data = data;
        this.className = className;
        this.subjectName = subjectName;
        this.slots = slots;
    }
**I skips the getters and setters for simplication**
}
</code></pre>
<p>Record in MSSQL</p>
<p><a href=""https://i.sstatic.net/9kSk8.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/9kSk8.png"" alt=""enter image description here"" /></a></p>
<p>what I get after downloading the txt file</p>
<p><a href=""https://i.sstatic.net/Ptvk0.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/Ptvk0.png"" alt=""enter image description here"" /></a></p>
<p>the original data should be</p>
<p>testing123</p>
<p>abc</p>
<p>Can anyone help me with this please?</p>
",
tags:"<java><sql-server><spring><spring-boot><download>",
score:8,
creationDate:2023-03-13 06:06:51,
creationDate:2023-03-15 22:44:20,
score:0,
acceptedResponderReputation:53381,
acceptedResponder:13942448,
QuestionerReputation:123,
Questioner:18146759}
{title:"Nodejs RangeError: Invalid time zone specified",
id:"https://stackoverflow.com/questions/77730418",
body:"<p>I have example for test:</p>
<pre class=""lang-js prettyprint-override""><code>console.log(&quot;test&quot;);

const t = new Date().toLocaleString(&quot;en-US&quot;, {
  timeZone: &quot;+0000&quot;
});

console.log(t);
</code></pre>
<p>Google Chrome   122.0.6182.0 (Official Build) dev (64-bit)
<a href=""https://i.sstatic.net/J1Xdt.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/J1Xdt.png"" alt=""Chrome browser"" /></a></p>
<p>Or try: <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat#try_it"" rel=""noreferrer"">https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/DateTimeFormat/DateTimeFormat#try_it</a></p>
<p>in browser console - OK, but with nodejs - Error</p>
<pre class=""lang-bash prettyprint-override""><code>test

/home/jdoodle.js:3
const t = new Date().toLocaleString(&quot;en-US&quot;, {
                     ^

RangeError: Invalid time zone specified: +0000
    at Date.toLocaleString (&lt;anonymous&gt;)
    at Object.&lt;anonymous&gt; (/home/jdoodle.js:3:22)
    at Module._compile (node:internal/modules/cjs/loader:1376:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1435:10)
    at Module.load (node:internal/modules/cjs/loader:1207:32)
    at Module._load (node:internal/modules/cjs/loader:1023:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:135:12)
    at node:internal/main/run_main_module:28:49

Node.js v21.2.0
</code></pre>
<p>example: <a href=""https://www.jdoodle.com/ia/T3V"" rel=""noreferrer"">https://www.jdoodle.com/ia/T3V</a></p>
<p>Can anyone explain to me why it doesn't work and how to make it work?</p>
",
tags:"<javascript><node.js><typescript>",
score:7,
creationDate:2023-12-29 05:40:44,
creationDate:2024-01-09 14:41:28,
score:0,
acceptedResponderReputation:735,
acceptedResponder:7273371,
QuestionerReputation:735,
Questioner:7273371}
{title:"Daemon compilation failed: Could not connect to Kotlin compile daemon",
id:"https://stackoverflow.com/questions/78557410",
body:"<p>I tried to build my project as an APK file so I could transfer it to my phone and test it to make sure it worked in more than the emulator, and I was given this error. I'm new to Android Studio and Kotlin, and I followed an online tutorial. A little bit of help would be nice. If needed, I can provide my :app build.gradle.kts and activity_main.xml for further help and advice.</p>
<p>Build Output:</p>
<pre><code>e: Daemon compilation failed: Could not connect to Kotlin compile daemon
java.lang.RuntimeException: Could not connect to Kotlin compile daemon
    at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunnerWithWorkers$GradleKotlinCompilerWorkAction.execute(GradleCompilerRunnerWithWorkers.kt:76)
    at org.gradle.workers.internal.NoIsolationWorkerFactory$1.lambda$execute$0(NoIsolationWorkerFactory.java:62)
    at org.gradle.workers.internal.AbstractWorker$1.call(AbstractWorker.java:44)
    at org.gradle.workers.internal.AbstractWorker$1.call(AbstractWorker.java:41)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)
    at org.gradle.workers.internal.AbstractWorker.executeWrappedInBuildOperation(AbstractWorker.java:41)
    at org.gradle.workers.internal.NoIsolationWorkerFactory$1.execute(NoIsolationWorkerFactory.java:59)
    at org.gradle.workers.internal.DefaultWorkerExecutor.lambda$submitWork$0(DefaultWorkerExecutor.java:174)
    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runExecution(DefaultConditionalExecutionQueue.java:187)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.access$700(DefaultConditionalExecutionQueue.java:120)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner$1.run(DefaultConditionalExecutionQueue.java:162)
    at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:264)
    at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:128)
    at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:133)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runBatch(DefaultConditionalExecutionQueue.java:157)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.run(DefaultConditionalExecutionQueue.java:126)
    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)
    at org.gradle.internal.concurrent.AbstractManagedExecutor$1.run(AbstractManagedExecutor.java:47)
    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
    at java.base/java.lang.Thread.run(Thread.java:840)

Failed to compile with Kotlin daemon: java.lang.RuntimeException: Could not connect to Kotlin compile daemon
    at org.jetbrains.kotlin.compilerRunner.GradleKotlinCompilerWork.compileWithDaemon(GradleKotlinCompilerWork.kt:221)
    at org.jetbrains.kotlin.compilerRunner.GradleKotlinCompilerWork.compileWithDaemonOrFallbackImpl(GradleKotlinCompilerWork.kt:178)
    at org.jetbrains.kotlin.compilerRunner.GradleKotlinCompilerWork.run(GradleKotlinCompilerWork.kt:138)
    at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunnerWithWorkers$GradleKotlinCompilerWorkAction.execute(GradleCompilerRunnerWithWorkers.kt:76)
    at org.gradle.workers.internal.NoIsolationWorkerFactory$1$1.create(NoIsolationWorkerFactory.java:66)
    at org.gradle.workers.internal.NoIsolationWorkerFactory$1$1.create(NoIsolationWorkerFactory.java:62)
    at org.gradle.internal.classloader.ClassLoaderUtils.executeInClassloader(ClassLoaderUtils.java:100)
    at org.gradle.workers.internal.NoIsolationWorkerFactory$1.lambda$execute$0(NoIsolationWorkerFactory.java:62)
    at org.gradle.workers.internal.AbstractWorker$1.call(AbstractWorker.java:44)
    at org.gradle.workers.internal.AbstractWorker$1.call(AbstractWorker.java:41)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)
    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)
    at org.gradle.workers.internal.AbstractWorker.executeWrappedInBuildOperation(AbstractWorker.java:41)
    at org.gradle.workers.internal.NoIsolationWorkerFactory$1.execute(NoIsolationWorkerFactory.java:59)
    at org.gradle.workers.internal.DefaultWorkerExecutor.lambda$submitWork$0(DefaultWorkerExecutor.java:174)
    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runExecution(DefaultConditionalExecutionQueue.java:187)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.access$700(DefaultConditionalExecutionQueue.java:120)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner$1.run(DefaultConditionalExecutionQueue.java:162)
    at org.gradle.internal.Factories$1.create(Factories.java:31)
    at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:264)
    at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:128)
    at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:133)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runBatch(DefaultConditionalExecutionQueue.java:157)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.run(DefaultConditionalExecutionQueue.java:126)
    at java.base/java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:539)
    at java.base/java.util.concurrent.FutureTask.run(FutureTask.java:264)
    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)
    at org.gradle.internal.concurrent.AbstractManagedExecutor$1.run(AbstractManagedExecutor.java:47)
    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1136)
    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:635)
    at java.base/java.lang.Thread.run(Thread.java:840)
Using fallback strategy: Compile without Kotlin daemon

exception: app\src\main\java\com\[REDACTED]\exprack_expensetracker\MainActivity.kt:36:22: error: type expected
exception:         var result : 0.0
exception:                      ^
exception: app\src\main\java\com\[REDACTED}\exprack_expensetracker\MainActivity.kt:12:28: error: unresolved reference: ActivityMainBinding
exception:     lateinit var binding : ActivityMainBinding
exception:                            ^
exception: app\src\main\java\com\[REDACTED]\exprack_expensetracker\MainActivity.kt:16:19: error: unresolved reference: ActivityMainBinding
exception:         binding = ActivityMainBinding.inflate(layoutInflater)
exception:                   ^
exception: app\src\main\java\com\[REDACTED]\exprack_expensetracker\MainActivity.kt:51:26: error: variable expected
exception:         binding.resultTv.text = &quot;Result is $result&quot;
exception:                          ^
exception: app\src\main\java\com\[REDACTED]\exprack_expensetracker\MainActivity.kt:51:45: error: variable 'result' must be initialized
exception:         binding.resultTv.text = &quot;Result is $result&quot;
exception:                                             ^

&gt; Task :app:compileDebugKotlin FAILED

FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':app:compileDebugKotlin'.
&gt; A failure occurred while executing org.jetbrains.kotlin.compilerRunner.GradleCompilerRunnerWithWorkers$GradleKotlinCompilerWorkAction
   &gt; Compilation error. See log for more details

* Try:
&gt; Run with --info or --debug option to get more log output.
&gt; Run with --scan to get full insights.
&gt; Get more help at https://help.gradle.org.

* Exception is:
org.gradle.api.tasks.TaskExecutionException: Execution failed for task ':app:compileDebugKotlin'.
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.lambda$executeIfValid$1(ExecuteActionsTaskExecuter.java:130)
    at org.gradle.internal.Try$Failure.ifSuccessfulOrElse(Try.java:282)
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:128)
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:116)
    at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)
    at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)
    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)
    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:74)
    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)
    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)
    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)
    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)
    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)
    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)
    at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:42)
    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:331)
    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:318)
    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.lambda$execute$0(DefaultTaskExecutionGraph.java:314)
    at org.gradle.internal.operations.CurrentBuildOperationRef.with(CurrentBuildOperationRef.java:80)
    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:314)
    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:303)
    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:463)
    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:380)
    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)
    at org.gradle.internal.concurrent.AbstractManagedExecutor$1.run(AbstractManagedExecutor.java:47)
Caused by: org.gradle.workers.internal.DefaultWorkerExecutor$WorkExecutionException: A failure occurred while executing org.jetbrains.kotlin.compilerRunner.GradleCompilerRunnerWithWorkers$GradleKotlinCompilerWorkAction
    at org.gradle.workers.internal.DefaultWorkerExecutor$WorkItemExecution.waitForCompletion(DefaultWorkerExecutor.java:287)
    at org.gradle.internal.work.DefaultAsyncWorkTracker.lambda$waitForItemsAndGatherFailures$2(DefaultAsyncWorkTracker.java:130)
    at org.gradle.internal.Factories$1.create(Factories.java:31)
    at org.gradle.internal.work.DefaultWorkerLeaseService.withoutLocks(DefaultWorkerLeaseService.java:336)
    at org.gradle.internal.work.DefaultWorkerLeaseService.withoutLocks(DefaultWorkerLeaseService.java:319)
    at org.gradle.internal.work.DefaultWorkerLeaseService.withoutLock(DefaultWorkerLeaseService.java:324)
    at org.gradle.internal.work.DefaultAsyncWorkTracker.waitForItemsAndGatherFailures(DefaultAsyncWorkTracker.java:126)
    at org.gradle.internal.work.DefaultAsyncWorkTracker.waitForItemsAndGatherFailures(DefaultAsyncWorkTracker.java:92)
    at org.gradle.internal.work.DefaultAsyncWorkTracker.waitForAll(DefaultAsyncWorkTracker.java:78)
    at org.gradle.internal.work.DefaultAsyncWorkTracker.waitForCompletion(DefaultAsyncWorkTracker.java:66)
    at org.gradle.api.internal.tasks.execution.TaskExecution$3.run(TaskExecution.java:252)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)
    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)
    at org.gradle.api.internal.tasks.execution.TaskExecution.executeAction(TaskExecution.java:229)
    at org.gradle.api.internal.tasks.execution.TaskExecution.executeActions(TaskExecution.java:212)
    at org.gradle.api.internal.tasks.execution.TaskExecution.executeWithPreviousOutputFiles(TaskExecution.java:195)
    at org.gradle.api.internal.tasks.execution.TaskExecution.execute(TaskExecution.java:162)
    at org.gradle.internal.execution.steps.ExecuteStep.executeInternal(ExecuteStep.java:105)
    at org.gradle.internal.execution.steps.ExecuteStep.access$000(ExecuteStep.java:44)
    at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:59)
    at org.gradle.internal.execution.steps.ExecuteStep$1.call(ExecuteStep.java:56)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)
    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)
    at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:56)
    at org.gradle.internal.execution.steps.ExecuteStep.execute(ExecuteStep.java:44)
    at org.gradle.internal.execution.steps.CancelExecutionStep.execute(CancelExecutionStep.java:41)
    at org.gradle.internal.execution.steps.TimeoutStep.executeWithoutTimeout(TimeoutStep.java:74)
    at org.gradle.internal.execution.steps.TimeoutStep.execute(TimeoutStep.java:55)
    at org.gradle.internal.execution.steps.PreCreateOutputParentsStep.execute(PreCreateOutputParentsStep.java:50)
    at org.gradle.internal.execution.steps.PreCreateOutputParentsStep.execute(PreCreateOutputParentsStep.java:28)
    at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:67)
    at org.gradle.internal.execution.steps.RemovePreviousOutputsStep.execute(RemovePreviousOutputsStep.java:37)
    at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:61)
    at org.gradle.internal.execution.steps.BroadcastChangingOutputsStep.execute(BroadcastChangingOutputsStep.java:26)
    at org.gradle.internal.execution.steps.CaptureOutputsAfterExecutionStep.execute(CaptureOutputsAfterExecutionStep.java:67)
    at org.gradle.internal.execution.steps.CaptureOutputsAfterExecutionStep.execute(CaptureOutputsAfterExecutionStep.java:45)
    at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:40)
    at org.gradle.internal.execution.steps.ResolveInputChangesStep.execute(ResolveInputChangesStep.java:29)
    at org.gradle.internal.execution.steps.BuildCacheStep.executeWithoutCache(BuildCacheStep.java:189)
    at org.gradle.internal.execution.steps.BuildCacheStep.lambda$execute$1(BuildCacheStep.java:75)
    at org.gradle.internal.Either$Right.fold(Either.java:175)
    at org.gradle.internal.execution.caching.CachingState.fold(CachingState.java:62)
    at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:73)
    at org.gradle.internal.execution.steps.BuildCacheStep.execute(BuildCacheStep.java:48)
    at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:46)
    at org.gradle.internal.execution.steps.StoreExecutionStateStep.execute(StoreExecutionStateStep.java:35)
    at org.gradle.internal.execution.steps.SkipUpToDateStep.executeBecause(SkipUpToDateStep.java:76)
    at org.gradle.internal.execution.steps.SkipUpToDateStep.lambda$execute$2(SkipUpToDateStep.java:54)
    at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:54)
    at org.gradle.internal.execution.steps.SkipUpToDateStep.execute(SkipUpToDateStep.java:36)
    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:37)
    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsFinishedStep.execute(MarkSnapshottingInputsFinishedStep.java:27)
    at org.gradle.internal.execution.steps.ResolveIncrementalCachingStateStep.executeDelegate(ResolveIncrementalCachingStateStep.java:49)
    at org.gradle.internal.execution.steps.ResolveIncrementalCachingStateStep.executeDelegate(ResolveIncrementalCachingStateStep.java:27)
    at org.gradle.internal.execution.steps.AbstractResolveCachingStateStep.execute(AbstractResolveCachingStateStep.java:71)
    at org.gradle.internal.execution.steps.AbstractResolveCachingStateStep.execute(AbstractResolveCachingStateStep.java:39)
    at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:65)
    at org.gradle.internal.execution.steps.ResolveChangesStep.execute(ResolveChangesStep.java:36)
    at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:106)
    at org.gradle.internal.execution.steps.ValidateStep.execute(ValidateStep.java:55)
    at org.gradle.internal.execution.steps.AbstractCaptureStateBeforeExecutionStep.execute(AbstractCaptureStateBeforeExecutionStep.java:64)
    at org.gradle.internal.execution.steps.AbstractCaptureStateBeforeExecutionStep.execute(AbstractCaptureStateBeforeExecutionStep.java:43)
    at org.gradle.internal.execution.steps.AbstractSkipEmptyWorkStep.executeWithNonEmptySources(AbstractSkipEmptyWorkStep.java:125)
    at org.gradle.internal.execution.steps.AbstractSkipEmptyWorkStep.execute(AbstractSkipEmptyWorkStep.java:61)
    at org.gradle.internal.execution.steps.AbstractSkipEmptyWorkStep.execute(AbstractSkipEmptyWorkStep.java:36)
    at org.gradle.internal.execution.steps.legacy.MarkSnapshottingInputsStartedStep.execute(MarkSnapshottingInputsStartedStep.java:38)
    at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:36)
    at org.gradle.internal.execution.steps.LoadPreviousExecutionStateStep.execute(LoadPreviousExecutionStateStep.java:23)
    at org.gradle.internal.execution.steps.HandleStaleOutputsStep.execute(HandleStaleOutputsStep.java:75)
    at org.gradle.internal.execution.steps.HandleStaleOutputsStep.execute(HandleStaleOutputsStep.java:41)
    at org.gradle.internal.execution.steps.AssignMutableWorkspaceStep.lambda$execute$0(AssignMutableWorkspaceStep.java:35)
    at org.gradle.api.internal.tasks.execution.TaskExecution$4.withWorkspace(TaskExecution.java:289)
    at org.gradle.internal.execution.steps.AssignMutableWorkspaceStep.execute(AssignMutableWorkspaceStep.java:31)
    at org.gradle.internal.execution.steps.AssignMutableWorkspaceStep.execute(AssignMutableWorkspaceStep.java:22)
    at org.gradle.internal.execution.steps.ChoosePipelineStep.execute(ChoosePipelineStep.java:40)
    at org.gradle.internal.execution.steps.ChoosePipelineStep.execute(ChoosePipelineStep.java:23)
    at org.gradle.internal.execution.steps.ExecuteWorkBuildOperationFiringStep.lambda$execute$2(ExecuteWorkBuildOperationFiringStep.java:67)
    at org.gradle.internal.execution.steps.ExecuteWorkBuildOperationFiringStep.execute(ExecuteWorkBuildOperationFiringStep.java:67)
    at org.gradle.internal.execution.steps.ExecuteWorkBuildOperationFiringStep.execute(ExecuteWorkBuildOperationFiringStep.java:39)
    at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:46)
    at org.gradle.internal.execution.steps.IdentityCacheStep.execute(IdentityCacheStep.java:34)
    at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:48)
    at org.gradle.internal.execution.steps.IdentifyStep.execute(IdentifyStep.java:35)
    at org.gradle.internal.execution.impl.DefaultExecutionEngine$1.execute(DefaultExecutionEngine.java:61)
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.executeIfValid(ExecuteActionsTaskExecuter.java:127)
    at org.gradle.api.internal.tasks.execution.ExecuteActionsTaskExecuter.execute(ExecuteActionsTaskExecuter.java:116)
    at org.gradle.api.internal.tasks.execution.FinalizePropertiesTaskExecuter.execute(FinalizePropertiesTaskExecuter.java:46)
    at org.gradle.api.internal.tasks.execution.ResolveTaskExecutionModeExecuter.execute(ResolveTaskExecutionModeExecuter.java:51)
    at org.gradle.api.internal.tasks.execution.SkipTaskWithNoActionsExecuter.execute(SkipTaskWithNoActionsExecuter.java:57)
    at org.gradle.api.internal.tasks.execution.SkipOnlyIfTaskExecuter.execute(SkipOnlyIfTaskExecuter.java:74)
    at org.gradle.api.internal.tasks.execution.CatchExceptionTaskExecuter.execute(CatchExceptionTaskExecuter.java:36)
    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.executeTask(EventFiringTaskExecuter.java:77)
    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:55)
    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter$1.call(EventFiringTaskExecuter.java:52)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)
    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)
    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)
    at org.gradle.api.internal.tasks.execution.EventFiringTaskExecuter.execute(EventFiringTaskExecuter.java:52)
    at org.gradle.execution.plan.LocalTaskNodeExecutor.execute(LocalTaskNodeExecutor.java:42)
    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:331)
    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$InvokeNodeExecutorsAction.execute(DefaultTaskExecutionGraph.java:318)
    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.lambda$execute$0(DefaultTaskExecutionGraph.java:314)
    at org.gradle.internal.operations.CurrentBuildOperationRef.with(CurrentBuildOperationRef.java:80)
    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:314)
    at org.gradle.execution.taskgraph.DefaultTaskExecutionGraph$BuildOperationAwareExecutionAction.execute(DefaultTaskExecutionGraph.java:303)
    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.execute(DefaultPlanExecutor.java:463)
    at org.gradle.execution.plan.DefaultPlanExecutor$ExecutorWorker.run(DefaultPlanExecutor.java:380)
    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)
    at org.gradle.internal.concurrent.AbstractManagedExecutor$1.run(AbstractManagedExecutor.java:47)
Caused by: org.jetbrains.kotlin.gradle.tasks.CompilationErrorException: Compilation error. See log for more details
    at org.jetbrains.kotlin.gradle.tasks.TasksUtilsKt.throwExceptionIfCompilationFailed(tasksUtils.kt:22)
    at org.jetbrains.kotlin.compilerRunner.GradleKotlinCompilerWork.run(GradleKotlinCompilerWork.kt:144)
    at org.jetbrains.kotlin.compilerRunner.GradleCompilerRunnerWithWorkers$GradleKotlinCompilerWorkAction.execute(GradleCompilerRunnerWithWorkers.kt:76)
    at org.gradle.workers.internal.DefaultWorkerServer.execute(DefaultWorkerServer.java:63)
    at org.gradle.workers.internal.NoIsolationWorkerFactory$1$1.create(NoIsolationWorkerFactory.java:66)
    at org.gradle.workers.internal.NoIsolationWorkerFactory$1$1.create(NoIsolationWorkerFactory.java:62)
    at org.gradle.internal.classloader.ClassLoaderUtils.executeInClassloader(ClassLoaderUtils.java:100)
    at org.gradle.workers.internal.NoIsolationWorkerFactory$1.lambda$execute$0(NoIsolationWorkerFactory.java:62)
    at org.gradle.workers.internal.AbstractWorker$1.call(AbstractWorker.java:44)
    at org.gradle.workers.internal.AbstractWorker$1.call(AbstractWorker.java:41)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:200)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:195)
    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)
    at org.gradle.workers.internal.AbstractWorker.executeWrappedInBuildOperation(AbstractWorker.java:41)
    at org.gradle.workers.internal.NoIsolationWorkerFactory$1.execute(NoIsolationWorkerFactory.java:59)
    at org.gradle.workers.internal.DefaultWorkerExecutor.lambda$submitWork$0(DefaultWorkerExecutor.java:174)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runExecution(DefaultConditionalExecutionQueue.java:187)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.access$700(DefaultConditionalExecutionQueue.java:120)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner$1.run(DefaultConditionalExecutionQueue.java:162)
    at org.gradle.internal.Factories$1.create(Factories.java:31)
    at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:264)
    at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:128)
    at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:133)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.runBatch(DefaultConditionalExecutionQueue.java:157)
    at org.gradle.internal.work.DefaultConditionalExecutionQueue$ExecutionRunner.run(DefaultConditionalExecutionQueue.java:126)

BUILD FAILED in 17m 39s
29 actionable tasks: 15 executed, 14 up-to-date
</code></pre>
",
tags:"<java><android><kotlin><compiler-errors><build.gradle>",
score:6,
creationDate:2024-05-30 22:01:03,
creationDate:2024-12-05 16:34:57,
score:0,
acceptedResponderReputation:95,
acceptedResponder:20523014,
QuestionerReputation:95,
Questioner:20523014}
{title:"Idea Intellij: Error:java: error: release version 20 not supported, maven.compiler.target in pom.xml",
id:"https://stackoverflow.com/questions/75689637",
body:"<p>I have a <code>Idea Intellij</code> project like this:</p>
<p><strong>Test.java</strong>:</p>
<pre><code>public class Test {
    public static void main(String[] args) {
        System.out.println(&quot;Test&quot;);
    }
}
</code></pre>
<p><strong>pom.xml</strong>:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;test&lt;/groupId&gt;
    &lt;artifactId&gt;test&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
     
    &lt;properties&gt;
        &lt;maven.compiler.target&gt;20&lt;/maven.compiler.target&gt;
        &lt;maven.compiler.source&gt;20&lt;/maven.compiler.source&gt;
    &lt;/properties&gt;
&lt;/project&gt;
</code></pre>
<p><strong>Idea Intellij</strong></p>
<pre><code>File -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Compiler -&gt; Java Compiler
</code></pre>
<p><a href=""https://i.sstatic.net/64YmG.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/64YmG.png"" alt=""enter image description here"" /></a></p>
<pre><code>File -&gt; Project Structure -&gt; Project
</code></pre>
<p><a href=""https://i.sstatic.net/UykIK.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/UykIK.png"" alt=""enter image description here"" /></a></p>
<pre><code>File -&gt; Project Structure -&gt; Modules -&gt; Sources
</code></pre>
<p><a href=""https://i.sstatic.net/21OQy.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/21OQy.png"" alt=""enter image description here"" /></a></p>
<pre><code>File -&gt; Project Structure -&gt; Modules -&gt; Dependencies
</code></pre>
<p><a href=""https://i.sstatic.net/CymXg.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/CymXg.png"" alt=""enter image description here"" /></a></p>
<p>When trying to run <code>Test.java</code> I get an error:</p>
<pre><code>Error:java: error: release version 20 not supported
</code></pre>
<p><a href=""https://i.sstatic.net/ZQ83T.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/ZQ83T.png"" alt=""enter image description here"" /></a></p>
<p>I use Ubuntu. When I type <code>java --version</code> in the terminal, I get:</p>
<pre><code>openjdk 20 2023-03-21
OpenJDK Runtime Environment (build 20+36-2344)
OpenJDK 64-Bit Server VM (build 20+36-2344, mixed mode, sharing)
</code></pre>
<p>I'm not sure how I can make Intellij use Java 20</p>
<p>When I use</p>
<pre><code>   &lt;properties&gt;
        &lt;maven.compiler.target&gt;11&lt;/maven.compiler.target&gt;
        &lt;maven.compiler.source&gt;11&lt;/maven.compiler.source&gt;
    &lt;/properties&gt;
</code></pre>
<p>the code runs fine. However I want a newer Java to be used, so that features like <code>enhanced switch blocks</code>:</p>
<pre><code>switch (value)  {
 case 1 -&gt; {}
}
</code></pre>
<p>are available</p>
",
tags:"<java><maven><intellij-idea><adoptopenjdk><java-19>",
score:12,
creationDate:2023-03-09 20:18:47,
creationDate:2023-03-18 00:29:59,
score:0,
acceptedResponderReputation:5106,
acceptedResponder:4759176,
QuestionerReputation:5106,
Questioner:4759176}
{title:"Errors while setting up xnat webapp in tomcat 9",
id:"https://stackoverflow.com/questions/76346418",
body:"<p>I have followed the online documentation on the xnat site (<a href=""https://wiki.xnat.org/documentation/getting-started-with-xnat/xnat-installation-guide"" rel=""nofollow noreferrer"">https://wiki.xnat.org/documentation/getting-started-with-xnat/xnat-installation-guide</a>) and installed apache tomcat 9 ( version 9.0.75, JVM Version : 1.8.0_372_b07, JVM Vendor: Temurin). But when I click 'start' on the xnat webapp, I get the error:</p>
<pre><code>FAIL - Application at context path [/xnat-web-1.8.8] could not be started
FAIL - Encountered exception [org.apache.catalina.LifecycleException: Failed to start component [org.apache.catalina.webresources.StandardRoot@35a50a4c]]
</code></pre>
<p>The log file shows the following (truncated to allow it to post here):</p>
<pre><code>
... org.apache.catalina.core.ApplicationContext.log HTMLManager: Error starting [/xnat-web-1.8.8]
        org.apache.catalina.LifecycleException: Failed to start component [org.apache.catalina.webresources.StandardRoot@6dde5c8c]
                at org.apache.catalina.util.LifecycleBase.handleSubClassException(LifecycleBase.java:440)
              
...
...
...
                at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
                at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
                at java.lang.Thread.run(Thread.java:750)
        Caused by: java.lang.NullPointerException
                at java.lang.String.startsWith(String.java:1405)
                at java.lang.String.startsWith(String.java:1434)
                at org.apache.catalina.webresources.AbstractFileResourceSet.file(AbstractFileResourceSet.java:98)
                at org.apache.catalina.webresources.DirResourceSet.getResource(DirResourceSet.java:94)
                at org.apache.catalina.webresources.StandardRoot.getResourceInternal(StandardRoot.java:272)
                at org.apache.catalina.webresources.Cache.getResource(Cache.java:64)
                at org.apache.catalina.webresources.StandardRoot.getResource(StandardRoot.java:211)
                at org.apache.catalina.webresources.StandardRoot.listResources(StandardRoot.java:347)
                at org.apache.catalina.webresources.StandardRoot.processWebInfLib(StandardRoot.java:585)
                at org.apache.catalina.webresources.StandardRoot.startInternal(StandardRoot.java:722)
                at org.apache.catalina.util.LifecycleBase.start(LifecycleBase.java:183)
</code></pre>
<p>According to ChatGPT:</p>
<pre><code>Based on the provided log file, it appears that there is an error during the deployment of the web application '/xnat-web-1.8.8' in Tomcat. The error message indicates a NullPointerException and a LifecycleException related to the StandardRoot component.

The root cause of the issue seems to be the NullPointerException occurring within the AbstractFileResourceSet class. It specifically fails when attempting to access a file resource, likely due to a missing or invalid file path.
</code></pre>
<p>I am wondering if the issue is either in the unit file or in the postgresql config (TCP/IP connections) setup. I am only using tomcat on localhost. In my pg_hba.conf file i have just added the line <code>listen_addresses = '*'</code>
If you look at the unit file below, I have given it multiple folders to readwrite. Tomcat is by default using /opt/tomcat. But the xnat documentation settings indicate I use /var/lib/tomcat, /var/log/tomcat, and /etc/tomcat/Catalina as ReadWritePaths. I have just added all those alongwith my installation default paths in my unit file. I am wondering if that's where the error is.
My tomcat unit file is :</p>
<pre><code>
[Unit]
Description=Apache Tomcat Web Application Container
After=network.target
[Service]
Type=forking
User=xnat
Group=xnat
PrivateTmp=yes
Environment=&quot;JAVA_HOME=/usr/lib/jvm/java-1.8.0-openjdk-amd64&quot;
Environment=&quot;JAVA_OPTS=-Djava.security.egd=file:///dev/urandom -Djava.awt.headless=true&quot;
Environment=&quot;CATALINA_BASE=/opt/tomcat&quot;
Environment=&quot;CATALINA_HOME=/opt/tomcat&quot;
Environment=&quot;CATALINA_PID=/opt/tomcat/temp/tomcat.pid&quot;
Environment=&quot;CATALINA_OPTS=&quot;-Xms512M -Xmx1024M -server -XX:+UseParallelGC -Dxnat.home=/data/xnat/home&quot;
ExecStart=/opt/tomcat/bin/startup.sh
ExecStop=/opt/tomcat/bin/shutdown.sh
#AmbientCapabilities=CAP_NET_BIND_SERVICE
NoNewPrivileges=true
CacheDirectory=tomcat
CacheDirectoryMode=750
#ProtectSystem=strict
ReadWritePaths=/etc/tomcat/Catalina/
ReadWritePaths=/opt/tomcat/webapps/
ReadWritePaths=/var/lib/tomcat/webapps/
ReadWritePaths=/opt/log/tomcat/
ReadWritePaths=/var/log/tomcat/
ReadWritePaths=/data/xnat/home
ReadWritePaths=/home/xnat/
[Install]
WantedBy=multi-user.target
</code></pre>
<p>The context.xml file under /opt/tomcat/webapps/xnat-1.8.8/META-INF  is:</p>
<pre><code>xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;!--
  ~ web: context.xml
  ~ XNAT http://www.xnat.org
  ~ Copyright (c) 2005-2021, Washington University School of Medicine and Howard Hughes Medical Institute
  ~ All Rights Reserved
  ~
  ~ Released under the Simplified BSD.
  --&gt;

&lt;Context&gt;
    &lt;!--
    For Tomcat 7 compatibility, uncomment the &lt;Loader&gt; element and comment out the &lt;Resources&gt;
    and &lt;CookieProcessor&gt; elements under that.
    --&gt;
    &lt;!-- Loader className=&quot;org.apache.catalina.loader.VirtualWebappLoader&quot; searchVirtualFirst=&quot;true&quot; virtualClasspath=&quot;${xnat.home}/plugins/*.jar&quot;/ --&gt;

    &lt;!--
    For Tomcat 8 compatibility, uncomment the &lt;Resources&gt; and &lt;CookieProcessor&gt; elements below and
    comment out the &lt;Loader&gt; element below that.
    --&gt;
    &lt;Resources&gt;
        &lt;PreResources className=&quot;org.apache.catalina.webresources.DirResourceSet&quot; base=&quot;${xnat.home}/plugins&quot; webAppMount=&quot;/WEB-INF/lib&quot; /&gt;
    &lt;/Resources&gt;
    &lt;CookieProcessor className=&quot;org.apache.tomcat.util.http.LegacyCookieProcessor&quot; /&gt;
    &lt;JarScanner scanAllDirectories=&quot;true&quot; /&gt;
    &lt;Parameter name=&quot;xnatHome&quot; value=&quot;${xnat.home}&quot;/&gt;
    &lt;Manager pathname=&quot;&quot; /&gt;
&lt;/Context&gt;
</code></pre>
<p>I have since also unsuccessfully tried to deploy xnat via vagrant and docker.
I will be grateful for any help you can give me.</p>
",
tags:"<java><tomcat><xnat>",
score:6,
creationDate:2023-05-27 10:20:26,
creationDate:2023-05-29 21:22:01,
score:0,
acceptedResponderReputation:53381,
acceptedResponder:13942448,
QuestionerReputation:630,
Questioner:1345882}
{title:"Cannot find module or its corresponding type declarations.ts(2307)",
id:"https://stackoverflow.com/questions/77154838",
body:"<p>I created this custom npm package: <a href=""https://www.npmjs.com/package/leon-theme?activeTab=code"" rel=""noreferrer"">https://www.npmjs.com/package/leon-theme?activeTab=code</a></p>
<p>Then I created a basic <strong>create-react-app</strong> <a href=""https://github.com/leongaban/test-project"" rel=""noreferrer"">https://github.com/leongaban/test-project</a> and in the <code>src/index.tsx</code> file I tried to import my package.</p>
<p>However when add my import <code>import { LeonTheme } from &quot;leon-theme&quot;;</code></p>
<p>I get the following error when I hover over the above line:</p>
<blockquote>
<p>Cannot find module 'leon-theme' or its corresponding type declarations.ts(2307)</p>
</blockquote>
<h2>tsconfig</h2>
<pre><code>{
  &quot;compilerOptions&quot;: {
    &quot;module&quot;: &quot;ES6&quot;,
    &quot;target&quot;: &quot;es2016&quot;,
    &quot;lib&quot;: [&quot;ES2020&quot;, &quot;DOM&quot;],
    &quot;jsx&quot;: &quot;react&quot;,
    &quot;allowJs&quot;: true,
    &quot;declaration&quot;: true,
    &quot;declarationDir&quot;: &quot;types&quot;,
    &quot;sourceMap&quot;: true,
    &quot;allowSyntheticDefaultImports&quot;: true,
    &quot;noEmit&quot;: false,
    &quot;outDir&quot;: &quot;./dist&quot;,
    &quot;moduleResolution&quot;: &quot;node&quot;,
    &quot;noImplicitAny&quot;: false
  },
  &quot;include&quot;: [&quot;src/**/*.ts&quot;]
}
</code></pre>
<h2>package.json</h2>
<pre><code>{
  &quot;name&quot;: &quot;leon-theme&quot;,
  &quot;version&quot;: &quot;0.0.15&quot;,
  &quot;module&quot;: &quot;dist/lib/es6/index.js&quot;,
  &quot;description&quot;: &quot;A simple React style &amp; component library&quot;,
  &quot;homepage&quot;: &quot;https://github.com/leongaban/leon-theme&quot;,
  &quot;bugs&quot;: {
    &quot;url&quot;: &quot;https://github.com/leongaban/leon-theme/issues&quot;
  },
  &quot;repository&quot;: {
    &quot;type&quot;: &quot;git&quot;,
    &quot;url&quot;: &quot;git+https://github.com/leongaban/leon-theme.git&quot;
  },
  &quot;keywords&quot;: [
    &quot;javascript&quot;,
    &quot;theme&quot;,
    &quot;buttons&quot;,
    &quot;leon&quot;
  ],
  &quot;scripts&quot;: {
    &quot;build&quot;: &quot;rm -rf dist/lib &amp;&amp; tsc --build&quot;
  },
  &quot;author&quot;: &quot;Leon Gaban&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;dependencies&quot;: {
    &quot;react&quot;: &quot;^18.2.0&quot;
  },
  &quot;devDependencies&quot;: {
    &quot;@types/react&quot;: &quot;^18.2.22&quot;,
    &quot;jest-environment-jsdom&quot;: &quot;^29.7.0&quot;,
    &quot;tslib&quot;: &quot;^2.6.2&quot;,
    &quot;typescript&quot;: &quot;^5.2.2&quot;
  },
  &quot;files&quot;: [
    &quot;dist&quot;,
    &quot;types&quot;
  ],
  &quot;types&quot;: &quot;dist/index.d.ts&quot;
}
</code></pre>
<h3>node_modules/leon-theme folder structure in the new react app</h3>
<p><a href=""https://i.sstatic.net/OT5Np.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/OT5Np.png"" alt=""enter image description here"" /></a></p>
",
tags:"<javascript><typescript><npm><npm-package>",
score:7,
creationDate:2023-09-22 04:16:45,
creationDate:2023-09-22 20:20:53,
score:0,
acceptedResponderReputation:39018,
acceptedResponder:168738,
QuestionerReputation:39018,
Questioner:168738}
{title:"EntityManagerFactory is very slow to close",
id:"https://stackoverflow.com/questions/77621530",
body:"<p>My Spring Boot v3.2.0 app uses JDK 21. When the test suite finishes, closing the <code>EntityManagerFactory</code> beans that were created takes over 30 seconds, which is about 33% of the test suite's total execution time. The logs indicate that 3 of these beans take 11 seconds to close, and it appears that most of this time is spent waiting for the associated Hikari connection pool to close.</p>
<p>When the application itself shuts down, no such delay occurs. Presumably this is because the application only creates 1 instance of this bean, but the test suite creates 14 instances (because of the different application contexts that are built by the test suite).</p>
<p>When the tests run, is there a way to either:</p>
<ul>
<li>Reduce the number of <code>EntityManagerFactory</code> beans that are created</li>
<li>Reduce the time it takes to close a <code>EntityManagerFactory</code> bean</li>
</ul>
<p>The following Hikari configuration is used by the tests</p>
<pre><code>spring.datasource.hikari.maximumPoolSize=2
</code></pre>
<p>The relevant section of the test suite's logs are shown below</p>
<pre><code>2023-12-07T15:53:41.555Z --- j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-07T15:53:41.556Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...
2023-12-07T15:53:41.557Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.
2023-12-07T15:53:52.831Z --- j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-07T15:53:52.832Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown initiated...
2023-12-07T15:53:52.834Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-2 - Shutdown completed.
2023-12-07T15:54:03.861Z --- j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-07T15:54:03.863Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown initiated...
2023-12-07T15:54:03.865Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-3 - Shutdown completed.
2023-12-07T15:54:03.886Z --- j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-07T15:54:03.887Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown initiated...
2023-12-07T15:54:03.888Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-4 - Shutdown completed.
2023-12-07T15:54:03.899Z --- j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-07T15:54:03.899Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown initiated...
2023-12-07T15:54:03.900Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-5 - Shutdown completed.
2023-12-07T15:54:14.916Z --- j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-07T15:54:14.917Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown initiated...
2023-12-07T15:54:14.919Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-6 - Shutdown completed.
2023-12-07T15:54:14.938Z --- j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-07T15:54:14.939Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown initiated...
2023-12-07T15:54:14.940Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-7 - Shutdown completed.
2023-12-07T15:54:14.953Z --- j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-07T15:54:14.954Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown initiated...
2023-12-07T15:54:14.954Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-8 - Shutdown completed.
2023-12-07T15:54:14.955Z --- j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-07T15:54:14.955Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown initiated...
2023-12-07T15:54:14.956Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-9 - Shutdown completed.
2023-12-07T15:54:14.960Z --- j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-07T15:54:14.960Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown initiated...
2023-12-07T15:54:14.960Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-10 - Shutdown completed.
2023-12-07T15:54:14.964Z --- j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-07T15:54:14.964Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown initiated...
2023-12-07T15:54:14.965Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-11 - Shutdown completed.
2023-12-07T15:54:14.968Z --- j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-07T15:54:14.968Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown initiated...
2023-12-07T15:54:14.969Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-12 - Shutdown completed.
2023-12-07T15:54:14.972Z --- j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-07T15:54:14.972Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown initiated...
2023-12-07T15:54:14.972Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-13 - Shutdown completed.
2023-12-07T15:54:14.975Z --- j.LocalContainerEntityManagerFactoryBean : Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-07T15:54:14.976Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Shutdown initiated...
2023-12-07T15:54:14.992Z --- com.zaxxer.hikari.HikariDataSource       : HikariPool-14 - Shutdown completed.

&gt; Task :test

SUCCESS: Executed 706 tests in 1m 37s (2 skipped)
</code></pre>
",
tags:"<java><spring-boot><jpa><testcontainers>",
score:6,
creationDate:2023-12-07 16:15:23,
creationDate:2024-06-12 11:54:18,
score:0,
acceptedResponderReputation:187499,
acceptedResponder:2648,
QuestionerReputation:187499,
Questioner:2648}
{title:"SWR mutation does not update the cache using a static method of class as a fetcher",
id:"https://stackoverflow.com/questions/75609409",
body:"<p>I'm using the <code>swr</code> package. I successfully fetch data using <code>useSWR</code>, but when I try to mutate the data - it does not work, and the cached state of <code>swr</code> does not change (as it should).</p>
<p>I created my custom hook:</p>
<pre><code>import useSWR from 'swr';

import BackendService from '@/services/backend';

const useBackend = &lt;D, E = unknown&gt;(path: string | null) =&gt; {
    const { data, error, isLoading, mutate } = useSWR&lt;D, E&gt;(path, BackendService.get);

    return { data, error, isLoading, mutate };
};

export default useBackend;
</code></pre>
<p>And this is my <code>BackendService</code>:</p>
<pre><code>import { preload } from 'swr';

import type { IHttpMethod } from '@/interfaces/http';

class BackendService {
    private static routesWithRefreshToken: string[] = ['/user/auth'];

    private static fetcher = async &lt;R = unknown, D = unknown&gt;(
        path: string,
        method: IHttpMethod,
        data?: D,
    ) =&gt; {
        const requestPath = import.meta.env.VITE_BACKEND_URL + path;
        const withRefresh = this.routesWithRefreshToken.includes(path);
        const token = withRefresh ? localStorage.getItem('token') : sessionStorage.getItem('token');

        const res = await fetch(requestPath, {
            method,
            headers: {
                'Authorization': `Bearer ${token}`,
                'Content-Type': 'application/json',
            },
            body: data ? JSON.stringify(data) : undefined,
        });

        if (!res.ok) {
            throw new Error();
        }

        const resData = await res.json().catch(() =&gt; undefined);

        return resData as R;
    };

    public static get = &lt;R = unknown&gt;(path: string) =&gt; {
        return this.fetcher&lt;R, null&gt;(path, 'GET');
    };

    public static post = &lt;R = unknown, D = unknown&gt;(path: string, data?: D) =&gt; {
        return this.fetcher&lt;R, D&gt;(path, 'POST', data);
    };

    public static patch = &lt;R = unknown, D = unknown&gt;(path: string, data?: D) =&gt; {
        return this.fetcher&lt;R, D&gt;(path, 'PATCH', data);
    };

    public static delete = &lt;R = unknown&gt;(path: string) =&gt; {
        return this.fetcher&lt;R, null&gt;(path, 'DELETE');
    };

    public static preload = (path: string) =&gt; {
        return preload(path, this.get);
    };
}

export default BackendService;
</code></pre>
<p>Now, I have the following code:</p>
<pre><code>import React, { useMemo } from 'react';
import { useNavigate } from 'react-router-dom';
import type { IGetAllSecretsResponseData } from '@exlint.io/common';

import useBackend from '@/hooks/use-backend';
import BackendService from '@/services/backend';

import SecretManagementView from './SecretManagement.view';

interface IProps {}

const SecretManagement: React.FC&lt;IProps&gt; = () =&gt; {
    const navigate = useNavigate();

    const { data: getAllSecretsResponseData, mutate: getAllSecretsMutate } =
        useBackend&lt;IGetAllSecretsResponseData&gt;('/user/secrets');

    const hasSecrets = useMemo(() =&gt; {
        if (!getAllSecretsResponseData) {
            return false;
        }

        return getAllSecretsResponseData.secrets.length &gt; 0;
    }, [getAllSecretsResponseData]);

    const onRevokeAllSecrets = async () =&gt; {
        await getAllSecretsMutate(
            async () =&gt; {
                await BackendService.delete('/user/secrets');

                return {
                    secrets: [],
                };
            },
            {
                optimisticData: { secrets: [] },
                rollbackOnError: true,
            },
        );

        navigate('', { replace: true });
    };

    return &lt;SecretManagementView hasSecrets={hasSecrets} onRevokeAllSecrets={onRevokeAllSecrets} /&gt;;
};

SecretManagement.displayName = 'SecretManagement';
SecretManagement.defaultProps = {};

export default React.memo(SecretManagement);
</code></pre>
<p>So when the <code>onRevokeAllSecrets</code> is executed - the cached state does not change.</p>
<p>Could anyone tell why? I checked and my <code>BackendService.delete</code> call completes successfully.</p>
<hr />
<p>I have also tried to change my custom hook <code>useBackend</code> as follows:</p>
<pre><code>import { useCallback } from 'react';
import useSWR, { useSWRConfig, type KeyedMutator } from 'swr';

import BackendService from '@/services/backend';

const useBackend = &lt;D, E = unknown&gt;(path: string | null) =&gt; {
    const { mutate: globalMutate } = useSWRConfig();
    const { data, error, isLoading } = useSWR&lt;D, E&gt;(path, BackendService.get);

    const mutator: KeyedMutator&lt;D&gt; = useCallback(
        (data, options) =&gt; globalMutate(path, data, options),
        [path],
    );

    return {
        data,
        error,
        isLoading,
        mutate: mutator,
    };
};

export default useBackend;
</code></pre>
<p>But it still didn't help (same exact issue)</p>
<hr />
<p>I have also tried to provide <code>revalidate</code> to the mutation:</p>
<pre><code>        await getAllSecretsMutate(
            async () =&gt; {
                await BackendService.delete('/user/secrets');

                return { secrets: [] };
            },
            {
                optimisticData: { secrets: [] },
                rollbackOnError: true,
                revalidate: false,
            },
        );
</code></pre>
<p>Then it worked - the cache did change. But I navigate to other page and then come back - the cache is invalid again.</p>
<p>Anyway, if adding revalidate: false somehow does update the cache, then I'd say that when I used revalidate: true (default) the revalidation once the asynchronous update resolves brings non-empty data from my server? But that's it - I checked the response from the server and it responded with empty array:</p>
<p><a href=""https://i.sstatic.net/OT8p6.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/OT8p6.png"" alt=""enter image description here"" /></a></p>
<hr />
<p>Also, I don't think the behavior of <code>static</code> methods causes that issue because I refactored the <code>BackendService</code> to something like this:</p>
<pre><code>import { preload } from 'swr';

import type { IHttpMethod, IRefreshTokenRoute } from '@/interfaces/http';

const routesWithRefreshToken: IRefreshTokenRoute[] = [
    { method: 'GET', path: '/user/auth' },
    { method: 'GET', path: '/user/auth/refresh-token' },
];

const fetcher = async &lt;R = unknown, D = unknown&gt;(path: string, method: IHttpMethod, data?: D) =&gt; {
    const endpointPath = import.meta.env.VITE_BACKEND_URL + path;

    const withRefresh = !!routesWithRefreshToken.find(
        (route) =&gt; route.method === method &amp;&amp; route.path === path,
    );

    const token = (withRefresh ? localStorage : sessionStorage).getItem('token');

    const res = await fetch(endpointPath, {
        method,
        headers: {
            'Authorization': `Bearer ${token}`,
            'Content-Type': 'application/json',
        },
        body: data ? JSON.stringify(data) : undefined,
    });

    if (!res.ok) {
        throw new Error();
    }

    const resData = await res.json().catch(() =&gt; undefined);

    return resData as R;
};

const get = &lt;R = unknown&gt;(path: string) =&gt; {
    return fetcher&lt;R, null&gt;(path, 'GET');
};

const post = &lt;R = unknown, D = unknown&gt;(path: string, data?: D) =&gt; {
    return fetcher&lt;R, D&gt;(path, 'POST', data);
};

const patch = &lt;R = unknown, D = unknown&gt;(path: string, data?: D) =&gt; {
    return fetcher&lt;R, D&gt;(path, 'PATCH', data);
};

const deleter = &lt;R = unknown&gt;(path: string) =&gt; {
    return fetcher&lt;R, null&gt;(path, 'DELETE');
};

const preloader = (path: string) =&gt; {
    return preload(path, get);
};

const BackendService = {
    fetcher,
    get,
    post,
    patch,
    deleter,
    preloader,
};

export default BackendService;
</code></pre>
<p>And it did not help.</p>
",
tags:"<javascript><reactjs><typescript><swr>",
score:6,
creationDate:2023-03-01 21:57:55,
creationDate:2023-04-27 18:42:11,
score:0,
acceptedResponderReputation:1814,
acceptedResponder:9105207,
QuestionerReputation:1814,
Questioner:9105207}
{title:"Getting error after adding nonce instead of unsafe-inline'",
id:"https://stackoverflow.com/questions/76163572",
body:"<p>I have below code in my xyz.js file.</p>
<pre><code>init : function() {
   if (!this.iframe) {
       this.iframe = document.createElement(&quot;iframe&quot;);
       this.iframe.src = &quot;javascript:false;&quot;;
       document.body.appendChild(this.iframe);
</code></pre>
<p>and I have update the code from unsafe-inline to nonce
in above code i am calling  <code>document.body.appendChild(this.iframe);</code></p>
<p>and getting below error</p>
<blockquote>
<p>1683098036010:402 Refused to run the JavaScript URL because it violates the following Content Security Policy directive: &quot;script-src 'self' 'nonce-EDNnf03nceIOfn39fn3e9h3sdfa' 'unsafe-eval'&quot;. Either the 'unsafe-inline' keyword, a hash ('sha256-...'), or a nonce ('nonce-...') is required to enable inline execution. Note that hashes do not apply to event handlers, style attributes and javascript: navigations unless the 'unsafe-hashes' keyword is present</p>
</blockquote>
<p>I have tried to add nonce as below but it's not working </p>
<pre><code>this.iframe.nonce = &quot;EDNnf03nceIOfn39fn3e9h3sdfa&quot;;
this.iframe.script='nonce=&quot;EDNnf03nceIOfn39fn3e9h3sdfa&quot;';
this.iframe.script.nonce=&quot;EDNnf03nceIOfn39fn3e9h3sdfa&quot;;
this.iframe.setAttribute('nonce', &quot;EDNnf03nceIOfn39fn3e9h3sdfa&quot;);
</code></pre>
<p>As in code i have set this.iframe.src = &quot;javascript:false;&quot;; this should not throw that error.</p>
<p>can anyone please provide the update on this</p>
",
tags:"<javascript><html><node.js><angular><nonce>",
score:6,
creationDate:2023-05-03 12:01:00,
creationDate:2023-05-11 05:06:29,
score:0,
acceptedResponderReputation:115,
acceptedResponder:12797947,
QuestionerReputation:115,
Questioner:12797947}
{title:"SecurityException while ndef.connect() on Android 13",
id:"https://stackoverflow.com/questions/75695662",
body:"<p>I have this code (Java) to write nfc tags:</p>
<pre><code>private Tag tag;

@Override
protected void onNewIntent(Intent intent) {
    if (NfcAdapter.ACTION_TAG_DISCOVERED.equals(intent.getAction())) {
        tag = intent.getParcelableExtra(NfcAdapter.EXTRA_TAG);
    }
}

private boolean write(String message, Tag tag) throws IOException, FormatException {
    Ndef ndef = Ndef.get(tag);
    ndef.connect();
    if (ndef.isWritable()) {
        ndef.writeNdefMessage(message);
    }
    ndef.close();
}
</code></pre>
<p>Said code was working until I updated my app to be compatible with the latest versions of Android.</p>
<p>Now running this code on Android 13 gives me the following exception:</p>
<pre><code>java.lang.SecurityException: Permission Denial: Tag ( ID: XX XX XX XX XX XX XX ) is out of date
    at android.nfc.Tag.getTagService(Tag.java:388)
    at android.nfc.tech.BasicTagTechnology.connect(BasicTagTechnology.java:73)
    at android.nfc.tech.Ndef.connect(Ndef.java:71)
</code></pre>
<p>I understand that there is some compatibility problem but I don't know what exactly.</p>
<p>I am thankful for any kind of help.</p>
<p>UPDATE: Thanks to your feedback and some additional research I came to a solution.</p>
<p>I was triggering this NFC write from the onNewIntent function. It seems that it is no longer possible due to some security issues. I solved it by triggering this NFC write from the onResume function instead.</p>
<p>Thank you all for your help.</p>
",
tags:"<java><android><nfc>",
score:6,
creationDate:2023-03-10 11:37:13,
creationDate:2023-03-15 07:42:09,
score:0,
acceptedResponderReputation:77,
acceptedResponder:6742793,
QuestionerReputation:77,
Questioner:6742793}
{title:"Metaspace leak using LambdaMetaFactory",
id:"https://stackoverflow.com/questions/76593538",
body:"<p>I have a code like this:</p>
<pre><code>public static void main(String[] args) throws IOException, NoSuchMethodException, IllegalAccessException, LambdaConversionException {
    MethodHandles.Lookup lookup = MethodHandles.lookup();
    while (true) {
        Class&lt;?&gt; declaringClass = MyClass.class;
        Class&lt;?&gt; propertyType = List.class;
        String methodName = &quot;getCustomerList&quot;;
        LambdaMetafactory.metafactory(lookup,
                &quot;apply&quot;,
                MethodType.methodType(Function.class),
                MethodType.methodType(Object.class, Object.class),
                lookup.findVirtual(declaringClass, methodName, MethodType.methodType(propertyType)),
                MethodType.methodType(propertyType, declaringClass));
    }
}


public static final class MyClass {

    public List&lt;String&gt; getCustomerList() {
        return null;
    }

}
</code></pre>
<p>As you can see, this is an endless loop which calls <code>LambdaMetafactory.metafactory</code>. It doesn't store anything, not even the resulting <code>CallSite</code>. Yet, very quickly, I get:</p>
<pre><code>Caused by: java.lang.OutOfMemoryError: Compressed class space
</code></pre>
<p>I've done a heap dump and - as expected - there is nothing in the heap that I would expect to cause this. In fact, Eclipse Memory Analyzer Tool doesn't have any suggestions for me as to what could be leaking.</p>
<p>For a better visual view of what's happening, this is the chart of loaded classes provided by VisualVM:</p>
<p><a href=""https://i.sstatic.net/HFcOe.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/HFcOe.png"" alt=""It only goes up"" /></a></p>
<pre><code>$ java -version
openjdk version &quot;17.0.7&quot; 2023-04-18
OpenJDK Runtime Environment Temurin-17.0.7+7 (build 17.0.7+7)
OpenJDK 64-Bit Server VM Temurin-17.0.7+7 (build 17.0.7+7, mixed mode, sharing)
</code></pre>
<p>How does this metaspace leak happen, and what can I do to prevent it?</p>
<p>EDIT: As suggested in the comments, adding <code>System.gc()</code> to the loop slows the issue down significantly. The classes are still loaded without being unloaded, but suddently metaspace grows <em>much slower</em>. When I ran this for 10 minutes, it didn't get past 50 MB, whereas before I would get OOP in seconds. That said, metaspace still grows indefinitely and the app will eventually get the OOM.</p>
<p>(I find this behavior even stranger; why would calling <code>System.gc()</code> slow down this leak so much, yet normal running of the app - which also gets full GC every now and then - doesn't seem to affect the leak much?)</p>
",
tags:"<java>",
score:6,
creationDate:2023-07-01 06:35:28,
creationDate:2023-07-03 08:43:47,
score:0,
acceptedResponderReputation:5682,
acceptedResponder:6794063,
QuestionerReputation:5682,
Questioner:6794063}
{title:"Load file as string in vue/vite project",
id:"https://stackoverflow.com/questions/76073916",
body:"<p>I have a vue/vie project in which I'm trying to read a markdown file I have into html using marked.</p>
<p>I attempted to use the fetch api to import it as a string, but only because I couldn't figure out how to use node.js code in vue.</p>
<p>Here's the vue file:</p>
<pre><code>&lt;script setup&gt;
import { marked } from 'marked'
&lt;/script&gt;

&lt;script&gt;
export default {
    data() {
        return {
            query: this.getQueryVariable(&quot;q&quot;),
            markdown: ''
        }
    },
    mounted() {
        fetch('../src/markdown/About.md')
            .then(response =&gt; response.text())
            .then(text =&gt; this.markdown = text)
        document.querySelector('.marked').innerHTML = marked.parse(this.markdown)
    }
}
&lt;/script&gt;

&lt;template&gt;
    &lt;div class='marked'&gt;
    &lt;/div&gt;
&lt;/template&gt;
</code></pre>
",
tags:"<javascript><vuejs3><fetch-api><vite><javascript-marked>",
score:8,
creationDate:2023-04-21 14:01:04,
creationDate:2023-04-21 14:15:00,
score:0,
acceptedResponderReputation:1677,
acceptedResponder:9917250,
QuestionerReputation:135,
Questioner:18216655}
{title:"Android Studio: Gradle error; A problem occurred evaluating project ':connectivity_plus'",
id:"https://stackoverflow.com/questions/76296520",
body:"<p>As title says, I have encountered the error while working on an android project for college of mine.
The entire error says this following:</p>
<pre><code>FAILURE: Build failed with an exception.

* Where:
Build file 'C:\Users\william\AppData\Local\Pub\Cache\hosted\pub.dev\connectivity_plus-4.0.1\android\build.gradle' line: 24

* What went wrong:
A problem occurred evaluating project ':connectivity_plus'.
&gt; No signature of method: build_bou4ub0wbhz1n3u4prip3694v.android() is applicable for argument types: (build_bou4ub0wbhz1n3u4prip3694v$_run_closure2) values: [build_bou4ub0wbhz1n3u4prip3694v$_run_closure2@3428450e]

* Try:
&gt; Run with --stacktrace option to get the stack trace.
&gt; Run with --info or --debug option to get more log output.
&gt; Run with --scan to get full insights.

* Get more help at https://help.gradle.org
</code></pre>
<p>Upon checking the build.gradle file, I don't know what the error is and what should be done. But within it, here's what it have:</p>
<pre><code>group 'io.flutter.plugins.connectivity'
version '1.0-SNAPSHOT'

buildscript {
    repositories {
        google()
        mavenCentral()
    }

    dependencies {
        classpath 'com.android.tools.build:gradle:7.4.2'
    }
}

rootProject.allprojects {
    repositories {
        google()
        mavenCentral()
    }
}

apply plugin: 'com.android.library'

android {
    compileSdkVersion 33

    namespace 'dev.fluttercommunity.plus.connectivity'

    compileOptions {
      sourceCompatibility JavaVersion.VERSION_1_8
      targetCompatibility JavaVersion.VERSION_1_8
    }

    defaultConfig {
        minSdkVersion 19
        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;
    }
    lintOptions {
        disable 'InvalidPackage'
    }
}

</code></pre>
<p>As per looking up this error, I haven't seen anyone else encounter that specific error regarding 'connectivity_plus' so I am not sure what to do about it. I'm not really an expert on gradle either since the only programming I have done so far are basic Java, Python and Flutter.</p>
<p>Any suggestions would be helpful to fix this.</p>
<p>By the way, this was done on Gradle 7.4.2, Flutter 3.10.1 and having Java 17</p>
",
tags:"<java><android><flutter><gradle>",
score:6,
creationDate:2023-05-20 17:29:42,
creationDate:2023-05-21 03:32:30,
score:1,
acceptedResponderReputation:148,
acceptedResponder:17595533,
QuestionerReputation:75,
Questioner:21930555}
{title:"Load different css files based on environment with NextJS",
id:"https://stackoverflow.com/questions/75246151",
body:"<p>I'm building a frontend app using NextJS v.13 and this will be a generic frontend codebase that will be used by multiple sites.</p>
<p>I want to have:</p>
<ul>
<li><strong>button.site1.css</strong></li>
<li><strong>button.site2.css</strong></li>
</ul>
<p>And when I build the codebase for <strong>site1</strong> I want to somehow tell the app to use <strong>button.site1.css</strong> when building.</p>
<p>Basically I want to achieve the following:</p>
<p><strong>.env.local</strong></p>
<pre><code>HOST_NAME=site1
</code></pre>
<p><strong>About.js</strong></p>
<pre><code>import styles from `./Button.${process.env.HOST_NAME}.scss`; // This doesn't work. &quot;Imports must be string literals&quot;

const About = () =&gt; {
    &lt;div&gt;
      &lt;h1 className={styles.h1}&quot;&gt;About Page&lt;/h1&gt;
    &lt;/div&gt;
  )
}
</code></pre>
",
tags:"<javascript><node.js><next.js><sass><next.js13>",
score:6,
creationDate:2023-01-26 12:29:30,
creationDate:2023-02-04 18:15:35,
score:1,
acceptedResponderReputation:18528,
acceptedResponder:9640177,
QuestionerReputation:6802,
Questioner:703569}
{title:"Mapbox legend works on desktop, tablet, but not on mobile. How do I fix it to display correctly on a mobile device?",
id:"https://stackoverflow.com/questions/77295521",
body:"<p>In developer tools for Chrome, the legend displays perfectly on top of a mapbox map for desktop, tablet and mobile.  Here is what is looks like.  It displays a semitransparent horizontal legend.</p>
<p><a href=""https://i.sstatic.net/Fk7sv.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/Fk7sv.png"" alt=""Enter image description here"" /></a></p>
<p>If I actually use my iPhone though, the legends displays incorrectly.  It becomes vertical and all formatting appears lost.</p>
<p><a href=""https://i.sstatic.net/sFLxL.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/sFLxL.png"" alt=""enter image description here"" /></a></p>
<p>Here is my mapbox control:</p>
<pre><code> // Control implemented as ES6 class
    class fs_legend_control {

        onAdd(map) {
        var fs_legend_control_html = ' \
        &lt;div class=&quot;my-legend&quot;&gt; \
            &lt;div class=&quot;legend-title&quot;&gt;Piste Difficulty Legend&lt;/div&gt; \
                &lt;div class=&quot;legend-scale&quot;&gt; \
                    &lt;ul class=&quot;legend-labels&quot;&gt; \
                        &lt;li&gt;&lt;span style=&quot;background:#339933;&quot;&gt;&lt;/span&gt;Novice&lt;/li&gt; \
                        &lt;li&gt;&lt;span style=&quot;background:#097CCB;&quot;&gt;&lt;/span&gt;Easy&lt;/li&gt; \
                        &lt;li&gt;&lt;span style=&quot;background:#ED151F;&quot;&gt;&lt;/span&gt;Intermed\'&lt;/li&gt; \
                        &lt;li&gt;&lt;span style=&quot;background:#000000;&quot;&gt;&lt;/span&gt;Advanced&lt;/li&gt; \
                        &lt;li&gt;&lt;span style=&quot;background:#ffa502;&quot;&gt;&lt;/span&gt;Expert&lt;/li&gt; \
                        &lt;li&gt;&lt;span style=&quot;background:#ffff01;&quot;&gt;&lt;/span&gt;Freeride&lt;/li&gt; \
                        &lt;li&gt;&lt;span style=&quot;background:#ffc0cb;&quot;&gt;&lt;/span&gt;Unrated&lt;/li&gt; \
                    &lt;/ul&gt; \
                &lt;/div&gt; \
            &lt;div class=&quot;legend-source&quot;&gt; &lt;a href=&quot;https://www.example.com/pistes/&quot;&gt;About Piste Difficulty&lt;/a&gt;&lt;/div&gt; \
        &lt;/div&gt; \
        ';

            this._map = map;
            this._container = document.createElement('div');
            this._container.className = 'fs-legend-control';
            this._container.innerHTML = fs_legend_control_html;
            return this._container;
        }
        onRemove() {
            this._container.parentNode.removeChild(this._container);
            this._map = undefined;
        }
    }

    map.addControl(new fs_legend_control(), &quot;top-left&quot;);
</code></pre>
<p>Why doesn't this work?</p>
",
tags:"<javascript><css><mapbox><mapbox-gl-js>",
score:6,
creationDate:2023-10-15 06:26:12,
creationDate:2023-10-19 04:30:14,
score:1,
acceptedResponderReputation:1088,
acceptedResponder:3264461,
QuestionerReputation:1088,
Questioner:3264461}
{title:"Connecting Lines in a Single Elimination UI with an Odd Number of Players - react",
id:"https://stackoverflow.com/questions/77402285",
body:"<p>I'm building a <code>Single Elimination UI</code> using <code>React</code> and <code>CSS</code>, and I've got an issue when trying to connect lines between players.</p>
<p>I tried this way. drawn a line over it. but structure got failed. Here's the code i tried  <a href=""https://codesandbox.io/s/single-elimination-torunament-forked-qqlxm4?file=/src/SingleElimination.jsx"" rel=""nofollow noreferrer"">https://codesandbox.io/s/single-elimination-torunament-forked-qqlxm4?file=/src/SingleElimination.jsx</a>
But it failed due to improper structure of boxes. and lines are not drawing if it not comes under viewport</p>
<p><a href=""https://i.sstatic.net/94MS4.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/94MS4.png"" alt=""enter image description here"" /></a></p>
<p>required structure was</p>
<p><a href=""https://i.sstatic.net/MKWnu.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/MKWnu.png"" alt=""enter image description here"" /></a></p>
<p>please suggest me with some solutions.</p>
",
tags:"<javascript><html><css><reactjs><css-selectors>",
score:6,
creationDate:2023-11-01 11:31:00,
creationDate:2023-11-05 05:24:18,
score:1,
acceptedResponderReputation:10816,
acceptedResponder:7552340,
QuestionerReputation:461,
Questioner:12491211}
{title:"NULLS FIRST/LAST override no longer works in JPA repositories in Spring Boot 3/Hibernate 6",
id:"https://stackoverflow.com/questions/76363746",
body:"<p>In Spring Boot 2 with Hibernate 5 we had a query like this:</p>
<pre><code>@Query(&quot;&quot;&quot;
    SELECT m FROM ProjectMember m
    ORDER BY m.lastActive ASC NULLS LAST
    &quot;&quot;&quot;)
List&lt;ProjectMember&gt; sortLastActiveDesc();
</code></pre>
<p>(defined in a class <code>public interface ProjectMemberRepository extends JpaRepository&lt;ProjectMember, UUID&gt; {</code>)</p>
<p>This query is slightly trimmed down from the real one just to have a small reproduction case.</p>
<p>This is needed because we need to override how nulls are sorted. The underlying database here is PostgreSQL.</p>
<p>However, in Spring Boot 3.1.0 with Hibernate 6, this no longer works. The application will start and does not throw an exception on startup, but when executing this query it will throw this exception:</p>
<pre><code>org.springframework.dao.InvalidDataAccessApiUsageException
...
... (huge stack trace here)
...
Caused by: org.springframework.data.jpa.repository.query.BadJpqlGrammarException: Line 2:26 mismatched input 'NULLS' expecting {&lt;EOF&gt;, ',', EXCEPT, FETCH, INTERSECT, LIMIT, OFFSET, UNION}; Bad JPQL grammar [select m from ProjectMember m
ORDER BY m.lastActive ASC NULLS FIRST
]
    at org.springframework.data.jpa.repository.query.BadJpqlGrammarErrorListener.syntaxError(BadJpqlGrammarErrorListener.java:39)
    at org.antlr.v4.runtime.ProxyErrorListener.syntaxError(ProxyErrorListener.java:41)

</code></pre>
<p>How is this supposed to work from now on, without having to fall back to native SQL?</p>
<p>(Note I have also tried setting the null handling property using <code>sort = Sort.by(new Sort.Order(Direction.ASC, &quot;lastActive&quot;, NullHandling.NULLS_FIRST));</code> and then passing a Pageable to the repository method and then not defining the ordering by myself, but looking at the generated SQL the null ordering seems to be completely ignored)</p>
",
tags:"<java><spring><spring-boot><hibernate><jpa>",
score:6,
creationDate:2023-05-30 10:10:32,
creationDate:2023-06-07 07:15:21,
score:1,
acceptedResponderReputation:6331,
acceptedResponder:144578,
QuestionerReputation:6331,
Questioner:144578}
{title:"Add onClick handler to MapView in React?",
id:"https://stackoverflow.com/questions/76649609",
body:"<p>I'm using the ArcGIS API for JavaScript to display a map and I want to get the selected feature when someone clicks on the map. This is my <code>MapComponent</code></p>
<pre><code>export const MapComponent = () =&gt; {
    const elementRef = useRef(null);
    const [view, setView] = useState&lt;MapView&gt;();
    const [selected, setSelected] = useState&lt;Feature&gt;();


    const handleClick = useCallback((e: any) =&gt; {
        if (!view) return;
        view.hitTest(e)
            .then(res =&gt; {
                if (res.results.length &gt; 0) {
                    const feature = res.results[0];
                    if (feature.type === 'graphic') {
                        setSelected(feature.graphic.attributes)
                    }
                }
            })
    }, [view]);

    useEffect(() =&gt; {
        if (!view) return;
        const handle = view.on('click', handleClick)
        return handle &amp;&amp; handle.remove();
    }, [view]);

    useEffect(() =&gt; {
        const loadMap = async () =&gt; {
            const { init } = await import('./Map');
            const mapView = init(elementRef.current);
            setView(mapView);
        }
        loadMap()
        return () =&gt; view &amp;&amp; view.destroy();
    }, []);

    return (
        &lt;&gt;
            &lt;div
                ref={elementRef}
                style={{ height: '500px', width: '800px' }}
            &gt;
            &lt;/div&gt;
            &lt;pre&gt;{JSON.stringify(selected, null, 2)}&lt;/pre&gt;
        &lt;/&gt;
    )
}
</code></pre>
<p>I initialized the map in a <code>useEffect</code> and save the map view with <code>useState</code>, I saw in the documentation you have to add your event handlers on another <code>useEffect</code> and I tried to do that, but the function <code>handleClick</code> doesn't run when I click on the map</p>
",
tags:"<javascript><reactjs><typescript><arcgis-js-api>",
score:6,
creationDate:2023-07-09 21:30:55,
creationDate:2023-07-12 15:45:25,
score:1,
acceptedResponderReputation:742,
acceptedResponder:15150002,
QuestionerReputation:311,
Questioner:9937471}
{title:"Springboot 3.2.0 not loading application context in JUnit code",
id:"https://stackoverflow.com/questions/77637931",
body:"<p>I have this JUnit code and it works without problems in Springboot 3.1.
But when I updgrade to Springboot 3.2.0, it fails, and it says it fails to load application context.
Can someone help me why this is happening?</p>
<p>Below is the code:</p>
<pre><code>@ExtendWith(SpringExtension.class)
@DataJpaTest
@Import(TestCreateService.class)
public class CreateServiceTest{
  @Autowired private TestCreateService testCreateService;
  @Autowired private TestRepository testRepository;

   ...

  @Test
  public void bulkGetOrCreateTest() throws InterruptedException {
       ...
      assertThat(executorService.awaitTermination(60, TimeUnit.SECONDS)).isTrue();
      assertThat(testRepository.count()).isEqualTo(1);
    }
  }

}
</code></pre>
<p>Error:</p>
<pre><code>[ERROR] UploadTestRepositoryTest.find_with_inner_data » IllegalState ApplicationContext failure threshold (1) exceeded: skipping repeated attempt to load context for [MergedContextConfiguration@589d106c testClass = co.domain.system.uploadfile.UploadTestRepositoryTest, locations = [], classes = [co.test.TestApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = [&quot;org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true&quot;], contextCustomizers = [[ImportsContextCustomizer@23488e7a key = [org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration,

</code></pre>
<p>Is there anything changed in Springboot 3.2.0?
Is the way of writing JUNIT test for repository changed?</p>
<p>Here is the error when I did a simple program:</p>
<pre><code>java.lang.IllegalStateException: Failed to load ApplicationContext for [MergedContextConfiguration@58a63629 testClass = com.example.helloworld.repository.UserRepositoryTest, locations = [], classes = [com.example.helloworld.HelloWorldApplication], contextInitializerClasses = [], activeProfiles = [], propertySourceDescriptors = [], propertySourceProperties = [&quot;org.springframework.boot.test.autoconfigure.orm.jpa.DataJpaTestContextBootstrapper=true&quot;], contextCustomizers = [[ImportsContextCustomizer@7de843ef key = [org.springframework.boot.autoconfigure.transaction.TransactionAutoConfiguration, org.springframework.boot.autoconfigure.data.jpa.JpaRepositoriesAutoConfiguration, org.springframework.boot.test.autoconfigure.orm.jpa.TestEntityManagerAutoConfiguration, org.springframework.boot.autoconfigure.cache.CacheAutoConfiguration, org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration, org.springframework.boot.autoconfigure.sql.init.SqlInitializationAutoConfiguration, org.springframework.boot.test.autoconfigure.jdbc.TestDatabaseAutoConfiguration, org.springframework.boot.autoconfigure.flyway.FlywayAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceTransactionManagerAutoConfiguration, org.springframework.boot.autoconfigure.liquibase.LiquibaseAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcClientAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration, org.springframework.boot.autoconfigure.jdbc.JdbcTemplateAutoConfiguration]], org.springframework.boot.test.context.filter.ExcludeFilterContextCustomizer@302c971f, org.springframework.boot.test.json.DuplicateJsonObjectContextCustomizerFactory$DuplicateJsonObjectContextCustomizer@35841320, org.springframework.boot.test.mock.mockito.MockitoContextCustomizer@0, org.springframework.boot.test.autoconfigure.OverrideAutoConfigurationContextCustomizerFactory$DisableAutoConfigurationContextCustomizer@71075444, org.springframework.boot.test.autoconfigure.actuate.observability.ObservabilityContextCustomizerFactory$DisableObservabilityContextCustomizer@1f, org.springframework.boot.test.autoconfigure.filter.TypeExcludeFiltersContextCustomizer@34be3d80, org.springframework.boot.test.autoconfigure.properties.PropertyMappingContextCustomizer@884bb438, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverContextCustomizer@4d15107f, org.springframework.boot.test.context.SpringBootTestAnnotation@cd76d185], contextLoader = org.springframework.boot.test.context.SpringBootContextLoader, parent = null]

    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:180)
    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:130)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:141)
    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:97)
    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:247)
    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:163)
    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)
    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)
    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)
    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)
    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)
    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)
    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)
    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)
    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)
    at java.base/java.util.Optional.orElseGet(Optional.java:364)
    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'testEntityManager' defined in class path resource [org/springframework/boot/test/autoconfigure/orm/jpa/TestEntityManagerAutoConfiguration.class]: Unsatisfied dependency expressed through method 'testEntityManager' parameter 0: No qualifying bean of type 'jakarta.persistence.EntityManagerFactory' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:802)
    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:546)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1336)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1166)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:563)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:523)
    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:325)
    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)
    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:323)
    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:973)
    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:946)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:616)
    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:753)
    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:455)
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:323)
    at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137)
    at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58)
    at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46)
    at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1442)
    at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:552)
    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137)
    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108)
    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:225)
    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:152)
    ... 17 more
Caused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'jakarta.persistence.EntityManagerFactory' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1878)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1404)
    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1348)
    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:911)
    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)
    ... 41 more
</code></pre>
",
tags:"<java><spring-boot><hibernate><maven>",
score:6,
creationDate:2023-12-11 07:04:59,
creationDate:2023-12-11 09:43:55,
score:1,
acceptedResponderReputation:26,
acceptedResponder:4508241,
QuestionerReputation:465,
Questioner:2628944}
{title:"HTML input element spinner rendering via CSS",
id:"https://stackoverflow.com/questions/75641635",
body:"<p>When I change the font-size CSS property of the <code>&lt;input type=&quot;number&quot;&gt;</code> element, either directly with CSS or post-element creation via JavaScript, the spinners don't change size in either FireFox or Safari. The input/display box does. So with larger fonts — extremely important for accessibility — the actual spinner buttons are relatively tiny when the font is large.</p>
<p>In FireFox:</p>
<p><a href=""https://i.sstatic.net/X756e.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/X756e.png"" alt=""enter image description here"" /></a><br />
versus<br />
<a href=""https://i.sstatic.net/cdPPB.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/cdPPB.png"" alt=""enter image description here"" /></a></p>
<p>According to <a href=""https://developer.mozilla.org/en-US/docs/Learn/Forms/Property_compatibility_table_for_form_controls"" rel=""noreferrer"">Mozilla</a>, checking this morning:</p>
<blockquote>
<p>There is no standard way to change the style of spinners used to change the value of the field, with the spinners on Safari being outside the field.</p>
</blockquote>
<p>This seems... unreasonable. It also seems unreasonable the spinner size doesn't track the font size in use. I feel like I <em>must</em> be missing something.</p>
<p>Is my only option to completely roll my own spinner?</p>
",
tags:"<javascript><html><css><input><spinner>",
score:6,
creationDate:2023-03-05 10:40:53,
creationDate:2023-03-05 11:58:28,
score:1,
acceptedResponderReputation:2163,
acceptedResponder:20576394,
QuestionerReputation:2648,
Questioner:599484}
{title:"How to open Chrome Extension's side panel clicking a button inside the popup?",
id:"https://stackoverflow.com/questions/78151239",
body:"<p>I have a chrome extension and want to use the recently added <a href=""https://developer.chrome.com/docs/extensions/reference/api/sidePanel"" rel=""noreferrer"">chrome.sidePanel API</a> to open the side panel and show my chrome extension there when a user click a button inside the extension's popup.</p>
<p>I have tried the following code:</p>
<p>App.tsx</p>
<pre><code>const handleOpenSidePanel = async () =&gt; {
  chrome.tabs.query({active: true, currentWindow: true}, function(tabs) {
    const currentTabId = tabs[0].id;
    chrome.runtime.sendMessage({ type: 'openSidePanel', tabId: currentTabId });
  });
}
</code></pre>
<p>background.js</p>
<pre><code>chrome.runtime.onMessage.addListener((message, tab) =&gt; {
  if (message.type === &quot;openSidePanel&quot;) {
    chrome.sidePanel.open({ windowId: tab.windowId});
  }
});
</code></pre>
<p>manifest.json</p>
<pre><code>&quot;permissions&quot;: [
  &quot;sidePanel&quot;,
  &quot;tabs&quot;
],
&quot;side_panel&quot;: {
  &quot;default_path&quot;: &quot;index.html&quot;
}
...
</code></pre>
<p>When I click on the button, I get the following error and the side panel doesn't open:</p>
<p><code>Uncaught (in promise) Error: At least one of &quot;tabId&quot; and &quot;windowId&quot; must be provided</code></p>
",
tags:"<javascript><reactjs><google-chrome><google-chrome-extension>",
score:8,
creationDate:2024-03-13 04:23:13,
creationDate:2024-06-20 01:27:59,
score:1,
acceptedResponderReputation:217,
acceptedResponder:6127419,
QuestionerReputation:217,
Questioner:6127419}
{title:"Exporting a JavaScript React Class Component into a TypeScript file",
id:"https://stackoverflow.com/questions/75245255",
body:"<p>Is there a way to export a <strong>JavaScript React Class Component</strong> into a <strong>TypeScript file</strong>?</p>
<p>I have the following code:</p>
<p><strong>Login.js</strong></p>
<pre><code>class Login extends Component {

constructor(props) {
    super(props);
    this.usernameText = React.createRef();
    this.passwordText = React.createRef();
    this.urlText = React.createRef();
    this.keyPress = this.keyPress.bind(this);
  }

  .
  .   
  .
 }
 export default  Login;
</code></pre>
<p><strong>index.ts</strong></p>
<pre><code>const Login = require(&quot;./uiManagement/jiraUI/Login/Login&quot;);
export {
 Login as JiraUiLogin 
}
</code></pre>
<p>In another project i did an <strong><code>npm import</code></strong> for the above to use the login component:</p>
<pre><code>import { Component } from &quot;react&quot;;
import { JiraUiLogin } from &quot;infosysta-typescript-core&quot;;
class mLogin extends Component {
  render() {
    return (
      &lt;JiraUiLogin /&gt;
    )
  }
};
export default mLogin
</code></pre>
<p>But I'm having the following error:
<a href=""https://i.sstatic.net/jKuoN.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/jKuoN.png"" alt=""enter image description here"" /></a></p>
",
tags:"<javascript><reactjs><typescript>",
score:7,
creationDate:2023-01-26 11:03:38,
creationDate:2023-02-02 11:22:13,
score:1,
acceptedResponderReputation:50,
acceptedResponder:16252134,
QuestionerReputation:2551,
Questioner:1428318}
{title:"Refused to execute inline script because it violates the following CSP directive",
id:"https://stackoverflow.com/questions/77715008",
body:"<p>I am trying to integrate Stripe to my website, the problem is that I receive the following error:</p>
<blockquote>
<p><strong>js.stripe.com/v3/hcaptcha-invisible-078b5f9fb44d244a9ec072f93a216630.html#debugMode=false&amp;parentOrigin=http%3A%2F%2Flocalhost:3 [Report Only] Refused to execute inline script because it violates the following Content Security Policy directive: &quot;script-src 'self'&quot;. Either the 'unsafe-inline' keyword, a hash ('sha256-CBu0w5uiOaPgb2R6Zgf7E0+STJHF4lcPIdhZzQXE6yk='), or a nonce ('nonce-...') is required to enable inline execution.</strong></p>
</blockquote>
<p>I tried to solve it using the <code>Stripe directives</code> in this way:</p>
<p><code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;script-src 'self' js.stripe.com code.jquery.com cdn.jsdelivr.net maps.googleapis.com  'unsafe-inline';&quot;&gt;</code></p>
<p>But because the location of the file that is given the error is on the <code>Stripe server</code>, I think that those rules of the <strong></strong> are not applied to that file.</p>
<p>I have made other integrations of <strong></strong> give the same approach error to make sure, and I have solved it by putting the directives in the <strong></strong> and it works, but I have not been able to solve the error described above.</p>
<p>If you want to see the same error, you just have to go to this <code>Stripe link</code> and inspect the browser in the console.</p>
<p><a href=""https://js.stripe.com/v3/hcaptcha-invisible-078b5f9fb44d244a9ec072f93a216630.html#debugMode=false&amp;parentOrigin=http%3A%2F%2Flocalhost"" rel=""noreferrer"">Link</a></p>
",
tags:"<javascript><html><stripe-payments><content-security-policy>",
score:6,
creationDate:2023-12-25 21:23:37,
creationDate:2024-01-09 08:46:10,
score:1,
acceptedResponderReputation:71,
acceptedResponder:12425866,
QuestionerReputation:71,
Questioner:12425866}
{title:"Typescript weird type inference {} when checking null or undefined",
id:"https://stackoverflow.com/questions/75790945",
body:"<p>After we upgraded from typescript 4.9.3 to 5.0.2 we faced following error during asserting types.</p>
<p>Does anybody know why function &quot;wontWorking&quot; won't work?
I would expect that this function inference <code>v</code> as <code>Record&lt;string, any&gt;</code> as well but instead it inference it as <code>{}</code> and also after calling <code>assertRecord</code> it still keeps <code>{}</code> as type..</p>
<pre><code>function assertRecord(v: unknown): asserts v is Record&lt;string, any&gt; {
    if(typeof v !== 'object' || v === null) throw new Error ();
}


function wontWorking (v: unknown) : null | any{

  // v = unkown
  if ( v === null || v === undefined ) return null; //checking

  // v = {}
  assertRecord(v)

  // v = {}
  var s = v.fileName // ERROR: Property 'fileName' does not exist on type '{}'.
  return s
}
wontWorking({fileName: 1231321});


function working (v: unknown) : null | any{

  // v = unkown
  // not checking

  // v = unknown
  assertRecord(v)

  // v = Record&lt;string, any&gt;
  var s = v.fileName
  return s
}
working({fileName: 1231321});


function isNil ( v: unknown) : v is null | undefined{
    return v === null || v === undefined
}

function workingWithCheck (v: unknown) : null | any{

  // v = unkown
  if ( isNil(v) ) return null; //checking 

  // v = unknown
  assertRecord(v)

  // v = Record&lt;string, any&gt;
  var s = v.fileName
  return s
}
workingWithCheck({fileName: 1231321});



</code></pre>
<p>We expect that <code>wontWorking</code>function will inference type of <code>v</code> after calling <code>assertRecord</code> as <code>Record&lt;string,any&gt;</code> as well.</p>
<p><a href=""https://www.typescriptlang.org/play?ts=5.0.2#code/GYVwdgxgLglg9mABAQwM6oKYCcoCUMRxYAmAFAG4Bci4A1mHAO5gCU1amOqi5iM3+QiQA8qKFhhgA5gBoUYAJ4A+RAG8AUAEgYwUlAUAHDHGA9EAQgC8lxAHI4AIwBWBKLcQAfD2es2wIABsAlkQoAAssJkQwDEZEAFEsSKxEUhYAbnUAX3Vc0EhYBERGBCgAdSJaSSlUqhoweiZWRGp-IM95BQ11REQAej6fetomnr5TUh9raMCAz29eX3riDGBJDGJEEKwMKBAsJDaA9P6+iDCCKulc3oGh1Rzejmw8AiIychYb0-vHnmQUtwbOQAHRrAIYAByyAAthgfvFcLgAPK4agABUiRhwCjs4KhsIw7mIcAw3AYUEQGAAHvxKUV9EY7A9bCCxjs9gdEKhsuoSmBypVqqRVPjoXDqABGABMAGZJbLpZKshlcup8tB4EgSlgrjUKNQ6AxmCFWrMOshFN1boNFsNRjbonBKedLtVvnc7UaHSh0C9BO8KF8xp7EDYAyIxBJpHJLcoxuQAdywzwwTAIeKMOzdvskDycjq9SKxYSpXKFUqVZk8uBNUV+JD06keIaGsbmtRePwZu1vOAVmsYsQNL1ehzc1M-OavJPlqt1sReera4VtULpGUYOEAMIXCC0Wqtxomlo9ubeOPWn5eho+nTNhvpoNbRDjrlHE4DV376qID22lNvWYMZnhwCMPmDR07XA0RxGqWNFCUBMkyBVMSzhbNOTzXlC2qTcdz3Whi3TAkJUQGV5UVZVVXUIA"" rel=""nofollow noreferrer"">TS Playground link</a></p>
",
tags:"<javascript><typescript><typescript-typings>",
score:6,
creationDate:2023-03-20 13:36:20,
creationDate:2023-03-20 16:38:38,
score:1,
acceptedResponderReputation:54539,
acceptedResponder:884123,
QuestionerReputation:63,
Questioner:7416255}
{title:"Incorrect use of <label for=FORM_ELEMENT> Angular Material",
id:"https://stackoverflow.com/questions/77316536",
body:"<p>I'm receiving the following error from Angular Material when I try to use a <code>&lt;mat-label&gt;</code> element inside a simple <code>&lt;mat-form-field&gt;</code>:</p>
<p><a href=""https://i.sstatic.net/zQ4pp.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/zQ4pp.png"" alt=""Chrome console error"" /></a></p>
<p>Here is the problematic code:</p>
<pre><code>&lt;mat-form-field color=&quot;accent&quot;&gt;
  &lt;mat-label&gt;Year&lt;/mat-label&gt;
  &lt;mat-select [value]=&quot;stateService.currentYear.toString()&quot;
              (valueChange)=&quot;onYearChange($event)&quot;&gt;
    &lt;mat-option *ngFor=&quot;let year of years&quot;
                [value]=&quot;year&quot;&gt;
      {{year}}
    &lt;/mat-option&gt;
  &lt;/mat-select&gt;
&lt;/mat-form-field&gt;
</code></pre>
<p>Here is the rendered component:</p>
<p><a href=""https://i.sstatic.net/09Hb6.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/09Hb6.png"" alt=""enter image description here"" /></a></p>
<p>The component is fully functional and the label is properly growing and shrinking when selecting and deselecting the widget. The problem is with this error popping in my developer console, which I want to discard (does not look very professional).</p>
<p>I tried to assign some ids, use different semantic, with no results so far.</p>
<p>Any idea on how to clear this error?</p>
<p>Edit (31/12/2023): My chrome's browser console also logs this error in the official select documentation: <a href=""https://material.angular.io/components/select/overview"" rel=""noreferrer"">https://material.angular.io/components/select/overview</a></p>
",
tags:"<javascript><html><angular><angular-material>",
score:16,
creationDate:2023-10-18 12:58:37,
creationDate:2024-03-20 19:06:14,
score:1,
acceptedResponderReputation:1967,
acceptedResponder:13527621,
QuestionerReputation:1967,
Questioner:13527621}
{title:"Strange Issues with javax.ws.rs.core.UriBuilder",
id:"https://stackoverflow.com/questions/76119446",
body:"<p>Today I updated a command line application to Spring Boot 3.0.6</p>
<p>I receive a <code>BeanCreationException</code> exception when starting the application. Reason is</p>
<pre><code>Caused by: java.lang.ClassNotFoundException: javax.ws.rs.core.UriBuilder
</code></pre>
<p>which is needed internaly by <code>com.atlassian.jira.rest.client.api.JiraRestClient</code>. In IDEA, when I search for <code>javax.ws.rs.core.UriBuilder</code> I do not find any class.</p>
<p>So I included</p>
<pre><code>implementation 'javax.ws.rs:javax.ws.rs-api:2.1.1'
</code></pre>
<p>in my Gradle build. Now I receive a</p>
<pre><code>Caused by: java.lang.LinkageError: ClassCastException: attempting to cast
jar:file:/XXX/.gradle/caches/modules-2/files-2.1/javax.ws.rs/javax.ws.rs-api/2.1.1/d3466bc9321fe84f268a1adb3b90373fc14b0eb5/javax.ws.rs-api-2.1.1.jar!/javax/ws/rs/ext/RuntimeDelegate.class to
jar:file:/XXX/.gradle/caches/modules-2/files-2.1/javax.ws.rs/javax.ws.rs-api/2.1.1/d3466bc9321fe84f268a1adb3b90373fc14b0eb5/javax.ws.rs-api-2.1.1.jar!/javax/ws/rs/ext/RuntimeDelegate.class
</code></pre>
<p>both lines/files are identically.</p>
<p>Things I tried so far:</p>
<ul>
<li>Checking for different versions of <code>javax.ws.rs</code> with <code>gradlew dependencies</code></li>
<li>Clean build</li>
</ul>
<p>Has anyone an idea how to solve this and why is UriBuilder gone at all?</p>
",
tags:"<java><spring-boot><kotlin><gradle><jira-rest-java-api>",
score:6,
creationDate:2023-04-27 10:37:57,
creationDate:2023-04-27 11:37:14,
score:1,
acceptedResponderReputation:408,
acceptedResponder:1398030,
QuestionerReputation:15668,
Questioner:734687}
{title:"How can I connect to a non-default firestore database using Node (using multiple firestore databases)?",
id:"https://stackoverflow.com/questions/77061688",
body:"<p>I have multiple firestore databases in my project.
The databases were created using the command line and I can see it in the Firestore Databases preview following the instructions here: <a href=""https://cloud.google.com/blog/products/databases/manage-multiple-firestore-databases-in-a-project"" rel=""noreferrer"">https://cloud.google.com/blog/products/databases/manage-multiple-firestore-databases-in-a-project</a></p>
<p>I am able to connect to the default database, but am having problems connecting to other named databases. I would like to be able to update/delete data in those other databases.</p>
<p>I am attempting to connect to the databases using the lastest firebase-admin sdk (11.10.1) which has support for multiple named databases (<a href=""https://firebase.google.com/support/release-notes/admin/node"" rel=""noreferrer"">https://firebase.google.com/support/release-notes/admin/node</a>)</p>
<p>I would like to use the functions <code>getFirestore(databaseId)</code> or <code>getFirestore(app, databaseId)</code>
(<a href=""https://firebase.google.com/docs/reference/admin/node/firebase-admin.firestore"" rel=""noreferrer"">https://firebase.google.com/docs/reference/admin/node/firebase-admin.firestore</a>)
but am getting the following error when I try to save data:</p>
<blockquote>
<p>Error: 3 INVALID_ARGUMENT: The request was for database 'projects/testproject/databases/testdb' but was attempting to access database 'projects/testproject/databases/(default)'</p>
</blockquote>
<p>My code looks like this:</p>
<pre><code>const { getFirestore } = require('firebase-admin/firestore');
const {
  initializeApp,
  applicationDefault,
} = require('firebase-admin/app');

const app = initializeApp({
  credential: applicationDefault(),
});

const db = getFirestore();
const otherFirestore = getFirestore('testdb');

const saveData = async (col, doc, data) =&gt; {
  await otherFirestore
    .collection(col)
    .doc(doc)
    .set(data, { merge: true });
};
</code></pre>
<p>If I use db instead of otherFirestore, the data is saved into my default database.
I have also tried doing a <code>const otherFirestore = getFirestore(app, 'testdb');</code> but end up with the same error.
I am expecting the data to be saved to my testdb database.</p>
<p>Any help would be appreciated, thanks!</p>
",
tags:"<javascript><node.js><firebase><google-cloud-firestore><firebase-admin>",
score:10,
creationDate:2023-09-07 17:26:06,
creationDate:2023-09-14 21:39:35,
score:1,
acceptedResponderReputation:119,
acceptedResponder:22517860,
QuestionerReputation:119,
Questioner:22517860}
{title:"Fade out one section and fade in the next section as you scroll on webpage",
id:"https://stackoverflow.com/questions/75063938",
body:"<p>I have a site and I want each section to take up the screen and as you scroll down the page the sections fade out as the next section comes into view. I'm struggling on how this math needs to work.</p>
<p>For one section it's easy which is basically the height of the element and it's distance from the top to get the opacity percentage. However, I just can't quite figure out the math for other sections. I need section 2 to start fading in as section 1 is fading out.</p>
<p>I do not want to scrolljack. I just want a scrolling effect. Rather than override default scrolling behavior I just want to animate in/out as you scroll where a certain Y scroll value = a certain CSS value rather than a sort of &quot;breakpoint&quot; where it animates to a new &quot;slide&quot;.</p>
<p>For the proper effect, for example, my math divides the height of the row by 2 so that it's 50% faded out as the next section should be fading in 50%. But, as of now, the math just doesn't work for the other sections.</p>
<p>This site is using vanilla JS as it's supposed to be a simple one pager.</p>
<p>Example below:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>    (function () {
        window.addEventListener('scroll', () =&gt; {
          const rows = document.querySelectorAll('.row');

          rows.forEach(function (row, index) {
            const distanceToTop = window.pageYOffset;
            const elementHeight = row.offsetHeight * (index + 1) / 2;
            row.style.opacity = ((elementHeight - distanceToTop) / elementHeight * 100) / 100;
          });
        });
      })();</code></pre>
<pre class=""snippet-code-css lang-css prettyprint-override""><code>    * {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0 0 0 0;
      font-family: sans-serif;
      font-family: 'Manrope', helvetiva, sans-serif;
      transition: background-color 1s;
      color:#fff;
      background: linear-gradient(0deg, #100521 0%, #50357c 50%, #878290 100%);
    }

    header {
      position: fixed;
      top: 0;
      width: 100%;
      background: #fff;
      z-index: 999;
    }

    header h1 {
      font-family: 'Lack';
      font-size: 4em;
      text-align: center;
      padding: 10px;
      color: #100521;
    }

    .row-container .row:first-child {
      opacity: 1;
    }

    .row {
      opacity: 0;
      height: 100vh;
      display: flex;
      flex-direction:column;
    }

    .row-inner {
      display: grid;
      grid-template-columns: 1fr 1fr;
      position: sticky;
      top: 0;
      /* border: 1px solid yellow; */
      padding: 0;
      height: 100vh;
    }

    .column {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-content: center;
      flex: 50%;
      padding: 10px;
    }

    .left-column {
      background-color: transparent;
    }

    .right-column {
      background-color: transparent;
    }

    h1 {
      font-family: 'Unbounded', helvetica, sans-serif;
    }

    h1 {
      margin: 0;
      font-size: 36px;
    }

    h2 {
      margin: 0;
      font-size: 24px;
    }

    p {
      margin: 10px 0;
      font-size: 18px;
      line-height: 1.5;
    }

    img {
      width: 100%;
      height: auto;
    }</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;link rel=""preconnect"" href=""https://fonts.googleapis.com""&gt;&lt;link rel=""preconnect"" href=""https://fonts.gstatic.com"" crossorigin&gt;&lt;link href=""https://fonts.googleapis.com/css2?family=Manrope&amp;family=Unbounded&amp;family=Lack&amp;display=swap"" rel=""stylesheet""&gt;
&lt;/head&gt;
  &lt;body&gt;
    &lt;header&gt;
      &lt;h1&gt;My App&lt;/h1&gt;
    &lt;/header&gt;
    &lt;!-- First row --&gt;
    &lt;div class=""row-container""&gt;
      &lt;div class=""row section-1""&gt;
        &lt;div class=""row-inner""&gt;
          &lt;div class=""column left-column""&gt;
            &lt;div class=""column-inner""&gt;
              &lt;h1&gt;Headline 1&lt;/h1&gt;
              &lt;h2&gt;Subhead 1&lt;/h2&gt;
              &lt;p&gt;Lorem Ipsum dolar Gamet&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;div class=""column right-column""&gt;
            &lt;div class=""column-inner""&gt;
              &lt;img src=""https://avatars.dicebear.com/api/adventurer/team-member-1.jpg"" alt=""Image 1""&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;!-- Second row --&gt;
      &lt;div class=""row section-2""&gt;
        &lt;div class=""row-inner""&gt;
          &lt;div class=""column left-column""&gt;
            &lt;div class=""column-inner""&gt;
              &lt;h1&gt;Headline 2&lt;/h1&gt;
              &lt;h2&gt;Subhead 2&lt;/h2&gt;
              &lt;p&gt;Lorem Ipsum dolar Gamet&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;div class=""column right-column""&gt;
            &lt;div class=""column-inner""&gt;
              &lt;img src=""https://avatars.dicebear.com/api/adventurer/team-member-2.jpg"" alt=""Image 2""&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;!-- Third row --&gt;
      &lt;div class=""row section-3""&gt;
        &lt;div class=""row-inner""&gt;
          &lt;div class=""column left-column""&gt;
            &lt;div class=""column-inner""&gt;
              &lt;h1&gt;Headline 3&lt;/h1&gt;
              &lt;h2&gt;Subhead 3&lt;/h2&gt;
              &lt;p&gt;Lorem Ipsum dolar Gamet&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;div class=""column right-column""&gt;
            &lt;div class=""column-inner""&gt;
              &lt;img src=""https://avatars.dicebear.com/api/adventurer/team-member-3.jpg"" alt=""Image 3""&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;

      &lt;!-- Fourth row --&gt;
      &lt;div class=""row section-4""&gt;
        &lt;div class=""row-inner""&gt;
          &lt;div class=""column left-column""&gt;
            &lt;div class=""column-inner""&gt;
              &lt;h1&gt;Headline 4&lt;/h1&gt;
              &lt;h2&gt;Subhead 4&lt;/h2&gt;
              &lt;p&gt;Lorem Ipsum dolar Gamet&lt;/p&gt;
            &lt;/div&gt;
          &lt;/div&gt;
          &lt;div class=""column right-column""&gt;
            &lt;div class=""column-inner""&gt;
              &lt;img src=""https://avatars.dicebear.com/api/adventurer/team-member-4.jpg"" alt=""Image 4""&gt;
            &lt;/div&gt;
          &lt;/div&gt;
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
</p>
",
tags:"<javascript><html><css>",
score:9,
creationDate:2023-01-09 23:21:34,
creationDate:2023-01-23 17:50:03,
score:1,
acceptedResponderReputation:612,
acceptedResponder:1739597,
QuestionerReputation:32716,
Questioner:144833}
{title:"Google Maps React Component Crashes with TrafficLayer: ""Uncaught Error: b/369845599"",
id:"https://stackoverflow.com/questions/79273849",
body:"<p>I'm using the @react-google-maps/api library to render a Google Map in my React app. The map displays markers for couriers and shows directions for selected couriers. I also want to include a TrafficLayer for live traffic updates. However, when I add the TrafficLayer component, my application crashes with the following error:</p>
<pre><code>main.js:152 Uncaught Error: b/369845599
Script error.
    at handleError (http://localhost:5173/static/js/bundle.js:61314:58)
    at http://localhost:5173/static/js/bundle.js:61333:7
</code></pre>
<p>If I comment out the TrafficLayer component, everything works fine. Here's my code:</p>
<pre><code>&lt;GoogleMap mapContainerStyle={mapContainerStyle} zoom={12} center={defaultCenter}&gt;
  {couriers.map((courier) =&gt; (
    &lt;Marker
      key={courier.courier_id}
      position={{
        lat: parseFloat(courier.latitude),
        lng: parseFloat(courier.longitude),
      }}
      label={`${courier.courier_id}`}
      onClick={() =&gt; handleCourierClick(courier)}
    /&gt;
  ))}
  {selectedCourier &amp;&amp; directions[selectedCourier.courier_id] &amp;&amp; (
    &lt;DirectionsRenderer
      options={{
        directions: directions[selectedCourier.courier_id],
      }}
    /&gt;
  )}
  {showTrafficLayer &amp;&amp; &lt;TrafficLayer /&gt;}
&lt;/GoogleMap&gt;
</code></pre>
<p>What I've Tried:</p>
<ol>
<li>If I comment out the &lt;TrafficLayer /&gt; component, everything works fine.</li>
<li>Checked my Google Maps API key for proper setup (enabled all required services like Directions API, Maps JavaScript API, Traffic).</li>
<li>Confirmed that the error consistently occurs only when TrafficLayer is included.
Question:
What could be causing the TrafficLayer to crash the app with this error? Are there specific prerequisites or configurations needed for TrafficLayer to work? Any suggestions or fixes would be greatly appreciated.</li>
</ol>
",
tags:"<javascript><reactjs><google-maps><react-google-maps-api>",
score:8,
creationDate:2024-12-12 04:47:24,
creationDate:2024-12-17 20:29:00,
score:1,
acceptedResponderReputation:343,
acceptedResponder:6227293,
QuestionerReputation:133,
Questioner:28724790}
{title:"Regex expression to replace special characters except first and last character found",
id:"https://stackoverflow.com/questions/76221734",
body:"<p>I'd like to remove every special character from a string identifier and replace them with hyphens so it can be URL friendly.</p>
<p>This is part of Sitefinity CMS URL configuration, meaning that every time I create an item, it gets the title of it and generates a URL slug based on the regex expression I provide.</p>
<p><strong>So I can only use ONE regex expression, and ONE substitution text, since it is added in Sitefinity's CMS URL configuration fields.</strong></p>
<p><strong>I can't use code or use regex in multiple steps.</strong></p>
<p>So, for example, if I have the following title string:
<code>Infographic phishing's awareness and $prevention (updated)</code></p>
<p>I'd like it to transform to:
<code>infographic-phishing-awareness-and-prevention-updated</code></p>
<p>In Settings / Advanced / System / Site URL Settings / URLRulesClient we have the default regex expression set:
[^\p{L}-!$()=@\d_'.]+|.+$</p>
<p>The problem is that when content is created, the URLs only replace spaces and not special characters, with hyphens.</p>
<p>Is there a way I can replace the last special characters at the end of the string with an empty space?</p>
",
tags:"<javascript><regex><replace><sitefinity>",
score:6,
creationDate:2023-05-10 18:51:35,
creationDate:2023-05-11 09:25:41,
score:1,
acceptedResponderReputation:71,
acceptedResponder:2488453,
QuestionerReputation:63,
Questioner:21796825}
{title:"How do I maintain a live video stream playing if I change tabs in Chrome?",
id:"https://stackoverflow.com/questions/76165949",
body:"<p>I created and maintain a video stream site for my company. One of the features is the playing of live streams company-wide.
For some time I'm receiving complaints from some users that the streams stops if they change tabs.
After taking a very long time to reproduce the problem (see <a href=""https://stackoverflow.com/questions/76104246/how-can-i-reproduce-the-error-the-play-request-was-interrupted-because-video"">this question</a>) I found that Chrome will stop the stream to save battery power no matter the energy/memory saving options.</p>
<p>I tested in a page with only the following HTML:</p>
<pre class=""lang-html prettyprint-override""><code>&lt;html&gt;
&lt;body&gt;
    &lt;video src=&quot;&lt;source of the video stream&gt;&quot; controls autoplay&gt;&lt;/video&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>And the problem persisted: If I change tabs after the video starts and don't return to the video tab, on Chrome, WITH THE AUDIO UNMUTED, the video will stop after around 1 minute with the following message:</p>
<pre class=""lang-none prettyprint-override""><code>Uncaught (in promise) DOMException: The play() request was interrupted because 
video-only background media was paused to save power. 
https://developer.chrome.com/blog/play-request-was-interrupted/
</code></pre>
<p>(the real url in the error is shortened, but SO doesn't allow shortened urls)</p>
<p>Yet this doesn't happen on Youtube. In youtube the videos continue playing far beyond that, no matter if the tab is hidden or not.
So I examined a playing youtube video and see that they call every couple seconds a url like this:</p>
<p><a href=""https://rr1---sn-cgpn5oxu-4vge.googlevideo.com/videoplayback?expire=1683149353&amp;ei=yH1SZJ7WO5uZ1sQP9vG92A8&amp;ip=2804:29b8:517b:242:f26b:4dea:b5f2:67e3&amp;id=o-AL8joEvI3HBPbklhxiLbEGTDlJLbVIwopjFjnI8EBWL-&amp;itag=397&amp;aitags=133,134,135,136,160,242,243,244,247,278,298,299,302,303,394,395,396,397,398,399&amp;source=youtube&amp;requiressl=yes&amp;mh=WP&amp;mm=31,29&amp;mn=sn-cgpn5oxu-4vge,sn-bg07dnrd&amp;ms=au,rdu&amp;mv=m&amp;mvi=1&amp;pl=48&amp;gcr=br&amp;initcwndbps=1168750&amp;spc=qEK7B7KNEwbBCyLfMnbqJ_XwT66_vLSzP7Ms6zWibaE_f8dM91zGy5o&amp;vprv=1&amp;mime=video/mp4&amp;ns=55HuNDVyUV7osCrE3I51qpQN&amp;gir=yes&amp;clen=487564749&amp;dur=22246.495&amp;lmt=1682304313621272&amp;mt=1683127276&amp;fvip=1&amp;keepalive=yes&amp;fexp=24007246&amp;c=WEB&amp;txp=5537434&amp;n=x1PQMe-oM9FwmA&amp;sparams=expire,ei,ip,id,aitags,source,requiressl,gcr,spc,vprv,mime,ns,gir,clen,dur,lmt&amp;sig=AOq0QJ8wRgIhAN8zD5iU6PeRR6JsQcSG90FY9PU8jYKkchcXkvUPMK9RAiEAkI1CXqLYWok7AaN6IVvv1MPxlt53V3e6cMPchpz6YhU=&amp;lsparams=mh,mm,mn,ms,mv,mvi,pl,initcwndbps&amp;lsig=AG3C_xAwRQIhAPjdR3ouyfr-2klgbHhachH67vnoxdmXGhnPNgJTfbv4AiB8kWrG-NC7M_vfTNCPk4zBL9sEGYq9rXXd3j6lCDttgg==&amp;alr=yes&amp;cpn=3W-CuvJhKCQ-2SIu&amp;cver=2.20230502.01.00&amp;range=3996400-4138492&amp;rn=72&amp;rbuf=118597&amp;pot=MpUBSMpK29kR-RxI8hTT3gKbBSbNMHgH-lokRzwa-an54N4h5GSRq35j2kF-j5guj3En63V9l3yw3CE4oMW6UYmGzRGQSuNi8nv12fRkDRarshgOfk8_0_-uYxPw4UO6dQKBtBGPKXWgms989N_Bxl54mPPUxPYIhIIwqv4KbyMuqiGJ6F1TicguIpYMXykFnSVYjgi2WQU="" rel=""nofollow noreferrer"">https://rr1---sn-cgpn5oxu-4vge.googlevideo.com/videoplayback?expire=1683149353&amp;ei=yH1SZJ7WO5uZ1sQP9vG92A8&amp;ip=2804:29b8:517b:242:f26b:4dea:b5f2:67e3&amp;id=o-AL8joEvI3HBPbklhxiLbEGTDlJLbVIwopjFjnI8EBWL-&amp;itag=397&amp;aitags=133,134,135,136,160,242,243,244,247,278,298,299,302,303,394,395,396,397,398,399&amp;source=youtube&amp;requiressl=yes&amp;mh=WP&amp;mm=31,29&amp;mn=sn-cgpn5oxu-4vge,sn-bg07dnrd&amp;ms=au,rdu&amp;mv=m&amp;mvi=1&amp;pl=48&amp;gcr=br&amp;initcwndbps=1168750&amp;spc=qEK7B7KNEwbBCyLfMnbqJ_XwT66_vLSzP7Ms6zWibaE_f8dM91zGy5o&amp;vprv=1&amp;mime=video/mp4&amp;ns=55HuNDVyUV7osCrE3I51qpQN&amp;gir=yes&amp;clen=487564749&amp;dur=22246.495&amp;lmt=1682304313621272&amp;mt=1683127276&amp;fvip=1&amp;keepalive=yes&amp;fexp=24007246&amp;c=WEB&amp;txp=5537434&amp;n=x1PQMe-oM9FwmA&amp;sparams=expire,ei,ip,id,aitags,source,requiressl,gcr,spc,vprv,mime,ns,gir,clen,dur,lmt&amp;sig=AOq0QJ8wRgIhAN8zD5iU6PeRR6JsQcSG90FY9PU8jYKkchcXkvUPMK9RAiEAkI1CXqLYWok7AaN6IVvv1MPxlt53V3e6cMPchpz6YhU=&amp;lsparams=mh,mm,mn,ms,mv,mvi,pl,initcwndbps&amp;lsig=AG3C_xAwRQIhAPjdR3ouyfr-2klgbHhachH67vnoxdmXGhnPNgJTfbv4AiB8kWrG-NC7M_vfTNCPk4zBL9sEGYq9rXXd3j6lCDttgg==&amp;alr=yes&amp;cpn=3W-CuvJhKCQ-2SIu&amp;cver=2.20230502.01.00&amp;range=3996400-4138492&amp;rn=72&amp;rbuf=118597&amp;pot=MpUBSMpK29kR-RxI8hTT3gKbBSbNMHgH-lokRzwa-an54N4h5GSRq35j2kF-j5guj3En63V9l3yw3CE4oMW6UYmGzRGQSuNi8nv12fRkDRarshgOfk8_0_-uYxPw4UO6dQKBtBGPKXWgms989N_Bxl54mPPUxPYIhIIwqv4KbyMuqiGJ6F1TicguIpYMXykFnSVYjgi2WQU=</a></p>
<p>So I thought the answer was calling the backend frequently. As my system also calls the backend frequently to save statistics, I though I just needed to update the frequency of the calls.</p>
<p>It didn´t work. Not even in with a 2s frequency on backend calls. The video continues to stop after around 1 minute.</p>
<p>So... what's Youtube secret ? why won't their video stop and mine stops after 1 minute ? What do I have to do to maintain the video playing and avoid that message ?</p>
<p>This is a Angular frontend/nodejs backend system.</p>
<p><strong>I've found the problem. Some parts of the above message aren't true</strong></p>
<p>After almost 1 month trying to figure this one out I realized that I was misled to think that a simple page with only  tag in it also created the problem. This isn't true. I won't delete this question as it has drawn attention and probably people are getting the same error. So I'll just add an answer showing what the problem was. Maybe it may help someone.</p>
",
tags:"<javascript><angular><video><youtube><streaming>",
score:8,
creationDate:2023-05-03 15:59:01,
creationDate:2023-05-12 12:05:50,
score:1,
acceptedResponderReputation:6564,
acceptedResponder:2752520,
QuestionerReputation:6564,
Questioner:2752520}
{title:"I am using react-fast-marquee for a horizontal scroll animation, and I have added a scale effect to it",
id:"https://stackoverflow.com/questions/77856229",
body:"<p>I have the following code, and it is working about 90% how I want it to, it scrolls right to left, and I added a check to see when the image has reached the center of the page it should scale the image up just a little bit for effect.</p>
<p>This works fine for the first 3 images, but when the loop completes index 0 and index 1 never scale.</p>
<p>I have tried to figure this out for a while and can't seem to determine why.</p>
<p>Here is a code sandbox to see it in action and to play with it</p>
<p><a href=""https://codesandbox.io/p/sandbox/zen-tharp-zvdwyk"" rel=""noreferrer"">https://codesandbox.io/p/sandbox/zen-tharp-zvdwyk</a></p>
<p>Any help would be greatly appreciated</p>
<pre class=""lang-js prettyprint-override""><code>    import React, { useEffect, useRef, useState } from &quot;react&quot;;
    import Marquee from &quot;react-fast-marquee&quot;;
    import styled from &quot;styled-components&quot;;
    
    const props = {
      Carousel: [
        { image: &quot;/1.webp&quot; },
        { image: &quot;/2.webp&quot; },
        { image: &quot;/3.webp&quot; },
        { image: &quot;/4.webp&quot; },
        { image: &quot;/5.webp&quot; },
      ],
    };
    
    function Gallery() {
      const [updateLoop, setUpdateLoop] = useState(false);
    
      const [centerImageIndex, setCenterImageIndex] = useState(null);
    
      const imgRef = useRef();
    
      const [imageWidth, setImageWidth] = useState(0);
    
      function isImageHorizontallyCentered(pageWidth, imageWidth, imageX) {
        // Calculate the expected X coordinate for the image to be centered
        const expectedX = (pageWidth - imageWidth) / 2;
    
        // Define a margin of error, if necessary (e.g., for rounding)
        const marginOfError = 10; // Adjust this value based on your requirements
    
        // Check if the actual X coordinate is within the expected range
        return Math.abs(imageX - expectedX) &lt;= marginOfError;
      }
    
      const checkImagePosition = () =&gt; {
        const pageWidth = window.innerWidth;
    
        props.Carousel.forEach((item, index) =&gt; {
          const img = document.getElementById(`image-${index}`);
    
          const imageWidth = img.getBoundingClientRect().width;
          const rect = img.getBoundingClientRect();
          const imageX = rect.left + window.scrollX;
    
          const test = isImageHorizontallyCentered(pageWidth, imageWidth, imageX);
    
          console.log(&quot;test&quot;, test, &quot;index&quot;, index);
    
          if (test) {
            setCenterImageIndex(index);
          }
        });
      };
    
      useEffect(() =&gt; {
        const intervalId = setInterval(checkImagePosition, 100); // Check every 100ms
        return () =&gt; clearInterval(intervalId);
      }, []);
    
      return (
        &lt;Container&gt;
          &lt;ImagesContainer&gt;
            &lt;Marquee speed={100} pauseOnHover&gt;
              {props?.Carousel.map((listItem, index) =&gt; {
                const isCenter = index === centerImageIndex;
                return (
                  &lt;ImageWrapper key={index} id={`image-${index}`} center={isCenter}&gt;
                    &lt;LazyImg ref={imgRef} loading=&quot;lazy&quot; src={listItem.image} /&gt;
                  &lt;/ImageWrapper&gt;
                );
              })}
            &lt;/Marquee&gt;
          &lt;/ImagesContainer&gt;
        &lt;/Container&gt;
      );
    }
    
    
    const Container = styled.div`
      // width: 1200px;
      // margin: 0 auto;
      width: 100%;
    `;
    
    const Caption = styled.div`
      color: var(--Terrace-Gray-900, #282c25);
      letter-spacing: -0.32px;
      align-self: center;
      margin-top: 430px;
      white-space: nowrap;
    
      @media (max-width: 991px) {
        white-space: initial;
      }
    `;
    
    const SocialMediaText = styled.div`
      align-self: center;
      color: var(--Terrace-Neutral-Black, #000);
      text-align: center;
      letter-spacing: -2.24px;
      margin-top: 8px;
      font: 700 56px/114% Satoshi, sans-serif;
    
      @media (max-width: 991px) {
        max-width: 100%;
        font-size: 40px;
      }
    `;
    
    const ImagesContainer = styled.div`
      // border: 1px solid blue;
    `;
    
    const ImageWrapper = styled.div`
      // width: ${(props) =&gt; (props.center ? &quot;800px&quot; : &quot;100px&quot;)};
      // width: 600px;
      transform: scale(${(props) =&gt; (props.center ? &quot;1.1&quot; : &quot;1&quot;)});
      // border: 1px solid red;
      transition: transform 1s;
    `;
    
    const LazyImg = styled.img`
      width: 300px;
      border-radius: 50px;
      background: #e0e0e0;
      box-shadow: 20px 20px 60px #bebebe, -20px -20px 60px #ffffff;
      //write a drop shadow
    
      margin: 40px 40px;
    `;
    
    export default Gallery;

</code></pre>
",
tags:"<javascript><css><reactjs><animation><scroll>",
score:6,
creationDate:2024-01-21 18:57:24,
creationDate:2024-01-27 03:09:51,
score:1,
acceptedResponderReputation:18398,
acceptedResponder:15273968,
QuestionerReputation:1545,
Questioner:2949184}
{title:"Expo Firebase Auth Persistence Not Working As Expected",
id:"https://stackoverflow.com/questions/76262065",
body:"<p>I have a <code>firebaseConfig.js</code> that looks like this:</p>
<pre><code>import { initializeApp } from &quot;firebase/app&quot;;
import { initializeAuth } from &quot;firebase/auth&quot;;
import { getReactNativePersistence } from &quot;firebase/auth/react-native&quot;;
import { AsyncStorage } from &quot;@react-native-async-storage/async-storage&quot;;
import { getFirestore } from &quot;firebase/firestore&quot;;

const firebaseConfig = {...};

export const app = initializeApp(firebaseConfig);

const authState = initializeAuth(app, {
  persistence: getReactNativePersistence(AsyncStorage)
});

export const auth = authState;

export const db = getFirestore(app);
</code></pre>
<p>Then, when I sign in the user, it looks like this:</p>
<pre><code>import { auth } from &quot;../../firebaseConfig&quot;;
...
 signInWithEmailAndPassword(auth, email.trim(), password)
  .then(() =&gt; {
     // Handle success.
  })
</code></pre>
<p>Then in App.js, I have this:</p>
<pre><code>import { onAuthStateChanged } from &quot;firebase/auth&quot;;
import { auth } from &quot;./firebaseConfig&quot;;

... 

 onAuthStateChanged(auth, user =&gt; {
  if (user) {
    ...
  } else {
    console.log(&quot;No user&quot;);
  }
});
</code></pre>
<p>Each time I refresh the app, I'm getting no user returned from <code>onAuthStateChanged</code>. It successfully detects the user after logging in or registering, but not after refreshing the app.</p>
<p>What am I doing wrong?</p>
",
tags:"<javascript><firebase><react-native><firebase-authentication><expo>",
score:7,
creationDate:2023-05-16 10:39:49,
creationDate:2023-08-16 10:57:43,
score:1,
acceptedResponderReputation:509,
acceptedResponder:5970123,
QuestionerReputation:509,
Questioner:5970123}
{title:"d3.js Project_Problem with Rendering",
id:"https://stackoverflow.com/questions/75470969",
body:"<p>I have a <a href=""https://dsibi.github.io/portfolio/projects/line-graph-2/line-graph-2.html"" rel=""nofollow noreferrer"">project</a> built on <a href=""/questions/tagged/d3"" class=""post-tag"" title=""show questions tagged &#39;d3&#39;"" aria-label=""show questions tagged &#39;d3&#39;"" rel=""tag"" aria-labelledby=""d3-container"">d3</a> lib <code>v.7.6.1</code>.</p>
<p>It's hosted on GitHub Pages and works totally Ok on my laptop:
<a href=""https://i.sstatic.net/uMYq3.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/uMYq3.png"" alt=""enter image description here"" /></a></p>
<p>But renders incorrectly on most of the other devices:
<a href=""https://i.sstatic.net/kwSAC.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/kwSAC.png"" alt=""enter image description here"" /></a></p>
<p>With error in console for <code>y</code> and <code>cy</code> attributes:
<a href=""https://i.sstatic.net/hHGgw.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/hHGgw.png"" alt=""enter image description here"" /></a></p>
<hr />
<p>I've reproduced code here. What can be wrong with it?</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>async function drawLineChart() {
  const pathToCsv = 'https://raw.githubusercontent.com/dsibi/portfolio/main/projects/line-graph-2/data/time_entries.csv';
  let rawDataset = await d3.dsv("";"", pathToCsv);

  const record = {
    date: '',
    duration: ''
  };

  let dataset = [];

  for (let i = 0; i &lt; rawDataset.length; i++) {
    let currRecord = Object.create(record);
    const [day, month, year] = rawDataset[i]['Start date'].split('.');
    currRecord.date = new Date(+year, +month - 1, +day);
    const [hours, minutes, seconds] = rawDataset[i]['Duration'].split(':');
    currRecord.duration = new Date(+year, +month - 1, +day, +hours, +minutes, +seconds);
    dataset.push(currRecord);
  }

  dataset.forEach(function(element) {
    let timeString = element.duration.toLocaleTimeString();
    let timeEl = timeString.split(':');
    element.durationSeconds = (+timeEl[0]) * 60 * 60 + (+timeEl[1]) * 60 + (+timeEl[2]);
  });

  var groupedDataset = [];
  dataset.reduce(function(res, value) {
    if (!res[value.date]) {
      res[value.date] = {
        date: value.date,
        totalDurationSeconds: 0
      };
      groupedDataset.push(res[value.date])
    }
    res[value.date].totalDurationSeconds += value.durationSeconds;
    return res;
  }, {});

  const xAccessor = d =&gt; d.date;
  const formatHours = d3.format("".2f"");
  const yAccessor = d =&gt; +formatHours(d['totalDurationSeconds'] / 3600);
  const yAccessorLine = d =&gt; d['meanDurationHours'];
  let datasetWeeks = downsampleData(groupedDataset, xAccessor, yAccessor);
  const vacation = [{
    name: 'vacation',
    start: new Date('2022-06-16'),
    end: new Date('2022-06-26'),
  }, ];

  let dimensions = {
    width: window.innerWidth * 0.8,
    height: 400,
    margin: {
      top: 15,
      right: 40,
      bottom: 40,
      left: 40,
    },
  }
  dimensions.boundedWidth = dimensions.width - dimensions.margin.left - dimensions.margin.right
  dimensions.boundedHeight = dimensions.height - dimensions.margin.top - dimensions.margin.bottom

  // 3. Draw Canvas
  const wrapper = d3.select(""#wrapper"")
    .append(""svg"")
    .attr(""width"", dimensions.width)
    .attr(""height"", dimensions.height);

  const bounds = wrapper.append(""g"")
    .style(""transform"", `translate(${dimensions.margin.left}px, ${dimensions.margin.top}px)`);

  // 4. Scales
  const xScale = d3.scaleTime()
    .domain(d3.extent(groupedDataset, xAccessor))
    .range([0, dimensions.boundedWidth]);

  const yScale = d3.scaleLinear()
    .domain(d3.extent(groupedDataset, yAccessor))
    .range([dimensions.boundedHeight, 0])
    .nice();

  const meanHours = d3.mean(groupedDataset, yAccessor);

  bounds.append('line').attr('class', 'mean');

  const meanLine = bounds.select('.mean')
    .attr('x1', 0)
    .attr('x2', dimensions.boundedWidth)
    .attr('y1', yScale(meanHours))
    .attr('y2', yScale(meanHours));


  const xAxisGenerator = d3.axisBottom()
    .scale(xScale);

  const xAxis = bounds.append(""g"")
    .attr(""class"", ""x-axis"")
    .style(""transform"", `translateY(${dimensions.boundedHeight}px)`)
    .call(xAxisGenerator);

  // 5. Draw Data
  //dots
  const dots = bounds.selectAll("".dot"")
    .data(groupedDataset)
    .enter()
    .append(""circle"")
    .attr(""cx"", d =&gt; xScale(xAccessor(d)))
    .attr(""cy"", d =&gt; yScale(yAccessor(d)))
    .attr(""r"", 2)
    .attr(""class"", ""dot"");

  //line
  const lineGenerator = d3.line()
    .x(function(d) {
      // console.log(xScale(xAccessor(d)))
      return xScale(xAccessor(d))
    })
    .y(d =&gt; yScale(yAccessorLine(d)))
    .curve(d3.curveCatmullRom.alpha(.5));
  // .curve(d3.curveMonotoneX);

  const line = bounds.append(""path"")
    .attr(""class"", ""line"")
    .attr(""d"", lineGenerator(datasetWeeks))

  // 6. Draw Peripherals
  const yAxisGenerator = d3.axisLeft()
    .scale(yScale)
    .ticks(7);

  const yAxis = bounds.append(""g"")
    .attr(""class"", ""y-axis"")
    .call(yAxisGenerator);

};

drawLineChart();

function downsampleData(data, xAccessor, yAccessor) {
  const weeks = d3.timeWeeks(xAccessor(data[0]), xAccessor(data[data.length - 1]))

  return weeks.map((week, index) =&gt; {
    const weekEnd = weeks[index + 1] || new Date()
    const days = data.filter(d =&gt; xAccessor(d) &gt; week &amp;&amp; xAccessor(d) &lt;= weekEnd)
    const meanTotalDurationHours = d3.mean(days, yAccessor)
    const meanDurationHours = meanTotalDurationHours === undefined ? 0 : d3.mean(days, yAccessor)
    return {
      date: week,
      meanDurationHours: meanDurationHours
    }
  })
};</code></pre>
<pre class=""snippet-code-css lang-css prettyprint-override""><code>.line {
  fill: none;
  stroke: #eb4511;
  stroke-width: 3;
}

.mean {
  stroke: #7d82b8;
  stroke-dasharray: 2px 4px;
}

.y-axis-label {
  fill: black;
  font-size: 1.4em;
  text-anchor: middle;
}

.x-axis-label {
  fill: black;
  font-size: 1.4em;
  text-anchor: middle;
}

.dot {
  fill: #9c9b98;
}

.mean_text,
.vacation_text {
  fill: #7d82b8;
  font-size: .8em;
  font-weight: 800;
  text-anchor: start;
}

.x-axis line,
.y-axis line,
.domain {
  stroke: gray;
}

.tick text,
.y-axis-label {
  fill: gray
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script src=""https://cdnjs.cloudflare.com/ajax/libs/d3/7.6.1/d3.min.js""&gt;&lt;/script&gt;
&lt;html lang=""en""&gt;

&lt;body&gt;
  &lt;div id=""wrapper""&gt;
  &lt;/div&gt;

&lt;/body&gt;

&lt;/html&gt;</code></pre>
</div>
</div>
</p>
",
tags:"<javascript><d3.js><visualization><github-pages>",
score:8,
creationDate:2023-02-16 10:32:02,
creationDate:2023-02-20 12:28:04,
score:2,
acceptedResponderReputation:43884,
acceptedResponder:5625547,
QuestionerReputation:377,
Questioner:13333123}
{title:"Does sorting a Java stream before calling allMatch with a predicate that has different costs gain any benefits?",
id:"https://stackoverflow.com/questions/77541186",
body:"<p>I have implemented a Java stream pipeline where some elements are sorted and checked if all of them fulfill a predicate. The pipeline looks like this:</p>
<pre><code>items.stream()
     .sorted(this::sortByType)
     .allMatch(this::isCompliant);
</code></pre>
<p>The validation by the predicate differentiates in costs. Some of the elements just need to check an attribute, for some of them I have to fetch potentially many elements from a database and evaluate them, too.</p>
<p>As I need to know that <strong>all</strong> of them are true, knowing that <strong>at least one</strong> is false, is equivalent. If I correctly understand the JavaDoc of the allMatch() operation, it should short curcuit as soon as one element is false.</p>
<p>So, in order to potentially improve the execution speed, I order the elements so that all of the very easy validations are executed first and only if they all succeed, I execute the more costly validations.</p>
<p>That is at least what I think happens. However, my IDE tells me, that sorting before calling allMatch() is redundant, because it does not depend on the sort order.</p>
<p>I wrote some tests which seem to indicate that the sort order <em>is in fact</em> regarded when traversing the pipeline, but maybe my test case is just to small or it just happened to be called correctly.</p>
<p>So my question is: Does allMatch() consider the sort order imposed beforehand? Or does it ignore it?</p>
",
tags:"<java><sorting><java-stream>",
score:6,
creationDate:2023-11-24 06:47:41,
creationDate:2023-11-24 09:09:04,
score:2,
acceptedResponderReputation:21435,
acceptedResponder:5646962,
QuestionerReputation:145,
Questioner:2732883}
{title:"Custom ObjectMapper with Spring RestClient (migrating from WebClient)",
id:"https://stackoverflow.com/questions/77898690",
body:"<p>Currently using Spring Boot 3.1 with the reactive <code>WebClient</code> configured like this:</p>
<pre><code>@Configuration
public class MyConfig {

  @Bean
  WebClient webClient() {
    ExchangeStrategies strategies = ExchangeStrategies.builder().codecs(clientCodecConfigurer -&gt;
        {
          ObjectMapper objectMapper = createObjectMapper();
          Jackson2JsonDecoder decoder = new Jackson2JsonDecoder(objectMapper);
          decoder.setMaxInMemorySize(10_000_000);
          clientCodecConfigurer.customCodecs().register(decoder);
          clientCodecConfigurer.customCodecs().register(new Jackson2JsonEncoder(objectMapper));
        }
    ).build();

    return WebClient.builder()
        .exchangeStrategies(strategies)
        .baseUrl(this.properties.baseUrl())
        .build();
  }

  @Bean
  public HttpServiceProxyFactory httpServiceProxyFactory(
      WebClient webClient) {
    return HttpServiceProxyFactory
        .builder(WebClientAdapter.forClient(webClient))
        .build();
  }

  @Bean
  public MyRemoteServiceApi myGateway(HttpServiceProxyFactory httpServiceProxyFactory) {
    return httpServiceProxyFactory.create(MyRemoteServiceApi.class);
  }

  private static ObjectMapper createObjectMapper() {
    ObjectMapper mapper = new ObjectMapper();
    mapper.setPropertyNamingStrategy(PropertyNamingStrategies.KEBAB_CASE);
    mapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false);
    mapper.configure(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS, false);
    mapper.setSerializationInclusion(Include.NON_NULL);
    mapper.registerModule(new JavaTimeModule());
    return mapper;
  }
}
</code></pre>
<p>I am using 2 customizations:</p>
<ol>
<li>A custom Jackson ObjectMapper because the application I am calling through the webclient uses kebab-case. The API exposed from my own application uses the normal pascalCase.</li>
<li>Increase the maximum memory size the Jackson2JsonDecoder can use to read out responses.</li>
</ol>
<p>How can I migrate this code to use the <code>RestClient</code> of Spring Boot 3.2?</p>
<p>For the custom object mapper, I now have done this:</p>
<pre><code>@Bean
public RestClient restClient() {
    return RestClient.builder()
        .messageConverters(httpMessageConverters -&gt; {
          httpMessageConverters.clear();
          MappingJackson2HttpMessageConverter converter = new MappingJackson2HttpMessageConverter();
          converter.setObjectMapper(createObjectMapper());
          httpMessageConverters.add(converter);
        })
        .baseUrl(this.properties.baseUrl())
        .build();
  }
</code></pre>
<p>This seems to work, but I find it strange I have to first clear the list. Is this really the way it should be done?</p>
<p>Second question: how do I set that <code>maxInMemorySize</code>? Or is that not needed with <code>RestClient</code>?</p>
",
tags:"<java><spring><spring-boot>",
score:8,
creationDate:2024-01-29 09:39:12,
creationDate:2024-10-02 14:27:27,
score:2,
acceptedResponderReputation:8106,
acceptedResponder:5128464,
QuestionerReputation:26848,
Questioner:40064}
{title:"React vitejs Unexpected string",
id:"https://stackoverflow.com/questions/76527409",
body:"<p>I was installing the @apollo/client library in my vite project and when i called</p>
<p><code>new InMemoryCache()</code> from the apollo library i got console error <code>Uncaught SyntaxError: Unexpected string</code></p>
<p>And if i clicked on the file where the error comed from (apollo dependency) this wa the red underlined line <code>((_globalThis$process = globalThis.process) === null || _globalThis$process === void 0 ? void 0 : _globalThis$&quot;development&quot;) === &quot;production&quot; ? function instanceOf2(value, constructor) { return value instanceof constructor;</code></p>
<p>I tried so many things, using different cache libraries, changing vite condig js but I couldn't find the solution</p>
",
tags:"<javascript><reactjs><environment-variables><vite><apollo-client>",
score:6,
creationDate:2023-06-21 21:56:45,
creationDate:2023-06-22 08:23:06,
score:2,
acceptedResponderReputation:44078,
acceptedResponder:2075944,
QuestionerReputation:71,
Questioner:19743432}
{title:"Loop inside setInterval does not iterate over the second interation",
id:"https://stackoverflow.com/questions/79396922",
body:"<p>I have a useTypewriter hook that seems to skip the second iteration since the i never logs as 1. Why is the code not working? The output should be <code>howdy</code>, not <code>hwdy</code>.</p>
<p>Here is the full code:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""true"" data-babel-preset-react=""true"" data-babel-preset-ts=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const { useState, useEffect } = React;

const useTypewriter = (text, speed = 50) =&gt; {
    const [displayText, setDisplayText] = useState('');

    useEffect(() =&gt; {
        let i = 0;
        const typingInterval = setInterval(() =&gt; {
            console.log('text.length: ', text.length);
            if (i &lt; text.length) {
                // problem: i is not 1 on the second iteration
                setDisplayText((prevText) =&gt; {
                    console.log('prevText: ', prevText);
                    console.log(i, 'text.charAt(i): ', text.charAt(i));

                    return prevText + text.charAt(i);
                });
                i++;
            } else {
                clearInterval(typingInterval);
            }
        }, speed);

        return () =&gt; {
            clearInterval(typingInterval);
        };
    }, [text, speed]);

    return displayText;
};

function App(props) {
    const displayText = useTypewriter('howdy', 200);

  return (
    &lt;div className='App'&gt;
      &lt;h1&gt;{displayText}&lt;/h1&gt;
    &lt;/div&gt;
  );
}

ReactDOM.createRoot(
    document.getElementById(""root"")
).render(
    &lt;App /&gt;
);</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script src=""https://cdnjs.cloudflare.com/ajax/libs/react/18.3.1/umd/react.production.min.js""&gt;&lt;/script&gt;
&lt;script src=""https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.3.1/umd/react-dom.production.min.js""&gt;&lt;/script&gt;
&lt;div id=""root""&gt;&lt;/div&gt;</code></pre>
</div>
</div>
</p>
",
tags:"<javascript><reactjs><setinterval>",
score:6,
creationDate:2025-01-29 13:40:27,
creationDate:2025-01-29 14:05:58,
score:2,
acceptedResponderReputation:218798,
acceptedResponder:328193,
QuestionerReputation:2191,
Questioner:8758206}
{title:"Duration - Why do extra work when seconds is negative?",
id:"https://stackoverflow.com/questions/77392974",
body:"<p>This is the method <code>toNanos</code> in class <code>Duration</code></p>
<pre><code>public long toNanos() {
    long tempSeconds = seconds;
    long tempNanos = nanos;
    // TODO: Here makes me confused
    if (tempSeconds &lt; 0) {
        // change the seconds and nano value to
        // handle Long.MIN_VALUE case
        tempSeconds = tempSeconds + 1;
        tempNanos = tempNanos - NANOS_PER_SECOND;
    }
    long totalNanos = Math.multiplyExact(tempSeconds, NANOS_PER_SECOND);
    totalNanos = Math.addExact(totalNanos, tempNanos);
    return totalNanos;
}
</code></pre>
<p>I couldn't understand why need to do extra work when seconds is negative.</p>
<p>Positive numbers' max is <code>2^63-1</code> and negative numbers' min is <code>2^63</code>, looks like it transfer <code>-2^63s,-1ns</code> to <code>-2^63+1s,1000_000_000-1ns</code>, but it has to particate in calculate eventually. In my view this is meaningless because <code>Math.multiplyExact</code> and <code>Math.addExact</code> will throw an Exception when numbers overflow, it doesn't change not matter the judgement existed or not</p>
",
tags:"<java><duration>",
score:6,
creationDate:2023-10-31 03:11:39,
creationDate:2023-10-31 06:26:36,
score:2,
acceptedResponderReputation:21435,
acceptedResponder:5646962,
QuestionerReputation:157,
Questioner:21794356}
{title:"Retry failed API call in for...of loop",
id:"https://stackoverflow.com/questions/75453504",
body:"<p>I am trying to build a wrapper over Notion JS SDK's <code>iteratePaginatedAPI</code> that handles errors as well. I feel particularly lost on how do I catch API errors in such a way that I can actually retry them (aka retry the iteration that failed). Here's my attempt:</p>
<pre><code>async function* queryNotion(listFn, firstPageArgs) {
  try {
    for await (const result of iteratePaginatedAPI(listFn, firstPageArgs)) {
      yield* result
    }
  } catch (error) {
    if (error.code === APIErrorCode.RateLimited) {
      console.log('rate_limited');
      console.log(error);
      sleep(1);
      // How would I retry the last iteration?
    }
  }
}
</code></pre>
<p>Coming from the Ruby world, there is a <code>retry</code> in a <code>rescue</code> block. Any help would be appreciated!</p>
",
tags:"<javascript><async-await><try-catch><notion-js>",
score:6,
creationDate:2023-02-14 21:37:48,
creationDate:2023-02-14 23:36:14,
score:2,
acceptedResponderReputation:15776,
acceptedResponder:4883195,
QuestionerReputation:17900,
Questioner:433940}
{title:"SecurityFilterChain fails to instantiate after spring boot migration from 3.0.8 to 3.0.9",
id:"https://stackoverflow.com/questions/76764618",
body:"<p>In my spring boot project I've got the following definition of a SecurityFilterChain:</p>
<pre><code>public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
  http

    // public routes
    .authorizeHttpRequests()
    .requestMatchers(&quot;/&quot;, &quot;/favicon.ico&quot;, &quot;/v3/api-docs*&quot;)
    .permitAll()
    .and()

    // enable security for the log-view
    .authorizeHttpRequests()
    .requestMatchers(&quot;/log&quot;)
    .hasAnyRole(ROLE_LOGVIEWER)
    .and()

    // enable security for the health check
    .authorizeHttpRequests()
    .requestMatchers(&quot;/manage/health&quot;)
    .hasAnyRole(ROLE_HEALTH)
    .and()

    // enable basic-auth and ROLE_USER for all other routes
    .authorizeHttpRequests()
    .anyRequest()
    .hasAnyRole(ROLE_USER)
    .and()
    .httpBasic();

  return http.build();
}
</code></pre>
<p>It's tested in several mockup tests and runs as expected in the production environment.</p>
<p>But after the migration from spring-boot 3.0.8 to 3.0.9, I've got the following error:</p>
<pre><code>Factory method 'filterChain' threw exception with message: This method cannot decide whether these patterns are Spring MVC patterns or not. If this endpoint is a Spring MVC endpoint, please use requestMatchers(MvcRequestMatcher); otherwise, please use requestMatchers(AntPathRequestMatcher).
</code></pre>
<p>I tried to use a more specific requst matcher, but without success.</p>
<p>Any hints for me?</p>
",
tags:"<java><spring-boot><spring-security>",
score:9,
creationDate:2023-07-25 16:12:42,
creationDate:2023-07-26 15:30:51,
score:2,
acceptedResponderReputation:782,
acceptedResponder:4211252,
QuestionerReputation:782,
Questioner:4211252}
{title:"Gradle 8.1.1 - What went wrong: 'java.io.File org.gradle.api.reporting.ConfigurableReport.getDestination()'",
id:"https://stackoverflow.com/questions/75457142",
body:"<p>I've upgraded from Gradle 7.6 to 8.0 using (Home) brew on macOS Ventura 13.2.1 using openjdk version &quot;19.0.2&quot; 2023-01-17.</p>
<pre><code>gradle build clean

FAILURE: Build failed with an exception.

* What went wrong:
'java.io.File org.gradle.api.reporting.ConfigurableReport.getDestination()'

* Try:
&gt; Run with --stacktrace option to get the stack trace.
&gt; Run with --info or --debug option to get more log output.
&gt; Run with --scan to get full insights.
</code></pre>
<p>gradle build clean --scan:</p>
<pre><code>Started today at 08:04:46 GMT, finished today at 08:04:51 GMT
Gradle 8.0,Gradle Enterprise plugin 3.12.3
Explore console log
1 failure
'java.io.File org.gradle.api.reporting.ConfigurableReport.getDestination()'
'java.io.File org.gradle.api.reporting.ConfigurableReport.getDestination()'
</code></pre>
<p>Explore failure:</p>
<pre><code>Failure 1 of 1'java.io.File org.gradle.api.reporting.ConfigurableReport.getDestination()'
'java.io.File org.gradle.api.reporting.ConfigurableReport.getDestination()'
Exception
java.lang.NoSuchMethodError: 'java.io.File org.gradle.api.reporting.ConfigurableReport.getDestination()'    
at name.remal.gradle_plugins.dsl.extensions.Org_gradle_api_reporting_ConfigurableReportKt.setDefaultDestinationForTask(org.gradle.api.reporting.ConfigurableReport.kt:63)   
at name.remal.gradle_plugins.plugins.common.ReportsSettingsPlugin$Setup all tasks with reports$1$1.execute(ReportsSettingsPlugin.kt:24) 
at name.remal.gradle_plugins.plugins.common.ReportsSettingsPlugin$Setup all tasks with reports$1$1.execute(ReportsSettingsPlugin.kt:16) 
•••
at name.remal.gradle_plugins.plugins.common.ReportsSettingsPlugin$Setup all tasks with reports$1.execute(ReportsSettingsPlugin.kt:22)   
at name.remal.gradle_plugins.plugins.common.ReportsSettingsPlugin$Setup all tasks with reports$1.execute(ReportsSettingsPlugin.kt:16)   
•••
at name.remal.gradle_plugins.plugins.common.ReportsSettingsPlugin.Setup all tasks with reports(ReportsSettingsPlugin.kt:20) 
•••
at name.remal.gradle_plugins.dsl.extensions.Java_lang_reflect_MethodKt.invokeForInstance(java.lang.reflect.Method.kt:21)    
at name.remal.gradle_plugins.dsl.reflective_project_plugin.action_param_injector.ExtensionsKt.invokeForProject(extensions.kt:15)    
at name.remal.gradle_plugins.dsl.reflective_project_plugin.action_param_injector.ExtensionsKt.invoke(extensions.kt:23)  
at name.remal.gradle_plugins.dsl.BaseReflectiveProjectPlugin$doActions$1$7.invoke(BaseReflectiveProjectPlugin.kt:103)   
at name.remal.gradle_plugins.dsl.BaseReflectiveProjectPlugin$doActions$1$7.invoke(BaseReflectiveProjectPlugin.kt:19)    
at name.remal.gradle_plugins.dsl.extensions.Org_gradle_api_plugins_PluginManagerKt.withPluginIds(org.gradle.api.plugins.PluginManager.kt:67)    
at name.remal.gradle_plugins.dsl.extensions.Org_gradle_api_ProjectKt.withPluginIds(org.gradle.api.Project.kt:193)   
at name.remal.gradle_plugins.dsl.BaseReflectiveProjectPlugin$doActions$1.invoke(BaseReflectiveProjectPlugin.kt:88)  
at name.remal.gradle_plugins.dsl.BaseReflectiveProjectPlugin$doActions$1.invoke(BaseReflectiveProjectPlugin.kt:19)  
at name.remal.gradle_plugins.dsl.extensions.Org_gradle_api_plugins_PluginManagerKt.withPluginIds(org.gradle.api.plugins.PluginManager.kt:67)    
at name.remal.gradle_plugins.dsl.extensions.Org_gradle_api_ProjectKt.withPluginIds(org.gradle.api.Project.kt:193)   
at name.remal.gradle_plugins.dsl.BaseReflectiveProjectPlugin.doActions(BaseReflectiveProjectPlugin.kt:67)   
at name.remal.gradle_plugins.dsl.BaseReflectiveProjectPlugin.applyImpl(BaseReflectiveProjectPlugin.kt:43)   
at name.remal.gradle_plugins.dsl.BaseProjectPlugin.apply(BaseProjectPlugin.kt:57)   
at name.remal.gradle_plugins.dsl.BaseProjectPlugin.apply(BaseProjectPlugin.kt:23)   
•••
at name.remal.gradle_plugins.dsl.extensions.Org_gradle_api_ProjectKt.applyPlugin(org.gradle.api.Project.kt:195) 
at name.remal.gradle_plugins.dsl.BaseReflectiveProjectPlugin$doActions$1.invoke(BaseReflectiveProjectPlugin.kt:69)  
at name.remal.gradle_plugins.dsl.BaseReflectiveProjectPlugin$doActions$1.invoke(BaseReflectiveProjectPlugin.kt:19)  
at name.remal.gradle_plugins.dsl.extensions.Org_gradle_api_plugins_PluginManagerKt.withPluginIds(org.gradle.api.plugins.PluginManager.kt:67)    
at name.remal.gradle_plugins.dsl.extensions.Org_gradle_api_ProjectKt.withPluginIds(org.gradle.api.Project.kt:193)   
at name.remal.gradle_plugins.dsl.BaseReflectiveProjectPlugin.doActions(BaseReflectiveProjectPlugin.kt:67)   
at name.remal.gradle_plugins.dsl.BaseReflectiveProjectPlugin.applyImpl(BaseReflectiveProjectPlugin.kt:43)   
at name.remal.gradle_plugins.dsl.BaseProjectPlugin.apply(BaseProjectPlugin.kt:57)   
at name.remal.gradle_plugins.dsl.BaseProjectPlugin.apply(BaseProjectPlugin.kt:23)   
•••
</code></pre>
<p>Moved back to Gradle 7.6:</p>
<pre><code>/gradlew build clean --warning-mode=all

&gt; Configure project :
The Report.destination property has been deprecated. This is scheduled to be removed in Gradle 8.0. Please use the outputLocation property instead. See https://docs.gradle.org/7.6/dsl/org.gradle.api.reporting.Report.html#org.gradle.api.reporting.Report:destination for more details.
The Report.enabled property has been deprecated. This is scheduled to be removed in Gradle 8.0. Please use the required property instead. See https://docs.gradle.org/7.6/dsl/org.gradle.api.reporting.Report.html#org.gradle.api.reporting.Report:enabled for more details.
&gt;&gt;&gt;&gt;&gt; 1 deleteFiles
&gt;&gt;&gt;&gt;&gt; 2 NOTiFYmotoWAR
The AbstractArchiveTask.archiveName property has been deprecated. This is scheduled to be removed in Gradle 8.0. Please use the archiveFileName property instead. See https://docs.gradle.org/7.6/dsl/org.gradle.api.tasks.bundling.AbstractArchiveTask.html#org.gradle.api.tasks.bundling.AbstractArchiveTask:archiveName for more details.
        at build_6fdw9omce69ijjc1fgog2e4q0$_run_closure13.doCall(/Users/NOTiFY/IdeaProjects/NOTiFYmoto/build.gradle:265)
        (Run with --stacktrace to get the full stack trace of this deprecation warning.)
&gt;&gt;&gt;&gt;&gt; 3 NOTiFYmotoJAR
&gt;&gt;&gt;&gt;&gt; 4 copyNOTiFYmotoWAR
&gt;&gt;&gt;&gt;&gt; 5 copyNOTiFYmotoJAR
&gt;&gt;&gt;&gt;&gt; 6 NOTiFYmotoEAR
</code></pre>
<p>My Gradle:</p>
<pre><code>plugins {
    id(&quot;war&quot;)
    id(&quot;ear&quot;)
    id(&quot;idea&quot;)
    id(&quot;java-library&quot;)

    id(&quot;org.jetbrains.kotlin.jvm&quot;) version &quot;1.8.10&quot;

    id(&quot;checkstyle&quot;)
    id(&quot;pmd&quot;)

    id(&quot;com.github.spotbugs&quot;) version &quot;5.0.13&quot;

    id(&quot;org.sonarqube&quot;) version &quot;3.5.0.2730&quot;
    id(&quot;name.remal.sonarlint&quot;) version &quot;1.5.0&quot;
    id(&quot;org.wildfly.build.provision&quot;) version &quot;0.0.11&quot;
}

configurations.all {
    resolutionStrategy {
        //force 'xml-apis:xml-apis:1.0.b2'
        force 'xml-apis:xml-apis:2.0.2'
    }
}

compileJava {
    sourceCompatibility = '1.8'
    targetCompatibility = '1.8'
}

repositories {
    mavenLocal()
    mavenCentral()
    google()
    maven {
        name &quot;jboss-nexus&quot;
        url &quot;http://repository.jboss.org/nexus/content/groups/public/&quot;
        url &quot;https://repository.jboss.org/nexus/content/groups/public-jboss&quot;
        url &quot;https://repository.jboss.org/nexus/content/repositories&quot;
        url &quot;https://repository.jboss.org/nexus/content/repositories/thirdparty-releases&quot;
        url &quot;https://repository.primefaces.org&quot;
    }

    //jcenter()
    gradlePluginPortal()
    mavenCentral()

    flatDir {
        dirs &quot;lib&quot;
    }
}

dependencies {
    compileOnly(&quot;jakarta.platform:jakarta.jakartaee-api:10.0.0&quot;)

    implementation(&quot;jakarta.platform:jakarta.jakartaee-web-api:10.0.0&quot;)

    // JUnit (Jupiter) 5.9.0)
    testImplementation('org.junit.jupiter:junit-jupiter-api:5.9.2')
    testImplementation('org.junit.jupiter:junit-jupiter-engine:5.9.2')
    testImplementation('org.junit.vintage:junit-vintage-engine:5.9.2')
    testImplementation(&quot;org.testng:testng:7.7.0&quot;)

    implementation(&quot;org.apache.maven.surefire:surefire-testng:2.22.2&quot;)
    implementation(&quot;org.slf4j:slf4j-api:2.0.5&quot;)
    implementation(&quot;org.slf4j:slf4j-simple:2.0.5&quot;)

    implementation('com.puppycrawl.tools:checkstyle:10.7.0')
    implementation(&quot;dev.morphia.morphia:morphia-core:2.3.0&quot;)

    // Omnifaces 4.0.1 - November 2022
    implementation(&quot;org.omnifaces:omnifaces:4.0.1&quot;)

    implementation(&quot;org.primefaces:primefaces-12.0.3-jakarta&quot;)
    implementation(&quot;org.primefaces.themes:bootstrap:1.0.10&quot;)

    // BootsFaces
    implementation(&quot;net.bootsfaces:bootsfaces:1.5.0&quot;)

    implementation(&quot;org.mongodb:mongodb-driver-core:4.8.2&quot;)
    implementation(&quot;org.mongodb:mongodb-driver-sync:4.8.2&quot;)
    implementation(&quot;org.mongodb:bson:4.8.2&quot;)

    implementation('io.github.classgraph:classgraph:4.8.154')
    implementation('net.bytebuddy:byte-buddy:1.12.21')

    implementation('com.google.code.gson:gson:2.10.1')

    // Kotlin - 2022-12-28
    implementation('org.jetbrains.kotlin:kotlin-stdlib:1.8.10')

    implementation(&quot;org.jsoup:jsoup:1.15.3&quot;)

    providedCompile(&quot;org.eclipse.persistence:javax.persistence:2.2.1&quot;)
    providedCompile(&quot;javax.inject:javax.inject:1&quot;)
    providedCompile(&quot;javax.faces:javax.faces-api:2.3&quot;)
    providedCompile(&quot;jakarta.enterprise:jakarta.enterprise.cdi-api:4.0.1&quot;)
    providedCompile(&quot;org.jboss.resteasy:resteasy-jaxrs:3.15.3.Final&quot;)
    providedCompile('com.google.code.gson:gson:2.10.1')
    providedCompile(&quot;javax.ws.rs:javax.ws.rs-api:2.1.1&quot;)
    providedCompile(&quot;org.slf4j:slf4j-api:2.0.5&quot;)
    providedCompile(&quot;org.slf4j:slf4j-simple:2.0.5&quot;)
    spotbugsPlugins(&quot;com.h3xstream.findsecbugs:findsecbugs-plugin:1.12.0&quot;)
}

checkstyleMain {
    source = [&quot;src/main/java&quot;]
}

checkstyle {
    toolVersion &quot;10.7.0&quot;
    configFile = file(&quot;config/checkstyle/checkstyle.xml&quot;)
}

spotbugs {
    ignoreFailures = true
    toolVersion = '4.7.3'

    reportsDir = file(&quot;reports/spotbugs&quot;)
    effort = &quot;max&quot;
    reportLevel = &quot;high&quot;

//     ignoreFailures = false
    showProgress = true
//     showStackTraces = false
//     effort = &quot;default&quot;
//     reportLevel = &quot;default&quot;
//     visitors = [ &quot;FindSqlInjection&quot;, &quot;SwitchFallthrough&quot; tVisitors = [ &quot;FindNonShortCircuit&quot; ]
//     reportsDir = filef(&quot;$buildDir/ƒprime&quot;)
//     includeFilter = file(&quot;include.xml&quot;)
//     excludeFilter = file(&quot;exclude.xml&quot;)
//     onlyAnalyze = [ &quot;com.foobar.MyClass&quot;, &quot;com.foobar.mypkg.*&quot; ]
//     maxHeapSize = &quot;1g&quot;
//     extraArgs = [ &quot;-nested:false&quot; ]
//     jvmArgs = [ &quot;-Duser.language=ja&quot; ]
}

pmd {
    ignoreFailures = true
    reportsDir = file(&quot;reports/pmd&quot;)
    ruleSets = [
            &quot;java-basic&quot;,
            &quot;java-braces&quot;,
            &quot;java-clone&quot;,
            &quot;java-codesize&quot;,
            &quot;java-comments&quot;,
            &quot;java-controversial&quot;,
            &quot;java-coupling&quot;,
            &quot;java-design&quot;,
            &quot;java-empty&quot;,
            &quot;java-finalizers&quot;,
            &quot;java-imports&quot;,
            &quot;java-optimizations&quot;,
            &quot;java-strictexception&quot;,
            &quot;java-strings&quot;,
            &quot;java-typeresolution&quot;,
            &quot;java-unnecessary&quot;,
            &quot;java-unusedcode&quot;
    ]
}

// SonarLint &amp; SonarQube
sonarlint {
    ignoreFailures = true
//    excludes {
//        message 'java:S1214'
//        message 'kotlin:S100'
//        message 'xml:S125'
//    }
//    includes {
//        message 'java:S4266' // Enable java:S4266 which is disabled by default
//    }
//    ruleParameter('java:S119', 'format', '^[A-Z][a-zA-Z0-9]*$') // Allow upper camel-case for type parameter names
}

tasks.withType(Pmd) {
    reports {
        xml.enabled = true
        html.enabled = true
    }
}

tasks.withType(Checkstyle) {
    reports {
        html.destination rootProject.file(&quot;reports/checkstyle/checkstyle.html&quot;)
    }
}

task deleteFiles(type: Delete) {
    project.logger.lifecycle(&quot;&gt;&gt;&gt;&gt;&gt; 1 deleteFiles&quot;)

    delete fileTree(&quot;./build/libs&quot;) {
        include &quot;**/NOTiFYmoto*.?ar&quot;
    }

    delete fileTree(&quot;./src/main/application&quot;) {
        include &quot;**/NOTiFYmoto*.war&quot;
        include &quot;**/NOTiFYmoto*.jar&quot;
        include &quot;**/NOTiFYmoto*.ear&quot;
    }
}

task NOTiFYmotoWAR(type: War) {
    project.logger.lifecycle(&quot;&gt;&gt;&gt;&gt;&gt; 2 NOTiFYmotoWAR&quot;)

    dependsOn deleteFiles

    archiveName &quot;NOTiFYmotoWAR.war&quot;
    //archiveFileName &quot;NOTiFYmotoWAR.war&quot;

    //webInf {
    //    from &quot;WEB-INF&quot;
    //}

    rootSpec.exclude(&quot;**/dto/*&quot;)
    rootSpec.exclude(&quot;**/ean/*&quot;)
    rootSpec.exclude(&quot;**/ejb/*&quot;)
    rootSpec.exclude(&quot;**/entity/*&quot;)
    rootSpec.exclude(&quot;**/filter/*&quot;)
    rootSpec.exclude(&quot;**/gson/*&quot;)

    rootSpec.exclude(&quot;**/morphia-*.jar&quot;)
    rootSpec.exclude(&quot;**/mongo*.jar&quot;)
    rootSpec.exclude(&quot;**/bson*.jar&quot;)
    rootSpec.exclude(&quot;**/surefire*.jar&quot;)

    rootSpec.exclude(&quot;**/controller*/*&quot;)

    // Exclude push PushEvent.class
    rootSpec.exclude(&quot;**/push/PushEvent.class&quot;)

    //rootSpec.exclude(&quot;**/layout/img/OmniFaces-icon-*&quot;)
    rootSpec.exclude(&quot;**/webservices/*&quot;)

    rootSpec.exclude(&quot;**/checkstyle*.jar&quot;)
    rootSpec.exclude(&quot;**/classgraph*.jar&quot;)
    rootSpec.exclude(&quot;**/kotlin*.jar&quot;)

    rootSpec.exclude(&quot;**/NOTiFYmoto*.jar&quot;)
    rootSpec.exclude(&quot;**/NOTiFYmoto*.war&quot;)

}

task NOTiFYmotoJAR(type: Jar) {
    project.logger.lifecycle(&quot;&gt;&gt;&gt;&gt;&gt; 3 NOTiFYmotoJAR&quot;)

    dependsOn NOTiFYmotoWAR

    archiveName &quot;NOTiFYmotoJAR.jar&quot;
//    archiveFileName &quot;NOTiFYmotoJAR.jar&quot;

    from(&quot;./src/main/java&quot;) {
        include &quot;META-INF/**&quot;
    }

    // Exclude
    rootSpec.exclude(&quot;**/jsf/SliderViewBean.class&quot;)
    rootSpec.exclude(&quot;**/push/PushBean.class&quot;)

    from(&quot;./build/classes/java/main&quot;) {
        include &quot;*/**&quot;
    }

    // Kotlin
    from(&quot;./build/classes/kotlin/main&quot;) {
        include &quot;*/**&quot;
    }
}

task copyNOTiFYmotoWAR(type: Copy) {
    project.logger.lifecycle(&quot;&gt;&gt;&gt;&gt;&gt; 4 copyNOTiFYmotoWAR&quot;)

    dependsOn NOTiFYmotoJAR

    from file(&quot;./build/libs/NOTiFYmotoWAR.war&quot;)
    into file(&quot;./src/main/application&quot;)
}

task copyNOTiFYmotoJAR(type: Copy) {
    project.logger.lifecycle(&quot;&gt;&gt;&gt;&gt;&gt; 5 copyNOTiFYmotoJAR&quot;)

    dependsOn copyNOTiFYmotoWAR

    from file(&quot;./build/libs/NOTiFYmotoJAR.jar&quot;)
    into file(&quot;./src/main/application&quot;)
}

task NOTiFYmotoEAR(type: Ear) {
    project.logger.lifecycle(&quot;&gt;&gt;&gt;&gt;&gt; 6 NOTiFYmotoEAR&quot;)

    apply plugin: &quot;ear&quot;

    //compileOnly(&quot;org.omnifaces:omnifaces:4.0.1&quot;)

    dependsOn copyNOTiFYmotoJAR

    archiveName &quot;NOTiFYmoto.ear&quot;
//    archiveFileName &quot;NOTiFYmoto.ear&quot;

    manifest {
        from(&quot;./src/main/resources/META-INF/MANIFEST.MF&quot;)
    }

    exclude &quot;**/*.class&quot;
    exclude &quot;**/asm-Java.jar&quot;
    exclude &quot;**/jboss-deployment-structure.xml&quot;

//    exclude(&quot;**/beans.xml&quot;)

    dependencies {
        earlib group: &quot;com.google.code.gson&quot;, name: &quot;gson&quot;, version: &quot;2.10&quot;, ext: &quot;jar&quot;
        earlib group: &quot;org.apache.httpcomponents&quot;, name: &quot;httpclient&quot;, version: &quot;4.5.13&quot;, ext: &quot;jar&quot;
        earlib group: &quot;org.apache.httpcomponents&quot;, name: &quot;httpcore&quot;, version: &quot;4.4.14&quot;, ext: &quot;jar&quot;
        earlib group: &quot;org.jetbrains.kotlin&quot;, name: &quot;kotlin-stdlib&quot;, version: &quot;1.8.10&quot;, ext: &quot;jar&quot;

        earlib group: &quot;dev.morphia.morphia&quot;, name: &quot;morphia-core&quot;, version: &quot;2.3.0&quot;, ext: &quot;jar&quot;

        earlib group: &quot;org.mongodb&quot;, name: &quot;mongodb-driver-core&quot;, version: &quot;4.8.2&quot;, ext: &quot;jar&quot;
        earlib group: &quot;org.mongodb&quot;, name: &quot;mongodb-driver-sync&quot;, version: &quot;4.8.2&quot;, ext: &quot;jar&quot;
        earlib group: &quot;org.mongodb&quot;, name: &quot;bson&quot;, version: &quot;4.8.2&quot;, ext: &quot;jar&quot;

        earlib group: &quot;net.bytebuddy&quot;, name: &quot;byte-buddy&quot;, version: &quot;1.12.17&quot;, ext: &quot;jar&quot;

        earlib group: &quot;io.github.classgraph&quot;, name: &quot;classgraph&quot;, version: &quot;4.8.153&quot;

        spotbugsPlugins(&quot;com.h3xstream.findsecbugs:findsecbugs-plugin:1.12.0&quot;)
    }
}
</code></pre>
<p>Any suggestions? TIA</p>
",
tags:"<java><gradle><sonarqube><build.gradle>",
score:15,
creationDate:2023-02-15 08:29:42,
creationDate:2023-02-18 12:30:32,
score:2,
acceptedResponderReputation:1403,
acceptedResponder:3787442,
QuestionerReputation:1403,
Questioner:3787442}
{title:"Spring Security 5+: Obtaining an AuthenticationManager without having to build HttpSecurity",
id:"https://stackoverflow.com/questions/75776068",
body:"<p>Java 11 and Spring Security 2.7.x here. I am trying to upgrade my config <em>away</em> from the (deprecated) <code>WebSecurityConfigurerAdapter</code>-based implementation to one using <code>SecurityFilterChain</code>.</p>
<p>What's important about my implementation is that I have the ability to define and configure/wire up my own:</p>
<ul>
<li>Authentication Filter (<code>UsernamePasswordAuthenticationFilter</code> impl)</li>
<li>Authorization Filter (<code>BasicAuthenticationFilter</code> impl)</li>
<li>Custom authentication error handler (<code>AuthenticationEntryPoint</code> impl)</li>
<li>Custom authorization error handler (<code>AccessDeniedHandler</code> impl)</li>
</ul>
<p>Here's my current setup based on reading a bunch of blogs and articles:</p>
<pre><code>public class ApiAuthenticationFilter extends UsernamePasswordAuthenticationFilter {

    private AuthenticationManager authenticationManager;
    private ObjectMapper objectMapper;
    private ApiAuthenticationFactory authenticationFactory;
    private TokenService tokenService;

    public ApiAuthenticationFilter(
            AuthenticationManager authenticationManager,
            TokenService tokenService,
            ObjectMapper objectMapper,
            ApiAuthenticationFactory authenticationFactory) {

        super(authenticationManager);
        this.tokenService = tokenService;
        this.objectMapper = objectMapper;
        this.authenticationFactory = authenticationFactory;

        init();

    }

    private void init() {
        setFilterProcessesUrl(&quot;/v1/auth/sign-in&quot;);
    }

    @Override
    public Authentication attemptAuthentication(
            HttpServletRequest request,
            HttpServletResponse response) throws AuthenticationException {

        try {

            SignInRequest signInRequest = objectMapper.readValue(request.getInputStream(), SignInRequest.class);

            Authentication authentication = authenticationFactory
                    .createAuthentication(signInRequest.getEmail(), signInRequest.getPassword());

            // perform authentication and -- if successful -- populate granted authorities
            return authenticationManager.authenticate(authentication);

        } catch (IOException e) {
            throw new BadCredentialsException(&quot;malformed sign-in request payload&quot;, e);
        }

    }

    @Override
    protected void successfulAuthentication(
            HttpServletRequest  request,
            HttpServletResponse response,
            FilterChain filterChain,
            Authentication authentication) {

        // called if-and-only-if the attemptAuthentication method above is successful

        ApiAuthentication apiAuthentication = (ApiAuthentication) authentication;
        TokenPair tokenPair = tokenService.generateTokenPair(apiAuthentication);
        response.setStatus(HttpServletResponse.SC_OK);
        try {
            response.getWriter().write(objectMapper.writeValueAsString(tokenPair));
        } catch (IOException e) {
            throw new ApiServiceException(e);
        }

    }

}

public class ApiAuthorizationFilter extends BasicAuthenticationFilter implements SecurityConstants {

    private ApiAuthenticationFactory authenticationFactory;
    private AuthenticationService authenticationService;
    private String jwtSecret;

    public ApiAuthorizationFilter(
            AuthenticationManager authenticationManager,
            ApiAuthenticationFactory authenticationFactory,
            AuthenticationService authenticationService,
            @Value(&quot;${myapp.jwt-secret}&quot;) String jwtSecret) {

        super(authenticationManager);
        this.authenticationFactory = authenticationFactory;
        this.authenticationService = authenticationService;
        this.jwtSecret = jwtSecret;

    }

    @Override
    protected void doFilterInternal(
            HttpServletRequest request,
            HttpServletResponse response,
            FilterChain filterChain) throws IOException, ServletException {

        String authHeader = request.getHeader(AUTHORIZATION_HEADER);

        // allow the request through if no valid auth header is set; spring security
        // will throw access denied exceptions downstream if the request is for an
        // authenticated url
        if (authHeader == null || !authHeader.startsWith(BEARER_TOKEN_PREFIX)) {
            filterChain.doFilter(request, response);
            return;
        }

        // otherwise an auth header was specified so lets take a look at it and grant access based
        // on what we find
        try {

            DecodedJWT decodedJWT = JwtUtils.verifyToken(authHeader.replace(BEARER_TOKEN_PREFIX, &quot;&quot;), jwtSecret);
            String subject = decodedJWT.getSubject();
            ApiAuthentication authentication = authenticationFactory.createAuthentication(subject, null);

            // TODO: I believe I need to look up granted authorities here and set them

            authenticationService.setCurrentAuthentication(authentication);
            filterChain.doFilter(request, response);

        } catch (JWTVerificationException jwtVerificationEx) {
            throw new AccessDeniedException(&quot;access denied&quot;, jwtVerificationEx);
        }

    }

}

@EnableWebSecurity
@EnableGlobalMethodSecurity(prePostEnabled = true, securedEnabled = true, jsr250Enabled = true)
public class SecurityConfigV2 {

    private boolean securityDebug;

    private ObjectMapper objectMapper;
    private ApiAuthenticationFactory authenticationFactory;
    private TokenService tokenService;

    private AuthenticationService authenticationService;
    private String jwtSecret;
    private ApiUnauthorizedHandler unauthorizedHandler;
    private ApiSignInFailureHandler signInFailureHandler;

    private BCryptPasswordEncoder passwordEncoder;
    private RealmService realmService;

    @Autowired
    public SecurityConfigV2(
            @Value(&quot;${spring.security.debug:false}&quot;) boolean securityDebug,
            ObjectMapper objectMapper,
            ApiAuthenticationFactory authenticationFactory,
            TokenService tokenService,
            AuthenticationService authenticationService,
            @Value(&quot;${myapp.authentication.jwt-secret}&quot;) String jwtSecret,
            ApiUnauthorizedHandler unauthorizedHandler,
            ApiSignInFailureHandler signInFailureHandler,
            BCryptPasswordEncoder passwordEncoder,
            RealmService realmService) {
        this.securityDebug = securityDebug;
        this.objectMapper = objectMapper;
        this.authenticationFactory = authenticationFactory;
        this.tokenService = tokenService;
        this.authenticationService = authenticationService;
        this.jwtSecret = jwtSecret;
        this.unauthorizedHandler = unauthorizedHandler;
        this.signInFailureHandler = signInFailureHandler;
        this.passwordEncoder = passwordEncoder;
        this.realmService = realmService;
    }

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity httpSecurity) throws Exception {

        // build authentication manager
        AuthenticationManager authenticationManager = httpSecurity.getSharedObject(AuthenticationManagerBuilder.class)
            .userDetailsService(realmService)
            .passwordEncoder(passwordEncoder)
            .and()
            .build();   // &lt;-- calling it once up here, to get an AuthenticationManager instance

        // enable CSRF
        // TODO: enable once you are ready to provide 'CSRF tokens'
        //  https://stackoverflow.com/a/75646727/5235665
        httpSecurity.csrf().disable();

        // add CORS filter
        httpSecurity.cors();

        // add anonoymous/permitted paths (that is: what paths are allowed to bypass authentication)
        httpSecurity.authorizeRequests()
            .antMatchers(HttpMethod.OPTIONS, &quot;/**&quot;).permitAll()
            .antMatchers(HttpMethod.GET, &quot;/actuator/health&quot;).permitAll()
            .antMatchers(HttpMethod.POST, &quot;/v*/tokens/refresh&quot;).permitAll();

        // restrict all other paths and set them to authenticated
        httpSecurity.authorizeRequests().anyRequest().authenticated();

        // add authn + authz filters -- using AuthenticationManager instance here
        httpSecurity.addFilter(apiAuthenticationFilter(authenticationManager));
        httpSecurity.addFilter(apiAuthorizationFilter(authenticationManager));

        // configure exception-handling for authn and authz
        httpSecurity.exceptionHandling().accessDeniedHandler(unauthorizedHandler);
        httpSecurity.exceptionHandling().authenticationEntryPoint(signInFailureHandler);

        // configure stateless http sessions (appropriate for RESTful web services)
        httpSecurity.sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);

        // and building it a 2nd time here, to complete the filter
        // but I believe this is what causes the error
        return httpSecurity.build();
    }

    public ApiAuthenticationFilter apiAuthenticationFilter(AuthenticationManager authenticationManager) {

        ApiAuthenticationFilter authenticationFilter = new ApiAuthenticationFilter(
                authenticationManager, tokenService, objectMapper, authenticationFactory);
        return authenticationFilter;

    }

    public ApiAuthorizationFilter apiAuthorizationFilter(AuthenticationManager authenticationManager) {

        ApiAuthorizationFilter authorizationFilter = new ApiAuthorizationFilter(
            authenticationManager,
            authenticationFactory,
            authenticationService,
            jwtSecret);

        return authorizationFilter;

    }

    @Bean
    public WebSecurityCustomizer webSecurityCustomizer() {
        return (web) -&gt; web.debug(securityDebug)
            .ignoring()
            .antMatchers(&quot;/css/**&quot;, &quot;/js/**&quot;, &quot;/img/**&quot;, &quot;/lib/**&quot;, &quot;/favicon.ico&quot;);
    }

    @Bean
    public CorsConfigurationSource corsConfigurationSource() {

        CorsConfiguration corsConfiguration = new CorsConfiguration();
        corsConfiguration.setAllowedMethods(Arrays.asList(&quot;GET&quot;, &quot;POST&quot;, &quot;PUT&quot;, &quot;PATCH&quot;, &quot;DELETE&quot;, &quot;OPTIONS&quot;));
        corsConfiguration.setAllowedHeaders(Arrays.asList(&quot;Authorization&quot;, &quot;Content-Type&quot;));

        UrlBasedCorsConfigurationSource corsConfigurationSource = new UrlBasedCorsConfigurationSource();
        corsConfigurationSource.registerCorsConfiguration(&quot;/**&quot;, corsConfiguration);

        return corsConfigurationSource;

    }

}
</code></pre>
<p>When I start up my app I am getting:</p>
<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 
'org.springframework.security.config.annotation.web.configuration.WebSecurityConfiguration': 
Unsatisfied dependency expressed through method 'setFilterChains' parameter 0; nested exception is 
org.springframework.beans.factory.BeanCreationException: 
Error creating bean with name 'filterChain' defined 
in class path resource [myapp/ws/security/v2/SecurityConfigV2.class]: 
Bean instantiation via factory method failed; nested exception is 
org.springframework.beans.BeanInstantiationException: 
Failed to instantiate [org.springframework.security.web.SecurityFilterChain]: 
Factory method 'filterChain' threw exception; 
nested exception is org.springframework.security.config.annotation.AlreadyBuiltException: 
This object has already been built
</code></pre>
<p>The Google Gods say this is because I'm calling <code>httpSecurity.build()</code> <strong>twice</strong> which is not allowed. However:</p>
<ul>
<li>My authn and authz filter require an <code>AuthenticationManager</code> instance; and</li>
<li>It seems that the only way (please tell me if I'm wrong!) to get an <code>AuthenticationManager</code> instance is to run <code>httpSecurity.build()</code>; <strong>but</strong></li>
<li>I need the authn/authz filter <em>before</em> I can call <code>httpSecurity.build()</code></li>
</ul>
<p>Can anyone help nudge me across the finish line here? Thanks for any and all help!</p>
",
tags:"<java><spring-boot><spring-security>",
score:6,
creationDate:2023-03-18 13:03:03,
creationDate:2023-03-20 15:16:32,
score:2,
acceptedResponderReputation:6053,
acceptedResponder:3426309,
QuestionerReputation:595,
Questioner:5235665}
{title:"Precedence of setImmediate() and setTimeout() callbacks in CommonJS vs ESM",
id:"https://stackoverflow.com/questions/77736974",
body:"<p>Calling setTimeout with setImmediate has unpredicted behaviour if using CommonJS modules. But if you switch to ESM (&quot;type&quot;: &quot;module&quot; in package.json), it will always execute setImmediate before setTimeout.</p>
<pre><code>setTimeout(() =&gt; {
  console.log('timeout');
}, 0);

setImmediate(() =&gt; {
  console.log('immediate');
});
</code></pre>
<p>Why does this happen? Is it related to the fact that in ESM modules are loaded asynchronously?</p>
",
tags:"<javascript><node.js><es6-modules><commonjs><event-loop>",
score:8,
creationDate:2023-12-30 18:18:04,
creationDate:2024-01-09 02:53:37,
score:2,
acceptedResponderReputation:136578,
acceptedResponder:3702797,
QuestionerReputation:654,
Questioner:3727662}
{title:"Drawn pixel using pencil on canvas is not centred",
id:"https://stackoverflow.com/questions/77659861",
body:"<p>I am drawing pixels using a pencil on canvas using p5.js.
The issue is that when the pencil size is 1 or smaller in that scenario, its position is not centered.
It's coming left right not centered.</p>
<p><strong>I've noticed an interesting observation in our code. It appears that when the mouse's x and y positions are close to .5, the drawn pixel appears centered; however, in other instances, the pixel seems to be slightly off-center. To tackle this, I'm thinking of refining our rendering logic. I'll make sure to set the pixel density to 1 to prevent any automatic scaling issues. Additionally, I might experiment with adjusting the pixel position by incorporating a correction factor, perhaps subtracting 0.5 from both the x and y coordinates. It's crucial to scrutinize any transformations or scaling operations in our code that could be influencing the exact placement of pixels.</strong></p>
<blockquote>
<p>I've noticed that the P5.image.set method doesn't seem to accept
floating-point numbers; it rounds to the nearest integer. Has anyone
found a workaround for this issue, or am I missing something in the
documentation?</p>
</blockquote>
<p><a href=""https://github.com/Akash1994Gowda/Vue---P5.Js-Canvas/blob/main/src/App.vue"" rel=""noreferrer"">Here</a> is the code.
<a href=""https://peppy-sunshine-5eff6d.netlify.app/"" rel=""noreferrer"">Here</a> is the deployed application.</p>
<p>Steps to generate the issue:-</p>
<ol>
<li>open the link</li>
<li>zoom(mouspress+wheel)</li>
<li>select pencil</li>
<li>mouse press on canvas</li>
</ol>
<p>Thanks in advance.
If any query comments I will add more clarity.</p>
<p>Below is the code of mousepressed method in the for loop we are setting pixel values</p>
<pre><code>mousePressed(mouseX, mouseY) {
      if (this.menuSelection === 'drawPencil') {
        this.mapImage.loadPixels()
        let size = 1
        let y = mouseY
        for (let i = mouseX - size / 2; i &lt; mouseX + size / 2; i++) {
          for (let j = y - size / 2; j &lt; y + size / 2; j++) {
            this.mapImage.set(i, j, this.p5.color(255))
            //console.log('i,j', i, j)
          }
        }
        this.mapImage.updatePixels()
        return
      }
    },

</code></pre>
<p><a href=""https://i.sstatic.net/W3EUS.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/W3EUS.png"" alt=""enter image description here"" /></a></p>
",
tags:"<javascript><vue.js><p5.js>",
score:7,
creationDate:2023-12-14 11:36:35,
creationDate:2024-01-02 00:29:41,
score:2,
acceptedResponderReputation:9717,
acceptedResponder:16930239,
QuestionerReputation:275,
Questioner:18027512}
{title:"Fetching Data from API Route in Next.js 13 Server Component",
id:"https://stackoverflow.com/questions/76808595",
body:"<p>I'm currently learning Next.js 13 and I'm trying to fetch data from a PocketBase database to display in a table. I've created an API route that connects to the database and retrieves the data. However, I'm having trouble fetching this data in a server component.</p>
<p>Here's the structure of my project:</p>
<pre><code>app/
  api/
    ingresos/
      route.ts
  components/
    tablaIngresosCliente.tsx
  ingresos/
    page.tsx
  ...
</code></pre>
<p>In <code>route.ts</code>, I connect to the PocketBase database and fetch the data:</p>
<pre class=""lang-js prettyprint-override""><code>// app/api/ingresos/route.ts
import { NextResponse } from 'next/server';
import PocketBase from 'pocketbase';

export async function GET(request: Request) {
  const pb = new PocketBase('http://127.0.0.1:8090');
  try {
    const records = await pb.collection('ingresos').getFullList({
      sort: '-created',
    });
    return NextResponse.json(records);
    
  } catch (error) {
    console.error(error)
    return new Response('Could not fetch', { status: 500 })
  }      
}
</code></pre>
<p>In <code>tablaIngresosCliente.tsx</code>, I'm trying to fetch the data from the API route:</p>
<pre class=""lang-js prettyprint-override""><code>// app/components/tablaIngresosCliente.tsx
export default async function TablaIngresos() {
    const res = await fetch('/api/ingresos');
    const ingresos = await res.json();

    return (
        &lt;div className=&quot;flex flex-col&quot;&gt;
            &lt;div className=&quot;overflow-x-auto sm:-mx-6 lg:-mx-8&quot;&gt;
                &lt;div className=&quot;inline-block min-w-full py-2 sm:px-6 lg:px-8&quot;&gt;
                    &lt;div className=&quot;overflow-hidden&quot;&gt;
                        &lt;table className=&quot;min-w-full text-center text-sm font-light&quot;&gt;
                            &lt;thead className=&quot;border-b bg-neutral-800 font-medium text-white dark:border-neutral-500 dark:bg-neutral-900&quot;&gt;
                                &lt;tr&gt;
                                    &lt;th scope=&quot;col&quot; className=&quot; px-6 py-4&quot;&gt;#&lt;/th&gt;
                                    &lt;th scope=&quot;col&quot; className=&quot; px-6 py-4&quot;&gt;Fuente&lt;/th&gt;
                                    &lt;th scope=&quot;col&quot; className=&quot; px-6 py-4&quot;&gt;Cantidad&lt;/th&gt;
                                    &lt;th scope=&quot;col&quot; className=&quot; px-6 py-4&quot;&gt;Fecha&lt;/th&gt;
                                &lt;/tr&gt;
                            &lt;/thead&gt;
                            &lt;tbody&gt;
                                {ingresos.map((item, index) =&gt; (
                                    &lt;tr key={index} className=&quot;border-b dark:border-neutral-500&quot;&gt;
                                        &lt;td className=&quot;whitespace-nowrap  px-6 py-4 font-medium&quot;&gt;{index + 1}&lt;/td&gt;
                                        &lt;td className=&quot;whitespace-nowrap  px-6 py-4&quot;&gt;{item.fuente}&lt;/td&gt;
                                        &lt;td className=&quot;whitespace-nowrap  px-6 py-4&quot;&gt;{item.cantidad}&lt;/td&gt;
                                        &lt;td className=&quot;whitespace-nowrap  px-6 py-4&quot;&gt;{item.fecha}&lt;/td&gt;
                                    &lt;/tr&gt;
                                ))}
                            &lt;/tbody&gt;
                        &lt;/table&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    );
}
</code></pre>
<p>With this setup, I'm able to get the correct response when I visit the <code>/api/ingresos</code> route in my browser. However, I'm still unsure about how to use this API route in my <code>tablaIngresosCliente.tsx</code> page component to fetch the data.</p>
<p>I'm aware that I could potentially use server component actions, but I chose this approach because I plan to use a client component to make a POST request to add new data to the database. I thought that using the API route would be a good way to handle both GET and POST requests.</p>
<p>I'm wondering if this is the correct approach for fetching data in Next.js 13. Is it recommended to fetch data from an API route in a server component, or is there a better way to fetch and display data in Next.js 13?</p>
<p>Any guidance would be greatly appreciated. Thank you!</p>
",
tags:"<javascript><reactjs><next.js><next.js13>",
score:7,
creationDate:2023-08-01 04:51:10,
creationDate:2023-08-01 09:51:28,
score:2,
acceptedResponderReputation:18528,
acceptedResponder:9640177,
QuestionerReputation:467,
Questioner:14000501}
{title:"Google Sign-In Not Working in Next.js with Firebase due to Cross-Origin-Opener-Policy Error",
id:"https://stackoverflow.com/questions/76555769",
body:"<p>I am developing a web application using Next.js and Firebase. I have successfully implemented Google sign-in in my application, but I've encountered an issue which is preventing the sign-in process from completing as expected.</p>
<p>When I attempt to sign in, a popup window appears as intended. However, in the console, I see the following error:</p>
<pre><code>Cross-Origin-Opener-Policy policy would block the window.closed call.
</code></pre>
<p>Because of this error, the sign-in process doesn't complete and the user is not properly signed in.</p>
<p>Some further context: I'm testing this functionality in a development environment, on localhost. The <strong>issue is active on Chrome, but not on Firefox.</strong></p>
<p>Could this error be due to a misconfiguration of the Cross-Origin-Opener-Policy? If so, how can I correctly configure this policy for Google Sign-in with Firebase in a Next.js application?</p>
<p><a href=""https://i.sstatic.net/h8Xo4.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/h8Xo4.png"" alt=""enter image description here"" /></a></p>
",
tags:"<javascript><node.js><reactjs><firebase><authentication>",
score:6,
creationDate:2023-06-26 10:21:53,
creationDate:2023-06-30 15:10:38,
score:2,
acceptedResponderReputation:18528,
acceptedResponder:9640177,
QuestionerReputation:558,
Questioner:11220076}
{title:"Using Moditect to add module-info to existing maven dependencies",
id:"https://stackoverflow.com/questions/76400567",
body:"<p>I am using JavaFX and have some dependencies that are not automatic modules.  When trying to run <code>mvn clean javafx:jlink</code> I get the following error:</p>
<pre><code>Error: automatic module cannot be used with jlink: org.apache.commons.io from [...]`
</code></pre>
<p>This also errored for <code>org.apache.commons.commons-lang3</code> and <code>commons-codec.commons-codec</code>. Which error I was shown was random.</p>
<p>So I looked into using jdeps to generate a module info for the dependency, e.g.</p>
<pre><code>jdeps --generate-module-info tmp .../.m2/repository/commons-io/commons-io/2.12.0/commons-io-2.12.0.jar
</code></pre>
<p>Then I used Moditect to add the module-info to the existing jar:</p>
<pre class=""lang-xml prettyprint-override""><code>&lt;plugin&gt;
    &lt;groupId&gt;org.moditect&lt;/groupId&gt;
    &lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;
    &lt;version&gt;1.0.0.Final&lt;/version&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;id&gt;add-module-infos&lt;/id&gt;
            &lt;phase&gt;generate-resources&lt;/phase&gt;
            &lt;goals&gt;
                &lt;goal&gt;add-module-info&lt;/goal&gt;
            &lt;/goals&gt;
            &lt;configuration&gt;
                &lt;outputDirectory&gt;${project.build.directory}/modules&lt;/outputDirectory&gt;
                &lt;modules&gt;
                    &lt;module&gt;
                        &lt;artifact&gt;
                            &lt;groupId&gt;commons-io&lt;/groupId&gt;
                            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;
                            &lt;version&gt;2.12.0&lt;/version&gt;
                        &lt;/artifact&gt;
                        &lt;moduleInfoSource&gt;
                            module org.apache.commons.io {
                                exports org.apache.commons.io;
                                exports org.apache.commons.io.build;
                                exports org.apache.commons.io.charset;
                                exports org.apache.commons.io.comparator;
                                exports org.apache.commons.io.file;
                                exports org.apache.commons.io.file.attribute;
                                exports org.apache.commons.io.file.spi;
                                exports org.apache.commons.io.filefilter;
                                exports org.apache.commons.io.function;
                                exports org.apache.commons.io.input;
                                exports org.apache.commons.io.input.buffer;
                                exports org.apache.commons.io.monitor;
                                exports org.apache.commons.io.output;
                                exports org.apache.commons.io.serialization;
                            }
                        &lt;/moduleInfoSource&gt;
                    &lt;/module&gt;
                    &lt;module&gt;
                        &lt;artifact&gt;
                            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
                            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;
                            &lt;version&gt;3.12.0&lt;/version&gt;
                        &lt;/artifact&gt;
                        &lt;moduleInfoSource&gt;
                            module org.apache.commons.lang3 {
                                requires transitive java.desktop;

                                exports org.apache.commons.lang3;
                                exports org.apache.commons.lang3.arch;
                                exports org.apache.commons.lang3.builder;
                                exports org.apache.commons.lang3.compare;
                                exports org.apache.commons.lang3.concurrent;
                                exports org.apache.commons.lang3.concurrent.locks;
                                exports org.apache.commons.lang3.event;
                                exports org.apache.commons.lang3.exception;
                                exports org.apache.commons.lang3.function;
                                exports org.apache.commons.lang3.math;
                                exports org.apache.commons.lang3.mutable;
                                exports org.apache.commons.lang3.reflect;
                                exports org.apache.commons.lang3.stream;
                                exports org.apache.commons.lang3.text;
                                exports org.apache.commons.lang3.text.translate;
                                exports org.apache.commons.lang3.time;
                                exports org.apache.commons.lang3.tuple;
                            }
                        &lt;/moduleInfoSource&gt;
                    &lt;/module&gt;
                    &lt;module&gt;
                        &lt;artifact&gt;
                            &lt;groupId&gt;commons-codec&lt;/groupId&gt;
                            &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;
                            &lt;version&gt;1.15&lt;/version&gt;
                        &lt;/artifact&gt;
                        &lt;moduleInfoSource&gt;
                            module org.apache.commons.codec {
                                exports org.apache.commons.codec;
                                exports org.apache.commons.codec.binary;
                                exports org.apache.commons.codec.cli;
                                exports org.apache.commons.codec.digest;
                                exports org.apache.commons.codec.language;
                                exports org.apache.commons.codec.language.bm;
                                exports org.apache.commons.codec.net;
                            }
                        &lt;/moduleInfoSource&gt;
                    &lt;/module&gt;
                &lt;/modules&gt;
            &lt;/configuration&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
</code></pre>
<p>But I am still getting the same errors.</p>
<p>My module-info:</p>
<pre class=""lang-java prettyprint-override""><code>module uk.co.conoregan.showrenamer {
    requires info.movito.themoviedbapi;
    requires java.prefs;
    requires javafx.fxml;
    requires javafx.controls;
    requires org.apache.commons.io;
    requires org.slf4j;

    opens uk.co.conoregan.showrenamer to javafx.fxml, javafx.graphics;
    opens uk.co.conoregan.showrenamer.controller to javafx.fxml;

    exports uk.co.conoregan.showrenamer;
    exports uk.co.conoregan.showrenamer.api;
    exports uk.co.conoregan.showrenamer.config.preference;
    exports uk.co.conoregan.showrenamer.config.property;
    exports uk.co.conoregan.showrenamer.controller;
    exports uk.co.conoregan.showrenamer.suggestion;
    exports uk.co.conoregan.showrenamer.util;
}
</code></pre>
<p>My full pom.xml:</p>
<pre class=""lang-xml prettyprint-override""><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;name&gt;ShowRenamer&lt;/name&gt;
    &lt;groupId&gt;uk.co.conoregan.show-renamer&lt;/groupId&gt;
    &lt;artifactId&gt;show-renamer&lt;/artifactId&gt;
    &lt;version&gt;1.4.0&lt;/version&gt;

    &lt;properties&gt;
        &lt;maven.compiler.java.version&gt;17&lt;/maven.compiler.java.version&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;junit.version&gt;5.9.3&lt;/junit.version&gt;
        &lt;javafx.version&gt;20.0.1&lt;/javafx.version&gt;
        &lt;slf4j.version&gt;2.0.7&lt;/slf4j.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-api --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
            &lt;version&gt;${slf4j.version}&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!-- https://mvnrepository.com/artifact/org.slf4j/slf4j-simple --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
            &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;
            &lt;version&gt;${slf4j.version}&lt;/version&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;!-- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-api --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;
            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;
            &lt;version&gt;${junit.version}&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;
            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;
            &lt;version&gt;${junit.version}&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;!-- https://mvnrepository.com/artifact/org.mockito/mockito-core --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.mockito&lt;/groupId&gt;
            &lt;artifactId&gt;mockito-core&lt;/artifactId&gt;
            &lt;version&gt;5.3.1&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;!-- JavaFX --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;
            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;
            &lt;version&gt;${javafx.version}&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;
            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;
            &lt;version&gt;${javafx.version}&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!-- https://mvnrepository.com/artifact/commons-io/commons-io --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;commons-io&lt;/groupId&gt;
            &lt;artifactId&gt;commons-io&lt;/artifactId&gt;
            &lt;version&gt;2.12.0&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;!-- https://search.maven.org/artifact/com.github.holgerbrandl/themoviedbapi --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.github.holgerbrandl&lt;/groupId&gt;
            &lt;artifactId&gt;themoviedbapi&lt;/artifactId&gt;
            &lt;version&gt;1.15&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;testResources&gt;
            &lt;testResource&gt;
                &lt;directory&gt;${project.basedir}/src/test/resources&lt;/directory&gt;
            &lt;/testResource&gt;
        &lt;/testResources&gt;

        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.moditect&lt;/groupId&gt;
                &lt;artifactId&gt;moditect-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;1.0.0.Final&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;id&gt;add-module-infos&lt;/id&gt;
                        &lt;phase&gt;generate-resources&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;add-module-info&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;
                            &lt;outputDirectory&gt;${project.build.directory}/modules&lt;/outputDirectory&gt;
                            &lt;modules&gt;
                                &lt;module&gt;
                                    &lt;artifact&gt;
                                        &lt;groupId&gt;commons-io&lt;/groupId&gt;
                                        &lt;artifactId&gt;commons-io&lt;/artifactId&gt;
                                        &lt;version&gt;2.12.0&lt;/version&gt;
                                    &lt;/artifact&gt;
                                    &lt;moduleInfoSource&gt;
                                        module org.apache.commons.io {
                                            exports org.apache.commons.io;
                                            exports org.apache.commons.io.build;
                                            exports org.apache.commons.io.charset;
                                            exports org.apache.commons.io.comparator;
                                            exports org.apache.commons.io.file;
                                            exports org.apache.commons.io.file.attribute;
                                            exports org.apache.commons.io.file.spi;
                                            exports org.apache.commons.io.filefilter;
                                            exports org.apache.commons.io.function;
                                            exports org.apache.commons.io.input;
                                            exports org.apache.commons.io.input.buffer;
                                            exports org.apache.commons.io.monitor;
                                            exports org.apache.commons.io.output;
                                            exports org.apache.commons.io.serialization;
                                        }
                                    &lt;/moduleInfoSource&gt;
                                &lt;/module&gt;
                                &lt;module&gt;
                                    &lt;artifact&gt;
                                        &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
                                        &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;
                                        &lt;version&gt;3.12.0&lt;/version&gt;
                                    &lt;/artifact&gt;
                                    &lt;moduleInfoSource&gt;
                                        module org.apache.commons.lang3 {
                                            requires transitive java.desktop;

                                            exports org.apache.commons.lang3;
                                            exports org.apache.commons.lang3.arch;
                                            exports org.apache.commons.lang3.builder;
                                            exports org.apache.commons.lang3.compare;
                                            exports org.apache.commons.lang3.concurrent;
                                            exports org.apache.commons.lang3.concurrent.locks;
                                            exports org.apache.commons.lang3.event;
                                            exports org.apache.commons.lang3.exception;
                                            exports org.apache.commons.lang3.function;
                                            exports org.apache.commons.lang3.math;
                                            exports org.apache.commons.lang3.mutable;
                                            exports org.apache.commons.lang3.reflect;
                                            exports org.apache.commons.lang3.stream;
                                            exports org.apache.commons.lang3.text;
                                            exports org.apache.commons.lang3.text.translate;
                                            exports org.apache.commons.lang3.time;
                                            exports org.apache.commons.lang3.tuple;
                                        }
                                    &lt;/moduleInfoSource&gt;
                                &lt;/module&gt;
                                &lt;module&gt;
                                    &lt;artifact&gt;
                                        &lt;groupId&gt;commons-codec&lt;/groupId&gt;
                                        &lt;artifactId&gt;commons-codec&lt;/artifactId&gt;
                                        &lt;version&gt;1.15&lt;/version&gt;
                                    &lt;/artifact&gt;
                                    &lt;moduleInfoSource&gt;
                                        module org.apache.commons.codec {
                                            exports org.apache.commons.codec;
                                            exports org.apache.commons.codec.binary;
                                            exports org.apache.commons.codec.cli;
                                            exports org.apache.commons.codec.digest;
                                            exports org.apache.commons.codec.language;
                                            exports org.apache.commons.codec.language.bm;
                                            exports org.apache.commons.codec.net;
                                        }
                                    &lt;/moduleInfoSource&gt;
                                &lt;/module&gt;
                            &lt;/modules&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;

            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.1.0&lt;/version&gt;
            &lt;/plugin&gt;

            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.11.0&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;source&gt;${maven.compiler.java.version}&lt;/source&gt;
                    &lt;target&gt;${maven.compiler.java.version}&lt;/target&gt;
                    &lt;release&gt;${maven.compiler.java.version}&lt;/release&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;

            &lt;plugin&gt;
                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;
                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;0.0.8&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;
                        &lt;id&gt;default-cli&lt;/id&gt;
                        &lt;configuration&gt;
                            &lt;mainClass&gt;uk.co.conoregan.showrenamer/uk.co.conoregan.showrenamer.ShowRenamerApplication&lt;/mainClass&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>
<p>I also ran <code>mvn dependency:tree</code> to generate the following:</p>
<pre><code>[INFO] uk.co.conoregan.show-renamer:show-renamer:jar:1.4.0
[INFO] +- org.slf4j:slf4j-api:jar:2.0.7:compile
[INFO] +- org.slf4j:slf4j-simple:jar:2.0.7:runtime
[INFO] +- org.junit.jupiter:junit-jupiter-api:jar:5.9.3:test
[INFO] |  +- org.opentest4j:opentest4j:jar:1.2.0:test
[INFO] |  +- org.junit.platform:junit-platform-commons:jar:1.9.3:test
[INFO] |  \- org.apiguardian:apiguardian-api:jar:1.1.2:test
[INFO] +- org.junit.jupiter:junit-jupiter-engine:jar:5.9.3:test
[INFO] |  \- org.junit.platform:junit-platform-engine:jar:1.9.3:test
[INFO] +- org.mockito:mockito-core:jar:5.3.1:test
[INFO] |  +- net.bytebuddy:byte-buddy:jar:1.14.4:test
[INFO] |  +- net.bytebuddy:byte-buddy-agent:jar:1.14.4:test
[INFO] |  \- org.objenesis:objenesis:jar:3.3:test
[INFO] +- org.openjfx:javafx-controls:jar:20.0.1:compile
[INFO] |  +- org.openjfx:javafx-controls:jar:win:20.0.1:compile
[INFO] |  \- org.openjfx:javafx-graphics:jar:20.0.1:compile
[INFO] |     +- org.openjfx:javafx-graphics:jar:win:20.0.1:compile
[INFO] |     \- org.openjfx:javafx-base:jar:20.0.1:compile
[INFO] |        \- org.openjfx:javafx-base:jar:win:20.0.1:compile
[INFO] +- org.openjfx:javafx-fxml:jar:20.0.1:compile
[INFO] |  \- org.openjfx:javafx-fxml:jar:win:20.0.1:compile
[INFO] +- commons-io:commons-io:jar:2.12.0:compile
[INFO] \- com.github.holgerbrandl:themoviedbapi:jar:1.15:compile
[INFO]    +- org.slf4j:jcl-over-slf4j:jar:2.0.7:runtime
[INFO]    +- com.fasterxml.jackson.core:jackson-annotations:jar:2.15.0:runtime
[INFO]    +- com.fasterxml.jackson.core:jackson-core:jar:2.15.0:runtime
[INFO]    +- com.fasterxml.jackson.core:jackson-databind:jar:2.15.0:runtime
[INFO]    +- com.google.guava:guava:jar:31.1-jre:runtime
[INFO]    |  +- com.google.guava:failureaccess:jar:1.0.1:runtime
[INFO]    |  +- com.google.guava:listenablefuture:jar:9999.0-empty-to-avoid-conflict-with-guava:runtime
[INFO]    |  +- com.google.code.findbugs:jsr305:jar:3.0.2:runtime
[INFO]    |  +- org.checkerframework:checker-qual:jar:3.12.0:runtime
[INFO]    |  +- com.google.errorprone:error_prone_annotations:jar:2.11.0:runtime
[INFO]    |  \- com.google.j2objc:j2objc-annotations:jar:1.3:runtime
[INFO]    +- org.apache.commons:commons-lang3:jar:3.12.0:runtime
[INFO]    \- commons-codec:commons-codec:jar:1.15:runtime
[INFO] ------------------------------------------------------------------------
</code></pre>
",
tags:"<java><maven><jlink><moditect>",
score:6,
creationDate:2023-06-04 13:04:52,
creationDate:2023-09-20 17:16:54,
score:2,
acceptedResponderReputation:134,
acceptedResponder:9776809,
QuestionerReputation:469,
Questioner:5900660}
{title:"Use lazycolumn jetpack compose lag more than use recycleview",
id:"https://stackoverflow.com/questions/76106992",
body:"<p>I just learned jetpack compose and I switched from recycle to lazy column but when I do it it lags much more than recycle</p>
<p>after adding about 100 items to the application the app is lagging, is there any way to reduce the lag for the lazy column?
I have set the id for the item and used R8 to build
this is code:<a href=""https://github.com/trongan123/TODOAPP"" rel=""noreferrer"">https://github.com/trongan123/TODOAPP</a></p>
<pre><code> val tabs: MutableList&lt;TabItem&gt; = ArrayList&lt;TabItem&gt;().toMutableList()
tabs += TabItem(&quot;All&quot;) {
    AllItemScreen(
        listAll, openUpdateItemScreen = {
            openUpdateItemScreen()
        }, viewModel = viewModel
    )
}
tabs += TabItem(&quot;Pending&quot;) {
    PendingItemScreen(listAll.filter { it.status.equals(&quot;pending&quot;) }, openUpdateItemScreen = {
        openUpdateItemScreen()
    }, viewModel = viewModel)
}
tabs += TabItem(&quot;Completed&quot;) {
    CompletedItemScreen(
        listAll.filter { it.status.equals(&quot;completed&quot;) },
        openUpdateItemScreen = {
            openUpdateItemScreen()
        }, viewModel = viewModel
    )
}
val pagerState = rememberPagerState()
Scaffold(
    floatingActionButton = {
        FloatingActionButton(
            onClick = { openAddItemScreen() }
        ) {
            Icon(Icons.Filled.Add, &quot;&quot;)
        }
    }
) { padding -&gt;
    val textState = remember { mutableStateOf(TextFieldValue(&quot;&quot;)) }
    Column(
        modifier = Modifier
            .padding(padding)
    ) {
        SearchView(state = textState, viewModel)
        Spacer(modifier = Modifier.size(16.dp))
        Tabs(
            tabs = tabs, pagerState = pagerState,
            viewModel = viewModel
        )
        TabsContent(tabs = tabs, pagerState = pagerState)
    }
}
</code></pre>
<p>AllItemScreen</p>
<pre><code> Column(
    modifier = Modifier
        .fillMaxSize()

) {
    LazyColumn() {

        items(listAll) { i -&gt;
            ItemList(
                i,
                openUpdateItemScreen = {
                    openUpdateItemScreen()
                }, viewModel
            )
        }
    }
}
</code></pre>
<p>ItemList</p>
<pre><code> val isChecked = remember { mutableStateOf(false) }
Card(
    modifier = Modifier
        .fillMaxWidth()
        .padding(5.dp)
        .clickable {
            if (isChecked.value == true) {
                isChecked.value = false
                viewModel.setClearAll(i.id, false)
                viewModel.setCheckData(i.id, false)
            } else {
                isChecked.value = true
                viewModel.setClearAll(i.id, true)
                viewModel.setCheckData(i.id, true)
            }
        },
    elevation = 5.dp
) {
    Column(
        modifier = Modifier.fillMaxSize(),
        verticalArrangement = Arrangement.Center
    ) {
        Spacer(modifier = Modifier.size(16.dp))
        Row {
            val check: List&lt;Int&gt;? = viewModel.getListMutableCheck().value as List&lt;Int&gt;
            if (check != null) {
                isChecked.value = check.contains(i.id)
            }
            Checkbox(
                checked = isChecked.value,
                onCheckedChange = {
                    isChecked.value = it
                    viewModel.setClearAll(i.id, it)
                    viewModel.setCheckData(i.id, it)
                }
            )
            Spacer(modifier = Modifier.size(16.dp))
            if (!isChecked.value) {
                Text(
                    i.title, modifier = Modifier
                        .padding(top = 10.dp)
                )
            } else Text(
                i.title,
                modifier = Modifier
                    .padding(top = 10.dp),
                style = TextStyle(textDecoration = TextDecoration.LineThrough)
            )
            Spacer(
                Modifier
                    .weight(1f)
                    .fillMaxHeight()
            )
            Image(painter = painterResource(id = R.drawable.ellipsis),
                contentDescription = null,

                modifier = Modifier
                    .clickable {
                        todoItem = i
                        openUpdateItemScreen()
                    }
                    .size(30.dp))
            Spacer(modifier = Modifier.size(10.dp))
        }

    }
}
</code></pre>
",
tags:"<java><kotlin><android-jetpack-compose><android-livedata><lazycolumn>",
score:6,
creationDate:2023-04-26 03:33:36,
creationDate:2023-04-26 10:22:46,
score:2,
acceptedResponderReputation:1405,
acceptedResponder:17293779,
QuestionerReputation:63,
Questioner:21740932}
{title:"""Warning: Prop `className` did not match"" while setting up a theme provider in Next.js",
id:"https://stackoverflow.com/questions/76185225",
body:"<p>I'm trying to make a theme provider with the Context API to set the application theme, which is just a <code>className</code> on <code>body</code>.</p>
<p>The context it's pretty simple. On the lazy initializer of the theme state, first, I check if the theme is on <code>localStorage</code>. If the theme is not in local storage, then I set the theme based on the user system preference.</p>
<pre><code>'use client'

import { createContext, useEffect, useState } from 'react'
import {
  type ThemeContextData,
  type ThemeProviderProps,
  type Themes
} from './types'
import { darkTheme, lightTheme } from '@/styles/themes.css'

export const ThemeContext = createContext&lt;ThemeContextData&gt;(
  {} as ThemeContextData
)

export function ThemeProvider({
  children,
  className
}: ThemeProviderProps): JSX.Element {
  const [theme, setTheme] = useState&lt;Themes&gt;(() =&gt; {
    if (typeof window !== 'undefined') {
      const isThemeOnLocalStorage = window.localStorage.getItem(
        '@matheussartori/theme'
      )

      if (isThemeOnLocalStorage) {
        return isThemeOnLocalStorage as Themes
      }

      const isSystemThemeDark = window.matchMedia(
        '(prefers-color-scheme: dark)'
      ).matches

      if (isSystemThemeDark) {
        return 'dark'
      }
    }

    return 'light'
  })

  useEffect(() =&gt; {
    if (typeof window !== 'undefined') {
      window.localStorage.setItem('@matheussartori/theme', theme)
    }
  }, [theme])

  const themeClassNames = {
    light: lightTheme,
    dark: darkTheme
  }

  const classNames = className
    ? `${themeClassNames[theme]} ${className}`
    : themeClassNames[theme]

  return (
    &lt;ThemeContext.Provider value={{ theme, setTheme }}&gt;
      &lt;body className={classNames}&gt;{children}&lt;/body&gt;
    &lt;/ThemeContext.Provider&gt;
  )
}
</code></pre>
<p>In my <code>layout.tsx</code>,I got the following code as well:</p>
<pre><code>import { Inter } from 'next/font/google'

import '@/styles/global.css'
import { ThemeProvider } from '@/contexts/themes/ThemeProvider'

const inter = Inter({ subsets: ['latin'] })

export const metadata = {
  title: 'lorem',
  description:
    'lorem'
}

export default function RootLayout({
  children
}: {
  children: React.ReactNode
}): JSX.Element {
  return (
    &lt;html lang=&quot;en&quot;&gt;
      &lt;ThemeProvider className={`${inter.className}`}&gt;{children}&lt;/ThemeProvider&gt;
    &lt;/html&gt;
  )
}
</code></pre>
<p>The problem that's happening, it's probably because of the server renderization on the ThemeProvider. The error that shows in the browser, is this one:</p>
<blockquote>
<p>Warning: Prop <code>className</code> did not match. Server: &quot;themes_lightTheme__1ra6bom9 __className_0ec1f4&quot; Client: &quot;themes_darkTheme__1ra6bom0 __className_0ec1f4&quot;</p>
</blockquote>
<p>Since the server doesn't know the <code>window</code>/<code>localStorage</code>, apparently, on the rehydration, the server is saying that the theme must be light, but it is dark.</p>
<p>Is there a better way of doing this approach?</p>
",
tags:"<javascript><reactjs><typescript><next.js>",
score:6,
creationDate:2023-05-05 19:02:46,
creationDate:2023-05-06 17:18:58,
score:2,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:189,
Questioner:8160664}
{title:"find the sum of all integers in the range [1, n] that are divisible by 3, 5, or 7 using multithread basics in java",
id:"https://stackoverflow.com/questions/76163443",
body:"<p>explanation of the question:
you must write a multithreaded program that finds all
integers in the range [1, n] that are divisible by 3, 5, or 7. Return the
sum of all unique integers as your answer.
Note that an integer such as 15 (which is a multiple of 3 and 5) is only
counted once.
The Positive integer n &gt; 0 is given to you as input. Create as many threads as
you need to solve the problem. You can use a Thread Pool for bonus points.</p>
<pre><code>Example:
Input: n = 10
Output: sum = 40
Explanation: Numbers in the range [1, 10] that are divisible by 3, 5, or 7 are:
3, 5, 6, 7, 9, 10. The sum of these numbers is 40.
</code></pre>
<p>My solution and problem that I faced:
in this program I created three threads each for finding the integers that are divided by 3,5 and 7 separately then it will store them all in the dividends array list and by the following code it will remove the repeated ones in the array list:</p>
<pre><code>Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);
    dividends.clear();
    dividends.addAll(set);
</code></pre>
<p>I used some test cases that were provided by our teacher and the problem is that in the testcases that n=1000 and n=76293 sum won't show the amount that was expected:</p>
<pre><code>n=1000
expected sum:272066
actual sum:247377
</code></pre>
<p>and the other problem is that the actual sum keeps changing every time I run the testcase.
can someone tell me what the problem of my code is and how I can fix it</p>
<p>my code:</p>
<pre><code>import java.util.*;
public class FindMultiples
{

public static ArrayList&lt;Integer&gt; dividends = new ArrayList&lt;&gt;();
public static int temp = 0;
public static synchronized void increment(){
    dividends.add(temp);
}
public static class thread implements Runnable{

    public int divisor;
    public int n;

    public thread(int n , int divisor){
        this.n=n;
        this.divisor=divisor;
    }

    @Override
    public void run() {

        for (int i=1 ; i&lt;=n ; i++){
            if (i%divisor==0){
                temp=i;
                increment();
            }
        }
    }
}

public int getSum(int n) {
    int sum = 0;
    Thread thread1 = new Thread(new thread(n,3));
    Thread thread2 = new Thread(new thread(n,7));
    Thread thread3 = new Thread(new thread(n,5));
    
    thread3.start();
    thread2.start();
    thread1.start();
    try {
        thread3.join();
        thread2.join();
        thread1.join();
    }catch (InterruptedException e){

    }
    Set&lt;Integer&gt; set = new HashSet&lt;&gt;(dividends);
    dividends.clear();
    dividends.addAll(set);

    for (int i : dividends){
        sum+=i;
    }

    return sum;
}

public static void main(String[] args) {
}
}
</code></pre>
",
tags:"<java><multithreading>",
score:6,
creationDate:2023-05-03 11:46:46,
creationDate:2023-05-03 12:39:49,
score:2,
acceptedResponderReputation:56,
acceptedResponder:13157139,
QuestionerReputation:83,
Questioner:21232984}
{title:"How to avoid javac warning: unknown enum constant, reason: class file not found, when dependency has optional annotations with enums",
id:"https://stackoverflow.com/questions/75864102",
body:"<p>I have this example setup:</p>
<p><strong><code>p.E</code></strong></p>
<pre class=""lang-java prettyprint-override""><code>package p;

public enum E { E }
</code></pre>
<p><strong><code>p.A</code></strong></p>
<pre class=""lang-java prettyprint-override""><code>package p;

import java.lang.annotation.*;

@Retention(RetentionPolicy.RUNTIME)
public @interface A {
    p.E e();
}
</code></pre>
<p><strong><code>q.Test</code></strong></p>
<pre class=""lang-java prettyprint-override""><code>package q;

import p.*;

@A(e = E.E)
public class Test {
    public static void main(String[] args) {
        System.out.println(&quot;Test.main()&quot;);
    }
}
</code></pre>
<p>So, I can now do this:</p>
<pre class=""lang-none prettyprint-override""><code>$ javac q/Test.java
$ rm p/*.class
$ ll */*
-rw-r--r-- 1 lukas 197609 118 Mar 28 10:21 p/A.java
-rw-r--r-- 1 lukas 197609  32 Mar 28 09:43 p/E.java
-rw-r--r-- 1 lukas 197609 486 Mar 28 10:22 q/Test.class
-rw-r--r-- 1 lukas 197609 153 Mar 28 09:55 q/Test.java
$ java q/Test
Test.main()
</code></pre>
<p>No problem, the annotations are optional and ignored by the runtime, no <code>NoClassDefFoundError</code></p>
<p>However, when I remove the source files of <code>p</code> as well, keeping the compiled <code>Test.class</code>:</p>
<pre><code>$ rm -Rf p
</code></pre>
<p>And then create:</p>
<p><strong><code>x.Test2</code></strong></p>
<pre class=""lang-java prettyprint-override""><code>package x;

public class Test2 {
    q.Test test;
}
</code></pre>
<p>Compiling that class gives a warning:</p>
<pre class=""lang-none prettyprint-override""><code>$ javac x/Test2.java
warning: unknown enum constant E.E
  reason: class file for p.E not found
1 warning
</code></pre>
<h2>Alternatives, that don't produce such a warning</h2>
<h3>No enum</h3>
<p>I don't get this warning for an annotation that doesn't depend on any enums. I.e. repeat the procedure for these, and there's no warning:</p>
<p><strong><code>p.A</code></strong></p>
<pre class=""lang-java prettyprint-override""><code>package p;

import java.lang.annotation.*;

@Retention(RetentionPolicy.RUNTIME)
public @interface A {}
</code></pre>
<p><strong><code>q.Test</code></strong></p>
<pre class=""lang-java prettyprint-override""><code>package q;

import p.*;

@A
public class Test {
    public static void main(String[] args) {
        System.out.println(&quot;Test.main()&quot;);
    }
}
</code></pre>
<h3>Class reference</h3>
<p>When <code>A</code> references <code>Class&lt;E&gt;</code> instead of an <code>E.E</code> enum value, I still don't get any warnings:</p>
<p><strong><code>p.A</code></strong></p>
<pre class=""lang-java prettyprint-override""><code>package p;

import java.lang.annotation.*;

@Retention(RetentionPolicy.RUNTIME)
public @interface A {
    Class&lt;?&gt; a();
}
</code></pre>
<p><strong><code>q.Test</code></strong></p>
<pre class=""lang-java prettyprint-override""><code>package q;

import p.*;

@A(a = E.class)
public class Test {
    public static void main(String[] args) {
        System.out.println(&quot;Test.main()&quot;);
    }
}
</code></pre>
<h2>My questions:</h2>
<ol>
<li>Is this a correct warning according to the JLS? It seems like a bug in javac to me, given the annotation is optional and doesn't produce a warning if there's no <code>enum</code> type involved, but I may be missing something.</li>
<li>Is there any way to work around this warning in client code?</li>
</ol>
<p><strong>For context: the real world use-case is:</strong></p>
<ul>
<li>The <code>p</code> package containing the annotations are from JAXB</li>
<li>The <code>q</code> package containing library code that references the annotations is a library whose dependency on <code>p</code> is optional. (jOOQ to be specific, <a href=""https://github.com/jOOQ/jOOQ/issues/14865"" rel=""noreferrer"">more details here</a>)</li>
<li>The <code>x</code> package is client code, depending on the <code>q</code> package, which has an optional dependency on <code>p</code>, meaning, the dependency is effectively missing by default.</li>
</ul>
",
tags:"<java><annotations><javac>",
score:22,
creationDate:2023-03-28 08:46:55,
creationDate:2023-03-30 13:15:56,
score:2,
acceptedResponderReputation:220762,
acceptedResponder:521799,
QuestionerReputation:220762,
Questioner:521799}
{title:"How to enable the recommended ESLint rules in eslint.config.js?",
id:"https://stackoverflow.com/questions/76080585",
body:"<p>I’m trying to use the <a href=""https://eslint.org/docs/latest/use/configure/configuration-files-new"" rel=""noreferrer"">new ESLint configuration file</a> eslint.config.js (since the <a href=""https://eslint.org/docs/latest/use/configure/configuration-files"" rel=""noreferrer"">old ESLint configuration files</a> .eslintrc.* and package.json will be deprecated in ESLint 9.0.0). The <a href=""https://eslint.org/docs/latest/rules"" rel=""noreferrer"">recommended ESLint rules</a> were enabled by the <code>&quot;extends&quot;: &quot;eslint:recommended&quot;</code> property in the old configuration files, but <a href=""https://eslint.org/blog/2022/08/new-config-system-part-2/#goodbye-extends%2C-hello-flat-cascade"" rel=""noreferrer"">that property does not exist anymore</a> in the new configuration file which relies on <code>import</code> statements.</p>
<p>So I tried this <code>import</code> in eslint.config.js:</p>
<pre class=""lang-js prettyprint-override""><code>import config from 'eslint-config-standard';

export default [
  {
    rules: config.rules
  }
];
</code></pre>
<p>But I got this <code>TypeError</code>:</p>
<pre class=""lang-bash prettyprint-override""><code>$ npm exec eslint .
Oops! Something went wrong! :(

ESLint: 8.39.0

TypeError: Key &quot;rules&quot;: Key &quot;import/export&quot;: Could not find plugin &quot;import&quot;.
</code></pre>
<p><strong>How to solve that issue?</strong></p>
",
tags:"<javascript><eslint>",
score:6,
creationDate:2023-04-22 16:02:54,
creationDate:2023-04-22 17:26:14,
score:2,
acceptedResponderReputation:545,
acceptedResponder:12530613,
QuestionerReputation:8027,
Questioner:2326961}
{title:"Javascript - Finding the N closest points to a given point (2D)",
id:"https://stackoverflow.com/questions/76303143",
body:"<p>I need an algorithm to sort through a list of ~2,500 [longitude, latitude] arrays to find the N closest points to a given [longitude, latitude]. The particular use case is finding the closest taxis for ride hailing</p>
<p>I have searched through online resources and most of them point toward only the minimum value. I have wrote some code where I looped through the list via a forEach and calculated the Euclidean distance to the point of interest, placed the distances into an array, sorted it, then extracted the 3 smallest distances, but then I had to find the indexes of the smallest distances, which leads to a high runtime. I also considered KNN but felt it was overcomplicating the problem</p>
<p>Is there a more efficient way to loop through and extract the 3 closest points? For example, some built-in method?</p>
<p>Edit: Here's an example:</p>
<p>Point of interest: <code>[103, 1.3]</code></p>
<p>Data:</p>
<pre class=""lang-js prettyprint-override""><code>[
    [103.6632, 1.32287], [103.66506, 1.30803], [103.67088, 1.32891],
    [103.67636, 1.3354], [103.67669, 1.32779], [103.67927, 1.31477],
    [103.67927, 1.32757], [103.67958, 1.31458], [103.68508, 1.32469],
    [103.6927, 1.3386], [103.69367, 1.34], [103.69377, 1.37058],
    [103.69431, 1.37161], [103.69519, 1.35543], [103.69538, 1.34725],
    [103.6961, 1.33667], [103.696918716667, 1.35110788333333],
    [103.69731, 1.35], [103.698615333333, 1.33590666666667],
    [103.69975, 1.35], [103.70129, 1.34], [103.70247, 1.34],
    [103.70366, 1.34], [103.70394, 1.33948], [103.70403, 1.34081],
    [103.704697166667, 1.33546383333333], [103.70504, 1.34],
    [103.706281333333, 1.344646], [103.70689, 1.34464]
]
</code></pre>
",
tags:"<javascript><algorithm><sorting>",
score:6,
creationDate:2023-05-22 04:59:11,
creationDate:2023-05-22 06:00:26,
score:2,
acceptedResponderReputation:1182,
acceptedResponder:10545492,
QuestionerReputation:155,
Questioner:21938196}
{title:"Having trouble displaying an image from Google Drive",
id:"https://stackoverflow.com/questions/77803187",
body:"<p>I'm struggling to show an image from Google Drive on my HTML page using JavaScript. Following online guides hasn't quite solved it for me.</p>
<p><strong>HTML (index.html):</strong></p>
<pre class=""lang-html prettyprint-override""><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;Google Drive Image&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
  &lt;img id=&quot;imageElement&quot; alt=&quot;A lovely image&quot;&gt;
  &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p><strong>JavaScript (script.js):</strong></p>
<pre class=""lang-js prettyprint-override""><code>const fileId = '1BEW9tkgVKlp_ebUc17LkXDH-mnPc4ome';
const imageElement = document.getElementById('imageElement');

async function fetchGoogleDriveImage(fileId) {
  try {
    const response = await fetch(`https://drive.google.com/uc?id=${fileId}`);
    const url = URL.createObjectURL(await response.blob());
    imageElement.src = url;
  } catch (error) {
    console.error('Error fetching the image:', error);
  }
}

fetchGoogleDriveImage(fileId);
</code></pre>
<p><strong>Context:</strong></p>
<ul>
<li>Image in Google Drive is set to &quot;Anyone with the link can view.&quot;</li>
<li>Despite that, the image doesn't load in the browser, and the console shows an error.</li>
</ul>
<p><strong>Additional HTML (with pure html):</strong></p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;body&gt;
  &lt;img src=""https://drive.google.com/uc?id=1BEW9tkgVKlp_ebUc17LkXDH-mnPc4ome"" alt=""Your Image Alt Text""&gt;
&lt;/body&gt;</code></pre>
</div>
</div>
</p>
<p><strong><a href=""https://codepen.io/raulpenate/pen/NWJRmaN"" rel=""noreferrer"">CodePen Example</a></strong></p>
<p>Any help is appreciated! Thanks.</p>
",
tags:"<javascript><html><image>",
score:14,
creationDate:2024-01-11 21:41:24,
creationDate:2024-02-03 10:58:51,
score:2,
acceptedResponderReputation:607,
acceptedResponder:15445661,
QuestionerReputation:607,
Questioner:15445661}
{title:"Handle User Inactivity and Logout in React",
id:"https://stackoverflow.com/questions/76001308",
body:"<p>I wanted to refresh the token every 1 hour ONLY if there is a user activity.
Otherwise just remove the token.</p>
<p>Currently, my code below does call the refresh api every 1 hour regardless whether there is user activity or not.</p>
<p>User activity is any movement on your keyboard or mouse.</p>
<pre><code>const App = () =&gt; {
  const refreshTokenInterval = () =&gt; {
    try {
      const isLoggedIn = useAuthStore.getState().isLoggedIn;
      if (isLoggedIn) {
        AuthenticationService.refresh(null, (response) =&gt;
          CookieService.set(activeAccount, response.data)
        );
      }
    } catch (error) {
      console.log(error);
    } finally {
      setTimeout(refreshTokenInterval, 1000 * 60 * 60);
    }
  };

  useEffect(() =&gt; {
    refreshTokenInterval();
  }, []);

  return null;
};

export default App;
</code></pre>
",
tags:"<javascript><reactjs><ecmascript-6>",
score:6,
creationDate:2023-04-13 03:05:06,
creationDate:2023-04-13 05:36:22,
score:2,
acceptedResponderReputation:202595,
acceptedResponder:8690857,
QuestionerReputation:7755,
Questioner:8305219}
{title:"Regex to remove accents, special characters but preserve dash, underline and extension",
id:"https://stackoverflow.com/questions/75999372",
body:"<p>I'm trying to remove accents and special characters except dash(<code>-</code>), underline(<code>_</code>) and preserve the extension.</p>
<p>For example:</p>
<p><code>ÁÉÍÓÚáéíóúâêîôûàèìòùÇãç.,~!@#$%&amp;_-12345.png</code></p>
<p>to:</p>
<p><code>AEIOUaeiouaeiouaeiouCac_-12345.png</code></p>
<p>I came to this result, but the problem is that it's ignoring all dots. I need to ignore only the last occurrence to preserve the extension from filename.</p>
<pre><code>&quot;ÁÉÍÓÚáéíóúâêîôûàèìòùÇãç.,\~!@#$%&amp;_-12345.png&quot;.normalize('NFD').replace(/\[^a-zA-Z0-9-_\]/g, &quot;&quot;)
</code></pre>
<p>I already tried negative look behind like this:</p>
<pre><code>/[^a-zA-Z0-9-]+(?&lt;!\.)/g
</code></pre>
<p>using this <a href=""https://regexr.com/54d2f"" rel=""nofollow noreferrer"">reference</a>, but I didn't have success.</p>
<pre><code>&quot;ÁÉÍÓÚáéíóúâêîôûàèìòùÇãç.,~!@#$%&amp;-12.34.5.png&quot;.normalize('NFD').replace(/[^a-zA-Z0-9-]+(?&lt;!\.)/g, '')
</code></pre>
<p>If I have more than a dot in this case it only removes the first <code>.</code>.</p>
",
tags:"<javascript><regex>",
score:6,
creationDate:2023-04-12 20:00:15,
creationDate:2023-04-12 22:50:24,
score:2,
acceptedResponderReputation:43853,
acceptedResponder:2813224,
QuestionerReputation:93,
Questioner:7932088}
{title:"ThemeProvider from NextUI causing Warning: Extra attributes from the server: class,style",
id:"https://stackoverflow.com/questions/78239051",
body:"<p>I've added <a href=""https://nextui.org/"" rel=""noreferrer"">NextUI</a> to my NextJS 14 app</p>
<p>The issue has been isolated to the ThemeProvider in my main providers.tsx file:</p>
<pre><code>'use client';

import { NextUIProvider } from '@nextui-org/react';
import { ThemeProvider as NextThemesProvider } from 'next-themes';

export default function Providers({ children }: { children: React.ReactNode }) {
  return (
    &lt;NextUIProvider&gt;
      &lt;NextThemesProvider // &lt;-- the issue
        attribute=&quot;class&quot;
        defaultTheme=&quot;dark&quot;
        themes={['light', 'dark', 'modern']}
      &gt;
        {children}
      &lt;/NextThemesProvider&gt;
    &lt;/NextUIProvider&gt;
  );
}
</code></pre>
<p>The problem is this specifically, because if I remove it the error goes away:</p>
<pre><code>&lt;NextThemesProvider
    attribute=&quot;class&quot;
    defaultTheme=&quot;dark&quot;
    themes={['light', 'dark', 'modern']}
&gt;
</code></pre>
<p>The warning</p>
<pre><code>**Warning: Extra attributes from the server: class,style
    at html
    at RedirectErrorBoundary (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/redirect-boundary.js:73:9)
    at RedirectBoundary (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/redirect-boundary.js:81:11)
    at NotFoundErrorBoundary (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/not-found-boundary.js:76:9)
    at NotFoundBoundary (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/not-found-boundary.js:84:11)
    at DevRootNotFoundBoundary (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/dev-root-not-found-boundary.js:33:11)
    at ReactDevOverlay (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/react-dev-overlay/internal/ReactDevOverlay.js:84:9)
    at HotReload (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/react-dev-overlay/hot-reloader-client.js:307:11)
    at Router (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/app-router.js:182:11)
    at ErrorBoundaryHandler (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/error-boundary.js:114:9)
    at ErrorBoundary (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/error-boundary.js:161:11)
    at AppRouter (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/components/app-router.js:538:13)
    at ServerRoot (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/app-index.js:129:11)
    at RSCComponent
    at Root (webpack-internal:///(app-pages-browser)/./node_modules/next/dist/client/app-index.js:145:11)**
</code></pre>
<p>When I dive into the ThemeProvider type:</p>
<pre><code>interface ThemeProviderProps {
    /** List of all available theme names */
    themes?: string[] | undefined;
    /** Forced theme name for the current page */
    forcedTheme?: string | undefined;
    /** Whether to switch between dark and light themes based on prefers-color-scheme */
    enableSystem?: boolean | undefined;
    /** Disable all CSS transitions when switching themes */
    disableTransitionOnChange?: boolean | undefined;
    /** Whether to indicate to browsers which color scheme is used (dark or light) for built-in UI like inputs and buttons */
    enableColorScheme?: boolean | undefined;
    /** Key used to store theme setting in localStorage */
    storageKey?: string | undefined;
    /** Default theme name (for v0.0.12 and lower the default was light). If `enableSystem` is false, the default theme is light */
    defaultTheme?: string | undefined;
    /** HTML attribute modified based on the active theme. Accepts `class` and `data-*` (meaning any data attribute, `data-mode`, `data-color`, etc.) */
    attribute?: string | 'class' | undefined;
    /** Mapping of theme name to HTML attribute value. Object where key is the theme name and value is the attribute value */
    value?: ValueObject | undefined;
    /** Nonce string to pass to the inline script for CSP headers */
    nonce?: string | undefined;
    /** React children */
    children: React.ReactNode;
}
</code></pre>
<p><code>class</code> is ok to send into the <code>attribute</code> prop, is this an issue that React doesn't like?</p>
<p>I've found a few similar issues, but none related to NextUI, any thoughts on how I can remove this warning / error from the console?</p>
<hr />
<p>I did have a custom ThemeContext I created, but I still get the error warning after I comment it out:</p>
<pre><code>import { FC, ReactNode } from 'react';
import Providers from '@/redux/provider';
import MainHeader from '@/components/mainheader';
import SideBar from '@/components/sidebar';
// import { ThemeProvider } from '@/context/ThemeContext';
import { User } from '@/types/user';

interface layoutProps {
  children: ReactNode;
}

// const user: User = {
//   theme: 'dark',
// };

const Layout: FC&lt;layoutProps&gt; = ({ children }) =&gt; {
  return (
    // &lt;ThemeProvider user={user}&gt;
    &lt;main&gt;
      &lt;MainHeader /&gt;
      &lt;SideBar /&gt;
      &lt;Providers&gt;{children}&lt;/Providers&gt;
    &lt;/main&gt;
    // &lt;/ThemeProvider&gt;
  );
};

export default Layout;
</code></pre>
<p>I also tried adding this <code>suppressHydrationWarning</code>, but did not work to remove the warning either.</p>
<pre><code>&lt;div suppressHydrationWarning={true}&gt;
  &lt;NextUIProvider&gt;
    &lt;NextThemesProvider
      attribute=&quot;class&quot;
      defaultTheme=&quot;dark&quot;
      themes={['light', 'dark', 'modern']}
    &gt;
      {children}
    &lt;/NextThemesProvider&gt;
  &lt;/NextUIProvider&gt;
&lt;/div&gt;
</code></pre>
",
tags:"<javascript><reactjs><next.js><hydration><nextui>",
score:7,
creationDate:2024-03-28 14:50:33,
creationDate:2024-03-28 19:10:58,
score:2,
acceptedResponderReputation:39018,
acceptedResponder:168738,
QuestionerReputation:39018,
Questioner:168738}
{title:"Debounce in Javascript",
id:"https://stackoverflow.com/questions/75988682",
body:"<p>I am currently learning debounce in Javascript and I came across two ways of writing debounce functions that works the same. One is a lot simpler like regular function, the other one is the complicated one that everyone seems to use.</p>
<h5>Version 1:</h5>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;input type=""text"" oninput=""betterFunction()""&gt;

&lt;script&gt;
function getData() {
  console.log('Data Fetched')
}

function debounce(callback, delay) {
  let timer
  return function() {
    clearTimeout(timer)
    timer = setTimeout(() =&gt; {
      callback();
    }, delay)
  }
}

const betterFunction = debounce(getData, 1000)
&lt;/script&gt;</code></pre>
</div>
</div>
</p>
<hr />
<h4>Version 2:</h4>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;input type=""text"" oninput=""debounce()""&gt;

&lt;script&gt;
let timer

function debounce() {
  clearTimeout(timer)
  timer = setTimeout(() =&gt; {
    console.log('Data Fetched');
  }, 1000)
}
&lt;/script&gt;</code></pre>
</div>
</div>
</p>
<p>What is the difference between these two ways of debouncing if they both gives the same result?
PS: I am surprised that I have never seen anyone use the 'version 2', ofcourse something must me wrong. Could anybody explain the differences please?</p>
",
tags:"<javascript><debouncing>",
score:22,
creationDate:2023-04-11 17:39:40,
creationDate:2023-04-11 20:16:53,
score:2,
acceptedResponderReputation:77,
acceptedResponder:7107239,
QuestionerReputation:331,
Questioner:21581224}
{title:"How can you use Link navigation to navigate away from an intercepted route in Next.js 13?",
id:"https://stackoverflow.com/questions/76231982",
body:"<p><strong>DISCLAIMER</strong>: <em>I originally <a href=""https://github.com/vercel/next.js/issues/49662"" rel=""noreferrer"">filed this as a bug</a> in the Next.js github repo, but it was not recognised as an issue and was promptly closed. The explanation/solution that was given did not work for me so this means I must be doing something wrong, ergo the question here.</em></p>
<p><strong>The question/problem</strong></p>
<p>I have this <a href=""https://qdf4u0-3000.csb.app/"" rel=""noreferrer"">demo app</a> (codesandbox source <a href=""https://codesandbox.io/p/github/mkarajohn/nextgram/draft/restless-leftpad?file=/components/frame/index.js"" rel=""noreferrer"">here</a>) which makes use of two Next.js routing features: <a href=""https://nextjs.org/docs/app/building-your-application/routing/parallel-routes"" rel=""noreferrer"">Parallel routes</a> and <a href=""https://nextjs.org/docs/app/building-your-application/routing/intercepting-routes"" rel=""noreferrer"">route interceptors</a></p>
<p>In short, clicking on a photo changes the URL from <code>/</code> to <code>/photos/[id]</code> but unless you reload the page, the photo is shown in a modal on top of the previous route view, instead of completely changing the page to the photo details page, which is neat.</p>
<p>Clicking the modal overlay invokes the <a href=""https://nextjs.org/docs/app/api-reference/functions/use-router#userouter"" rel=""noreferrer""><code>router.back()</code></a> function, which takes us one step back in the history stack, the URL changes to <code>/</code> and the photo modal is no longer shown, as expected.</p>
<p>Now, I have ended up with a scenario where I need to be able to navigate away from the modal with an actual <a href=""https://nextjs.org/docs/app/api-reference/components/link"" rel=""noreferrer""><code>Link</code></a> component instead of calling <code>router.back()</code>. This means the user should be able to click the link that points away from <code>/photos/[id]</code>, the URL should change to where the link is pointing and the modal should disappear.</p>
<p>However as you can see in the demo this is not the case.</p>
<p>What happens instead is the user clicks the link that points away from <code>/photos/[id]</code>, the URL changes to where the link is pointing but the modal stays where it is. You can observe this behaviour even if you click on the link that takes you to a completely unrelated page.</p>
<p>Initially I thought maybe the problem is somehow the <code>Link</code> component and attempted to replace it with something like</p>
<pre><code>    &lt;button
      className=&quot;action&quot;
      onClick={() =&gt; {
        router.push(`/`);
      }}
    &gt;
      Close
    &lt;/button&gt;
</code></pre>
<p>Yet it still does not work. It seems like invoking <code>router.push('/')</code> works somehow differently from <code>router.back()</code> even though both result in the URL changing to <code>/</code>.</p>
<p>If this somehow intended behaviour it is really strange, because apart from being counter intuitive, the docs themselves read</p>
<blockquote>
<p>If a modal was initiated through client navigation, e.g. by using , you can dismiss the modal by calling router.back() <strong>or by using a Link component</strong>. (<a href=""https://nextjs.org/docs/app/building-your-application/routing/parallel-routes#dismissing-a-modal"" rel=""noreferrer"">source</a>)</p>
</blockquote>
<p>The bolded part is what really throws me off.</p>
<p>As suggested in the <a href=""https://github.com/vercel/next.js/issues/49662#issuecomment-1544065370"" rel=""noreferrer"">comment</a> left on the issue, I tried the solution with the <code>[...catchAll]</code> route; I tried moving it around from <code>app/</code> to <code>app/@modal/</code> to <code>app/@modal/(..)photos/</code> and see in which dir it will work as described and it did not work.</p>
<p>So, is this a bug, or I am terribly misusing and misunderstanding something in the way the router and the router interception works?</p>
<p>If it's the latter how can you make the <code>Link</code> navigation work from intercepted routes?</p>
<p>Thanks.</p>
",
tags:"<javascript><reactjs><next.js><next.js13><nextjs-dynamic-routing>",
score:6,
creationDate:2023-05-11 22:24:56,
creationDate:2023-05-18 21:12:47,
score:2,
acceptedResponderReputation:9358,
acceptedResponder:4651083,
QuestionerReputation:9358,
Questioner:4651083}
{title:"Docker and mvn build - cant pass unit tests as DB needs another container running?",
id:"https://stackoverflow.com/questions/75777666",
body:"<p>I have a standard spring boot application with this docker file:</p>
<pre><code>FROM maven:latest AS maven

WORKDIR /usr/src/app
COPY . /usr/src/app
# Compile and package the application to an executable JAR
RUN mvn package

FROM amazoncorretto:17-alpine-jdk

ARG JAR_FILE=app.jar

WORKDIR /opt/app

# Copy the jar from the maven stage to the /opt/app directory of the current stage.
COPY --from=maven /usr/src/app/target/${JAR_FILE} /opt/app/

EXPOSE 8080

ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;app.jar&quot;]
</code></pre>
<p>My <code>application.properties</code> file has the connection spring to my postgres db running in a docker container:</p>
<pre><code># datasource
spring.datasource.url=jdbc:postgresql://db:5432/myApp?currentSchema=gpclinic&amp;createDatabaseIfNotExist=true
spring.datasource.username=uname
spring.datasource.password=pword
</code></pre>
<p>When I run:</p>
<pre><code>docker build -t myApp .
</code></pre>
<p>I get a failure as the unit tests fail because the DB container is not running.</p>
<p>Will I need a Postgres container running to pass my tests? Or what is the best way to get around this?</p>
",
tags:"<java><spring><postgresql><docker><docker-compose>",
score:6,
creationDate:2023-03-18 17:51:55,
creationDate:2023-03-22 22:59:42,
score:3,
acceptedResponderReputation:53381,
acceptedResponder:13942448,
QuestionerReputation:1651,
Questioner:12268910}
{title:"Reason behind displaying/not displaying the spring validation message on the view",
id:"https://stackoverflow.com/questions/77749964",
body:"<p>I tried to create a validation:</p>
<pre><code>@Size(min = 6, message = &quot;min 6 characters needed&quot;)
private String name;
</code></pre>
<p>now, when I use the method (annotated with <strong>POST</strong>) with argument:</p>
<pre><code>@Valid LoginDetails loginDetails
</code></pre>
<p>the error message is not displayed when the validation fails (less than 6 characters entered in the form). But if I used this as the argument:</p>
<pre><code>@Valid @ModelAttribute(&quot;logindetails&quot;) LoginDetails loginDetails
</code></pre>
<p>the error message is displayed - I want to understand why is this happening.</p>
<p>here is the minimum reproducible code:</p>
<pre><code>package com.example.validationspring;


import jakarta.validation.constraints.NotNull;
import jakarta.validation.constraints.Size;

public class LoginDetails {

    @NotNull(message = &quot;Username cannot be null&quot;)
    @Size(min = 6, message = &quot;Username must be at least 6 characters&quot;)
    private String userName;

    // Standard getters and setters
    public String getUserName() {
        return userName;
    }

    public void setUserName(String userName) {
        this.userName = userName;
    }
}
</code></pre>
<blockquote>
</blockquote>
<pre><code>package com.example.validationspring;

import org.springframework.stereotype.Controller;
import org.springframework.validation.BindingResult;
import org.springframework.web.bind.annotation.*;
import org.springframework.ui.Model;
import jakarta.validation.Valid;

@Controller
@RequestMapping(&quot;/login&quot;)
public class LoginController {

    @GetMapping
    public String showLoginForm(Model model) {
        model.addAttribute(&quot;logindetails&quot;, new LoginDetails());
        return &quot;loginpage&quot;;
    }

    @PostMapping
    public String submitLoginForm(@Valid @ModelAttribute(&quot;logindetails&quot;) LoginDetails 
    loginDetails, BindingResult bindingResult) {
        if (bindingResult.hasErrors()) {
            return &quot;loginpage&quot;;  // If errors, show the form again with validation messages
        }
        // Process the data and redirect (assuming validation passed)
        return &quot;redirect:/success&quot;;
    }
}
</code></pre>
<blockquote>
</blockquote>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html xmlns=&quot;http://www.w3.org/1999/xhtml&quot;
      xmlns:th=&quot;http://www.thymeleaf.org&quot;&gt;
&lt;head&gt;
    &lt;title&gt;Login&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;h1&gt;Login&lt;/h1&gt;
&lt;form th:action=&quot;@{/login}&quot; th:object=&quot;${logindetails}&quot; method=&quot;post&quot;&gt;
    &lt;div&gt;
        &lt;label for=&quot;userName&quot;&gt;Username:&lt;/label&gt;&lt;br&gt;
        &lt;input type=&quot;text&quot; th:field=&quot;*{userName}&quot; id=&quot;userName&quot; /&gt;
        &lt;span th:if=&quot;${#fields.hasErrors('userName')}&quot; th:errors=&quot;*{userName}&quot;&gt;Username Error&lt;/span&gt;
    &lt;/div&gt;
    &lt;div&gt;
        &lt;button type=&quot;submit&quot;&gt;Submit&lt;/button&gt;
    &lt;/div&gt;
&lt;/form&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
",
tags:"<java><spring-boot>",
score:6,
creationDate:2024-01-03 05:56:51,
creationDate:2024-01-04 05:19:35,
score:3,
acceptedResponderReputation:1600,
acceptedResponder:10334659,
QuestionerReputation:1103,
Questioner:8977557}
{title:"Regex that match exactly 3 identical consecutive numbers",
id:"https://stackoverflow.com/questions/76746402",
body:"<p>Good morning all,</p>
<p>I want to make a regex that match 3 same consecutive numbers. It should match only 3 numbers in a row (separated by a space), the numbers should be identical. If there are less or more than 3 same numbers, then the output should be false</p>
<p>I have tried this regex <code>/.*(\d+) \1 \1(?!(\s\1))/</code></p>
<pre class=""lang-js prettyprint-override""><code>console.log(/.*(\d+) \1 \1(?!(\s\1))/.test('I am 42 42 4 hey yoo')); //false --&gt; Correct
 
console.log(/.*(\d+) \1 \1(?!(\s\1))/.test('I am 42 42 42 hey yoo')); //true --&gt; Correct

console.log(/.*(\d+) \1 \1(?!(\s\1))/.test('I am 42 42 42 4 hey yoo')); //true --&gt; Correct

console.log(/.*(\d+) \1 \1(?!(\s\1))/.test('I am 42 42 42 42 hey yoo')); //true --&gt; this output should be false since there are 4 same consecutive digits
</code></pre>
<p>Any advice, please?</p>
",
tags:"<javascript><regex><capturing-group>",
score:6,
creationDate:2023-07-23 01:56:47,
creationDate:2023-07-23 05:57:35,
score:3,
acceptedResponderReputation:110645,
acceptedResponder:256970,
QuestionerReputation:63,
Questioner:22269997}
{title:"Injecting JavaScript variables to custom Wordpress block editor",
id:"https://stackoverflow.com/questions/76036666",
body:"<p>I am creating a few custom blocks in a theme, and I have a problem. Sometimes I have a need to pass some custom data to my blocks in the blocks editor.</p>
<p>In other words, I need data to be available in the blocks/myBlock/index.js (the editor script).</p>
<p>I register my blocks, with the recommended new way, <code>register_block_type(__DIR__ . '/build/blocks/myBlock');</code>, that basically loads the block.json file that then registers all the editor, frontend and render scripts defined there.</p>
<p>In my case it is composed of:</p>
<pre><code>&quot;editorScript&quot;: &quot;file:./index.js&quot;,
  &quot;style&quot;: [
    &quot;file:./style.css&quot;
  ],
  &quot;render&quot;: &quot;file:./render.php&quot;
</code></pre>
<p>One would think I could use the function <code>wp_add_inline_script</code> in the hook <code>admin_enqueue_scripts</code>, but it does not seem to work. Hook is triggered, but no inline scripts are added. My best guess after some investigation is that block-scripts are loaded too early, and the <code>wp_add_inline_script</code> is triggered after script already has been loaded or something, according to comments in official documentation; <a href=""https://developer.wordpress.org/reference/functions/wp_add_inline_script/#comment-5828"" rel=""noreferrer"">https://developer.wordpress.org/reference/functions/wp_add_inline_script/#comment-5828</a></p>
<p><strong>Example:</strong></p>
<pre><code>add_action('admin_enqueue_scripts', function () {
    wp_add_inline_script('my-namespace-my-block-editor-script-js', 'window.myBlockConfig = ' . json_encode(array(
        'foo' =&gt; 'bar',
    )), 'before');
});
</code></pre>
<p>And even brute-forcing in the scripts using <code>admin_head</code>-hook, as comment suggested even though it used wp_footer as example, does not seem to work either. I can then see my inline script loaded, but it is loaded after block-editor-script and by then none of the data made accessible via inlien script is reachable.</p>
<p><strong>Example:</strong></p>
<pre><code>add_action('admin_head', function () {
    echo '&lt;script&gt;window.myBlockConfig = ' . json_encode(array(
     'foo' =&gt; 'bar'
    )) . '&lt;/script&gt;';
});
</code></pre>
<p><a href=""https://i.sstatic.net/mAO4y.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/mAO4y.png"" alt=""Inline script loaded after scripts that do need the data"" /></a></p>
<p>So what would be the &quot;correct&quot; way to do this?</p>
<p><strong>UPDATE 1:</strong></p>
<p>Only way I've found to solve this is using Wordpress REST API, eg.</p>
<pre><code>function myBlockRestApiGetConfig($request)
{
    $response = array(
      'foo' =&gt; 'bar',
    );

    return rest_ensure_response($response);
}

add_action('rest_api_init', function () {
    register_rest_route('myBlock/v1', '/config', array(
      'methods' =&gt; 'GET',
      'callback' =&gt; 'myBlockRestApiGetConfig',
    ));
});
</code></pre>
<p>And then in my blocks editor script I can fetch it;</p>
<pre><code>const config = await apiFetch({
   path: `/myBlock/v1/config`,
});
</code></pre>
<p>But still question is; what would be the &quot;correct&quot; way to do this?
Maybe it is better to use the API? React backend is very API centric so it makes sense, but &quot;preloading config&quot; makes it faster. So it is pro/con I guess.</p>
<p>I still find it strange that it seems impossible to any hooks to load any script-tags before blocks.</p>
<p>Thank you for your time :-)</p>
<p><strong>UPDATE 2:</strong></p>
<p>Turns out I am an idiot as usual. The handle name used in <code>wp_add_inline_script</code>. I used the full script id as seen in source code; <code>my-namespace-my-block-script-js</code>, but <code>-js</code> is added by Wordpress on scripts and is not part of handle name. So it should be simply <code>my-namespace-my-block-editor-script</code>. And then it just works...</p>
<pre><code>add_action('admin_enqueue_scripts', function () {
    // Add pre-loaded data for my-namespace/my-block
    wp_add_inline_script('my-namespace-my-block-editor-script', 'window.myBlockConfig = ' . json_encode(array(
        'foo' =&gt; 'bar',
    )), 'before');
});
</code></pre>
<p><a href=""https://stackoverflow.com/a/76121860/266642"">Answer by @Ruvee</a> helped me realise this, and is marked as &quot;correct&quot; answer.</p>
",
tags:"<javascript><php><wordpress><wordpress-gutenberg><gutenberg-blocks>",
score:6,
creationDate:2023-04-17 15:14:36,
creationDate:2023-04-27 14:56:12,
score:3,
acceptedResponderReputation:9097,
acceptedResponder:15040627,
QuestionerReputation:18253,
Questioner:266642}
{title:"TypeError: r is not a function - next.js",
id:"https://stackoverflow.com/questions/77930347",
body:"<p>I am trying to use a const from a context in my server side, inside <code>/api</code>. But when I use this, my backend console returns:</p>
<blockquote>
<p>TypeError: r is not a function</p>
</blockquote>
<p>and</p>
<blockquote>
<p>SyntaxError: Unexpected end of JSON input</p>
</blockquote>
<p>in the request that, without the context, works perfectly.</p>
<p>I also checked the variable before using it and it is returning the string it should. How to solve this?</p>
<pre class=""lang-js prettyprint-override""><code>'use client'
import { calendarInsertContext } from './calendarInsertContext'

export async function GET(req) {
  const { sdr } = useContext(calendarInsertContext)
  console.log('sdr backend: ', sdr)
</code></pre>
",
tags:"<javascript><backend><typeerror><next.js14>",
score:7,
creationDate:2024-02-02 23:33:32,
creationDate:2024-03-27 08:42:36,
score:3,
acceptedResponderReputation:46,
acceptedResponder:22114845,
QuestionerReputation:83,
Questioner:21073418}
{title:"Node.js Sequelize: Cannot delete property 'meta' of [object Array]",
id:"https://stackoverflow.com/questions/75821524",
body:"<p>I'm learning the Sequelize.js framework and it's pretty awesome. But when I try to remove a column from my test tables in in my migration file, I get this error:</p>
<p><code>ERROR: Cannot delete property 'meta' of [object Array]</code></p>
<p>This error occurs when I use the removeColumn function from the query interface but I don't have an idea why ...</p>
<p>My migration file:</p>
<pre class=""lang-js prettyprint-override""><code>'use strict';

const {DataTypes} = require(&quot;sequelize&quot;);
/** @type {import('sequelize-cli').Migration} */
module.exports = {
  async up (queryInterface, Sequelize) {
    return queryInterface.sequelize.transaction(t =&gt; {
      return Promise.all([
        queryInterface.removeColumn('Students', 'bloodStatus', {transaction: t}),
      ]);
    });
  },

  async down (queryInterface, Sequelize) {
    return queryInterface.sequelize.transaction(t =&gt; {
      return Promise.all([
        queryInterface.addColumn('Students', 'bloodStatus', {
          type: DataTypes.STRING,
          allowNull: false
        }, {transaction: t}),
      ]);
    });
  }
};
</code></pre>
<p>I used the migration file above but I get the error</p>
<pre><code>ERROR: Cannot delete property 'meta' of [object Array]
</code></pre>
<p>I read the documentation and tried to find a solution, but unfortunately I can't find one.</p>
",
tags:"<javascript><node.js><database><sequelize.js>",
score:8,
creationDate:2023-03-23 09:56:44,
creationDate:2023-03-23 16:14:57,
score:3,
acceptedResponderReputation:364,
acceptedResponder:13748728,
QuestionerReputation:364,
Questioner:13748728}
{title:"Error: No response is returned from route handler in next.js",
id:"https://stackoverflow.com/questions/77561750",
body:"<p>I try to fetch the data from database using mysql in next.js using API routes functionality But when I call the route they show me the this error</p>
<blockquote>
<p>Blockquote Error: No response is returned from route handler</p>
</blockquote>
<p>Here I can write code like below</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>import { NextResponse } from ""next/server"";
import db from '../../../../lib/db';

export function GET(request){
    db.query('SELECT * FROM department', (error, results, fields) =&gt; {
      if (error) {
        console.error('Error querying the database:', error);
        return NextResponse.json({ error: 'Internal Server Error' },{status:500});
      }

      return NextResponse.json({ data: results },{status:201});
    });
}</code></pre>
</div>
</div>
</p>
<p>When I call this api in console it show me the message Connected to MySQL database successfully and then after it show the above error</p>
",
tags:"<javascript><next.js>",
score:6,
creationDate:2023-11-28 06:28:28,
creationDate:2023-11-30 13:01:00,
score:3,
acceptedResponderReputation:836,
acceptedResponder:11578082,
QuestionerReputation:176,
Questioner:19180538}
{title:"How can I configure a Spring OAuth2 Auth Server to act both as an Auth and Resource Server, securing endpoints independently of session context?",
id:"https://stackoverflow.com/questions/77302026",
body:"<p>I am currently working on an OAuth 2.0 login / user management system using <a href=""https://spring.io/projects/spring-security"" rel=""nofollow noreferrer"">Spring Security</a>. Since I'm writing my own authorization server (based upon docs like <a href=""https://docs.spring.io/spring-authorization-server/docs/current/reference/html/getting-started.html"" rel=""nofollow noreferrer"">here</a>) using the <a href=""https://mvnrepository.com/artifact/org.springframework.security/spring-security-oauth2-authorization-server/1.1.2"" rel=""nofollow noreferrer""><code>spring-security-oauth2-authorization-server</code></a> module, I am also implementing a user management / admin dashboard.</p>
<p>Naturally, the endpoints for the user management are on the auth server. So the auth server acts as authorization server and <em>(somewhat like a)</em> resource server. To authorize a user to use the admin dashboard, they will need to log-in of course, so first they are redirected to the auth servers <code>/authorize</code> endpoint which then redirects them to the login menu. The authorization code grant flow is then followed normally. But every step is being done on the same server <em>(i.e. authentication and accessing of the protected admin endpoints)</em>!</p>
<p>I am struggeling to configure our auth server to act as an auth server <strong>AND</strong> resource server because of the following issues:</p>
<p>The authorization server saves the <code>securityContext</code> to the session. The session ID (<a href=""https://docs.spring.io/spring-session/docs/2.2.0.RELEASE/reference/html5/guides/java-custom-cookie.html"" rel=""nofollow noreferrer""><code>JSESSIONID</code></a>) is then left in the users browser as a cookie. The problem is that when the user tries to access a secured endpoint on the auth server such as the <code>{...}/admin/users</code> endpoint, the cookie alone is enough to authorize them to make a request to that endpoint. This means that the entire authorization flow can be circumvented, when a bearer token should be requested first to access the protected endpoint. We would like the secured endpoints to be accessible <strong>ONLY</strong> with a bearer token and just a bearer token, not a session <em>(or a combination of both)</em>.</p>
<p>Here is a shortened version of the current security config:</p>
<pre class=""lang-java prettyprint-override""><code>@Bean
@Order(1)
public CorsFilter corsFilter(CorsConfigurationSource corsConfigurationSource) {
    logger.info(&quot;Creating corsFilter bean&quot;);
    return new CorsFilter(corsConfigurationSource);
}


/**
 * Configures the authorization server endpoints.
 */
@Bean
@Order(2)
public SecurityFilterChain authorizationServerSecurityFilterChain(HttpSecurity http, RegisteredClientRepository clientRepository) throws Exception {

    OAuth2AuthorizationServerConfiguration.applyDefaultSecurity(http);

    http.getConfigurer(OAuth2AuthorizationServerConfigurer.class)
            .registeredClientRepository(clientRepository) // autowired from ClientConfig.java
            .oidc(Customizer.withDefaults());

    http.exceptionHandling((exceptions) -&gt; exceptions
            .defaultAuthenticationEntryPointFor(
                    new LoginUrlAuthenticationEntryPoint(&quot;/login&quot;),
                    new MediaTypeRequestMatcher(MediaType.TEXT_HTML)
            )
    );

    http.oauth2ResourceServer((resourceServer) -&gt; resourceServer
            .jwt(Customizer.withDefaults()));

    http.csrf(AbstractHttpConfigurer::disable);

    return http.build();
}

@Bean
@Order(3)
public SecurityFilterChain defaultSecurityFilterChain(HttpSecurity http) throws Exception {
    http.securityMatcher(new NegatedRequestMatcher(new AntPathRequestMatcher(&quot;/admin/**&quot;)));

    http.authorizeHttpRequests((authorize) -&gt;
            authorize
                    .requestMatchers(new AntPathRequestMatcher(&quot;/register&quot;)).permitAll()
                    .requestMatchers(new AntPathRequestMatcher(&quot;/recover&quot;)).permitAll()
                    .requestMatchers(new AntPathRequestMatcher(&quot;/error/**&quot;)).permitAll()
                    .requestMatchers(new AntPathRequestMatcher(&quot;/css/**&quot;)).permitAll()
                    .requestMatchers(new AntPathRequestMatcher(&quot;/js/**&quot;)).permitAll()
                    .requestMatchers(new AntPathRequestMatcher(&quot;/favicon.ico&quot;)).permitAll()
                    .anyRequest().authenticated());

    http.oauth2ResourceServer((resourceServer) -&gt; resourceServer
            .jwt(Customizer.withDefaults()));

    // set custom login form
    http.formLogin(form -&gt; {
        form.loginPage(&quot;/login&quot;);
        form.permitAll();
    });

    http.logout(conf -&gt; {
        // default logout url
        conf.logoutSuccessHandler(logoutSuccessHandler());
    });

    http.csrf(AbstractHttpConfigurer::disable);
    http.cors(AbstractHttpConfigurer::disable);

    return http.build();
}

@Bean
@Order(4)
public SecurityFilterChain adminResourceFilterChain(HttpSecurity http) throws Exception {

    // handle out custom endpoints in this filter chain
    http.authorizeHttpRequests((authorize) -&gt;
            authorize
                    .requestMatchers(new AntPathRequestMatcher(&quot;/admin/**&quot;)).hasRole(&quot;ADMIN&quot;)
                    .anyRequest().authenticated());

    http.sessionManagement(conf -&gt; conf.sessionCreationPolicy(SessionCreationPolicy.STATELESS));

    http.oauth2ResourceServer((resourceServer) -&gt; resourceServer
            .jwt(Customizer.withDefaults()));

    http.csrf(AbstractHttpConfigurer::disable);
    http.cors(AbstractHttpConfigurer::disable);

    return http.build();
}
</code></pre>
<p><strong>How to configure the authorization server so the admin endpoints are secured independently from the security context from the session?</strong></p>
<p>For disclosure purposes, I was debugging <em>a lot</em> and tried basically the whole <a href=""https://docs.spring.io/spring-authorization-server/docs/current/reference/html/getting-started.html"" rel=""nofollow noreferrer"">basics</a>! I also tried a few other things:</p>
<p>According to <a href=""https://docs.spring.io/spring-security/reference/servlet/authentication/session-management.html"" rel=""nofollow noreferrer"">Spring Security Documentation</a>, it's possible to set the <code>.sessionManagement</code> to STATELESS in the security config. I had hoped that this would fix the issue, but setting this in the resource server filter chain showed to cause another issue: With the session management flag set to STATELESS, the  login isn’t processed properly. After the POST request from the login form, instead of redirecting to the “redirect_url” from the <code>/authorize</code> request, the auth server redirects to “/”…? <em>I think this is because the auth server module relies on the security context saved to the session for some of its filters.</em></p>
<p>I also had some issues with CORS and thought this might cause this.Considering that the <a href=""https://docs.spring.io/spring-security/reference/reactive/integrations/cors.html"" rel=""nofollow noreferrer"">docs</a> say:</p>
<blockquote>
<p>CORS must be processed before Spring Security because the pre-flight request will not contain any cookies (i.e. the JSESSIONID). If the request does not contain any cookies and Spring Security is first, the request will determine the user is not authenticated (since there are no cookies in the request) and reject it.</p>
</blockquote>
<p>This would explain that thefront-end Vue.js application doesn't work properly, but not the debugging calls via Postman. Now I deactivated CORS to not deal with those issues.</p>
",
tags:"<java><spring><spring-boot><spring-security><authorization>",
score:7,
creationDate:2023-10-16 12:37:53,
creationDate:2023-10-21 19:06:14,
score:3,
acceptedResponderReputation:6043,
acceptedResponder:15835039,
QuestionerReputation:6799,
Questioner:14852784}
{title:"zod TypeError: Cannot read properties of undefined (reading '_parse')",
id:"https://stackoverflow.com/questions/75945904",
body:"<p>I have a Vite library using Zod. I want to parse configurations and my folder structure is similiar to the configuration object structure. <code>index.ts</code> files always export all files in their own directory and everything from their subdirectories e.g. <code>export * from './subDir';</code> so the root file exports &quot;the whole lib&quot;.</p>
<p>The following setup shows a single configuration branch</p>
<p><a href=""https://stackblitz.com/edit/vitest-dev-vitest-fchtxz"" rel=""noreferrer"">Sample code on Stackblitz</a></p>
<pre><code>.
├── src
│   ├── api
│   │   ├── dataSources
|   |   |   ├── dataSource
|   |   |   |   ├── following
|   |   |   |   |   ├── computed
|   |   |   |   |   |   ├── followingComputedDataSourceConfigurationSchema.ts ( extends dataSourceConfigurationSchema )
|   │   │   |   |   |   └── index.ts
|   |   |   |   |   ├── entity
|   |   |   |   |   |   ├── followingEntityDataSourceConfigurationSchema.ts ( extends leadingDataSourceConfigurationSchema )
|   │   │   |   |   |   └── index.ts
|   │   │   |   |   └── index.ts
|   |   |   |   ├── leading
|   |   |   |   |   ├── leadingDataSourceConfigurationSchema.ts ( extends dataSourceConfigurationSchema )
|   │   │   |   |   └── index.ts
|   |   |   |   ├── dataSourceConfigurationSchema.ts ( base schema )
│   │   |   |   └── index.ts
|   |   |   ├── dataSourcesConfigurationSchema.ts ( expects leading and array of followings )
│   │   |   └── index.ts
|   |   ├── apiConfigurationSchema.ts ( expects dataSources )
│   │   └── index.ts
│   └── index.ts 
└── test
    └── basic.test.ts
</code></pre>
<p>The problem is that I think I'm running into circular dependency imports. I checked the schema with a test using Vitest</p>
<pre><code>it('fails.', () =&gt; {
  expect(() =&gt; apiConfigurationSchema.parse({})).not.toThrow();
});
</code></pre>
<p>By doing so I get the following error</p>
<blockquote>
<p>TypeError: Cannot read properties of undefined (reading '_parse')</p>
</blockquote>
<p>I don't want to merge the schemas into a single big file because subdirectories might also contain custom validation functions for this specific section.</p>
<p>Do you have any ideas how to fix this setup?</p>
",
tags:"<javascript><typescript><zod>",
score:7,
creationDate:2023-04-06 04:47:11,
creationDate:2023-04-08 10:46:31,
score:3,
acceptedResponderReputation:10831,
acceptedResponder:5734961,
QuestionerReputation:893,
Questioner:19698303}
{title:"Unexpected token at `>` of a `<>`",
id:"https://stackoverflow.com/questions/75368559",
body:"<p>I'm trying to follow <a href=""https://beta.reactjs.org/learn/tutorial-tic-tac-toe"" rel=""noreferrer"">Tic-Tac-Toe tutorial on React</a> in my local environment. However, when I run <code>npm start</code>, I get a syntax error around <code>&lt;&gt;</code>.</p>
<h3>How to reproduce</h3>
<ol>
<li>In the middle of the tutorial, under &quot;At this point your code should look something like this:&quot;, click Fork in the upper right corner of the example code with the numbers from 1 to 9 written in a table.</li>
<li>Click the button in the upper left corner of the Code Sandbox, navigate to File, then Export to Zip, and download the code example as a Zip file.</li>
<li>Unzip the downloaded Zip file, and execute <code>npm install</code> and <code>npm start</code> in that order in the project root directory.</li>
<li>The following error message is displayed.</li>
</ol>
<pre><code>./src/App.js
Syntax error: Unexpected token (3:5)

  1 | export default function Board() {
  2 |   return (
&gt; 3 |     &lt;&gt;
    |      ^
  4 |       &lt;div className=&quot;board-row&quot;&gt;
  5 |         &lt;button className=&quot;square&quot;&gt;1&lt;/button&gt;
  6 |         &lt;button className=&quot;square&quot;&gt;2&lt;/button&gt;
</code></pre>
<h3>Question</h3>
<p>How can I resolve this error? Although I can continue the tutorial online, I would prefer to continue it in a local environment where I can get assistance from lsp, formatters, etc.</p>
<h3>Version Information</h3>
<p>Node.js: v18.12.1</p>
<p>npm: 8.19.2</p>
<p><code>npm view react version</code> on the project root: 18.2.0</p>
",
tags:"<javascript><node.js><reactjs><npm>",
score:9,
creationDate:2023-02-07 02:59:43,
creationDate:2023-02-07 03:22:04,
score:3,
acceptedResponderReputation:1811,
acceptedResponder:4527057,
QuestionerReputation:894,
Questioner:13132898}
{title:"Spring Boot - permitAll not working using SecurityFilterChain",
id:"https://stackoverflow.com/questions/76084548",
body:"<p>I have a Spring Boot application where I need to make certain endpoints accessible to all users without requiring authentication. To achieve this, I am using <code>permitAll()</code>.</p>
<p>However, when I try to access one of these endpoints, <code>http://localhost:8080/content/123</code>, a <code>CustomOncePerRequestFilter</code> is being called, which shouldn't happen as it is supposed to be accessible to all users.</p>
<p>The rest of the endpoints are secured and working as expected.</p>
<p>I am seeking guidance on why this is happening and how to fix it. My <code>SecurityConfiguration</code> code is as follows.</p>
<pre><code>@Configuration
@EnableWebSecurity
public class SecurityConfiguration {

    @Autowired
    private CustomOncePerRequestFilter tokenFilter;

    @Bean
    protected SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http.csrf().disable()
                .authorizeHttpRequests()
                .antMatchers(&quot;/art/**&quot;,&quot;/content/**&quot;).permitAll()
                .and().authorizeHttpRequests()
                .antMatchers(&quot;/api/contenteditor/feed/**&quot;).hasAnyRole(&quot;SITE_ADMIN&quot;, &quot;STANDARD_ADMIN&quot;, &quot;DOMAIN_MEMBER&quot;)
                .anyRequest().authenticated().and()
                .addFilterBefore(tokenFilter, UsernamePasswordAuthenticationFilter.class)
                .sessionManagement().sessionCreationPolicy(SessionCreationPolicy.STATELESS);
        CorsConfiguration configuration = new CorsConfiguration();
        configuration.setAllowedOrigins(Arrays.asList(&quot;*&quot;));
        configuration.setAllowedMethods(Arrays.asList(&quot;*&quot;));
        configuration.setAllowedHeaders(Arrays.asList(&quot;*&quot;));
        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
        source.registerCorsConfiguration(&quot;/**&quot;, configuration);
        http.cors().configurationSource(source);
        return http.build();
    }

}
</code></pre>
",
tags:"<java><spring><spring-boot><spring-mvc><spring-security>",
score:7,
creationDate:2023-04-23 11:24:35,
creationDate:2023-04-24 05:11:14,
score:3,
acceptedResponderReputation:1153,
acceptedResponder:4108345,
QuestionerReputation:1153,
Questioner:4108345}
{title:"Upgrading Gradle from 7.4.2 to Gradle 8.0.0 gives error on release app - java.lang.ClassCastException",
id:"https://stackoverflow.com/questions/76073318",
body:"<p>I have recently upgraded Android Studio to Flamingo and also upgraded Gradle from 7.4.2 to 8.0.0. All things working fine in version 7.4.2.</p>
<p>When I generate a signed APK using Gradle 8.0.0, it's giving me a runtime error of <code>java.lang.ClassCastException</code>.</p>
<p>I have tried many solutions like adding Proguard rules for Retrofit, Okio, OkHttp, etc., but it still give me an error like this.</p>
<p>Note: When I downgraded from 8.0.0 to 7.4.2, it's working.</p>
<p>So anyone can help me to find out problem with AGP 8.0.0.</p>
<p><em><strong>build.gradle(app)</strong></em></p>
<pre><code>plugins {
    id 'com.android.application'
    id 'org.jetbrains.kotlin.android'
    id 'kotlin-kapt'
    id 'kotlin-parcelize'
    id 'com.google.dagger.hilt.android'
    id 'com.google.gms.google-services'
    id 'com.google.firebase.crashlytics'
}


android {
    
    compileSdk 33

    defaultConfig {
        
        minSdk 24
        targetSdk 33
        versionCode 22
        versionName &quot;1.0.16&quot;
        multiDexEnabled true

        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;
        /*vectorDrawables {
            useSupportLibrary true
        }*/

        def localPropertiesFile = rootProject.file(&quot;local.properties&quot;)
        def localProperties = new Properties()
        localProperties.load(new FileInputStream(localPropertiesFile))
        buildConfigField &quot;String&quot;, &quot;API_KEY&quot;, localProperties['API_KEY']



    }

    
    buildTypes {
        release {
            minifyEnabled true
            shrinkResources true
            signingConfig signingConfigs.release
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_17
        targetCompatibility JavaVersion.VERSION_17
    }
    kotlinOptions {
        jvmTarget = '17'
    }
    buildFeatures {
        compose true
        viewBinding = true
    }
    composeOptions {
        kotlinCompilerExtensionVersion '1.4.2'
    }
    packagingOptions {
        resources {
            excludes += '/META-INF/{AL2.0,LGPL2.1}'
        }
    }
    bundle {
        language {
            enableSplit = false
        }
    }
}

dependencies {

    implementation 'androidx.core:core-ktx:1.10.0'
    implementation 'androidx.appcompat:appcompat:1.6.1'
    implementation 'com.google.android.material:material:1.8.0'
    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'
    implementation 'androidx.multidex:multidex:2.0.1'

    
    implementation 'com.google.accompanist:accompanist-permissions:0.24.11-rc'
    implementation 'com.google.accompanist:accompanist-webview:0.24.11-rc'
    implementation 'com.google.accompanist:accompanist-pager:0.24.13-rc'
    implementation &quot;com.google.accompanist:accompanist-pager-indicators:0.24.13-rc&quot;
    implementation &quot;com.google.accompanist:accompanist-drawablepainter:0.25.1&quot;
    implementation &quot;com.google.accompanist:accompanist-flowlayout:0.31.0-alpha&quot;


   
    implementation 'androidx.activity:activity-compose:1.7.1'
    implementation platform('androidx.compose:compose-bom:2022.10.00')
    implementation 'androidx.compose.ui:ui'
    implementation 'androidx.compose.ui:ui-graphics'
    implementation 'androidx.compose.ui:ui-tooling-preview'
    implementation 'androidx.compose.material:material'
//    implementation 'androidx.compose.material3:material3'
    implementation &quot;androidx.navigation:navigation-compose:2.5.3&quot;
    implementation 'com.google.firebase:protolite-well-known-types:18.0.0'
    implementation &quot;androidx.compose.ui:ui-viewbinding&quot;
    implementation project(path: ':pdfviewer')

  
    testImplementation 'junit:junit:4.13.2'
    androidTestImplementation 'androidx.test.ext:junit:1.1.5'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'
    androidTestImplementation &quot;androidx.compose.ui:ui-test-junit4&quot;

    
    implementation &quot;com.google.dagger:hilt-android:2.45&quot;
    debugImplementation &quot;androidx.compose.ui:ui-test-manifest&quot;
    kapt &quot;com.google.dagger:hilt-compiler:2.45&quot;
    kapt &quot;androidx.hilt:hilt-compiler:1.0.0&quot;
    implementation 'androidx.hilt:hilt-navigation-compose:1.0.0'

  
    implementation &quot;androidx.activity:activity-ktx:1.7.1&quot;

  
    implementation &quot;androidx.lifecycle:lifecycle-extensions:2.2.0&quot;
    implementation &quot;androidx.lifecycle:lifecycle-livedata-ktx:2.6.1&quot;
    implementation &quot;androidx.lifecycle:lifecycle-runtime-ktx:2.6.1&quot;
    implementation &quot;androidx.lifecycle:lifecycle-viewmodel-ktx:2.6.1&quot;
    implementation &quot;androidx.lifecycle:lifecycle-process:2.6.1&quot;
    kapt &quot;androidx.lifecycle:lifecycle-compiler:2.6.1&quot;

    /* *****************************************************
       **** Retrofit2
       ****************************************************** */
    implementation 'com.squareup.retrofit2:retrofit:2.9.0'
    implementation 'com.squareup.retrofit2:converter-gson:2.9.0'
    implementation &quot;com.squareup.okhttp3:okhttp:4.9.0&quot;
    implementation &quot;com.squareup.okhttp3:logging-interceptor:4.9.0&quot;
    implementation 'com.squareup.retrofit2:converter-moshi:2.9.0'

   
    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.4'
    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.6.4'

   
    implementation &quot;androidx.room:room-runtime:2.5.1&quot;
    kapt &quot;androidx.room:room-compiler:2.5.1&quot;

    
    implementation &quot;androidx.room:room-ktx:2.5.1&quot;

   
    implementation 'androidx.core:core-splashscreen:1.0.1'

    
    def billing_version = &quot;5.2.0&quot;
    implementation &quot;com.android.billingclient:billing:$billing_version&quot;
    implementation &quot;com.android.billingclient:billing-ktx:$billing_version&quot;
    implementation 'com.google.firebase:firebase-crashlytics-buildtools:2.9.5'

   
    implementation platform('com.google.firebase:firebase-bom:31.1.0')
    implementation 'com.google.firebase:firebase-config-ktx'
    implementation 'com.google.firebase:firebase-analytics-ktx'
    implementation 'com.google.firebase:firebase-crashlytics-ktx'
    implementation 'com.google.firebase:firebase-messaging-ktx'
    implementation 'com.google.android.gms:play-services-ads:22.0.0'

   
    implementation 'com.airbnb.android:lottie-compose:4.0.0'


}

kapt {
    correctErrorTypes true
}
</code></pre>
<p><strong>Project Gradle File</strong></p>
<pre><code>buildscript {
    ext {
        compose_ui_version = '1.5.0-alpha02'
        kotlin_version = '1.8.10'
    }
        dependencies {
            // Add this line
            classpath 'com.google.gms:google-services:4.3.15'
            classpath 'com.google.firebase:firebase-crashlytics-gradle:2.9.5'
            classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;
        }
    repositories {
        mavenCentral()
    }
}// Top-level build file where you can add configuration options common to all sub-projects/modules.
plugins {
    id 'com.android.application' version '8.0.0' apply false
    id 'com.android.library' version '8.0.0' apply false
    id 'org.jetbrains.kotlin.android' version '1.8.10' apply false
    id 'com.google.dagger.hilt.android' version '2.44' apply false
}
</code></pre>
",
tags:"<java><kotlin><gradle><android-gradle-plugin><gradle-plugin>",
score:28,
creationDate:2023-04-21 12:47:00,
creationDate:2023-04-25 10:23:59,
score:3,
acceptedResponderReputation:3172,
acceptedResponder:4649860,
QuestionerReputation:3172,
Questioner:4649860}
{title:"OpenApi java.time.Duration default format",
id:"https://stackoverflow.com/questions/77344269",
body:"<p>I am using springdoc to generate my OpenAPI documentation.</p>
<pre><code>public class MyDto {
    ....
    @JsonFormat(shape = JsonFormat.Shape.STRING)
    private Duration duration;
    ....
}
</code></pre>
<p>OpenApi shows the definition of <code>MyDto</code> as below, the duration gets deserialized to something similar to:</p>
<pre><code>&quot;duration&quot;: {
    &quot;seconds&quot;: 0,
    &quot;nano&quot;: 0,
    &quot;negative&quot;: true,
    &quot;zero&quot;: true,
    &quot;units&quot;: [
      {
        &quot;dateBased&quot;: true,
        &quot;timeBased&quot;: true,
        &quot;duration&quot;: {
          &quot;seconds&quot;: 0,
          &quot;nano&quot;: 0,
          &quot;negative&quot;: true,
          &quot;zero&quot;: true
        },
        &quot;durationEstimated&quot;: true
      }
    ]
  }
</code></pre>
<p>I want it to be formated as a String without having to add <code>@Schema(type = &quot;string&quot;, format = &quot;duration&quot;)</code> to each <code>java.util.Duration</code> in all of my DTOs on each <code>Duration</code> field.</p>
<p>I have <code>jackson-datatype-jsr310</code> on my classpath and serializing/deserializing payloads works as expected using <a href=""https://en.wikipedia.org/wiki/ISO_8601"" rel=""noreferrer"">ISO 8601</a> formatted Strings, except for OpenAPI showing wrong format.</p>
<p>Is it possible to somehow tell OpenAPI to treat <code>java.util.Duration</code> as a String by default?</p>
",
tags:"<java><openapi><springdoc>",
score:7,
creationDate:2023-10-23 10:00:19,
creationDate:2023-11-06 14:25:01,
score:3,
acceptedResponderReputation:1120,
acceptedResponder:5291611,
QuestionerReputation:1120,
Questioner:5291611}
{title:"Accessing ChatGPT API through Firebase Cloud Function",
id:"https://stackoverflow.com/questions/75637545",
body:"<p>Below is some code for a simple Firebase Cloud Function that hits the ChatGPT API. Deploying this code and accessing it from my app results in a CORS error.</p>
<pre class=""lang-js prettyprint-override""><code>import * as functions from &quot;firebase-functions&quot;;
import {defineString} from &quot;firebase-functions/v2/params&quot;;
import {Configuration, OpenAIApi} from &quot;openai&quot;;

const openAIKey = defineString(&quot;OPEN_API_KEY&quot;);

export const getSummary = functions.https.onCall(async (data) =&gt; {
  const configuration = new Configuration({
    apiKey: openAIKey.value(),
  });
  const openai = new OpenAIApi(configuration);
  const completion = await openai.createChatCompletion({
    model: &quot;gpt-3.5-turbo&quot;,
    messages: [
      {
        role: &quot;user&quot;,
        content: data.prompt,
      },
    ],
  });
  const [choice] = completion.data.choices;
  return {
    response: choice.message ?? &quot;no response&quot;,
  };
});
</code></pre>
<p>This cloud function works perfectly when I access it from my app using the functions emulator. I only get the CORS error when I deploy it to the cloud and try to use it.</p>
<p>Also, I have a <code>helloWorld</code> function deployed alongside this one so that I can check that there's nothing wrong with my whole functions setup, and it works fine also. Furthermore, when I go into my Cloud Functions Console and test the function directly, it also works. So the issue clearly has to do with accessing the API specifically via the cloud function production environment and specifically from the app.</p>
<p>Update: Here's the client code and the exact error:</p>
<pre><code>const getSummary = httpsCallable(functions, &quot;getSummary&quot;);
async function askGPT() {
    const result = await getSummary({
      prompt: &quot;Please summarize the question in the following text. Phrase your response in the form of a question, and use Markdown for any formatting you might need.\n\n&quot; + question.text
    });
    question.question_summary = (
      (question.question_summary ?? &quot;&quot;) // @ts-ignore
      + (result?.data?.response?.content || &quot;&quot;).trim()
    );
  }
</code></pre>
<p>error:</p>
<blockquote>
<p>Access to fetch at 'https://us-central1-my-documentation.cloudfunctions.net/getSummary' from origin 'http://localhost:5173' has been blocked by CORS policy: Response to preflight request doesn't pass access control check: No 'Access-Control-Allow-Origin' header is present on the requested resource. If an opaque response serves your needs, set the request's mode to 'no-cors' to fetch the resource with CORS disabled.</p>
</blockquote>
",
tags:"<javascript><firebase><google-cloud-functions><cors><openai-api>",
score:7,
creationDate:2023-03-04 17:54:28,
creationDate:2023-05-26 15:00:37,
score:3,
acceptedResponderReputation:231,
acceptedResponder:2366158,
QuestionerReputation:231,
Questioner:2366158}
{title:"Why are class declarations faster than object declarations?",
id:"https://stackoverflow.com/questions/79319420",
body:"<p>I have the following script benchmarking the time it takes to declare an object with a class vs. directly with an object.</p>
<pre class=""lang-js prettyprint-override""><code>console.time(&quot;class decls&quot;);
class Dog {
        a;
        constructor() {
            this.a = 1;
        }
        bark() {
            this.a + this.a;
        }
    }

for (let i = 0; i &lt; 1_000_000; ++i) {
    let dog = new Dog();
    dog.bark();
}
console.timeEnd(&quot;class decls&quot;);

console.time(&quot;object decls&quot;);
for (let i = 0; i &lt; 1_000_000; ++i) {
    let dog = {
        a: undefined,
        bark() {
            this.a + this.a;
        }
    }
    { // inlining the constructor
        dog.a = 1;
    }
    dog.bark();
}
console.timeEnd(&quot;object decls&quot;);
</code></pre>
<p>The results seem to heavily favor the first method, giving the following times when run with Bun and similar results when run with Node:</p>
<pre class=""lang-markdown prettyprint-override""><code>[8.46ms] class decls
[27.98ms] object decls
</code></pre>
<p>Why is it so much faster to declare a class and then construct a new object thereof? Is there some caching going on, or is it something else?</p>
",
tags:"<javascript>",
score:6,
creationDate:2024-12-31 07:31:52,
creationDate:2024-12-31 08:26:45,
score:3,
acceptedResponderReputation:513,
acceptedResponder:28009271,
QuestionerReputation:675,
Questioner:21107707}
{title:"Does the new RestClient introduced in Spring Framework 6.1 have a variant suitable for testing like RestTemplate had with TestRestTemplate?",
id:"https://stackoverflow.com/questions/77570517",
body:"<p>In spring framework 6.1, a new synchronous HTTP client <code>RestClient</code> was introduced. See also:</p>
<p><a href=""https://github.com/spring-projects/spring-framework/issues/29552"" rel=""noreferrer"">https://github.com/spring-projects/spring-framework/issues/29552</a></p>
<p>It aims to replace the existing <code>RestTemplate</code>.</p>
<p>In Spring Boot, there was a <code>TestRestTemplate</code> which could be used for integration tests. See also:</p>
<p><a href=""https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing.utilities.test-rest-template"" rel=""noreferrer"">https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.testing.utilities.test-rest-template</a></p>
<p>However, I could not find any mention of a variant for <code>RestClient</code>. What is the recommended way to do integration testing using <code>RestClient</code> ?</p>
",
tags:"<java><spring><spring-boot><resttemplate>",
score:7,
creationDate:2023-11-29 10:54:35,
creationDate:2023-11-29 17:44:32,
score:3,
acceptedResponderReputation:116031,
acceptedResponder:1384297,
QuestionerReputation:492,
Questioner:3470438}
{title:"How to use DecompressionStream to decompress a gzip file using JavaScript in Browser?",
id:"https://stackoverflow.com/questions/76691769",
body:"<p>All major browsers now support the <a href=""https://developer.mozilla.org/en-US/docs/Web/API/DecompressionStream"" rel=""noreferrer"">DecompressionStream API</a>, but I can't figure out how to use it with <code>fetch()</code> to decompress a gzip file in browser.</p>
<p>The following code works with a base64 string:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const decompress = async (url) =&gt; {
  const ds = new DecompressionStream('gzip');
  const response = await fetch(url);
  const blob_in = await response.blob();
  const stream_in = blob_in.stream().pipeThrough(ds);
  const blob_out = await new Response(stream_in).blob();
  return await blob_out.text();
};

decompress(
  'data:application/octet-stream;base64,H4sIAAAAAAAAE/NIzcnJVyjPL8pJAQBSntaLCwAAAA=='
).then((result) =&gt; {
  console.log(result);
});</code></pre>
</div>
</div>
</p>
<p>However, if I create a <code>hello.txt.gz</code> file using <code>gzip hello.txt</code> on MacOS (<code>hello.txt</code> is a plain text file with content &quot;hello world&quot;), then the function above throws an Error.</p>
<pre><code>decompress('/hello.txt.gz').then((result) =&gt; {
  console.log(result);
});
</code></pre>
<pre class=""lang-bash prettyprint-override""><code># FireFox
Failed to read data from the ReadableStream: “TypeError: The input data is corrupted: incorrect header check”.
Uncaught (in promise) DOMException: The operation was aborted.

# Chrome
Uncaught (in promise) TypeError: Failed to fetch

# Safari
[Error] Unhandled Promise Rejection: TypeError: TypeError: Failed to Decode Data.
[Error] Unhandled Promise Rejection: TypeError: Failed to Decode Data.

</code></pre>
<p><strong>Edit</strong></p>
<p>There is a reproducible demo at <a href=""https://stackblitz.com/edit/vitejs-vite-vrvd2k?file=src%2Fmain.ts"" rel=""noreferrer"">Stackblitz</a>.</p>
",
tags:"<javascript><typescript><vite><webapi>",
score:6,
creationDate:2023-07-15 00:40:05,
creationDate:2023-07-15 12:45:47,
score:3,
acceptedResponderReputation:2840,
acceptedResponder:5379444,
QuestionerReputation:2840,
Questioner:5379444}
{title:"Hibernate 6: Json type with Local Date var",
id:"https://stackoverflow.com/questions/75029192",
body:"<p>I recently switched to spring 3.0 and hibernate now supports json type definition like this:</p>
<pre><code>        @JdbcTypeCode(SqlTypes.JSON)
        var request: ReportRequestDto,
</code></pre>
<p>but the problem is that <code>ReportRequestDto</code> has <code>val from: LocalDate</code>, this causes an exception when saving entity:</p>
<pre><code>Java 8 date/time type `java.time.LocalDate` not supported by default
</code></pre>
<p>I have the <code>jackson-datatype-jsr310</code> dependency in my pom, also I have a configuration for object mapper:</p>
<pre><code>    @Bean
    @Primary
    fun objectMapper(): ObjectMapper {
        val objectMapper = ObjectMapper()
        objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)
        objectMapper.registerModule(JavaTimeModule())
        objectMapper.registerKotlinModule()
        objectMapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS)
        return objectMapper
    }
</code></pre>
<p>It looks like hibernate is not &quot;autowiring&quot; the object mapper, thus it doesn't have the java time module registered.</p>
",
tags:"<java><spring><hibernate><kotlin><jpa>",
score:7,
creationDate:2023-01-06 09:37:06,
creationDate:2023-01-24 12:58:26,
score:3,
acceptedResponderReputation:567,
acceptedResponder:4520750,
QuestionerReputation:211,
Questioner:3789298}
{title:"Can Instancio generate data for interfaces and abstract classes?",
id:"https://stackoverflow.com/questions/75715631",
body:"<p>I used to use Easy-Random to generate JUnit5 test data. However, as it does not seem to be developed anymore, doesn't support Java records, and in general seems to be less flexible than Instancio, I've decided to migrate. Instancio, out of the box, provides a lot of nice features, enabling quicker testing (easier parametrized tests, taking into consideration Javax, etc.). However, there is one drawback.</p>
<p>The objects returned by our persistence layer are auto-generated implementations of some record interface which look like:</p>
<pre class=""lang-java prettyprint-override""><code>interface SomeRecord {
  getUid();
}
</code></pre>
<p>Easy-Random was able to find the implementation and generate a random record.</p>
<p>I cannot find any information on how to resolve this or a workaround in Instancio's docs or anywhere else. Has anyone been able to do something similar?</p>
",
tags:"<java><junit5><instancio>",
score:6,
creationDate:2023-03-12 18:57:07,
creationDate:2023-03-13 03:47:15,
score:3,
acceptedResponderReputation:18518,
acceptedResponder:45112,
QuestionerReputation:63,
Questioner:21384924}
{title:"No Connection To Gradle Server && The Gradle Client Was Unable To Connect in Visual Studio Code",
id:"https://stackoverflow.com/questions/76744155",
body:"<p>I am new to Java Projects in Visual Studio Code. This is mainly for my school project. I was setting up Gradle for Java according to YouTube videos and follows the step. I just simply installed the &quot;<strong>Gradle for Java&quot;</strong> in Visual Studio Code but  I have an error. I have restarted and reconnected it but it is showing no progress. Any help will be appreciated. Cheers!</p>
<p>Error:
<strong>No Connection To Gradle Server. Try Restarting The Server.</strong>
Error:
<strong>The Gradle Client Was Unable To Connect. Try re-connecting.</strong></p>
<p><a href=""https://i.sstatic.net/3F6Tj.png"" rel=""noreferrer"">No Connection To Gradle Server. Try Restarting The Server
&amp;&amp; The Gradle Client Was Unable To Connect. Try re-connecting.</a></p>
<p>I tried restarting my PC, Vscode and even followed the instructions to reconnect but I am not really sure what does <strong>Restart Server</strong> means. I would like to acquire some answers and eventually able to run Gradle on Vscode.</p>
",
tags:"<java><visual-studio-code><gradle><gradle-plugin>",
score:7,
creationDate:2023-07-22 13:56:53,
creationDate:2023-08-05 13:00:46,
score:3,
acceptedResponderReputation:101,
acceptedResponder:22265030,
QuestionerReputation:101,
Questioner:22265030}
{title:"Puppeteer failing to click a tag with same id second time after content changes",
id:"https://stackoverflow.com/questions/76500706",
body:"<p>Working on Puppeteer to learn,so I am trying to form fill <a href=""https://self-service.wits.ac.za/psc/csprodonl/UW_SELF_SERVICE/SA/c/VC_OA_LOGIN_MENU.VC_OA_LOGIN_FL.GBL"" rel=""noreferrer"">this site</a></p>
<p><strong>What script does</strong></p>
<ul>
<li>Goes to link above</li>
<li>Click 'Create Temporary ID'</li>
<li>Fill form</li>
<li>Click continue</li>
<li>Content changes</li>
<li>Click continue again (Which is the same button with same ID value as the first 'Continue' button</li>
</ul>
<p><strong>ISSUE</strong></p>
<ul>
<li>When I click on the button 'Continue' button for second time which is the same ID as the one that worked first it fails</li>
</ul>
<p><strong>SCRIPT</strong></p>
<pre><code>import tesseract from 'node-tesseract-ocr';
import Puppeteer from 'puppeteer';

const config = {
  lang: 'eng', // default
  oem: 3,
  psm: 13,
};

export class AutomationController {
  public async CreateProfile(data: any) {
    try {
      const _data = {
        nationality: 'BRA',
        id: '0508228690083',
        title: 'Mr',
        firstName: 'Shaun',
        middleName: 'Maxwell',
        surname: 'Smith',
        dob: '15062001',
        gender: 'M',
        email: 'shaun@gmail.com',
        countryCode: '+27',
        mobileNumber: '0832567890',
      };

      const browser = await Puppeteer.launch({ headless: false });
      const page = await browser.newPage();
      await page.goto(
        'https://self-service.wits.ac.za/psc/csprodonl/UW_SELF_SERVICE/SA/c/VC_OA_LOGIN_MENU.VC_OA_LOGIN_FL.GBL',
        { waitUntil: 'networkidle2', timeout: 0 }
      );

      // Click create temp id button
      await page.waitForSelector('#VC_OA_LOGIN_WRK_REGISTER');
      await page.click('#VC_OA_LOGIN_WRK_REGISTER');

      // Nationality field
      await page.waitForSelector('#VC_OA_LOGIN_WRK_COUNTRY');
      // await page.select('select[id=&quot;VC_OA_LOGIN_WRK_COUNTRY&quot;]', 'AUS');

      // ID number field
      await page.waitForSelector('#VC_OA_LOGIN_WRK_NATIONAL_ID');
      const idInput = await page.$('#VC_OA_LOGIN_WRK_NATIONAL_ID');
      await idInput?.type(_data.id);
      await this.delay(4000);

      // Name Title field
      await page.waitForSelector('#VC_OA_LOGIN_WRK_NAME_PREFIX');
      await page.select(
        'select[id=&quot;VC_OA_LOGIN_WRK_NAME_PREFIX&quot;]',
        _data.title
      );
      await this.delay(4000);

      // First name field
      await page.waitForSelector(
        '#win0divVC_OA_LOGIN_WRK_FIRST_NAMEctrl &gt; #VC_OA_LOGIN_WRK_FIRST_NAME'
      ); // VC_OA_LOGIN_WRK_FIRST_NAME
      const firstNameInput = await page.$('#VC_OA_LOGIN_WRK_FIRST_NAME');
      await firstNameInput?.type(_data.firstName);
      await this.delay(4000);

      // Middle name field
      await page.waitForSelector('#VC_OA_LOGIN_WRK_MIDDLE_NAME');
      const middleNameInput = await page.$('#VC_OA_LOGIN_WRK_MIDDLE_NAME');
      await middleNameInput?.type(_data.middleName);
      await this.delay(4000);

      // Surname field
      await page.waitForSelector('#VC_OA_LOGIN_WRK_LAST_NAME');
      const surnameInput = await page.$('#VC_OA_LOGIN_WRK_LAST_NAME');
      await surnameInput?.type(_data.surname);
      await this.delay(4000);

      // Gender field
      await page.waitForSelector('#VC_OA_LOGIN_WRK_SEX');
      await page.select('select[id=&quot;VC_OA_LOGIN_WRK_SEX&quot;]', _data.gender);
      await this.delay(4000);

      // Email field
      await page.waitForSelector(
        '#win0divVC_OA_LOGIN_WRK_EMAIL_ADDRctrl &gt; #VC_OA_LOGIN_WRK_EMAIL_ADDR'
      );
      const emailInput = await page.$(
        '#win0divVC_OA_LOGIN_WRK_EMAIL_ADDRctrl &gt; #VC_OA_LOGIN_WRK_EMAIL_ADDR'
      );
      await emailInput?.type(_data.email);
      await this.delay(4000);

      // Mobile number
      await page.waitForSelector('#VC_OA_LOGIN_WRK_VC_PHONE_CELL_SS');
      const mobileInput = await page.$('#VC_OA_LOGIN_WRK_VC_PHONE_CELL_SS');
      await mobileInput?.type(_data.mobileNumber);
      await this.delay(4000);

      await page.waitForSelector(
        '#win0divVC_SEC_WRK_HTML_AREA_02 &gt; div &gt; div &gt; img'
      );

      // Bypass security check
      const imgs = await page.$$eval(
        '#win0divVC_SEC_WRK_HTML_AREA_02 &gt; div &gt; div &gt; img',
        (imgs) =&gt; imgs.map((img) =&gt; img.getAttribute('src'))
      );
      const securityPassword = this.getCharacterAfterSecondUnderscore(imgs);

      await page.waitForSelector('#VC_OA_LOGIN_WRK_VC_SEC_CODE');
      const securityField = await page.$('#VC_OA_LOGIN_WRK_VC_SEC_CODE');
      await securityField?.type(securityPassword);

      await this.delay(4000);

      // Continue button
      await page.waitForSelector('#VC_OA_LOGIN_WRK_CONTINUE_PB');
      const continueBtn = await page.$('#VC_OA_LOGIN_WRK_CONTINUE_PB');
      await continueBtn.click();

      this.delay(5000);
      // TODO - HANDLE IF SECURITY CHECK FAILED

      //THIS THE BUTTON THAT FAILS TO CLICK SECOND TIME
      // CONFIRM Details button
      const confirmBtn = await page.$('#VC_OA_LOGIN_WRK_CONTINUE_PB'); 
      await confirmBtn.click();
      console.log(`Automation.controller - 136`, 'DONE');

      await this.delay(4000);
    } catch (error) {
      console.log(`Automation.controller - 137`, error);
    }
  }

  private delay(time) {
    return new Promise(function (resolve) {
      setTimeout(resolve, time);
    });
  }

  private getCharacterAfterSecondUnderscore(strings: string[]): string {
    const results: string[] = [];

    for (const string of strings) {
      const splittedString = string.split('_');
      results.push(splittedString[2]);
    }

    return results.join('');
  }
}

</code></pre>
",
tags:"<javascript><typescript><web-scraping><puppeteer>",
score:7,
creationDate:2023-06-18 13:08:23,
creationDate:2023-06-22 11:41:38,
score:3,
acceptedResponderReputation:10816,
acceptedResponder:7552340,
QuestionerReputation:1051,
Questioner:14427125}
{title:"Migrate Spring Security configuration to Spring Cloud 2022.0.4",
id:"https://stackoverflow.com/questions/76315238",
body:"<p>I want to migrate this Spring security configuration to latest Spring Cloud:</p>
<pre><code>import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.boot.autoconfigure.security.oauth2.resource.ResourceServerProperties;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.oauth2.config.annotation.web.configuration.ResourceServerConfigurerAdapter;
import org.springframework.security.oauth2.config.annotation.web.configurers.ResourceServerSecurityConfigurer;
import org.springframework.security.oauth2.provider.error.OAuth2AuthenticationEntryPoint;
import org.springframework.security.oauth2.provider.token.DefaultAccessTokenConverter;
import org.springframework.security.oauth2.provider.token.DefaultTokenServices;
import org.springframework.security.oauth2.provider.token.TokenStore;
import org.springframework.security.oauth2.provider.token.store.JwtAccessTokenConverter;
import org.springframework.security.oauth2.provider.token.store.JwtTokenStore;

public class DefaultSecurityConfig extends ResourceServerConfigurerAdapter {

  @Autowired
  private ResourceServerProperties resource;

  @Autowired
  private CustomUserDataAuthenticationConverter customUserDataAuthenticationConverter;

  public DefaultSecurityConfig() {
  }

  @Override
  public void configure(final HttpSecurity http) throws Exception {

    http.authorizeRequests()
        .antMatchers(&quot;/configuration/**&quot;,)
        .permitAll();

    http.authorizeRequests().antMatchers(&quot;/**&quot;).authenticated();

    final OAuth2AuthenticationEntryPoint oAuth2AuthenticationEntryPoint =
        new CustomOAuth2AuthenticationEntryPoint();

    http.exceptionHandling().authenticationEntryPoint(oAuth2AuthenticationEntryPoint);
  }

  @Override
  public void configure(final ResourceServerSecurityConfigurer resources) {
    resources.tokenServices(tokenServices());
    resources.resourceId(resource.getResourceId());
  }

  private TokenStore customTokenStore() {
    return new JwtTokenStore(accessTokenConverter());
  }

  private JwtAccessTokenConverter accessTokenConverter() {
    JwtAccessTokenConverter converter = new NonValidatingAccessTokenConverter();
    converter.setAccessTokenConverter(customAccessTokenConverter());
    return converter;
  }

  private DefaultTokenServices tokenServices() {
    DefaultTokenServices defaultTokenServices = new DefaultTokenServices();
    defaultTokenServices.setTokenStore(customTokenStore());
    return defaultTokenServices;
  }

  private DefaultAccessTokenConverter customAccessTokenConverter() {
    DefaultAccessTokenConverter tokenConverter = new DefaultAccessTokenConverter();
    tokenConverter.setUserTokenConverter(customUserDataAuthenticationConverter);
    return tokenConverter;
  }
}
</code></pre>
<p>As you can see I migrate parts of the code but several issues are not clear:</p>
<ol>
<li><p>implementation 'org.springframework.security.oauth.boot:spring-security-oauth2-autoconfigure' Is removed from <code>spring.dependency.management</code> package. What package should replace it?</p>
</li>
<li><p><code>ResourceServerConfigurerAdapter</code> is deprecated. How to replace it?</p>
</li>
<li><p><code>OAuth2AuthenticationEntryPoint</code> is deprecated. How to replace it?</p>
</li>
</ol>
<p>What should be the proper way to migrate the code accordingly?</p>
",
tags:"<java><spring-boot><spring-security><spring-oauth2>",
score:7,
creationDate:2023-05-23 13:17:42,
creationDate:2023-08-20 10:30:17,
score:3,
acceptedResponderReputation:4896,
acceptedResponder:18364656,
QuestionerReputation:1648,
Questioner:1103606}
{title:"What is a digest property?",
id:"https://stackoverflow.com/questions/76713709",
body:"<p>I am new to using NextJS and am trying to get my first project up in production. But I am seeing this error:</p>
<pre><code>Application error: a client-side exception has occurred (see the browser console for more information).
Digest: 4266806755
</code></pre>
<p>It seems to me like this <code>digest property</code> should be able to be inspected in some way, but I cannot find information on how to do this.</p>
<p>What is this <code>digest property</code> and how would I go about using it to troubleshoot my issue?</p>
<p>Of course it works perfectly well when testing locally using my localhost. But when I am running my code in production I saw the above error. Upon inspection of the container running my code, I see</p>
<pre><code>SyntaxError: Unexpected end of JSON input
    at JSON.parse (&lt;anonymous&gt;)
    at parseJSONFromBytes (node:internal/deps/undici/undici:6571:19)
    at successSteps (node:internal/deps/undici/undici:6545:27)
    at node:internal/deps/undici/undici:1211:60
    at node:internal/process/task_queues:140:7
    at AsyncResource.runInAsyncScope (node:async_hooks:203:9)
    at AsyncResource.runMicrotask (node:internal/process/task_queues:137:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
SyntaxError: Unexpected end of JSON input
    at JSON.parse (&lt;anonymous&gt;)
    at parseJSONFromBytes (node:internal/deps/undici/undici:6571:19)
    at successSteps (node:internal/deps/undici/undici:6545:27)
    at node:internal/deps/undici/undici:1211:60
    at node:internal/process/task_queues:140:7
    at AsyncResource.runInAsyncScope (node:async_hooks:203:9)
    at AsyncResource.runMicrotask (node:internal/process/task_queues:137:8)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
[Error: An error occurred in the Server Components render. The specific message is omitted in production builds to avoid leaking sensitive details. A digest property is included on this error instance which may provide additional details about the nature of the error.] {
  digest: '4266806755'
}
</code></pre>
<p>I am expecting to see no errors. But since I see this one, I would like to be able to inspect the error.</p>
",
tags:"<javascript><reactjs><next.js><hash>",
score:6,
creationDate:2023-07-18 14:13:42,
creationDate:2023-08-20 17:10:16,
score:3,
acceptedResponderReputation:46,
acceptedResponder:17641450,
QuestionerReputation:75,
Questioner:14208731}
{title:"react-router Navigate component in Nextjs",
id:"https://stackoverflow.com/questions/75183063",
body:"<p>How can i achieve a similar result just like <code>Navigate</code> component of react-router has, in Nextjs?
There is a next/Router option but i want to return something to navigate.</p>
<p>i want to redirect the page, but not with <code>router.push</code> because i have to use a <code>useEffect</code> but i only want to know if there is a way to do the exact same thing using returning a component</p>
<p>Basically what is the equivalent of this in Nextjs without react-router</p>
<pre class=""lang-js prettyprint-override""><code>import { Navigate } from &quot;react-router&quot;;

const Page = () =&gt; {
  const { user } = useAuth();

  if (user?.role.name === &quot;user&quot;) {
    return &lt;Navigate to={&quot;/app&quot;} /&gt;;
  } else {
    return &lt;Navigate to={&quot;/app/workspaces&quot;} /&gt;;
  }
}

export default Page
</code></pre>
",
tags:"<javascript><reactjs><next.js>",
score:6,
creationDate:2023-01-20 10:55:15,
creationDate:2023-05-13 11:23:46,
score:3,
acceptedResponderReputation:4287,
acceptedResponder:8138591,
QuestionerReputation:533,
Questioner:13825398}
{title:"How can I use ES2023 methods in TypeScript?",
id:"https://stackoverflow.com/questions/76710595",
body:"<p>I want to use the ES2023 <code>toReversed()</code> method on TypeScript, but I'm getting this error when I'm building my Next.js project:</p>
<blockquote>
<p>Type error: Property 'toReversed' does not exist on type 'Job[]'. Did you mean 'reverse'?</p>
</blockquote>
<p>I tried updating TypeScript to newest version and adding <code>&quot;ES2023&quot;</code> and <code>&quot;ES2023.Array&quot;</code> into <code>lib</code> in <code>tsconfig.json</code> but it didn't work.</p>
<p><strong>tsconfig.json</strong></p>
<pre><code>{
  &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;es6&quot;,
    &quot;lib&quot;: [&quot;dom&quot;, &quot;dom.iterable&quot;, &quot;esnext&quot;, &quot;ES2023&quot;, &quot;ES2023.Array&quot;],
    &quot;allowJs&quot;: true,
    &quot;skipLibCheck&quot;: true,
    &quot;strict&quot;: true,
    &quot;forceConsistentCasingInFileNames&quot;: true,
    &quot;noEmit&quot;: true,
    &quot;esModuleInterop&quot;: true,
    &quot;module&quot;: &quot;esnext&quot;,
    &quot;moduleResolution&quot;: &quot;node&quot;,
    &quot;resolveJsonModule&quot;: true,
    &quot;isolatedModules&quot;: true,
    &quot;jsx&quot;: &quot;preserve&quot;,
    &quot;incremental&quot;: true
  },
  &quot;include&quot;: [&quot;next-env.d.ts&quot;, &quot;**/*.ts&quot;, &quot;**/*.tsx&quot;, &quot;components/Home/about.tsx&quot;, &quot;components/Socials/Icons/socialIcons.tsx&quot;, &quot;components/Socials/socials.tsx&quot;, &quot;pages/_app.tsx&quot;, &quot;functions/formatDate.ts&quot;],
  &quot;exclude&quot;: [&quot;node_modules&quot;]
}
</code></pre>
<p>I already saw <a href=""https://stackoverflow.com/questions/76593892/how-to-use-tosorted-method-in-typescript"">This question</a>, but he did not add <code>&quot;ES2023&quot;</code> and <code>&quot;ES2023.Array&quot;</code> into his <code>tsconfig.json</code> file, and I don't know why I'm still getting this error even though I updated my <code>tsconfig.json</code> file.</p>
<p>Why do I keep getting this error with ES2023 configurations in my <code>tsconfig.json</code> file?</p>
",
tags:"<javascript><reactjs><typescript><next.js>",
score:20,
creationDate:2023-07-18 07:53:51,
creationDate:2024-07-05 19:53:03,
score:3,
acceptedResponderReputation:1025,
acceptedResponder:15353979,
QuestionerReputation:1025,
Questioner:15353979}
{title:"EventSource gets all chunks at once when streaming via Nextjs API Routes",
id:"https://stackoverflow.com/questions/75256892",
body:"<h2>Problem</h2>
<p>I am trying to stream data to my <em>React</em> Frontend via <a href=""https://developer.mozilla.org/en-US/docs/Web/API/Server-sent_events/Using_server-sent_events#event_stream_format"" rel=""noreferrer"">EventSources</a>, which kind of works. The problem is that I receive all chunks of data at once instead of time after time. Which kind of defeats the purpose of the method as it is basically now a <strong>GET</strong> request.</p>
<h2>Code</h2>
<p>I am using <em>Next.js</em> api routes and this is my code on this route:</p>
<pre><code>res.writeHead(200, {
  &quot;Content-Type&quot;: &quot;text/event-stream&quot;,
  &quot;Cache-Control&quot;: &quot;no-cache&quot;,
  Connection: &quot;keep-alive&quot;,
});

answerStream.data
  .on(&quot;data&quot;, (chunk: string) =&gt; res.write(chunk))
  .on(&quot;error&quot;, (error: Error) =&gt; {
    console.error(error);
    res.end();
  })
  .on(&quot;end&quot;, () =&gt; res.end());
</code></pre>
<p>This is the code in the Frontend:</p>
<pre><code>  const eventSource = new EventSource(url);
  eventSource.addEventListener(&quot;message&quot;, e =&gt; {
    try {
      if (e.data == &quot;[DONE]&quot;) eventSource.close();
      else {
        const messageObject = JSON.parse(e.data);
        setArticle(state =&gt; (state += messageObject?.choices[0]?.text));
      }
    } catch (error) {
      console.log(error);
    }
  });

  eventSource.addEventListener(&quot;close&quot;, e =&gt; {
    console.log(&quot;Connection closed with the server&quot;);
    setSubmitting(false);
  });

  eventSource.addEventListener(&quot;error&quot;, e =&gt; {
    setError(e?.message || &quot;Leider ist ein Fehler aufgetreten&quot;);
    setSubmitting(false);
    eventSource.close();
  });
</code></pre>
<h2>Info</h2>
<p>Is there anything in my implementation wrong? Or does  <em>Next.js</em> have a strange handling of <code>EventSource</code>?</p>
",
tags:"<javascript><reactjs><next.js><server-sent-events>",
score:6,
creationDate:2023-01-27 10:34:14,
creationDate:2023-02-02 17:48:39,
score:3,
acceptedResponderReputation:8962,
acceptedResponder:7490871,
QuestionerReputation:8962,
Questioner:7490871}
{title:"Verifying Android app links fails with error 1024",
id:"https://stackoverflow.com/questions/76507667",
body:"<p>I have an Android app with applicationId <code>com.unibeam.passkey1</code>.</p>
<p>At <code>https://unibeam.github.io/.well-known/assetlinks.json</code>, I have stored the following file:</p>
<pre><code>[{
  &quot;relation&quot;: [&quot;delegate_permission/common.get_login_creds&quot;],
  &quot;target&quot;: {
    &quot;namespace&quot;: &quot;web&quot;,
    &quot;site&quot;: &quot;https://unibeam.github.io&quot;
  }
 },
 {
  &quot;relation&quot;: [&quot;delegate_permission/common.get_login_creds&quot;],
  &quot;target&quot;: {
    &quot;namespace&quot;: &quot;android_app&quot;,
    &quot;package_name&quot;: &quot;com.unibeam.passkey1&quot;,
    &quot;sha256_cert_fingerprints&quot;: [
      &quot;55:E2:84:F9:9B:59:82:02:FA:2B:87:B9:90:77:8F:8D:62:3F:32:CC:76:92:47:0C:A8:73:7C:AE:11:8D:B6:0C&quot;,
      &quot;0E:67:51:BF:E4:C4:01:7F:CB:7D:4C:1E:02:7E:DF:8D:40:25:9A:5C:20:2A:AB:96:71:15:F1:46:40:09:58:3D&quot;
    ]
  }
 }]
</code></pre>
<p>The 2 fingerprints correspond to the debug and release versions of the app.</p>
<p>And checking at <code>https://digitalassetlinks.googleapis.com/v1/statements:list?source.web.site=https://unibeam.github.io&amp;relation=delegate_permission/common.get_login_creds</code> returns no error.</p>
<p>Now inside the app's <code>manifest.xml</code>, I have the following:</p>
<pre><code>&lt;intent-filter android:autoVerify=&quot;true&quot;&gt;
    &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;
    &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;
    &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;
    &lt;data android:scheme=&quot;http&quot; /&gt;
    &lt;data android:scheme=&quot;https&quot; /&gt;
    &lt;data android:host=&quot;unibeam.github.io&quot; /&gt;
&lt;/intent-filter&gt;
</code></pre>
<p>The problem is that when running <code>adb shell pm get-app-links --user cur com.unibeam.passkey1</code> it fails as follows:</p>
<pre><code>  com.unibeam.passkey1:
    ID: 24defbad-89a3-46d4-8446-335dfcdcd0a9
    Signatures: [0E:67:51:BF:E4:C4:01:7F:CB:7D:4C:1E:02:7E:DF:8D:40:25:9A:5C:20:2A:AB:96:71:15:F1:46:40:09:58:3D]
    Domain verification state:
      unibeam.github.io: 1024
    User 0:
      Verification link handling allowed: true
      Selection state:
        Disabled:
          unibeam.github.io
</code></pre>
<p>Why does it fail? Does the app need to be on PlayStore for all this to work?</p>
",
tags:"<java><android>",
score:8,
creationDate:2023-06-19 14:38:43,
creationDate:2023-06-27 14:21:37,
score:3,
acceptedResponderReputation:29208,
acceptedResponder:9019885,
QuestionerReputation:15987,
Questioner:50335}
{title:"JPA Metamodel doesn't generate sources after moving to spring boot 3 and java 17",
id:"https://stackoverflow.com/questions/76276464",
body:"<p>After moving the spring boot project from 2.0 to 3.0 and upgrading to java 17, hibernate-jpamodelgen doesn't generate a metamodel classes.</p>
<p>I added this dependency, but it still doesn't work. Could someone help?</p>
<pre><code>&lt;dependency&gt;
     &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;
     &lt;artifactId&gt;hibernate-jpamodelgen&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
",
tags:"<spring-boot><spring-data-jpa><java-17><hibernate-6.x>",
score:8,
creationDate:2023-05-17 22:00:05,
creationDate:2023-09-05 17:10:38,
score:4,
acceptedResponderReputation:271,
acceptedResponder:4458609,
QuestionerReputation:83,
Questioner:1445772}
{title:"Do Electron apps enforce CORS restrictions in the renderer process?",
id:"https://stackoverflow.com/questions/79352732",
body:"<p>I'm developing an Electron (v33.0.2) application and am struggling to understand how CORS is handled in the renderer process.</p>
<p>When making requests from the renderer process (not the main process), does Electron enforce CORS restrictions like a regular browser would? When I run my app locally (using vite) it consistently sends pre-flight requests with origin localhost:5173. I can see this in the developer tools network tab. However when I bundle and run my app (as a customer would run it in production), I do not see any pre-flight requests at all in the network tab. I've tested sending &quot;complex&quot; requests which should on paper be pre-flighted. I'm sure requests are being sent from the renderer process as the requests are being sent via React hooks (using <code>fetch</code>).</p>
<p>I've also noticed we have the <code>nodeIntegration</code> flag set on webPreferences which may have an impact here.</p>
<p>Would appreciate clarification on:</p>
<ol>
<li>Whether CORS is enforced in the Electron renderer process.</li>
<li>Is CORS used on the <code>file://</code> protocol? One difference between our dev and packaged app is that the origin in dev is <code>http://localhost:5173</code>, but the origin in the packaged app is <code>file://</code>.</li>
<li>If setting <code>nodeIntegration</code> influences CORS behaviour.</li>
</ol>
",
tags:"<javascript><node.js><security><electron><cors>",
score:8,
creationDate:2025-01-13 15:46:58,
creationDate:2025-01-23 21:26:41,
score:4,
acceptedResponderReputation:833,
acceptedResponder:20907368,
QuestionerReputation:36399,
Questioner:229792}
{title:"Ignore comma within N nested parentheses for a Regex match",
id:"https://stackoverflow.com/questions/76009606",
body:"<p>This is a direct follow up of <a href=""https://stackoverflow.com/q/75135384/8620333"">my previous question</a> where I got the following Regex;</p>
<pre class=""lang-js prettyprint-override""><code>const matches = text.match(/(?:\([^()]*(?:\([^()]*\)[^()]*)*\)|[^,])+/g);
</code></pre>
<p>From this <code>a,(b, b),c (aaa, (bbb, cccc, ddd)),d</code> I get</p>
<pre><code>a
(b, b)
c (aaa, (bbb, cccc, ddd))
d
</code></pre>
<p>But it fails when I have the following case <code>a,(b, b),c (aaa, ((b b), cccc, ddd)),d</code> where there are 3 nested parentheses which is logical after dissecting how the Regex works.</p>
<p>I tried to update it to consider another level of parentheses and I did the following</p>
<pre class=""lang-js prettyprint-override""><code>const matches = text.match(/(?:\([^()]*(?:\([^()]*(?:\([^()]*\)[^()]*)*\)[^()]*)*\)|[^,])+/g)
</code></pre>
<p>It works (<a href=""https://regex101.com/r/6qnFGD/1"" rel=""noreferrer"">online demo</a>) but I am not sure if it's the optimal solution. I also don't know if it will cover all the cases. Can anyone confirm? or maybe there is a better Regex.</p>
<p>I am also looking for a way to generate such Regex for a giving number of parentheses. I have it for 2 and 3 but what about N? Will it work if I always repeat the following part <code>(?:\([^()]*\)[^()]*)*</code> recursively? I know Regex cannot handle any number of nested parentheses but I am not looking for this. I want for a giving number to generate the regex (using JS) and use it.</p>
",
tags:"<javascript><regex>",
score:6,
creationDate:2023-04-13 20:31:16,
creationDate:2023-04-14 10:37:30,
score:4,
acceptedResponderReputation:21110,
acceptedResponder:3982562,
QuestionerReputation:272592,
Questioner:8620333}
{title:"In java How to migrate from Executors.newFixedThreadPool(MAX_THREAD_COUNT()) to Virtual Thread",
id:"https://stackoverflow.com/questions/77937704",
body:"<p><strong>Motivation</strong>:
Trying to migrate Virtual Threads.</p>
<p><strong>Problem</strong>:
Even though Virtual Threads are cheap, OS may find it suspicious for some processes to be stacked up at the same time, like searching for IP or ports on the network.</p>
<p>I am using the below code to limit the creation of threads. <a href=""https://github.com/tugalsan/com.tugalsan.api.network/blob/main/src/main/java/com/tugalsan/api/network/server/TS_NetworkIPUtils.java"" rel=""noreferrer"">TS_NetworkIPUtils</a> <a href=""https://github.com/tugalsan/com.tugalsan.api.network/blob/main/src/main/java/com/tugalsan/api/network/server/TS_NetworkPortUtils.java"" rel=""noreferrer"">TS_NetworkPortUtils</a></p>
<pre><code>var executor = useVirtualThread
                    ? Executors.newVirtualThreadPerTaskExecutor()
                    : Executors.newFixedThreadPool(MAX_THREAD_COUNT());
</code></pre>
<p>Is it possible to create an executor service for creating virtual threads and having a limiting feature at the same time?</p>
",
tags:"<java><executorservice><virtual-threads>",
score:7,
creationDate:2024-02-04 21:46:21,
creationDate:2024-02-06 03:52:14,
score:4,
acceptedResponderReputation:338171,
acceptedResponder:642706,
QuestionerReputation:633,
Questioner:1738007}
{title:"Astro component how to render div based on prop value",
id:"https://stackoverflow.com/questions/77252681",
body:"<p>I'm new to javascript in general and learning Astro. I couldn't figure out what's wrong with this conditional? The site builds but it's not finding matches and always ends in &quot;unknown kind&quot;. If there's a better way to do this please let me know. Below is the astro component and I'm using Astro with typescript, calling the component in an MDX file.</p>
<pre><code>// Component.astro

---
const { kind } = Astro.props;
---

{
  () =&gt; {
    if (kind === &quot;a&quot;) {
      &lt;div&gt;a&lt;/div&gt;
    }
    if (kind === &quot;b&quot;) {
      &lt;div&gt;b&lt;/div&gt;    
    }
    if (kind === &quot;c&quot;) {
      &lt;div&gt;c&lt;/div&gt;
    } else {
      console.log(&quot;unknown kind.&quot;);
    }
  }
}

</code></pre>
<pre><code>// the MDX file

&lt;Component kind=&quot;a&quot; /&gt;

</code></pre>
<p>I also felt there should be a simpler short hand to write these statements. But I can't even get the verbose version working. Appreciate any help.</p>
",
tags:"<javascript><conditional-statements><astrojs><mdxjs>",
score:7,
creationDate:2023-10-08 07:22:16,
creationDate:2023-10-08 08:01:42,
score:4,
acceptedResponderReputation:1861,
acceptedResponder:1324481,
QuestionerReputation:73,
Questioner:5387521}
{title:"Gradle 8.0 - app: compileDebugJavaWithJavac - error: element value must be a constant expression",
id:"https://stackoverflow.com/questions/76064833",
body:"<p>I recently upgraded to Gradle 8.0 and since then I'm facing an issue while running task &quot;testDebugUnitTest&quot; in a gitlab-ci environment.</p>
<p>The error occurs during the task &quot;compileDebugJavaWithJavac&quot; with the following message:
<code>error: element value must be a constant expression @BindView(R.id.screen_scan) ^</code>
When I inspect the R.id bytecode from a generated APK build, I see this.
<code>.field public static final screen_scan:I = 0x7f090185 </code></p>
<p>This error occurs with all @BindView annotations.</p>
<p>Any idea how I can solve this?</p>
",
tags:"<java><android><gradle><gitlab-ci>",
score:6,
creationDate:2023-04-20 13:46:36,
creationDate:2023-04-20 15:48:48,
score:4,
acceptedResponderReputation:101,
acceptedResponder:7575336,
QuestionerReputation:709,
Questioner:8200076}
{title:"next dynamic routes 404 firebase hosting",
id:"https://stackoverflow.com/questions/75033241",
body:"<p>Using next.js app deployed on firebase.</p>
<p>I have deployed the app already and using some time.</p>
<ol>
<li>I created a dynamic route page</li>
<li>Deployed again app</li>
<li><strong>I could access the dynamic page via a router, but once I refresh the page I got a 404 page not found</strong></li>
</ol>
<p>Solutions that I tried and didn't work:</p>
<ul>
<li>Rewrites with dynamicLink true</li>
<li>Rewrites with destination to the dynamic route and regex / source</li>
</ul>
<pre><code>&quot;rewrites&quot;: [
      {
        &quot;source&quot;: &quot;/job/**&quot;,
        &quot;destination&quot;: &quot;/job/[jobId]/index.html&quot;
      }
</code></pre>
<ul>
<li>cleanUrls true</li>
<li>trailingSlash: true plus rewrite config with destination to the dynamic page</li>
<li>Any many more</li>
</ul>
<p>I found a ton of solutions for this problem but no one didn't work for me.</p>
<p>Any idea?</p>
<p>firebase.json file:</p>
<pre><code>{
  &quot;hosting&quot;: {
    &quot;public&quot;: &quot;out&quot;,
    &quot;ignore&quot;: [
      &quot;firebase.json&quot;,
      &quot;**/.*&quot;,
      &quot;**/node_modules/**&quot;
    ],
    &quot;cleanUrls&quot;: true,
    &quot;rewrites&quot;: [
      {
        &quot;source&quot;: &quot;**&quot;,
        &quot;destination&quot;: &quot;out/index.html&quot;
      }
    ]
  },
  &quot;functions&quot;: [
    {
      &quot;source&quot;: &quot;functions&quot;,
      &quot;codebase&quot;: &quot;default&quot;,
      &quot;ignore&quot;: [
        &quot;node_modules&quot;,
        &quot;.git&quot;,
        &quot;firebase-debug.log&quot;,
        &quot;firebase-debug.*.log&quot;
      ],
      &quot;predeploy&quot;: [&quot;npm --prefix \&quot;$RESOURCE_DIR\&quot; run build&quot;]
    }
  ]
}

</code></pre>
",
tags:"<javascript><reactjs><firebase><next.js><firebase-hosting>",
score:10,
creationDate:2023-01-06 15:58:44,
creationDate:2023-02-01 07:42:55,
score:4,
acceptedResponderReputation:18528,
acceptedResponder:9640177,
QuestionerReputation:558,
Questioner:11220076}
{title:"How to decode PKCS#7/ASN.1 using Javascript?",
id:"https://stackoverflow.com/questions/77553782",
body:"<p>Recently I started to work on Apple app store receipt validation and due to the deprecation of the legacy <code>/verifyReceipt</code> endpoint, I decided to go for <a href=""https://developer.apple.com/documentation/appstorereceipts/validating_receipts_on_the_device"" rel=""noreferrer"">on-device validation</a>. The guideline described gives a step-by-step solution for <code>MacOS</code> however we want to perform this validation in the backend service using NodeJs. For the purpose of this validation information defined in the <code>PCKS7#</code> container is required to be decoded. Here my knowledge comes short as I am unable to retrieve this information (e.g. <code>receipt_creation_data</code>, <code>bundle_id</code>) I managed to convert the receipt from <code>PCKS7</code> to <code>ASN.1</code> but could not find a way to retrieve the actual key values from it. I tried several libraries like <code>node-forge</code>, <code>asn1js</code>, <code>asn1.js</code>. What I found really useful were these resources:</p>
<ul>
<li><a href=""https://github.com/SilentCircle/iap-local-receipt"" rel=""noreferrer"">iap-local-receipt</a> - Python implementation of the exact problem</li>
<li><a href=""https://github.com/tamtamchik/app-store-receipt-parser"" rel=""noreferrer"">https://github.com/tamtamchik/app-store-receipt-parser</a> - shows a possible way of parsing Apple-store receipt</li>
<li><a href=""https://lapo.it/asn1js/"" rel=""noreferrer"">https://lapo.it/asn1js/</a> - tool converting <code>PKCS#7</code> to <code>ASN.1</code></li>
</ul>
<p>AFAIK the information should be encoded in OCTET STRING format
<a href=""https://i.sstatic.net/s4JaN.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/s4JaN.png"" alt=""enter image description here"" /></a></p>
<p>How can information such as <code>bundle_id</code> or <code>receipt_creation_date</code> be retrieved from ASN.1 using Javascript?</p>
",
tags:"<javascript><app-store><asn.1><pkcs#7>",
score:6,
creationDate:2023-11-26 22:55:32,
creationDate:2023-12-04 21:22:58,
score:4,
acceptedResponderReputation:316,
acceptedResponder:14027842,
QuestionerReputation:316,
Questioner:14027842}
{title:"'imports' is only valid on a component that is standalone",
id:"https://stackoverflow.com/questions/79204594",
body:"<p>I updated my Angular 18 applications (with standalone components <code>standalone: true</code>) to Angular 19 using <code>ng update</code>:</p>
<pre class=""lang-none prettyprint-override""><code>❯ Updates non-standalone Directives, Component and Pipes to 'standalone:false' 
  and removes 'standalone:true' from those who are standalone.
</code></pre>
<p>So far so good, all <code>standalone: true</code> are removed.</p>
<p>However, Visual Studio Code is now issuing following error for <code>imports: [RouterLink, ...]</code>:</p>
<pre class=""lang-none prettyprint-override""><code>'imports' is only valid on a component that is standalone.
</code></pre>
<p>What did I miss?</p>
<p>I followed this guide:</p>
<ul>
<li><a href=""https://angular.dev/update-guide?v=18.0-19.0"" rel=""nofollow noreferrer"">https://angular.dev/update-guide?v=18.0-19.0</a></li>
</ul>
",
tags:"<javascript><angular><typescript><angular19>",
score:6,
creationDate:2024-11-19 18:09:03,
creationDate:2024-11-19 18:12:56,
score:4,
acceptedResponderReputation:56054,
acceptedResponder:5924562,
QuestionerReputation:10055,
Questioner:42659}
{title:"How to format the tick labels of the noUiSlider with SI symbols?",
id:"https://stackoverflow.com/questions/76039917",
body:"<p>Here is how my noUiSlider looks like:</p>
<p><a href=""https://i.sstatic.net/Tn3Ae.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/Tn3Ae.png"" alt=""enter image description here"" /></a></p>
<p>I would like to format the tick labels as: 1000 -&gt; 1K, 900000 -&gt; 900K, 5000000 -&gt; 5M, etc; i.e. abbreviating the number with the appropriate SI symbol.</p>
<pre class=""lang-r prettyprint-override""><code>library(shiny)
library(shinyWidgets)

ui &lt;- fluidPage(
  
  tags$br(),
  
  noUiSliderInput(
    inputId = &quot;noui&quot;, 
    label = &quot;Slider vertical:&quot;,
    value =  50,
    orientation = &quot;vertical&quot;,
    range = list(&quot;min&quot; = list(0),
                 &quot;25%&quot; = list(1000, 500),
                 &quot;50%&quot; = list(10000, 50000),
                 &quot;75%&quot; = list(4000000, 500000),
                 &quot;max&quot; = list(10000000)),
    pips = list(
      mode = &quot;values&quot;,
      values = list(0, 500, 1000, 900000, 5000000, 10000000),
      density = 4
    ),
    format = wNumbFormat(decimals = 0),
    width = &quot;300px&quot;, height = &quot;300px&quot;
  ),
  verbatimTextOutput(outputId = &quot;res&quot;)
  
)

server &lt;- function(input, output, session) {
  
  output$res &lt;- renderPrint(input$noui)
  
}

shinyApp(ui, server)
</code></pre>
",
tags:"<javascript><r><shiny><nouislider><shinywidgets>",
score:6,
creationDate:2023-04-17 23:11:00,
creationDate:2023-04-17 23:11:00,
score:4,
acceptedResponderReputation:84519,
acceptedResponder:1100107,
QuestionerReputation:84519,
Questioner:1100107}
{title:"Cache miss for REQUEST dispatch",
id:"https://stackoverflow.com/questions/77611596",
body:"<p>I'm currently using Spring boot updated version 3.2.0 and implemented the <strong>SecurityFilterChain</strong> after running the application I got this message:</p>
<pre><code>2023-12-11T12:08:04.541+06:00  WARN 28000 --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/' (previous null). Performing CorsConfiguration lookup. This is logged once only at WARN level, and every time at TRACE.
2023-12-11T12:08:04.550+06:00  WARN 28000 --- [nio-8080-exec-1] o.s.w.s.h.HandlerMappingIntrospector     : Cache miss for REQUEST dispatch to '/' (previous null). Performing MatchableHandlerMapping lookup. This is logged once only at WARN level, and every time at TRACE.
</code></pre>
<p>The <strong>Code</strong> of SecurityFilterChain:</p>
<pre><code>@Bean
public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    http
    .authorizeHttpRequests((requests) -&gt; requests
            .requestMatchers(&quot;/&quot;, &quot;/Signup&quot;, &quot;/css/**&quot;, &quot;/js/**&quot;).permitAll()
            .anyRequest().authenticated()
            )
    .formLogin((form) -&gt; form
            .loginPage(&quot;/Login&quot;)
            .permitAll()
            )
    .logout((logout) -&gt; logout.permitAll())
    .formLogin((form) -&gt; form.defaultSuccessUrl(&quot;/home&quot;, true));

    return http.build();
}
</code></pre>
<p>Any idea why I got this message. When I hit <code>localhost:8080</code> automatically goes to login page its fine but won't go to signup page when I clicked on signup button it just redirect to login page. Can you provide details working process and to resolve the problem.</p>
<p><a href=""https://spring.io/guides/gs/securing-web/"" rel=""nofollow noreferrer"">I followed the official documentation to implement SecurityFilterChain</a></p>
<p>Thank you in advance.</p>
",
tags:"<java><spring-boot><spring-security><warnings>",
score:7,
creationDate:2023-12-06 08:40:24,
creationDate:2023-12-12 13:45:54,
score:4,
acceptedResponderReputation:56,
acceptedResponder:13308853,
QuestionerReputation:197,
Questioner:17184390}
{title:"spread array into object",
id:"https://stackoverflow.com/questions/78048034",
body:"<p>I have this bit of code:</p>
<pre><code>const calcRowCssClasses = (&lt;string[]&gt;context.dataItem.cssClasses).map(
        (cssClass) =&gt; {
          return { [cssClass]: true };
        }
      );
</code></pre>
<p>This produces the following array of objects:</p>
<pre><code>{ &quot;custom-calcrow-1&quot;: true },
{ &quot;custom-calcrow-2&quot;: true }
</code></pre>
<p>Now, I have a starting object like this:</p>
<pre><code>{ &quot;calcrow&quot;: true}
</code></pre>
<p>The questin is, how can I add the above two entries to the existing object, such that the output will be an object like this:</p>
<pre><code>{
  &quot;calcrow&quot;: true,
  &quot;custom-calcrow-1&quot;: true,
  &quot;custom-calcrow-2&quot;: true
}
</code></pre>
<p>Basically, I would like to spread an array of objects. Doing like this</p>
<pre><code>return { calcrow: true, ...calcRowCssClasses };
</code></pre>
<p>has this result:</p>
<pre><code>0: {custom-calcrow-1: true},
1: {custom-calcrow-2: true},
calcrow: true
</code></pre>
<p>Which isn't the expected result.</p>
<p>Thanks.</p>
",
tags:"<javascript><typescript>",
score:6,
creationDate:2024-02-23 14:22:26,
creationDate:2024-02-23 14:40:25,
score:4,
acceptedResponderReputation:386522,
acceptedResponder:1447675,
QuestionerReputation:1796,
Questioner:1958929}
{title:"Hot to get a Developer Tools window for the web-based Outlook desktop client?",
id:"https://stackoverflow.com/questions/76104103",
body:"<p>Currently I'm developing an small JavaScript add-in for <a href=""https://petri.com/microsoft-outlook-for-windows-app/"" rel=""nofollow noreferrer"">the new web-based desktop version</a> of Microsoft Office Outlook:</p>
<blockquote>
<p>Microsoft Outlook version 1.2023.418.200 (Production).<br />
Client version is 20230414002.05.</p>
</blockquote>
<p>While I'm able to correctly write a basic add-in (with the help of <a href=""https://learn.microsoft.com/en-us/office/dev/add-ins/develop/yeoman-generator-overview"" rel=""nofollow noreferrer"">Yeoman</a>), I fail to debug my add-in or even get a <code>console.log</code> output window.</p>
<p>Since I'm assuming that the new Outlook is based on some kind of hosted Edge WebView and/or Electron, I found no way to actually get the usual Developer Tools.</p>
<p>My assumption is based on the fact that in Process Explorer, the new Outlook is shown as &quot;olk.exe&quot; with several &quot;MsEdgeWebView2.exe&quot; sub-processes:</p>
<p><a href=""https://i.sstatic.net/YvqrM.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/YvqrM.png"" alt=""enter image description here"" /></a></p>
<h4>What I've tried</h4>
<p>I've read these other SO articles:</p>
<ul>
<li><a href=""https://stackoverflow.com/q/65109100/107625"">Outlook AddIn : How to show console.log with Outlook Desktop?</a></li>
<li><a href=""https://stackoverflow.com/q/68964166/107625"">Outlook Office Add-in (Desktop) does not have devtools</a></li>
</ul>
<p>I also tried the suggested <a href=""https://apps.microsoft.com/store/detail/microsoft-edge-devtools-preview/9MZBFRMZ0MNJ?hl=en-us&amp;gl=us&amp;activetab=pivot%3Aoverviewtab"" rel=""nofollow noreferrer"">Microsoft Edge Dev Tools Preview</a> from the Microsoft Store, but unfortunately Outlook does not appear in the list of possible apps to attach to.</p>
<p>I've also spent hours browsing through the Microsoft documentation with no result, too.</p>
<p>And, of course, I tried every Google search I could imagine. Still I found no meaningful results.</p>
<p>In addition, I found the MSDN article &quot;<a href=""https://learn.microsoft.com/en-us/office/dev/add-ins/testing/debug-add-ins-using-devtools-edge-chromium"" rel=""nofollow noreferrer"">Debug a task pane add-in using Microsoft Edge (Chromium-based) developer tools</a>&quot;. I failed to follow this step:</p>
<blockquote>
<p>Be sure the add-in's task pane has focus and press Ctrl+Shift+I.</p>
</blockquote>
<p>This cannot be done in my scenario, since my add-in has no task pane (I simply try to set the subject of a new email message by calling <a href=""https://learn.microsoft.com/en-us/javascript/api/outlook/office.subject?view=outlook-js-preview#outlook-office-subject-setasync-member(1)"" rel=""nofollow noreferrer""><code>setAsync</code> on the <code>subject</code> property</a>). In addition, pressing Ctrl+Shift+I has no effect at all, no matter which input field I do focus.</p>
<h4>My question</h4>
<p>How can I show a debug and/or output window to see the <code>console.log()</code> statements that my JavaScript-based Microsoft Office Outlook add-in (for the web-based desktop version) prints?</p>
",
tags:"<javascript><outlook><desktop><outlook-web-addins>",
score:6,
creationDate:2023-04-25 17:55:17,
creationDate:2024-03-25 14:38:30,
score:4,
acceptedResponderReputation:121,
acceptedResponder:9702518,
QuestionerReputation:40726,
Questioner:107625}
{title:"Find maximum length of up then down and up sequence of numbers",
id:"https://stackoverflow.com/questions/79163186",
body:"<p>I have a list of integers as input, the order of items in input is not important.</p>
<p>I need to form a new list having size n with the below features.</p>
<p>Here i, j represents the index position of the output list such that i &lt; j &lt; n</p>
<pre><code>Items from 0 to i should be in increasing order strictly

Items from i to j should be in decreasing order strictly

Items from j to n should be in increasing order strictly
</code></pre>
<p>The new list must satisfy the above properties, and it need not have all the elements from the original input list.</p>
<p><strong>Example 1:</strong></p>
<pre><code>input  [2, 1, 3, 3, 1, 2, 1, 2, 3]
valid output sequence with max selected items is [1,2,3,2,1,2,3]
size of this output sequence is 7, so return the value 7
</code></pre>
<p><strong>Explanation:</strong></p>
<pre><code>increasing from position 0 to 2 =&gt; [1,2,3]
decreasing from position 2 to 4 =&gt; [3,2,1]
again increasing from position 4 to last index =&gt; [1,2,3]
</code></pre>
<p><strong>Example 2:</strong></p>
<pre><code>input  [5, 5, 2, 1, 3, 4, 5]
valid output sequence with max selected items is [1, 3, 5, 4, 2, 5]
size of this output sequence is 6, so return the value 6
</code></pre>
<p><strong>Explanation:</strong></p>
<pre><code>increasing from position 0 to 2 =&gt; [1,3,5]
decreasing from position 2 to 4 =&gt; [5,4,2]
again increasing from position 4 to last index =&gt; [2,5]
</code></pre>
<p><strong>Example 3:</strong></p>
<pre><code>input  [1, 3, 5, 4, 2, 6, 8, 7, 9]

Output: 9 
</code></pre>
<p><strong>Example 4:</strong></p>
<pre><code>input = [1,100]

for this input we can get the updated sequence as [100, 1]

a) increasing part = [100], here i = 0
b) decreasing part = [100, 1], here i=0, j=1
c) increasing part = [1], here j to end, j = 1
</code></pre>
<p>Observations: The last item in increasing part is same as first item of decreasing part in above discussion (i.e (a) and (b) groups), similarly the last item of decreasing part is same as first item of increasing part (i.e. (b) and (c) groups)</p>
<p><strong>Constraints:</strong><br />
2 &lt;= input size &lt;= 10<sup>5</sup><br />
1 &lt;= input element &lt;= 10<sup>9</sup><br />
input contains at least 2 unique elements.</p>
<p>The program should return the size of the output sequence.</p>
<p>I tried to solve this using a TreeMap:</p>
<pre><code>public static int solve(List&lt;Integer&gt; list) {
        int n = list.size();
        TreeMap&lt;Integer, Integer&gt; map = new TreeMap&lt;&gt;();
        int min = Integer.MAX_VALUE;
        for(int e : list) {
            min = Math.min(min, e);
            map.put(e, map.getOrDefault(e, 0)+1);
        }
        int result = 1;
        map.put(min, map.getOrDefault(min,0)-1);
        if(map.get(min) &lt;=0) map.remove(min);
        while(true) {
            Integer key = map.higherKey(min);
            if(key == null) break;
            map.put(key, map.getOrDefault(key,0)-1);
            if(map.get(key) &lt;=0) map.remove(key);
            min = key;
            result++;
        }
        int max = min;
        while(true) {
            Integer key = map.lowerKey(max);
            if(key == null) break;
            map.put(key, map.getOrDefault(key,0)-1);
            if(map.get(key) &lt;=0) map.remove(key);
            max = key;
            result++;
        }
        
        min = max;
        while(true) {
            Integer key = map.higherKey(min);
            if(key == null) break;
            map.remove(key);
            min = key;
            result++;
        }
        return result;
    }

    public static void main(String[] args) {
        System.out.println(solve(List.of(1, 3, 5, 4, 2, 6, 8, 7, 9))); // Expected output: 9

        System.out.println(solve(List.of(5, 5, 2, 1, 3, 4, 5))); // Expected output: 6

        System.out.println(solve(List.of(1, 100))); // Expected output: 2
        
        System.out.println(solve(List.of(2, 1, 3, 3, 1, 2, 1, 2, 3))); // Expected output: 7
    }
</code></pre>
<p>The code fails for input <code>5, 5, 2, 1, 3, 4, 5</code>, it returns 5 as output instead of 6. This is due to my generated array becoming [1,2,3,4,5] with 5 items also not following increasing-decreasing-increasing pattern</p>
<p>So I am using wrong approach to solve this problem, what is the correct approach to solve this problem.</p>
",
tags:"<java><algorithm>",
score:8,
creationDate:2024-11-06 15:09:59,
creationDate:2024-12-25 08:44:23,
score:4,
acceptedResponderReputation:349946,
acceptedResponder:5459839,
QuestionerReputation:319,
Questioner:23993901}
{title:"Parallel service calls with Spring Boot 3.2 and virtual threads",
id:"https://stackoverflow.com/questions/78012861",
body:"<p>I am trying to call two external services in parallel using virtual threads on spring boot 3.2 with RestClient, but I'm not sure if it is correct to simply call them sequentially or use futures. My application.properties already contains: spring.threads.virtual.enabled=true</p>
<p>Is it correct to simply do:</p>
<pre><code>String response1 = performGetRequest(uri1);  //RestClient get request
String response2 = performGetRequest(uri2);

return response1 + response2;
</code></pre>
<p>Or do I need to do:</p>
<pre><code>Future&lt;String&gt; response1 = performGetRequest(uri1);
Future&lt;String&gt; response2 = performGetRequest(uri2);

return response1.get() + response2.get();
</code></pre>
<p>Also, is it necessary to wrap the block of code in a try-with-resources block, or is there no need because spring is already using virtual thread per task as it is enabled in application.properties? As so:</p>
<pre><code>try (ExecutorService service = Executors.newVirtualThreadPerTaskExecutor();)
</code></pre>
",
tags:"<java><spring><spring-boot><virtual-threads>",
score:7,
creationDate:2024-02-17 16:33:30,
creationDate:2024-02-17 19:58:37,
score:4,
acceptedResponderReputation:31858,
acceptedResponder:1746118,
QuestionerReputation:121,
Questioner:23369494}
{title:"Angular 17 SSR - how to compile server files (*.mjs) to *.js",
id:"https://stackoverflow.com/questions/77517518",
body:"<p>my hosting provider requires server files to be compiled to CommonJs and Angular 17 by default compiles files to Module JS *<strong>.mjs</strong>, I've tried to change the tsconfig.json but it changes the scope for the whole app but I want to change it just for server files. I've been looking for some documentation how to use something like tsconfig.server.json but I don't know how to later split it in angular.json file.</p>
<p>How to convert *.mjs files to *.js for SSR in Angular 17?</p>
<p><a href=""https://i.sstatic.net/1bjwA.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/1bjwA.png"" alt=""enter image description here"" /></a></p>
<p>default <strong>tsconfig.json</strong> file:</p>
<pre><code>/* To learn more about this file see: https://angular.io/config/tsconfig. */
{
  &quot;compileOnSave&quot;: false,
  &quot;compilerOptions&quot;: {
    &quot;outDir&quot;: &quot;./dist/out-tsc&quot;,
    &quot;forceConsistentCasingInFileNames&quot;: true,
    &quot;strict&quot;: true,
    &quot;noImplicitOverride&quot;: true,
    &quot;noPropertyAccessFromIndexSignature&quot;: true,
    &quot;noImplicitReturns&quot;: true,
    &quot;noFallthroughCasesInSwitch&quot;: true,
    &quot;esModuleInterop&quot;: true,
    &quot;sourceMap&quot;: true,
    &quot;declaration&quot;: false,
    &quot;experimentalDecorators&quot;: true,
    &quot;moduleResolution&quot;: &quot;node&quot;,
    &quot;importHelpers&quot;: true,
    &quot;target&quot;: &quot;ES2022&quot;,
    &quot;module&quot;: &quot;ES2022&quot;,
    &quot;useDefineForClassFields&quot;: false,
    &quot;lib&quot;: [&quot;ES2022&quot;, &quot;dom&quot;]
  },
  &quot;angularCompilerOptions&quot;: {
    &quot;enableI18nLegacyMessageIdFormat&quot;: false,
    &quot;strictInjectionParameters&quot;: true,
    &quot;strictInputAccessModifiers&quot;: true,
    &quot;strictTemplates&quot;: true
  }
}

</code></pre>
",
tags:"<javascript><angular><typescript><server-side-rendering><mjs>",
score:6,
creationDate:2023-11-20 16:33:15,
creationDate:2024-01-28 14:21:56,
score:4,
acceptedResponderReputation:56,
acceptedResponder:16902303,
QuestionerReputation:5508,
Questioner:9833763}
{title:"OpenJDK 17 heap memory issue",
id:"https://stackoverflow.com/questions/76163844",
body:"<p>my code :</p>
<pre><code>public class Memory {
// Dummy Entity representing usual data objects
private static class Entity {
    public String name;
    public String detail;
    public Double amount;
    public Integer age;
}

// Linked list offers table inserts and helps illustrating the issue by using multiple
// references per entry
public static java.util.LinkedList&lt;Entity&gt; entities = new java.util.LinkedList&lt;&gt;();

// This threshold should be 2 times Xmn. It ensures the loop stops before a full GC happens.
private static final int MB = 1024 * 1024;
private static final int THRESHOLD = 100 * MB;

public static void main(String[] args) {
    System.out.println(&quot;Total Memory (in bytes): &quot; + Runtime.getRuntime().totalMemory());
    System.out.println(&quot;Free Memory (in bytes): &quot; + Runtime.getRuntime().freeMemory());
    System.out.println(&quot;Max Memory (in bytes): &quot; + Runtime.getRuntime().maxMemory());

    while (true) {
        appendEntitiesToDataStructure();
        terminateBeforeFullGCorOOMEcanHappen();
    }
}

private static void appendEntitiesToDataStructure() {
    entities.add(new Entity());
}

private static void terminateBeforeFullGCorOOMEcanHappen() {
    if (Runtime.getRuntime().freeMemory() &lt; THRESHOLD) {
        System.out.println(&quot;Elements created and added to LinkedList: &quot; + entities.size());
        System.exit(0);
    }
}}
</code></pre>
<p>launch :</p>
<pre><code>java -Xms${i}g -Xmx${i}g -Xmn50m memory.java &gt;&gt; output.txt
</code></pre>
<p>Idea : I want to know the behavior of JVM heap size when it evolves.</p>
<p>Heap size : from 1 to 100 GB</p>
<p>GC tested : g1c, zgc, pgc</p>
<p>Result : with g1c and pgc there is regression from 32GB -&gt; I can store less data in my object as heap size increases.</p>
<p>Schema : X : size of my object ; Y : heap size</p>
<p>I don't know how to explain this behavior -&gt; any idea ?</p>
<p><a href=""https://i.sstatic.net/LVP8c.jpg"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/LVP8c.jpg"" alt=""java g1gc"" /></a>
<a href=""https://i.sstatic.net/jklC0.jpg"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/jklC0.jpg"" alt=""java gpc"" /></a>
<a href=""https://i.sstatic.net/uJTk9.jpg"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/uJTk9.jpg"" alt=""java zgc"" /></a></p>
",
tags:"<java><heap-memory><java-17>",
score:6,
creationDate:2023-05-03 12:29:29,
creationDate:2023-05-03 12:57:59,
score:4,
acceptedResponderReputation:76414,
acceptedResponder:436560,
QuestionerReputation:183,
Questioner:9787309}
{title:"What kind of perfomance benefits Svelte gets for having no virtual DOM?",
id:"https://stackoverflow.com/questions/75823249",
body:"<p>I have a question about svelte, if svelte is not adapting Virtual DOM or Shadow DOM mechanism, how is it generating high performance applications, because svelte is just a compiler, which generates the pure javascript build, is this is the only takeaway of svelte, converting to pure javascript code, will yeild you high performance applications?, then why react or angular using the Mechanism like Virtual DOM or Shadow DOM</p>
<p>I know this is not a coding question, but I wanted the answer, so only posted here, please do not delete or devote this post. I want to understand the internals</p>
<p>Thanks</p>
",
tags:"<javascript><svelte><sveltekit>",
score:6,
creationDate:2023-03-23 12:53:26,
creationDate:2023-03-24 11:06:53,
score:4,
acceptedResponderReputation:83758,
acceptedResponder:315168,
QuestionerReputation:5485,
Questioner:665864}
{title:"Is there a way I can suppress ""defaultProps will be removed"" warnings?",
id:"https://stackoverflow.com/questions/77655939",
body:"<p>I have an existing next.js codebase with multiple bugs that need fixing. Currently the console is filled with:</p>
<pre><code>Warning: ArrowLeftInline: Support for defaultProps will be removed from function components in a future major release. 
Warning: GithubInline: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.
Warning: GlobeInline: Support for defaultProps will be removed from function components in a future major release. Use JavaScript default parameters instead.

</code></pre>
<p>These seem to be coming from Reactified-SVG files. Eg, there's no GlobeInline component, but only:</p>
<pre><code>import Globe from &quot;../../public/src/img/icons/Globe.inline.svg&quot;;
</code></pre>
<p>Which is simply a react-ified SVG file:</p>
<pre><code>&lt;svg aria-hidden=&quot;true&quot; focusable=&quot;false&quot; data-prefix=&quot;fas&quot; data-icon=&quot;globe&quot; class=&quot;svg-inline--fa fa-globe fa-w-16&quot; role=&quot;img&quot; xmlns=&quot;http://www.w3.org/2000/svg&quot; viewBox=&quot;0 0 496 512&quot;&gt;&lt;path fill=&quot;currentColor&quot; d=&quot;M336.5 160C322 70.7 287.8 8 248 8s-74 62.7-88.5 152h177zM152 256c0 22.2 1.2 43.5 3.3 64h185.3c2.1-20.5 3.3-41.8 3.3-64s-1.2-43.5-3.3-64H155.3c-2.1 20.5-3.3 41.8-3.3 64zm324.7-96c-28.6-67.9-86.5-120.4-158-141.6 24.4 33.8 41.2 84.7 50 141.6h108zM177.2 18.4C105.8 39.6 47.8 92.1 19.3 160h108c8.7-56.9 25.5-107.8 49.9-141.6zM487.4 192H372.7c2.1 21 3.3 42.5 3.3 64s-1.2 43-3.3 64h114.6c5.5-20.5 8.6-41.8 8.6-64s-3.1-43.5-8.5-64zM120 256c0-21.5 1.2-43 3.3-64H8.6C3.2 212.5 0 233.8 0 256s3.2 43.5 8.6 64h114.6c-2-21-3.2-42.5-3.2-64zm39.5 96c14.5 89.3 48.7 152 88.5 152s74-62.7 88.5-152h-177zm159.3 141.6c71.4-21.2 129.4-73.7 158-141.6h-108c-8.8 56.9-25.6 107.8-50 141.6zM19.3 352c28.6 67.9 86.5 120.4 158 141.6-24.4-33.8-41.2-84.7-50-141.6h-108z&quot;&gt;&lt;/path&gt;&lt;/svg&gt;
</code></pre>
<p><strong>Why does React/Next think I am using <code>defaultProps</code> for these SVG files?</strong></p>
<p><strong>How can I fix or suppress the warnings so I can read the console?</strong></p>
",
tags:"<javascript><reactjs><typescript><svg><next.js>",
score:6,
creationDate:2023-12-13 18:50:57,
creationDate:2024-05-01 14:30:21,
score:4,
acceptedResponderReputation:1925,
acceptedResponder:1851604,
QuestionerReputation:123058,
Questioner:123671}
{title:"Route ""/[locale]"" used `params.locale`. `params` should be awaited before using its properties",
id:"https://stackoverflow.com/questions/79143162",
body:"<p>I'm working on a Next.js 15 app using the new App Router (app directory) with dynamic route localization. I have a [locale] directory where I handle multiple language routes, and I use the params object to access the locale value. However, I keep getting the following error when trying to access params.locale:</p>
<pre><code>Error: Route &quot;/[locale]&quot; used `params.locale`. `params` should be awaited before using its properties. Learn more: https://nextjs.org/docs/messages/sync-dynamic-apis
    at locale (webpack:///app/[locale]/layout.tsx?a262:30:34)
</code></pre>
<p>Code Structure
Here's the structure of my app:</p>
<pre><code>app/
├── [locale]/
│   ├── layout.tsx            // Root layout for [locale] dynamic route
│   └── page.tsx              // Main page component for [locale] dynamic route
locales/
├── en/
│   └── common.json           // English translations
├── lt/
│   └── common.json           // Lithuanian translations
i18Config.js                  // i18n configuration with available locales
i18n.js                       // i18n initialization file
TranslationsProvider.js       // Translation provider component
middleware.js                 // Middleware to handle locale-based redirection

</code></pre>
<p>In app/[locale]/layout.tsx, I want to access the locale value from params and pass it to different components. I have tried various ways to access params, but the error persists.</p>
<p>Here's what my layout.tsx file looks like:</p>
<pre><code>import &quot;@/styles/global.css&quot;;
import { Outfit } from &quot;next/font/google&quot;;
import { Providers } from &quot;./providers&quot;;
import i18nConfig from &quot;../../i18nConfig&quot;;
import { dir } from &quot;i18next&quot;;

const outfit = Outfit({
  subsets: [&quot;latin&quot;],
  weight: [&quot;300&quot;, &quot;400&quot;, &quot;500&quot;, &quot;600&quot;, &quot;700&quot;, &quot;800&quot;],
  style: [&quot;normal&quot;],
});

export function generateStaticParams() {
  return i18nConfig.locales.map((locale) =&gt; ({ locale }));
}

export default async function RootLayout({
  children,
  params: { locale },
}: {
  children: React.ReactNode;
  params: { locale: string };
}) {
  return (
    &lt;html
      lang={locale}
      dir={dir(locale)}
      suppressHydrationWarning
      className={outfit.className}
    &gt;
      &lt;body className=&quot;bg-background&quot;&gt;
        &lt;Providers&gt;{children}&lt;/Providers&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  );
}

</code></pre>
<ol>
<li>Accessing params directly in the function body: I've moved params.locale to a separate constant in the function body, but the error still appears.</li>
<li>Using generateStaticParams: I added generateStaticParams to pre-generate routes for the available locales (en and lt). This didn't resolve the error either.</li>
<li>Type Adjustments: I created a custom type for params to ensure TypeScript knows the structure of params (i.e., params: { locale: string }).</li>
</ol>
<p>The error suggests that params should be &quot;awaited,&quot; even though params is an object and not a promise, so await params doesn’t make sense here.
I’ve seen other posts mentioning that destructuring in async functions can cause issues with params in Next.js, but accessing params directly also didn’t work for me.
Restarting the server after every change didn’t resolve the issue either.</p>
<p>How can I correctly access params.locale in a dynamic route layout without getting this error? Is there a workaround or configuration I’m missing? Any insight would be greatly appreciated. Thank you!</p>
",
tags:"<javascript><reactjs><typescript><next.js>",
score:15,
creationDate:2024-10-31 00:15:20,
creationDate:2024-11-02 02:33:48,
score:4,
acceptedResponderReputation:767,
acceptedResponder:3335893,
QuestionerReputation:175,
Questioner:27813380}
{title:"PrimeVue theme change",
id:"https://stackoverflow.com/questions/76037337",
body:"<p>Apparently, in the last few PrimeVue updates there has been a <code>PrimeVue.changeTheme()</code> method that I would very much like to use. The documentation says that two things are required.</p>
<ol>
<li>copying the selected themes from the PrimeVue <code>resources/themes</code> folder and placing them under the public folder.</li>
<li>In the <code>index.html</code> file, create links to these styles along with giving them an ID so that this ID is later passed to the function.</li>
</ol>
<p>So that's what I did but the solution doesn't quite work, perhaps I'm misunderstanding something.
Link to docs: <a href=""https://v3.primevue.org/theming/"" rel=""nofollow noreferrer"">https://v3.primevue.org/theming/</a></p>
<p>index.html file:</p>
<pre class=""lang-html prettyprint-override""><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;link rel=&quot;icon&quot; href=&quot;/favicon.ico&quot;&gt;
    &lt;link id=&quot;lara-dark-purple-link&quot; rel=&quot;stylesheet&quot; href=&quot;/themes/lara-dark- 
    purple/theme.css&quot;&gt;
    &lt;link id=&quot;lara-light-purple-link&quot; rel=&quot;stylesheet&quot; href=&quot;/themes/lara-light- 
    purple/theme.css&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Vite App&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=&quot;app&quot;&gt;&lt;/div&gt;
    &lt;script type=&quot;module&quot; src=&quot;/src/main.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>Here is code from component which hold buttons with theme changing:</p>
<pre class=""lang-html prettyprint-override""><code>&lt;script setup&gt;
import { onMounted } from 'vue';
import { usePrimeVue } from 'primevue/config';

const PrimeVue  = usePrimeVue();
const toggleDarkMode = () =&gt; {
  PrimeVue.changeTheme('lara-dark-purple', 'lara-dark-purple', 'lara-dark-purple-link', () =&gt; {});    
}
const toggleLightMode = () =&gt; {
  PrimeVue.changeTheme('lara-light-purple', 'lara-light-purple', 'lara-light-purple-link', () =&gt; {});
}
&lt;/script&gt;
</code></pre>
<p>My folder structure:</p>
<p><a href=""https://i.sstatic.net/LIjLW.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/LIjLW.png"" alt=""Folder structure"" /></a></p>
",
tags:"<javascript><vue.js><vuejs3><primevue>",
score:6,
creationDate:2023-04-17 16:31:36,
creationDate:2023-04-17 17:25:28,
score:4,
acceptedResponderReputation:7022,
acceptedResponder:15167500,
QuestionerReputation:254,
Questioner:19836664}
{title:"How to set the state based on the local storage without overwriting it with the initial state?",
id:"https://stackoverflow.com/questions/76133927",
body:"<p>I try to get the updated <code>localstorage</code> state called <code>darkmode</code> with <code>useContext</code> but when I console log it in functions inside <code>App.tsx</code> it gives the default value set inside <code>Context.js</code> :</p>
<p>App.tsx:</p>
<pre class=""lang-js prettyprint-override""><code>const { darkmode } = useContext(Context);

React.useEffect(() =&gt; {
  console.log(darkmode);
}, []);
</code></pre>
<p>Context.js:</p>
<pre class=""lang-js prettyprint-override""><code>import { useState, useEffect, createContext } from &quot;react&quot;;

const Context = createContext();

function ContextProvider({ children }) {
  const [darkmode, setDarkmode] = useState(false);

  // Local Storage: setting &amp; getting data
  useEffect(() =&gt; {
    const darkmode = JSON.parse(localStorage.getItem(&quot;darkmode&quot;));
    if (darkmode) {
      setDarkmode(darkmode);
    }
  }, []);

  useEffect(() =&gt; {
    localStorage.setItem(&quot;darkmode&quot;, JSON.stringify(darkmode));
  }, [darkmode]);

  const toggleDarkmode = () =&gt; {
    setDarkmode((prev) =&gt; !prev);
  };

  return (
    &lt;Context.Provider
      value={{
        darkmode,
        toggleDarkmode,
      }}
    &gt;
      {children}
    &lt;/Context.Provider&gt;
  );
}

export { ContextProvider, Context };
</code></pre>
<p>Local storage:</p>
<p><a href=""https://i.sstatic.net/Zg0qq.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/Zg0qq.png"" alt=""localstorage"" /></a></p>
<p>The console logs:</p>
<p><a href=""https://i.sstatic.net/TtKor.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/TtKor.png"" alt=""console"" /></a></p>
<p>How can I get the latest updated <code>localstorage</code> state with react context?</p>
",
tags:"<javascript><reactjs><local-storage>",
score:6,
creationDate:2023-04-29 00:00:41,
creationDate:2023-04-29 18:30:54,
score:4,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:3814,
Questioner:13628101}
{title:"How to use the Stripe create payment method with mounted element",
id:"https://stackoverflow.com/questions/75360242",
body:"<p>I'm integrating Stripe to my Blazor application. The functionality I need is to replace an existing 'Add a card' component.</p>
<p>I have successfully achieved this using the <code>stripe.confirmSetup</code> method in the JS library however this requires a redirect URL which is causing issues as the rest of our application does not behave like that.</p>
<p>I have identified the <a href=""https://stripe.com/docs/js/payment_methods/create_payment_method"" rel=""noreferrer"">createPaymentMethod</a> as an alternative due to the fact that it does not require a redirect URL, opens any 3DS page in a modal and supports a 'then' callback method, where I can show a success popup and update the DOM accordingly.</p>
<p>The issue is when I pass the card element that I have previously mounted I get this error.</p>
<blockquote>
<p>Invalid value for createPaymentMethod: card was <code>payment</code> Element,
which cannot be used to create card PaymentMethods</p>
</blockquote>
<p><strong>razor/html</strong></p>
<pre><code>    &lt;EditForm id=&quot;payment-form&quot; Model=&quot;@BillingProfile&quot;&gt;
        &lt;div id=&quot;payment-element&quot;&gt;
            &lt;!-- Elements will create form elements here --&gt;
        &lt;/div&gt;

        @if (stripeReady)
        {
            &lt;div class=&quot;text-center mt-2&quot;&gt;
                &lt;button type=&quot;button&quot; @onclick=&quot;TogglePaymentEditStripe&quot; class=&quot;btn btn-grey text-dark&quot;&gt;Cancel&lt;/button&gt;  
                &lt;button type=&quot;submit&quot; id=&quot;submitStripeCard&quot; disabled=&quot;@(Busy)&quot; class=&quot;btn btn-blue&quot;&gt;Add card&lt;/button&gt;
            &lt;/div&gt;                }

        &lt;!-- We'll put the error messages in this element --&gt;
        &lt;div id=&quot;payment-method-errors&quot; role=&quot;alert&quot;&gt;&lt;/div&gt;   
    &lt;/EditForm&gt;
</code></pre>
<p><strong>JavaScript</strong></p>
<pre><code>export function initialiseStripeAndMount(publishableKey, clientIntentSecret, redirectUrl){

    const stripe = Stripe(publishableKey);  

    const options = {
        clientSecret: clientIntentSecret, //intent
        // Fully customizable with appearance API.
        appearance: {
            theme: 'night',
            labels: 'floating',           
        }
    };

    // Set up Stripe.js and Elements to use in checkout form, passing the client secret obtained in step 3
    const elements = stripe.elements(options);

    // Create and mount the Payment Element
    const cardElement = elements.create('payment');
    cardElement.mount('#payment-element');

    // Create a token or display an error when the form is submitted.
    const form = document.getElementById('payment-form');

    form.addEventListener('submit', async (event) =&gt; {
        event.preventDefault();

        const result = await stripe.createPaymentMethod({                
            type: 'card',
            card: cardElement,
            billing_details: {

                name: 'Jenny Rosen',
            },
            })
            .then(function (result) {
                // Handle result.error or result.paymentMethod
                alert(result)
            });
    });
   
}
</code></pre>
<p><strong>Question</strong></p>
<p>How can I use the 'createPaymentMethod' function with the stripe mounted element so that I can avoid the page posting back as per their documentation:</p>
<p><a href=""https://i.sstatic.net/LKuap.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/LKuap.png"" alt=""enter image description here"" /></a></p>
<p>edit</p>
<p>If I try using confirmSetup with the following:</p>
<pre><code>stripe.confirmSetup({
    elements,
    confirmParams: {
        // Return URL where the customer should be redirected after the SetupIntent is confirmed.
        return_url: 'http://www.google.co.uk',
        redirect: &quot;if_required&quot;
    },
})
</code></pre>
<p>Then I get a error code 400 response, with the following response object:</p>
<pre><code>{
  &quot;error&quot;: {
    &quot;code&quot;: &quot;parameter_unknown&quot;,
    &quot;doc_url&quot;: &quot;https://stripe.com/docs/error-codes/parameter-unknown&quot;,
    &quot;message&quot;: &quot;Received unknown parameter: redirect&quot;,
    &quot;param&quot;: &quot;redirect&quot;,
    &quot;request_log_url&quot;: &quot;[Redacted]&quot;,
    &quot;setup_intent&quot;: {
      &quot;id&quot;: &quot;[Redacted]&quot;,
      &quot;object&quot;: &quot;setup_intent&quot;,
      &quot;cancellation_reason&quot;: null,
      &quot;client_secret&quot;: &quot;[Redacted]&quot;,
      &quot;created&quot;: [Redacted],
      &quot;description&quot;: null,
      &quot;last_setup_error&quot;: null,
      &quot;livemode&quot;: false,
      &quot;next_action&quot;: null,
      &quot;payment_method&quot;: null,
      &quot;payment_method_types&quot;: [
        &quot;card&quot;
      ],
      &quot;status&quot;: &quot;requires_payment_method&quot;,
      &quot;usage&quot;: &quot;off_session&quot;
    },
    &quot;type&quot;: &quot;invalid_request_error&quot;
  }
}
</code></pre>
",
tags:"<javascript><stripe-payments>",
score:7,
creationDate:2023-02-06 10:42:58,
creationDate:2023-02-06 11:34:17,
score:4,
acceptedResponderReputation:2184,
acceptedResponder:17427213,
QuestionerReputation:10354,
Questioner:1025915}
{title:"Java upgrade with Caucho Hessian v3/v4",
id:"https://stackoverflow.com/questions/77173055",
body:"<p><strong>Problem:</strong><br />
We are currently using Caucho Hessian 3.2.0 in combination with Java 8 and Java 11 applications. This works fine, but we want to migrate to Java 17 and we get following systen.out message:</p>
<pre><code>java.lang.reflect.InaccessibleObjectException: Unable to make field private java.lang.String java.lang.StackTraceElement.classLoaderName accessible: module java.base does not &quot;opens java.lang&quot; to unnamed module @78e03bb5
    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)
    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)
    at java.base/java.lang.reflect.Field.checkCanSetAccessible(Field.java:178)
    at java.base/java.lang.reflect.Field.setAccessible(Field.java:172)
    at com.caucho.hessian.io.JavaDeserializer.getFieldMap(JavaDeserializer.java:299)
    at com.caucho.hessian.io.JavaDeserializer.&lt;init&gt;(JavaDeserializer.java:77)
    at com.caucho.hessian.io.StackTraceElementDeserializer.&lt;init&gt;(StackTraceElementDeserializer.java:60)
    at com.caucho.hessian.io.SerializerFactory.&lt;clinit&gt;(SerializerFactory.java:627)
    at com.caucho.hessian.io.AbstractHessianOutput.findSerializerFactory(AbstractHessianOutput.java:95)
    at com.caucho.hessian.io.Hessian2Output.writeObject(Hessian2Output.java:486)
    at Main.serializeWithHessian(Main.java:23)
    at Main.main(Main.java:13)
</code></pre>
<p>There is a work-around by adding the following JVM param:</p>
<pre><code>--add-opens java.base/java.lang=ALL-UNNAMED
</code></pre>
<p>We dont want to use this flag in all our productive applications, so we tried to upgrade Hessian to its newest version 4.0.66.
Basicly this works for the most common use cases but doesn't work when we serialize data having same object instances multiple times.</p>
<p>I created a small example application: <a href=""https://github.com/MatWein/hessian-test"" rel=""noreferrer"">https://github.com/MatWein/hessian-test</a></p>
<p>This application reads some java serialized test data from its classpath and tries to serialize and deserialize it with Hessian.
If you run this application using Hessian 3.2.0 it works for all Java versions (8, 11 and 17 if you set the JVM flag above) in run&amp;debug modes.
But I cannot get it work with Hessian 4.0.66 because following error occures:</p>
<pre><code>Exception in thread &quot;main&quot; com.caucho.hessian.io.HessianFieldException: de.test.TestData.field29: de.test.PaymentType cannot be assigned from null
    at com.caucho.hessian.io.FieldDeserializer2FactoryUnsafe.logDeserializeError(FieldDeserializer2FactoryUnsafe.java:538)
    at com.caucho.hessian.io.FieldDeserializer2FactoryUnsafe$ObjectFieldDeserializer.deserialize(FieldDeserializer2FactoryUnsafe.java:169)
    at com.caucho.hessian.io.UnsafeDeserializer.readObject(UnsafeDeserializer.java:237)
    at com.caucho.hessian.io.UnsafeDeserializer.readObject(UnsafeDeserializer.java:148)
    at com.caucho.hessian.io.Hessian2Input.readObjectInstance(Hessian2Input.java:2202)
    at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:2123)
    at com.caucho.hessian.io.CollectionDeserializer.readLengthList(CollectionDeserializer.java:93)
    at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:2050)
    at Main.deserializeWithHessian(Main.java:32)
    at Main.main(Main.java:15)
Caused by: java.lang.IndexOutOfBoundsException: Index 13 out of bounds for length 13
    at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:64)
    at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckIndex(Preconditions.java:70)
    at java.base/jdk.internal.util.Preconditions.checkIndex(Preconditions.java:266)
    at java.base/java.util.Objects.checkIndex(Objects.java:361)
    at java.base/java.util.ArrayList.get(ArrayList.java:427)
    at com.caucho.hessian.io.Hessian2Input.readObject(Hessian2Input.java:1810)
    at com.caucho.hessian.io.FieldDeserializer2FactoryUnsafe$ObjectFieldDeserializer.deserialize(FieldDeserializer2FactoryUnsafe.java:165)
    ... 8 more
</code></pre>
<p>ATTENTION: We have a different runtime behaviour between running and debugging the app (dont know why, but Hessian seems to use Unsafe class, Weak&amp;Soft references and so on).</p>
<p>For me, it looks like an internal bug in Hessian. It is using the class com.caucho.hessian.util.IdentityIntMap on serialization site, but when deserializing the client cannot find the object reference index.</p>
<p><strong>Question:</strong>
Is there any way to get Hessian 4.0.66 working with Java 8, 11 and 17 (or at least with Java 11 and 17)?</p>
",
tags:"<java><hessian>",
score:8,
creationDate:2023-09-25 13:27:00,
creationDate:2023-09-28 11:24:42,
score:4,
acceptedResponderReputation:16439,
acceptedResponder:8340997,
QuestionerReputation:109,
Questioner:5508764}
{title:"OpenAPI Maven Plugin generates Incorrect Java Interface Name",
id:"https://stackoverflow.com/questions/77110935",
body:"<p>I have RestApi <code>HTTP GET /api/v1/products/{productId}</code> endpoint which returns <code>ResponseEntity&lt;ProductInfoDto&gt;</code> object with <code>productId</code> given as <strong>pathVariable</strong>.</p>
<p>I use <strong>OpenApi version</strong> <code>6.6.0</code> to create an api specification for this RestApi.</p>
<p>I created <strong>product-openapi.yaml file</strong> to describe this RestApi.</p>
<p>It is my <strong>product-openapi.yaml file</strong>:</p>
<pre><code>openapi: &quot;3.0.3&quot;
info:
  title: &quot;Online_Store API&quot;
  version: &quot;1.0.0&quot;
servers:
  - url: &quot;http://localhost:8083&quot;
tags:
  - name: &quot;Product&quot;
    description: &quot;An API for managing and retrieving product information&quot;
paths:
  /api/v1/products/{productId}:
    get:
      tags:
        - &quot;Product&quot;
      summary: &quot;Enables to get a product by its id&quot;
      operationId: &quot;getProductById&quot;
      parameters:
        - name: &quot;productId&quot;
          description: &quot;the identifier of the product which is returned as the return value&quot;
          in: &quot;path&quot;
          required: true
          schema:
            type: &quot;string&quot;
      responses:
        &quot;200&quot;:
          description: &quot;OK&quot;
          content:
            '*/*':
              schema:
                $ref: &quot;#/components/schemas/ProductInfoDto&quot;

components:
  schemas:
    ProductInfoDto:
      type: &quot;object&quot;
      properties:
        id:
          type: &quot;string&quot;
          format: &quot;uuid&quot;
        name:
          type: &quot;string&quot;
        description:
          type: &quot;string&quot;
        price:
          type: &quot;number&quot;
          format: &quot;decimal&quot;
        quantity:
          type: &quot;integer&quot;
          format: &quot;int32&quot;

    ApiResponse:
      type: &quot;object&quot;
      properties:
        data:
          type: &quot;object&quot;
        message:
          type: &quot;string&quot;
        httpStatusCode:
          type: &quot;integer&quot;
        timestamp:
          type: &quot;string&quot;
          format: &quot;date-time&quot;

</code></pre>
<p>My app is written in <strong>Java 17</strong> with <strong>Spring Boot version 3.1.2</strong>.</p>
<p>I created <strong>RestController</strong> as <strong>ProductsEndpoint class</strong> to describe my RestApi.</p>
<p>It is my <strong>ProductsEndpoint class</strong> which presents my RestApi:</p>
<pre><code>package com.zufar.onlinestore.product.endpoint;

import com.zufar.onlinestore.openapi.api.ApiApi;
import com.zufar.onlinestore.product.api.ProductApi;
import com.zufar.onlinestore.product.dto.ProductInfoDto;
import com.zufar.onlinestore.product.dto.ProductListWithPaginationInfoDto;
import lombok.RequiredArgsConstructor;
import lombok.extern.slf4j.Slf4j;
import org.springframework.http.ResponseEntity;
import org.springframework.validation.annotation.Validated;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestParam;
import org.springframework.web.bind.annotation.RestController;

import java.util.UUID;

@Slf4j
@RestController
@RequiredArgsConstructor
@Validated
@RequestMapping(value = ProductsEndpoint.PRODUCTS_URL)
public class ProductsEndpoint implements ApiApi {

    public static final String PRODUCTS_URL = &quot;/api/v1/products&quot;;

    private final ProductApi productApi;

    @Override
    @GetMapping(&quot;/{productId}&quot;)
    public ResponseEntity&lt;ProductInfoDto&gt; getProductById(@PathVariable final String productId) {
        log.info(&quot;Received the request to get the product with productId - {}.&quot;, productId);
        ProductInfoDto product = productApi.getProduct(UUID.fromString(productId));
        log.info(&quot;The product with productId: {} was retrieved successfully&quot;, productId);
        return ResponseEntity.ok()
                .body(product);
    }
}

</code></pre>
<p>It is <strong>Apache Maven dependencies</strong> which I added to <strong>pom.xml file</strong>:</p>
<pre><code>         .....
          ....
           ...      
    &lt;properties&gt;
       &lt;openapi-generator-maven-plugin.version&gt;5.3.0&lt;/openapi-generator-maven-plugin.version&gt;
        &lt;jackson-databind-nullable.version&gt;0.2.1&lt;/jackson-databind-nullable.version&gt;
        &lt;springdoc-openapi-ui.version&gt;1.7.0&lt;/springdoc-openapi-ui.version&gt;
        &lt;validation-api.version&gt;2.0.1.Final&lt;/validation-api.version&gt;
        &lt;javax.annotation-api.version&gt;1.3.2&lt;/javax.annotation-api.version&gt;
        &lt;servlet-api.version&gt;2.5&lt;/servlet-api.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
         .....
          ....
           ...
       &lt;dependency&gt;
            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;
            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;
            &lt;version&gt;${springdoc-openapi-ui.version}&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.openapitools&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-databind-nullable&lt;/artifactId&gt;
            &lt;version&gt;${jackson-databind-nullable.version}&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.validation&lt;/groupId&gt;
            &lt;artifactId&gt;validation-api&lt;/artifactId&gt;
            &lt;version&gt;${validation-api.version}&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.annotation&lt;/groupId&gt;
            &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;
            &lt;version&gt;${javax.annotation-api.version}&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;javax.servlet&lt;/groupId&gt;
            &lt;artifactId&gt;servlet-api&lt;/artifactId&gt;
            &lt;version&gt;${servlet-api.version}&lt;/version&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;

    &lt;build&gt;
       &lt;plugins&gt;
         .....
          ....
           ...
             &lt;plugin&gt;
                &lt;groupId&gt;org.openapitools&lt;/groupId&gt;
                &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${openapi-generator-maven-plugin.version}&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;generate&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;
                            &lt;inputSpec&gt;${project.basedir}/src/main/resources/product-openapi.yaml&lt;/inputSpec&gt;
                            &lt;generatorName&gt;spring&lt;/generatorName&gt;
                            &lt;apiPackage&gt;com.zufar.onlinestore.openapi.api&lt;/apiPackage&gt;
                            &lt;modelPackage&gt;com.zufar.onlinestore.product.dto&lt;/modelPackage&gt;
                            &lt;supportingFilesToGenerate&gt;
                                ApiUtil.java
                            &lt;/supportingFilesToGenerate&gt;
                            &lt;generateModels&gt;false&lt;/generateModels&gt;
                            &lt;configOptions&gt;
                                &lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;
                            &lt;/configOptions&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
</code></pre>
<p>Well, I execute <code>mvn clean package</code> Apache Maven command to build the project. This way OpenApi Maven plugin generate <code>public interface ApApi</code> where I use in <code>public class ProductsEndpoint implements ApiApi</code>.</p>
<p><strong>The issue is that OpenApi Maven plugin generate generate <code>public interface ApApi</code> instead of  <code>public interface ProductApi</code> for my RestApi.</strong></p>
<p><strong>How I can fix it?</strong></p>
",
tags:"<java><spring><spring-boot><rest><openapi>",
score:6,
creationDate:2023-09-15 08:46:52,
creationDate:2023-09-21 14:25:51,
score:4,
acceptedResponderReputation:1316,
acceptedResponder:13515974,
QuestionerReputation:1316,
Questioner:13515974}
{title:"dnd-kit: drag relative to mouse pointer instead of draggable",
id:"https://stackoverflow.com/questions/77803506",
body:"<p>Using <a href=""https://github.com/clauderic/dnd-kit"" rel=""noreferrer""><code>@dnd-kit/core</code></a> the default behavior is to have the dragged element (and the div within the DragOverlay) be dragged relative to its original position. If I click and drag the Draggable at some offset from the origin of the Draggable, it will move relative to its original position with an offset according to the distance I have dragged the pointer.</p>
<p>How can I instead have the dragged item &quot;jump&quot; to the location of the pointer? The dragged item should be located directly below the pointer instead of relative to the original position.</p>
",
tags:"<javascript><reactjs><drag-and-drop><draggable><dnd-kit>",
score:6,
creationDate:2024-01-11 23:00:47,
creationDate:2024-05-24 08:05:07,
score:4,
acceptedResponderReputation:56,
acceptedResponder:25223578,
QuestionerReputation:15519,
Questioner:431369}
{title:"Spring-boot-starter-mail 3.1.1 throws ""Not provider of jakarta.mail.util.StreamProvider was found"",
id:"https://stackoverflow.com/questions/76601476",
body:"<p>I am upgrading my project from springboot 2.7.7 to springboot 3.1.1 and java 11 to 17
I have spring-boot-starter-mail included as a dependency and I try to send mail as follows</p>
<pre><code>@Service
public class MailerService {

    @Autowired
    public JavaMailSender javaMailSender;

    public void sendEmail(String toAddress, String subject, String body, boolean error) throws MessagingException {

        MimeMessagePreparator preparator = mimeMessage -&gt; {
            final Address recipient = new InternetAddress(toAddress);
            mimeMessage.setFrom(new InternetAddress(fromAddress));
            mimeMessage.setRecipient(Message.RecipientType.TO, recipient);
            mimeMessage.setSentDate(new Date());
            mimeMessage.setSubject(subject);
            mimeMessage.setText(body);
        };

        // Send the e-mail
        javaMailSender.send(preparator);

... other code...

</code></pre>
<p>At javaMailSender.send I get the following exception:</p>
<pre><code>java.lang.IllegalStateException: Not provider of jakarta.mail.util.StreamProvider was found
0 = {StackTraceElement@19049} &quot;org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:387)&quot;
1 = {StackTraceElement@19050} &quot;org.springframework.mail.javamail.JavaMailSenderImpl.send(JavaMailSenderImpl.java:366)&quot;
2 = {StackTraceElement@19051} &quot;nz.co.niwa.bjs.service.MailerService.sendEmail(MailerService.java:44)&quot;
3 = {StackTraceElement@19052} &quot;nz.co.niwa.bjs.service.MailerService.sendDataPointEmail(MailerService.java:54)&quot;
4 = {StackTraceElement@19053} &quot;nz.co.niwa.bjs.service.BulkPointDataFetchService.uploadCSVAndSendEmail(BulkPointDataFetchService.java:421)&quot;
5 = {StackTraceElement@19054} &quot;nz.co.niwa.bjs.service.BulkPointDataFetchService.lambda$retrieveForecastData$6(BulkPointDataFetchService.java:351)&quot;
6 = {StackTraceElement@19055} &quot;java.base/java.util.concurrent.CompletableFuture.uniWhenComplete(CompletableFuture.java:863)&quot;
7 = {StackTraceElement@19056} &quot;java.base/java.util.concurrent.CompletableFuture$UniWhenComplete.tryFire(CompletableFuture.java:841)&quot;
8 = {StackTraceElement@19057} &quot;java.base/java.util.concurrent.CompletableFuture$Completion.exec(CompletableFuture.java:483)&quot;
9 = {StackTraceElement@19058} &quot;java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)&quot;
10 = {StackTraceElement@19059} &quot;java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)&quot;
11 = {StackTraceElement@19060} &quot;java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)&quot;
12 = {StackTraceElement@19061} &quot;java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)&quot;
13 = {StackTraceElement@19062} &quot;java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)&quot;
</code></pre>
<p>How can I fix this? Any help is appreciated.
Thank you</p>
<p>EDIT: mvn:dependency tree</p>
<pre><code>[INFO] --- maven-dependency-plugin:3.5.0:tree (default-cli) @ mintaka-bulk-task-service ---
[INFO] nz.co.niwa.bjs:mintaka-bulk-task-service:jar:1.6.0-SNAPSHOT
[INFO] +- org.springframework.boot:spring-boot-starter-actuator:jar:3.1.1:compile
[INFO] |  +- org.springframework.boot:spring-boot-actuator-autoconfigure:jar:3.1.1:compile
[INFO] |  |  \- org.springframework.boot:spring-boot-actuator:jar:3.1.1:compile
[INFO] |  +- io.micrometer:micrometer-observation:jar:1.11.1:compile
[INFO] |  |  \- io.micrometer:micrometer-commons:jar:1.11.1:compile
[INFO] |  \- io.micrometer:micrometer-core:jar:1.11.1:compile
[INFO] |     +- org.hdrhistogram:HdrHistogram:jar:2.1.12:runtime
[INFO] |     \- org.latencyutils:LatencyUtils:jar:2.0.3:runtime
[INFO] +- org.springframework.boot:spring-boot-starter-web:jar:3.1.1:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter-json:jar:3.1.1:compile
[INFO] |  |  \- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.15.2:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:3.1.1:compile
[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:10.1.10:compile
[INFO] |  |  \- org.apache.tomcat.embed:tomcat-embed-websocket:jar:10.1.10:compile
[INFO] |  +- org.springframework:spring-web:jar:6.0.10:compile
[INFO] |  |  \- org.springframework:spring-beans:jar:6.0.10:compile
[INFO] |  \- org.springframework:spring-webmvc:jar:6.0.10:compile
[INFO] |     +- org.springframework:spring-aop:jar:6.0.10:compile
[INFO] |     +- org.springframework:spring-context:jar:6.0.10:compile
[INFO] |     \- org.springframework:spring-expression:jar:6.0.10:compile
[INFO] +- org.springframework.boot:spring-boot-starter-webflux:jar:3.1.1:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter-reactor-netty:jar:3.1.1:compile
[INFO] |  |  \- io.projectreactor.netty:reactor-netty-http:jar:1.1.8:compile
[INFO] |  |     +- io.netty:netty-codec-http:jar:4.1.94.Final:compile
[INFO] |  |     |  +- io.netty:netty-common:jar:4.1.94.Final:compile
[INFO] |  |     |  +- io.netty:netty-buffer:jar:4.1.94.Final:compile
[INFO] |  |     |  +- io.netty:netty-transport:jar:4.1.94.Final:compile
[INFO] |  |     |  +- io.netty:netty-codec:jar:4.1.94.Final:compile
[INFO] |  |     |  \- io.netty:netty-handler:jar:4.1.94.Final:compile
[INFO] |  |     +- io.netty:netty-codec-http2:jar:4.1.94.Final:compile
[INFO] |  |     +- io.netty:netty-resolver-dns:jar:4.1.94.Final:compile
[INFO] |  |     |  +- io.netty:netty-resolver:jar:4.1.94.Final:compile
[INFO] |  |     |  \- io.netty:netty-codec-dns:jar:4.1.94.Final:compile
[INFO] |  |     +- io.netty:netty-resolver-dns-native-macos:jar:osx-x86_64:4.1.94.Final:compile
[INFO] |  |     |  \- io.netty:netty-resolver-dns-classes-macos:jar:4.1.94.Final:compile
[INFO] |  |     +- io.netty:netty-transport-native-epoll:jar:linux-x86_64:4.1.94.Final:compile
[INFO] |  |     |  +- io.netty:netty-transport-native-unix-common:jar:4.1.94.Final:compile
[INFO] |  |     |  \- io.netty:netty-transport-classes-epoll:jar:4.1.94.Final:compile
[INFO] |  |     \- io.projectreactor.netty:reactor-netty-core:jar:1.1.8:compile
[INFO] |  |        \- io.netty:netty-handler-proxy:jar:4.1.94.Final:compile
[INFO] |  |           \- io.netty:netty-codec-socks:jar:4.1.94.Final:compile
[INFO] |  \- org.springframework:spring-webflux:jar:6.0.10:compile
[INFO] |     \- io.projectreactor:reactor-core:jar:3.5.7:compile
[INFO] |        \- org.reactivestreams:reactive-streams:jar:1.0.4:compile
[INFO] +- org.springframework.boot:spring-boot-starter-test:jar:3.1.1:compile
[INFO] |  +- org.springframework.boot:spring-boot-test:jar:3.1.1:compile
[INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:3.1.1:compile
[INFO] |  +- com.jayway.jsonpath:json-path:jar:2.8.0:compile
[INFO] |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:4.0.0:compile
[INFO] |  |  \- jakarta.activation:jakarta.activation-api:jar:2.1.2:compile
[INFO] |  +- net.minidev:json-smart:jar:2.4.11:compile
[INFO] |  |  \- net.minidev:accessors-smart:jar:2.4.11:compile
[INFO] |  |     \- org.ow2.asm:asm:jar:9.3:compile
[INFO] |  +- org.assertj:assertj-core:jar:3.24.2:compile
[INFO] |  +- org.hamcrest:hamcrest:jar:2.2:compile
[INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.9.3:compile
[INFO] |  |  +- org.junit.jupiter:junit-jupiter-api:jar:5.9.3:compile
[INFO] |  |  |  +- org.opentest4j:opentest4j:jar:1.2.0:compile
[INFO] |  |  |  +- org.junit.platform:junit-platform-commons:jar:1.9.3:compile
[INFO] |  |  |  \- org.apiguardian:apiguardian-api:jar:1.1.2:compile
[INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.9.3:compile
[INFO] |  |  \- org.junit.jupiter:junit-jupiter-engine:jar:5.9.3:runtime
[INFO] |  |     \- org.junit.platform:junit-platform-engine:jar:1.9.3:runtime
[INFO] |  +- org.mockito:mockito-core:jar:5.3.1:compile
[INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.14.5:compile
[INFO] |  |  \- org.objenesis:objenesis:jar:3.3:runtime
[INFO] |  +- org.mockito:mockito-junit-jupiter:jar:5.3.1:compile
[INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.1:compile
[INFO] |  |  \- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:compile
[INFO] |  +- org.springframework:spring-core:jar:6.0.10:compile
[INFO] |  |  \- org.springframework:spring-jcl:jar:6.0.10:compile
[INFO] |  +- org.springframework:spring-test:jar:6.0.10:compile
[INFO] |  \- org.xmlunit:xmlunit-core:jar:2.9.1:compile
[INFO] +- io.awspring.cloud:spring-cloud-aws-starter:jar:3.0.1:compile
[INFO] |  +- io.awspring.cloud:spring-cloud-aws-autoconfigure:jar:3.0.1:compile
[INFO] |  +- io.awspring.cloud:spring-cloud-aws-core:jar:3.0.1:compile
[INFO] |  |  +- software.amazon.awssdk:regions:jar:2.20.63:compile
[INFO] |  |  |  +- software.amazon.awssdk:annotations:jar:2.20.63:compile
[INFO] |  |  |  +- software.amazon.awssdk:utils:jar:2.20.63:compile
[INFO] |  |  |  +- software.amazon.awssdk:sdk-core:jar:2.20.63:compile
[INFO] |  |  |  +- software.amazon.awssdk:profiles:jar:2.20.63:compile
[INFO] |  |  |  \- software.amazon.awssdk:json-utils:jar:2.20.63:compile
[INFO] |  |  |     \- software.amazon.awssdk:third-party-jackson-core:jar:2.20.63:compile
[INFO] |  |  \- software.amazon.awssdk:auth:jar:2.20.63:compile
[INFO] |  |     +- software.amazon.awssdk:http-client-spi:jar:2.20.63:compile
[INFO] |  |     \- software.amazon.eventstream:eventstream:jar:1.0.1:compile
[INFO] |  \- org.slf4j:slf4j-api:jar:2.0.7:compile
[INFO] +- io.awspring.cloud:spring-cloud-aws-starter-sqs:jar:3.0.1:compile
[INFO] |  \- io.awspring.cloud:spring-cloud-aws-sqs:jar:3.0.1:compile
[INFO] |     +- software.amazon.awssdk:sqs:jar:2.20.63:compile
[INFO] |     |  +- software.amazon.awssdk:aws-query-protocol:jar:2.20.63:compile
[INFO] |     |  +- software.amazon.awssdk:protocol-core:jar:2.20.63:compile
[INFO] |     |  +- software.amazon.awssdk:aws-core:jar:2.20.63:compile
[INFO] |     |  +- software.amazon.awssdk:metrics-spi:jar:2.20.63:compile
[INFO] |     |  +- software.amazon.awssdk:endpoints-spi:jar:2.20.63:compile
[INFO] |     |  +- software.amazon.awssdk:apache-client:jar:2.20.63:runtime
[INFO] |     |  \- software.amazon.awssdk:netty-nio-client:jar:2.20.63:runtime
[INFO] |     +- software.amazon.awssdk:arns:jar:2.20.63:compile
[INFO] |     \- org.springframework:spring-messaging:jar:6.0.10:compile
[INFO] +- io.awspring.cloud:spring-cloud-aws-starter-s3:jar:3.0.1:compile
[INFO] |  +- io.awspring.cloud:spring-cloud-aws-s3:jar:3.0.1:compile
[INFO] |  |  \- software.amazon.awssdk:s3:jar:2.20.63:compile
[INFO] |  |     +- software.amazon.awssdk:aws-xml-protocol:jar:2.20.63:compile
[INFO] |  |     \- software.amazon.awssdk:crt-core:jar:2.20.63:compile
[INFO] |  \- io.awspring.cloud:spring-cloud-aws-s3-cross-region-client:jar:3.0.1:compile
[INFO] +- org.springframework.boot:spring-boot-starter-data-jpa:jar:3.1.1:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter-aop:jar:3.1.1:compile
[INFO] |  |  \- org.aspectj:aspectjweaver:jar:1.9.19:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter-jdbc:jar:3.1.1:compile
[INFO] |  |  +- com.zaxxer:HikariCP:jar:5.0.1:compile
[INFO] |  |  \- org.springframework:spring-jdbc:jar:6.0.10:compile
[INFO] |  +- org.springframework.data:spring-data-jpa:jar:3.1.1:compile
[INFO] |  |  +- org.springframework.data:spring-data-commons:jar:3.1.1:compile
[INFO] |  |  +- org.springframework:spring-orm:jar:6.0.10:compile
[INFO] |  |  \- org.springframework:spring-tx:jar:6.0.10:compile
[INFO] |  \- org.springframework:spring-aspects:jar:6.0.10:compile
[INFO] +- org.springframework.boot:spring-boot-starter-mail:jar:3.1.1:compile
[INFO] |  +- org.springframework:spring-context-support:jar:6.0.10:compile
[INFO] |  \- org.eclipse.angus:jakarta.mail:jar:1.1.0:compile
[INFO] |     \- org.eclipse.angus:angus-activation:jar:2.0.1:runtime
[INFO] +- org.springframework.boot:spring-boot-starter-validation:jar:3.1.1:compile
[INFO] |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.10:compile
[INFO] |  \- org.hibernate.validator:hibernate-validator:jar:8.0.0.Final:compile
[INFO] |     \- jakarta.validation:jakarta.validation-api:jar:3.0.2:compile
[INFO] +- org.springframework.boot:spring-boot-starter:jar:3.1.1:compile
[INFO] |  +- org.springframework.boot:spring-boot:jar:3.1.1:compile
[INFO] |  +- org.springframework.boot:spring-boot-autoconfigure:jar:3.1.1:compile
[INFO] |  +- jakarta.annotation:jakarta.annotation-api:jar:2.1.1:compile
[INFO] |  \- org.yaml:snakeyaml:jar:1.33:compile
[INFO] +- org.springframework.boot:spring-boot-starter-log4j2:jar:3.1.1:compile
[INFO] |  +- org.apache.logging.log4j:log4j-slf4j2-impl:jar:2.20.0:compile
[INFO] |  |  \- org.apache.logging.log4j:log4j-api:jar:2.20.0:compile
[INFO] |  +- org.apache.logging.log4j:log4j-core:jar:2.20.0:compile
[INFO] |  \- org.apache.logging.log4j:log4j-jul:jar:2.20.0:compile
[INFO] +- org.apache.logging.log4j:log4j-layout-template-json:jar:2.20.0:compile
[INFO] +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.15.2:compile
[INFO] |  \- com.fasterxml.jackson.core:jackson-core:jar:2.15.2:compile
[INFO] +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.15.2:compile
[INFO] |  \- com.fasterxml.jackson.core:jackson-annotations:jar:2.15.2:compile
[INFO] +- com.fasterxml.jackson.core:jackson-databind:jar:2.15.2:compile
[INFO] +- com.fasterxml.jackson.dataformat:jackson-dataformat-yaml:jar:2.15.2:compile
[INFO] +- nz.co.niwa:arcgis:jar:1.3.2:compile
[INFO] |  +- org.apache.httpcomponents:httpclient:jar:4.5.13:compile
[INFO] |  |  +- org.apache.httpcomponents:httpcore:jar:4.4.16:compile
[INFO] |  |  \- commons-logging:commons-logging:jar:1.2:compile
[INFO] |  \- org.apache.commons:commons-lang3:jar:3.12.0:compile
[INFO] +- nz.co.niwa:clidb:jar:1.6.8:compile
[INFO] |  +- junit:junit:jar:4.13.2:compile
[INFO] |  +- com.oracle.jdbc:ojdbc7:jar:12.1.0.2:compile
[INFO] |  |  +- com.oracle.jdbc:xdb6:jar:12.1.0.2:compile
[INFO] |  |  +- com.oracle.jdbc:orai18n:jar:12.1.0.2:compile
[INFO] |  |  +- com.oracle.jdbc:xmlparserv2:jar:12.1.0.2:compile
[INFO] |  |  +- com.oracle.jdbc:oraclepki:jar:12.1.0.2:compile
[INFO] |  |  +- com.oracle.jdbc:osdt_cert:jar:12.1.0.2:compile
[INFO] |  |  \- com.oracle.jdbc:osdt_core:jar:12.1.0.2:compile
[INFO] |  \- com.google.guava:guava:jar:30.0-jre:compile
[INFO] |     +- com.google.guava:failureaccess:jar:1.0.1:compile
[INFO] |     +- com.google.guava:listenablefuture:jar:9999.0-empty-to-avoid-conflict-with-guava:compile
[INFO] |     +- com.google.code.findbugs:jsr305:jar:3.0.2:compile
[INFO] |     +- org.checkerframework:checker-qual:jar:3.5.0:compile
[INFO] |     +- com.google.errorprone:error_prone_annotations:jar:2.3.4:compile
[INFO] |     \- com.google.j2objc:j2objc-annotations:jar:1.3:compile
[INFO] +- nz.co.niwa:aquarius:jar:2.0.8:compile
[INFO] |  +- commons-codec:commons-codec:jar:1.15:compile
[INFO] |  \- org.bouncycastle:bcpkix-jdk15on:jar:1.70:compile
[INFO] |     +- org.bouncycastle:bcprov-jdk15on:jar:1.70:compile
[INFO] |     \- org.bouncycastle:bcutil-jdk15on:jar:1.70:compile
[INFO] +- org.mapstruct:mapstruct:jar:1.4.2.Final:compile
[INFO] +- commons-collections:commons-collections:jar:3.2.2:compile
[INFO] +- commons-io:commons-io:jar:2.11.0:compile
[INFO] +- org.hibernate.orm:hibernate-core:jar:6.2.2.Final:compile
[INFO] |  +- jakarta.persistence:jakarta.persistence-api:jar:3.1.0:compile
[INFO] |  +- jakarta.transaction:jakarta.transaction-api:jar:2.0.1:compile
[INFO] |  +- org.jboss.logging:jboss-logging:jar:3.5.1.Final:compile
[INFO] |  +- org.hibernate.common:hibernate-commons-annotations:jar:6.0.6.Final:runtime
[INFO] |  +- io.smallrye:jandex:jar:3.0.5:runtime
[INFO] |  +- com.fasterxml:classmate:jar:1.5.1:compile
[INFO] |  +- net.bytebuddy:byte-buddy:jar:1.14.5:compile
[INFO] |  +- org.glassfish.jaxb:jaxb-runtime:jar:4.0.3:runtime
[INFO] |  |  \- org.glassfish.jaxb:jaxb-core:jar:4.0.3:runtime
[INFO] |  |     +- org.glassfish.jaxb:txw2:jar:4.0.3:runtime
[INFO] |  |     \- com.sun.istack:istack-commons-runtime:jar:4.1.2:runtime
[INFO] |  +- jakarta.inject:jakarta.inject-api:jar:2.0.1:runtime
[INFO] |  \- org.antlr:antlr4-runtime:jar:4.10.1:compile
[INFO] +- com.oracle.weblogic:ojdbc7:jar:12.1.3-0-0:provided
[INFO] +- javax.measure:unit-api:jar:2.2:compile
[INFO] +- tec.units:unit-ri:jar:1.0.3:compile
[INFO] |  \- tec.uom.lib:uom-lib-common:jar:1.0.2:compile
[INFO] +- com.h2database:h2:jar:2.1.214:test
[INFO] +- com.squareup.okhttp3:okhttp:jar:4.0.1:test
[INFO] |  +- com.squareup.okio:okio:jar:2.2.2:test
[INFO] |  \- org.jetbrains.kotlin:kotlin-stdlib:jar:1.8.22:test
[INFO] |     +- org.jetbrains.kotlin:kotlin-stdlib-common:jar:1.8.22:test
[INFO] |     \- org.jetbrains:annotations:jar:13.0:test
[INFO] \- com.squareup.okhttp3:mockwebserver:jar:4.0.1:test
[INFO] --------------------------------------------------------------
</code></pre>
",
tags:"<java><spring><spring-boot><email><jakarta-mail>",
score:7,
creationDate:2023-07-03 02:01:06,
creationDate:2023-07-19 03:10:40,
score:4,
acceptedResponderReputation:11035,
acceptedResponder:2428802,
QuestionerReputation:149,
Questioner:873597}
{title:"HttpStatusCode in Spring Boot 3",
id:"https://stackoverflow.com/questions/77693167",
body:"<p>I just migrated an application to Spring Boot 3 and before the migration I used HttpStatus to obtain more details about the error message that a certain web client returned with the gerReasonPhrase() method.</p>
<p>Now I find that in Spring Boot 3, HttpStatus is deprecated and I have to use HttpStatusCode instead. But HttpStatusCode does not have the getReasonPhrase() method or anything similar. Is there a way to obtain the same information as before through HttpStatusCode without having to make a status code map with its corresponding messages?</p>
<p>I am searching a similar method in Spring Boot 3 than the one that exists in Spring Boot 2.</p>
",
tags:"<java><spring-boot><http-status-codes>",
score:7,
creationDate:2023-12-20 16:40:01,
creationDate:2024-01-18 18:56:19,
score:4,
acceptedResponderReputation:91,
acceptedResponder:5248772,
QuestionerReputation:81,
Questioner:23134052}
{title:"Select/pin a single pixel on a Plotly heatmap",
id:"https://stackoverflow.com/questions/76922933",
body:"<p>On a Plotly heatmap, sometimes it's useful to have 2 select modes:</p>
<ul>
<li><p>rectangle selection (already available in the modbar)</p>
</li>
<li><p><strong>selection/pinning of a single pixel</strong>: I'm trying to do it by recycling the existing &quot;drawcircle&quot; button which I don't need. When clicked, the pixel should be highlighted, or have a coloured disc on top of it (or a red &quot;pin&quot;, like Google Maps UI)</p>
</li>
</ul>
<p>Problem: when <code>drawcircle</code> tool is selected in the modbar, the <code>plotly_click</code> event is not fired (so we can't get the coordinates), and <code>plotly_selected</code> doesn't give the initial mouseclick position. (I don't want to make a real circle shape, I only want to use the first click). See also <a href=""https://plotly.com/javascript/plotlyjs-events/"" rel=""noreferrer"">Event Handlers in JavaScript</a></p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const z = Array.from({
  length: 50
}, () =&gt; Array.from({
  length: 50
}, () =&gt; Math.floor(Math.random() * 255)));
const plot = document.querySelector(""#plot"");
const data = [{
  type: 'heatmap',
  z: z
}];
const layout = {
  'yaxis': {
    'scaleanchor': 'x'
  }
};
const config = {
  modeBarButtons: [
    [""zoom2d""],
    [""zoomIn2d""],
    [""zoomOut2d""],
    [""autoScale2d""],
    [""select2d""],
    [""drawcircle""]
  ],
  displaylogo: false,
  displayModeBar: true
};
Plotly.newPlot('plot', data, layout, config);

plot.on(""plotly_selected"", (data) =&gt; {
  console.log(data);
});
plot.on('plotly_click', (data) =&gt; {
  console.log(data);
});</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script src=""https://cdn.plot.ly/plotly-2.16.2.min.js""&gt;&lt;/script&gt;
&lt;div id=""plot""&gt;&lt;/div&gt;</code></pre>
</div>
</div>
</p>
<p><strong>How to have a &quot;select/pin a pixel/point&quot; modebar tool on a Plotly heatmap?</strong></p>
<p>Note: the Python doc is more complete than the JS version here: <a href=""https://plotly.com/python/configuration-options/#removing-modebar-buttons"" rel=""noreferrer"">Add/remove modebar buttons</a></p>
",
tags:"<javascript><plotly><plotly.js>",
score:6,
creationDate:2023-08-17 15:23:17,
creationDate:2023-08-21 10:06:03,
score:4,
acceptedResponderReputation:672,
acceptedResponder:5705660,
QuestionerReputation:46351,
Questioner:1422096}
{title:"ChromeDriver Version 117+ Forces ""Save As"" Dialog - How to Bypass? (Selenium/Java)",
id:"https://stackoverflow.com/questions/77093248",
body:"<p>I have been working on automating file downloads using Selenium WebDriver with ChromeDriver in Java. My code was working perfectly until I updated to ChromeDriver version 117+, the code worked fine till Chrome 116.0.5845.141, problem seems to start in Chrome 116.0.5845.188. Now, it seems that the browser is forcing the &quot;Save As&quot; dialog box to appear, even when I have set Chrome preferences to avoid it.</p>
<p>Here is a snippet of my Java code:</p>
<pre><code>import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import org.openqa.selenium.chrome.ChromeOptions;

import java.util.HashMap;

public class FileDownloadHeadless {
    public static void main(String[] args) throws InterruptedException {

        System.setProperty(&quot;webdriver.chrome.driver&quot;, &quot;path/to/chromedriver.exe&quot;);

        ChromeOptions options = new ChromeOptions();
        options.setCapability(&quot;os&quot;, &quot;Windows&quot;);
        options.setCapability(&quot;os_version&quot;, &quot;10&quot;);
        options.setCapability(CapabilityType.ACCEPT_SSL_CERTS, true);
        options.setCapability(CapabilityType.ForSeleniumServer.ENSURING_CLEAN_SESSION, true);
        options.setCapability(&quot;chrome.switches&quot;, Arrays.asList(&quot;--incognito&quot;));
        options.setCapability(ChromeOptions.CAPABILITY, options);
        options.addArguments(&quot;--headless&quot;);
        options.addArguments(&quot;--disable-gpu&quot;);

        HashMap&lt;String, Object&gt; chromePrefs = new HashMap&lt;&gt;();
        chromePrefs.put(&quot;profile.default_content_settings.popups&quot;, 0);
        chromePrefs.put(&quot;download.default_directory&quot;, &quot;C:\\local_files&quot;);
        chromePrefs.put(&quot;download.prompt_for_download&quot;, false);
        chromePrefs.put(&quot;profile.content_settings.exceptions.automatic_downloads.*.setting&quot;, 1);
        chromePrefs.put(&quot;profile.default_content_setting_values.automatic_downloads&quot;, 1);
        options.setExperimentalOption(&quot;prefs&quot;, chromePrefs);

        WebDriver driver = new ChromeDriver(options);

        driver.get(&quot;http://my_site.com/download&quot;);

        driver.findElement(By.id(&quot;id_button_download&quot;)).click();

        Thread.sleep(5000);

        driver.quit();
    }
}
</code></pre>
<p>Despite these settings, the &quot;Save As&quot; dialog box still appears, and it's disrupting the automation flow. I've tried various combinations of Chrome preferences, but none seem to bypass the new behavior introduced in version 117.</p>
<p>Has anyone else encountered this issue with ChromeDriver version 117+ or higher? If so, how have you managed to work around this update? Any insights would be greatly appreciated.</p>
<p>Removing the &quot;--incognito&quot; mode as suggested by @NhanTT, did work! but I wonder why and how the mode actually affects file download options. If anyone has another solution that works around the problem while maintaining incognito mode, I would appreciate it.</p>
<p>Thank you for your time and assistance.</p>
",
tags:"<java><selenium-webdriver><download><selenium-chromedriver><software-update>",
score:8,
creationDate:2023-09-12 23:42:28,
creationDate:2023-09-13 06:36:55,
score:4,
acceptedResponderReputation:56,
acceptedResponder:6396150,
QuestionerReputation:93,
Questioner:13461167}
{title:"How to rotate an object around another rotating object in CSS?",
id:"https://stackoverflow.com/questions/77018006",
body:"<p>I have these two rotating objects and I want the <code>.box</code> to be rotating around the <code>.circle</code> like the ring and the earth but I can't seem to figure out how to do it,
I would also like to distribute the images around the space (like the image posted instead of the alphabets it the <code>.box</code> images) if possible I would really appreciate it.</p>
<p>Thanks in advance!
<a href=""https://i.sstatic.net/j8n4l.jpg"" rel=""noreferrer""><img src=""https://i.sstatic.net/j8n4l.jpg"" alt=""This image"" /></a></p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-css lang-css prettyprint-override""><code>* {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}
body {
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
    background-color: #000;
}
.circle {
    transform-style: preserve-3d;
    transform: perspective(1000px) rotateY(360deg) rotateX(15deg);
    /* animation: animate 8s linear infinite; */
}
.circle span {
    position: absolute;
    top: 0;
    left: 0;
    background: #fff;
    color: blueviolet;
    font-size: 3em;
    transform-origin: center;
    transform-style: preserve-3d;
    padding: 5px 11px;
    border-top: 4px solid blueviolet;
    border-bottom: 4px solid blueviolet;
    transform: rotateY(calc(var(--i) * calc(360deg/30))) translateZ(250px);
}
.box {
    position: relative;
    width: 200px;
    height: 200px;
    transform-style: preserve-3d;
    transform: perspective(1000px) rotateY(3600deg);
    /* animation: animate 200s linear infinite; */
}
@keyframes animate {
    0% {
        transform: perspective(1000px) rotateY(0deg);
    }
    100% {
        transform: perspective(1000px) rotateY(3600deg);
    }
}
.box span {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    transform-origin: center;
    transform-style: preserve-3d;
    transform: rotateY(calc(var(--i) * 45deg)) translateZ(400px);
}
.box span img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    object-fit: cover;
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;!DOCTYPE html&gt;
&lt;html lang=""en""&gt;
&lt;head&gt;
    &lt;meta charset=""UTF-8""&gt;
    &lt;meta name=""viewport"" content=""width=device-width, initial-scale=1.0""&gt;
    &lt;link rel=""stylesheet"" href=""css/try.css""&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;div class=""box""&gt;
        &lt;span style=""--i:1""&gt;&lt;img src=""assets/try.png""&gt;&lt;/span&gt;
        &lt;span style=""--i:2""&gt;&lt;img src=""assets/try.png""&gt;&lt;/span&gt;
        &lt;span style=""--i:3""&gt;&lt;img src=""assets/try.png""&gt;&lt;/span&gt;
        &lt;span style=""--i:4""&gt;&lt;img src=""assets/try.png""&gt;&lt;/span&gt;
        &lt;span style=""--i:5""&gt;&lt;img src=""assets/try.png""&gt;&lt;/span&gt;
        &lt;span style=""--i:6""&gt;&lt;img src=""assets/try.png""&gt;&lt;/span&gt;
        &lt;span style=""--i:7""&gt;&lt;img src=""assets/try.png""&gt;&lt;/span&gt;
        &lt;span style=""--i:8""&gt;&lt;img src=""assets/try.png""&gt;&lt;/span&gt;
    &lt;/div&gt;
    &lt;div class=""circle""&gt;
        &lt;span style=""--i:1;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:2;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:3;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:4;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:5;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:6;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:7;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:8;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:9;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:10;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:11;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:12;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:13;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:14;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:15;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:16;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:17;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:18;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:19;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:20;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:21;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:22;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:23;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:24;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:25;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:26;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:27;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:28;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:29;""&gt;a&lt;/span&gt;
        &lt;span style=""--i:30;""&gt;a&lt;/span&gt;
    &lt;/div&gt;
    &lt;script&gt;
        let circle = document.querySelector('.circle');
        let box = document.querySelector('.box');

        window.onmousemove = function (e) {
            let x = e.clientX;
            let y = e.clientX;

            circle.style.transform = `perspective(1000px) rotateY(${x * 0.5}deg) rotateX(15deg)`;
            box.style.transform = `perspective(1000px) rotateY(${y}deg)`; // Adjust rotation speed
        };
    &lt;/script&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
</p>
",
tags:"<javascript><html><css>",
score:7,
creationDate:2023-08-31 17:14:04,
creationDate:2023-09-05 11:53:39,
score:4,
acceptedResponderReputation:260,
acceptedResponder:7029228,
QuestionerReputation:453,
Questioner:13481920}
{title:"Vite: Is there a possibility to exclude code elements from being built?",
id:"https://stackoverflow.com/questions/76783532",
body:"<p>I'm looking for a &quot;feature&quot; in Vite which will allow me to exclude some code from being built. As far as I remember in webpack there was a feature when you could create some comments like:</p>
<pre class=""lang-js prettyprint-override""><code>###SOMETHING
&lt;code goes here&gt;
###END_SOMETHING
</code></pre>
<p>and this code between ###SOMETHING and ###END_SOMETHING wasn't included in output files during build process. Is there relative feature available in Vite or maybe there is another way to perform such a action? Basically code between these &quot;tags&quot; needs to be in file and working during <code>vite dev</code>, but it needs to be omitted by <code>vite build</code>.</p>
<p>I've found rollup settings but it only includes whole files.</p>
",
tags:"<javascript><vue.js><nuxt.js><vite>",
score:6,
creationDate:2023-07-27 21:36:30,
creationDate:2023-07-27 22:17:45,
score:4,
acceptedResponderReputation:6588,
acceptedResponder:686184,
QuestionerReputation:73,
Questioner:9424806}
{title:"HTTP Content-Security-Policy header not working correctly for script-src in Struts",
id:"https://stackoverflow.com/questions/75216534",
body:"<p>I have a problem updating my version of struts struts2-core-2.5.30 project to struts2-core-6.1.1 so I began to receive an error indicating that the security policies have been violated, doing some research, I found that a header should be added</p>
<blockquote>
<p>[Report Only] Refused to load the script '' because it violates the following Content Security Policy directive: &quot;script-src 'nonce-MOz6w31eaDHGUDfV__K8LEZ1' 'strict-dynamic' http: https:&quot;. Note that 'strict-dynamic' is present, so host-based allowlisting is disabled. Note that 'script-src-elem' was not explicitly set, so 'script-src' is used as a fallback.</p>
</blockquote>
<p>and inside this error I have this description</p>
<blockquote>
<p>[Report Only] Refused to load the script <code>http://localhost:8080/Portal/html/js/jquery/jquery-1.8.3.min.js</code> because it violates the following Content Security Policy directive: &quot;script-src 'nonce-MOz6w31eaDHGUDfV__K8LEZ1' 'strict-dynamic' http: https:&quot;. Note that 'strict-dynamic' is present, so host-based allowlisting is disabled. Note that 'script-src-elem' was not explicitly set, so 'script-src' is used as a fallback.</p>
</blockquote>
<blockquote>
<p>[Report Only] Refused to load the script <code>http://localhost:8080/Portal/html/js/jquery/jquery-ui.1.10.4.min.js</code> because it violates the following Content Security Policy directive: &quot;script-src 'nonce-MOz6w31eaDHGUDfV__K8LEZ1' 'strict-dynamic' http: https:&quot;. Note that 'strict-dynamic' is present, so host-based allowlisting is disabled. Note that 'script-src-elem' was not explicitly set, so 'script-src' is used as a fallback.</p>
</blockquote>
<p>however I have tried these headers</p>
<pre><code>&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src 'self'&quot;&gt;


&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src *;
    style-src * 'unsafe-inline'; script-src * 'unsafe-inline'
    'unsafe-eval'; img-src * data: 'unsafe-inline'; connect-src *
    'unsafe-inline'; frame-src *;&quot;&gt;

&lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src  'nonce-rAnd0m'&quot;&gt;
&lt;script src=&quot;${pageContext.request.contextPath}/html/js/jquery/jquery-1.8.3.min.js&quot; type=&quot;text/javascript&quot; nonce=&quot;rAnd0m123&quot;&gt;&lt;/script&gt; 
</code></pre>
<p>with each of them I get the same error, In my previous version of Struts it did not ask me for any of this.</p>
<p>I have also tried to make an interceptor to add the corresponding directives, however it did not work for me either.</p>
<pre><code>import com.opensymphony.xwork2.ActionContext;
import com.opensymphony.xwork2.ActionInvocation;
import com.opensymphony.xwork2.interceptor.AbstractInterceptor;
import javax.servlet.http.HttpServletResponse;
import org.apache.struts2.StrutsStatics;


public class SessionInterceptor extends AbstractInterceptor{

   private static final long serialVersionUID = 1L;


   public String intercept(ActionInvocation invocation) throws Exception {
     
    ActionContext ac = invocation.getInvocationContext();
    HttpServletResponse response = (HttpServletResponse) ac.get(StrutsStatics.HTTP_RESPONSE);
    //HttpServletResponse response = ServletActionContext.getResponse();

    response.addHeader(&quot;X-Frame-Options&quot;, &quot;SAMEORIGIN&quot;);
    response.addHeader(&quot;Content-Security-Policy-Report-Only&quot;, &quot;default-src 'self'; script-src 'self' 'unsafe-inline'; object-src 'none'; style-src 'self' 'unsafe-inline'; img-src 'self'; media-src 'none'; frame-src 'none'; font-src 'self'; connect-src 'self'; report-uri REDACTED&quot;);
    response.addHeader(&quot;X-Content-Security-Policy-Report-Only&quot;, &quot;default-src 'self'; script-src 'self' 'unsafe-inline'; object-src 'none'; style-src 'self' 'unsafe-inline'; img-src 'self'; media-src 'none'; frame-src 'none'; font-src 'self'; connect-src 'self'; report-uri REDACTED&quot;);
    return invocation.invoke();
}

}
</code></pre>
<p>In the same way I have updated the jquery-1.8.3 version as suggested in the comments but it dod not worked for me either</p>
",
tags:"<javascript><java><security><struts2><content-security-policy>",
score:6,
creationDate:2023-01-24 00:57:38,
creationDate:2023-01-26 23:18:08,
score:4,
acceptedResponderReputation:53381,
acceptedResponder:13942448,
QuestionerReputation:174,
Questioner:15262402}
{title:"TypeError: Fetch failed in SvelteKit server-side rendering - Express does not show a proper TypeScript stack trace",
id:"https://stackoverflow.com/questions/75137950",
body:"<p>I am checking the logs of the SvelteKit SSR server using <a href=""https://github.com/sveltejs/kit/tree/master/packages/adapter-node"" rel=""noreferrer"">adapter-node</a>.</p>
<p>I have customised the <code>server.js</code> to use <a href=""https://github.com/tradingstrategy-ai/frontend/blob/master/scripts/server.js"" rel=""noreferrer"">Express instead of Polka</a>, though not sure if this matters.</p>
<p>There are apparent errors which I believe is when <code>fetch()</code> tries to read data from backend API and fails for some reason.</p>
<p>This is the console output from I get using <code>docker</code>:</p>
<pre><code>frontend  | TypeError: fetch failed
frontend  |     at fetch (file:///app/build/handler.js:17895:14)
frontend  |     at async Object.fetch (file:///app/build/server/index.js:2273:12)
frontend  |     at async fetch (file:///app/build/server/index.js:991:24)
frontend  |     at async Promise.all (index 0)
frontend  |     at async load (file:///app/build/server/chunks/6-0becfa88.js:8:56)
frontend  |     at async load_data (file:///app/build/server/index.js:1088:16)
frontend  |     at async file:///app/build/server/index.js:1887:18

</code></pre>
<p>This stack trace is unusable, because it lacks the information of what was the function / source code that called <code>fetch()</code>. Not sure if this is because of how Node.js / Express works, or because lack of TypeScript source map support in some part of the stack or something else. A SvelteKit project has dozens of functions called <code>load()</code> because that is what every router endpoint has.</p>
<p>What would be a way to make these errors, and SvelteKit error handling in general, more descriptive - e.g. to show the proper caller mapped to its TypeScript source file, the failed page name, failed URL in <code>fetch()</code> and so on? This would then help to diagnose the underlying problem of what could be wrong with the API calls that fail.</p>
",
tags:"<javascript><typescript><express><svelte><sveltekit>",
score:8,
creationDate:2023-01-16 17:55:04,
creationDate:2023-01-22 15:30:49,
score:4,
acceptedResponderReputation:1060,
acceptedResponder:14816076,
QuestionerReputation:83758,
Questioner:315168}
{title:"Wait for half of the promises to resolve",
id:"https://stackoverflow.com/questions/75702931",
body:"<p>I want to parallel process a number of asynchronous calls in <code>NodeJS</code>. I can continue if a specific number of those calls resolve or all of them are completed(some resolve, some reject). How to to do this?</p>
<p><a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/all"" rel=""noreferrer""><code>Promise.All()</code></a> resolves when all of the promises are completed and <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/any"" rel=""noreferrer""><code>Promise.Any()</code></a> resolves when any one of the promise is resolved or all are rejected. Is there any way to wait for 50% of the promises to resolve or <code>n</code> number of promises to resolve instead of waiting for all to resolve.</p>
",
tags:"<javascript><node.js><promise>",
score:6,
creationDate:2023-03-11 05:14:19,
creationDate:2023-03-11 05:24:24,
score:4,
acceptedResponderReputation:89139,
acceptedResponder:9513184,
QuestionerReputation:259,
Questioner:4358599}
{title:"Porting to Springboot 3 / Hibernate 6 / EHCache 3",
id:"https://stackoverflow.com/questions/76853497",
body:"<p>I am trying since few days to move my old project based on <strong>Springboot 2 / Hibernate 5 / EHCache 2</strong> to the newer <strong>Java 17 / Springboot 3 / Hibernate 6 / EHCache 3</strong>.</p>
<p>Of course I've read a lot of documentation, tried many configurations and dependencies setup. I also debugged the libraries to figure out what was the reason of my problems.</p>
<p>Before posting the relevant parts of my code, I wish to list the issues I am trying to solve:</p>
<ol>
<li>The project starts, the configuration gets parsed (I see that by debugging), the EHCache listeners are registered, but when fetch data from DB, it is stored in the cache, but the listener does not fire.</li>
<li>Despite of the <strong>1 minute TTL</strong>, the stored items never expire.</li>
<li>I see by debugging that the DemoEntity EHCache configuration initializes two times: from JCache before, then by Hibernate itself (this flow maybe the root cause of some of the above issues).</li>
</ol>
<p>I realize it's not easy to answer with so little information at your disposal, but I trust you can tell me if I've made any obvious mistakes in dependency inclusion, application configuration (<code>application.yaml</code>), or in the code itself.</p>
<p>It follows the relevant code parts.</p>
<p>Thank you in advance!</p>
<p><strong>pom.xml</strong></p>
<pre class=""lang-xml prettyprint-override""><code>&lt;properties&gt;
    &lt;springboot.version&gt;3.1.2&lt;/springboot.version&gt;
    &lt;ehcache.version&gt;3.10.8&lt;/ehcache.version&gt;
    &lt;hibernate.version&gt;6.2.2.Final&lt;/hibernate.version&gt; &lt;!-- As for the current version of springboot --&gt;
&lt;/properties&gt;

&lt;dependencies&gt;
  &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
  &lt;/dependency&gt;

  &lt;dependency&gt;
      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
      &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;
      &lt;version&gt;${springboot.version}&lt;/version&gt;
  &lt;/dependency&gt;

  &lt;dependency&gt;
      &lt;groupId&gt;org.ehcache&lt;/groupId&gt;
      &lt;artifactId&gt;ehcache&lt;/artifactId&gt;
      &lt;version&gt;${ehcache.version}&lt;/version&gt;
      &lt;classifier&gt;jakarta&lt;/classifier&gt;
  &lt;/dependency&gt;

  &lt;dependency&gt;
      &lt;groupId&gt;org.hibernate&lt;/groupId&gt;
      &lt;artifactId&gt;hibernate-jcache&lt;/artifactId&gt;
      &lt;version&gt;${hibernate.version}&lt;/version&gt;
  &lt;/dependency&gt;
&lt;/dependencies&gt;
</code></pre>
<p><strong>application.yaml</strong></p>
<pre class=""lang-yaml prettyprint-override""><code>spring:
  cache:
    jcache:
      config: file:///app/config/ehcache.xml

  jpa:
    properties:
      hibernate:
        cache:
          region.factory_class: org.hibernate.cache.jcache.internal.JCacheRegionFactory
          use_second_level_cache: true
          use_query_cache: true
</code></pre>
<p><strong>ehcache.xml</strong></p>
<pre class=""lang-xml prettyprint-override""><code>&lt;config
    xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance'
    xmlns='http://www.ehcache.org/v3'
    xmlns:jsr107='http://www.ehcache.org/v3/jsr107'
    xsi:schemaLocation=&quot;http://www.ehcache.org/v3 http://www.ehcache.org/schema/ehcache-core-3.10.xsd&quot;
&gt;
    &lt;cache-template name=&quot;entitiesDefault&quot;&gt;
        &lt;expiry&gt;
            &lt;ttl unit=&quot;minutes&quot;&gt;1&lt;/ttl&gt;
        &lt;/expiry&gt;

        &lt;listeners&gt;
            &lt;listener&gt;
                &lt;class&gt;api.demo.springboot.framework.persistence.JpaCacheEventListener&lt;/class&gt;
                &lt;event-firing-mode&gt;ASYNCHRONOUS&lt;/event-firing-mode&gt;
                &lt;event-ordering-mode&gt;ORDERED&lt;/event-ordering-mode&gt;
                &lt;events-to-fire-on&gt;CREATED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;EVICTED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;EXPIRED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;REMOVED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;UPDATED&lt;/events-to-fire-on&gt;
            &lt;/listener&gt;
        &lt;/listeners&gt;

        &lt;resources&gt;
            &lt;heap unit=&quot;entries&quot;&gt;1000&lt;/heap&gt;
        &lt;/resources&gt;
    &lt;/cache-template&gt;

    &lt;cache-template name=&quot;entitiesRelationsDefault&quot;&gt;
        &lt;expiry&gt;
            &lt;ttl unit=&quot;minutes&quot;&gt;1&lt;/ttl&gt;
        &lt;/expiry&gt;

        &lt;listeners&gt;
            &lt;listener&gt;
                &lt;class&gt;api.demo.springboot.framework.persistence.JpaCacheEventListener&lt;/class&gt;
                &lt;event-firing-mode&gt;ASYNCHRONOUS&lt;/event-firing-mode&gt;
                &lt;event-ordering-mode&gt;ORDERED&lt;/event-ordering-mode&gt;
                &lt;events-to-fire-on&gt;CREATED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;EVICTED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;EXPIRED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;REMOVED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;UPDATED&lt;/events-to-fire-on&gt;
            &lt;/listener&gt;
        &lt;/listeners&gt;

        &lt;resources&gt;
            &lt;heap unit=&quot;entries&quot;&gt;1000&lt;/heap&gt;
        &lt;/resources&gt;
    &lt;/cache-template&gt;

    &lt;cache-template name=&quot;queriesDefault&quot;&gt;
        &lt;expiry&gt;
            &lt;ttl unit=&quot;minutes&quot;&gt;1&lt;/ttl&gt;
        &lt;/expiry&gt;

        &lt;listeners&gt;
            &lt;listener&gt;
                &lt;class&gt;api.demo.springboot.framework.persistence.JpaCacheEventListener&lt;/class&gt;
                &lt;event-firing-mode&gt;ASYNCHRONOUS&lt;/event-firing-mode&gt;
                &lt;event-ordering-mode&gt;ORDERED&lt;/event-ordering-mode&gt;
                &lt;events-to-fire-on&gt;CREATED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;EVICTED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;EXPIRED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;REMOVED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;UPDATED&lt;/events-to-fire-on&gt;
            &lt;/listener&gt;
        &lt;/listeners&gt;

        &lt;resources&gt;
            &lt;heap unit=&quot;entries&quot;&gt;1000&lt;/heap&gt;
        &lt;/resources&gt;
    &lt;/cache-template&gt;

    &lt;cache
        alias=&quot;default-update-timestamps-region&quot;
    &gt;
        &lt;expiry&gt;
            &lt;ttl unit=&quot;minutes&quot;&gt;1&lt;/ttl&gt;
        &lt;/expiry&gt;

        &lt;listeners&gt;
            &lt;listener&gt;
                &lt;class&gt;api.demo.springboot.framework.persistence.JpaCacheEventListener&lt;/class&gt;
                &lt;event-firing-mode&gt;ASYNCHRONOUS&lt;/event-firing-mode&gt;
                &lt;event-ordering-mode&gt;ORDERED&lt;/event-ordering-mode&gt;
                &lt;events-to-fire-on&gt;CREATED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;EVICTED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;EXPIRED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;REMOVED&lt;/events-to-fire-on&gt;
                &lt;events-to-fire-on&gt;UPDATED&lt;/events-to-fire-on&gt;
            &lt;/listener&gt;
        &lt;/listeners&gt;

        &lt;resources&gt;
            &lt;heap unit=&quot;entries&quot;&gt;1000&lt;/heap&gt;
        &lt;/resources&gt;
    &lt;/cache&gt;

    &lt;cache
        alias=&quot;default-query-results-region&quot;
        uses-template=&quot;queriesDefault&quot;
    /&gt;

    &lt;cache
        alias=&quot;DemoEntity&quot;
        uses-template=&quot;entitiesDefault&quot;
    &gt;
        &lt;value-type&gt;api.demo.springboot.application.persistence.entities.DemoEntity&lt;/value-type&gt;
    &lt;/cache&gt;
&lt;/config&gt;
</code></pre>
<p><strong>DemoEntity.java</strong></p>
<pre class=""lang-java prettyprint-override""><code>import jakarta.persistence.*;
import lombok.Data;
import org.hibernate.annotations.Cache;
import org.hibernate.annotations.CacheConcurrencyStrategy;
import org.springframework.cache.annotation.Cacheable;

import java.io.Serializable;

@Data

@Entity
@Table(name = &quot;DEMO_TABLE&quot;)

@Cacheable
@Cache(usage = CacheConcurrencyStrategy.READ_WRITE)
public class DemoEntity implements Serializable {
    private static final long serialVersionUID = 0L;

    @Id
    @Column(name = &quot;ID&quot;)
    private Integer id;

    @Column(name = &quot;DESCRIPTION&quot;)
    private String description;

}
</code></pre>
<p><strong>JpaCacheEventListener.java</strong></p>
<pre class=""lang-java prettyprint-override""><code>import lombok.extern.slf4j.Slf4j;
import org.ehcache.event.CacheEvent;
import org.ehcache.event.CacheEventListener;
import org.springframework.stereotype.Component;

@Slf4j
@Component
public class JpaCacheEventListener implements CacheEventListener&lt;Object, Object&gt; {

    @Override
    public void onEvent(CacheEvent event) {
        if (log.isTraceEnabled()) {
            log.trace(
                &quot;{ type: {}, key: {} }&quot;,
                event.getType(),
                event.getKey()
            );
        }
    }

}
</code></pre>
",
tags:"<java><spring-boot><hibernate><maven><ehcache>",
score:6,
creationDate:2023-08-07 16:23:52,
creationDate:2023-08-08 10:17:17,
score:4,
acceptedResponderReputation:10996,
acceptedResponder:418599,
QuestionerReputation:10996,
Questioner:418599}
{title:"Firebase auth with Microsoft gives null user object",
id:"https://stackoverflow.com/questions/75776086",
body:"<p>I am implementing user sign-in for web with Google Firebase. I have this working for Google and Facebook (I am getting a populated <code>user</code> object), but for Microsoft sign in I am getting <code>null</code> in the <code>user</code> object even after authorizing at the login screen.</p>
<p>My code:</p>
<pre><code>import { initializeApp } from &quot;https://www.gstatic.com/firebasejs/9.17.2/firebase-app.js&quot;;
import {
    getAuth,
    signInWithRedirect,
    getRedirectResult,
    signOut,
    GoogleAuthProvider,
    FacebookAuthProvider,
    OAuthProvider, // microsoft
    onAuthStateChanged
} from &quot;https://www.gstatic.com/firebasejs/9.17.2/firebase-auth.js&quot;;

const firebaseConfig = { /* my settings */ };
const firebase = initializeApp(firebaseConfig);
const auth = getAuth(firebase);

document.querySelector('.login-with button.microsoft').addEventListener('click', microsoftSignIn, false);

function microsoftSignIn() {
    const provider = new OAuthProvider('microsoft.com');
    signInWithRedirect(auth, provider);
}

onAuthStateChanged(auth, user =&gt; {
    if (user) {
        console.log(&quot;user is logged in&quot;, user);
    } else {
        console.log(&quot;user is not logged in&quot;);
    }                                                                                                                                                                                                                
});
</code></pre>
<p>In Azure AD I have set the redirect URI to <a href=""https://my-app.firebaseapp.com/__/auth/handler"" rel=""noreferrer"">https://my-app.firebaseapp.com/__/auth/handler</a>. I also threw in the localhost though I suspect it is not necessary:</p>
<p><a href=""https://i.sstatic.net/AWoG1.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/AWoG1.png"" alt=""azure ad authentication screen"" /></a></p>
<p>I gave it permission to log users in:</p>
<p><a href=""https://i.sstatic.net/sphsE.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/sphsE.png"" alt=""azure api permissions"" /></a></p>
<p>And I have copied over the client ID and secret back to firebase auth.</p>
<p>When I test the login I get this:</p>
<p><a href=""https://i.sstatic.net/Q7Zmq.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/Q7Zmq.png"" alt=""microsoft my-app auth screen"" /></a></p>
<p>Then after I accept I am redirected back to my site but the <code>user</code> object is <code>null</code>. How can I get a populated <code>user</code> object? Also note that even when using ngrok to host my site on a https URL the result is the same.</p>
",
tags:"<javascript><azure><firebase-authentication>",
score:6,
creationDate:2023-03-18 13:05:43,
creationDate:2023-03-29 01:13:32,
score:4,
acceptedResponderReputation:1424,
acceptedResponder:8267876,
QuestionerReputation:4435,
Questioner:339874}
{title:"StringIndexOutOfBoundException occurs when typing anything into a JavaFX TextField in both JDK21 and JDK8, Windows11",
id:"https://stackoverflow.com/questions/78332309",
body:"<p>When I run this simple code snippet of a JavaFX TextField element, I type something into the text field, and then StringIndexOutOfBoundsException is thrown periodically.</p>
<h3>versions</h3>
<pre><code>JDK: 21.0.0, 21.0.2, 1.8
JavaFX: 
`javafx.runtime.version=8.0.65 javafx.runtime.build=b17`
`javafx.version=21 javafx.runtime.version=21+31 javafx.runtime.build=31`
Windows:
`Edition=Windows 11 Pro, Version=23H2`
</code></pre>
<h2>Error Message</h2>
<pre><code>Exception in thread &quot;JavaFX Application Thread&quot; java.lang.StringIndexOutOfBoundsException: Range [1, -2147483648) out of bounds for length 1
    at java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:55)
    at java.base/jdk.internal.util.Preconditions$1.apply(Preconditions.java:52)
    at java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:213)
    at java.base/jdk.internal.util.Preconditions$4.apply(Preconditions.java:210)
    at java.base/jdk.internal.util.Preconditions.outOfBounds(Preconditions.java:98)
    at java.base/jdk.internal.util.Preconditions.outOfBoundsCheckFromToIndex(Preconditions.java:112)
    at java.base/jdk.internal.util.Preconditions.checkFromToIndex(Preconditions.java:349)
    at java.base/java.lang.String.checkBoundsBeginEnd(String.java:4861)
    at java.base/java.lang.String.substring(String.java:2830)
    at javafx.graphics@21/com.sun.glass.ui.win.WinTextRangeProvider.GetText(WinTextRangeProvider.java:367)
    at javafx.graphics@21/com.sun.glass.ui.win.WinApplication._runLoop(Native Method)
    at javafx.graphics@21/com.sun.glass.ui.win.WinApplication.lambda$runLoop$3(WinApplication.java:185)
    at java.base/java.lang.Thread.run(Thread.java:1583)
</code></pre>
<h2>source code</h2>
<pre class=""lang-java prettyprint-override""><code>package comp3111.qsproject;

// Java program to create a textfield and add it to stage
import javafx.application.Application;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.StackPane;
import javafx.stage.Stage;

public class TextFieldTest extends Application {

    // launch the application
    public void start(Stage s)
    {
        // set title for the stage
        s.setTitle(&quot;creating TextField&quot;);

        // create a textfield
        TextField b = new TextField();

        // create a stack pane
        StackPane r = new StackPane();

        // add textfield
        r.getChildren().add(b);

        // create a scene
        Scene sc = new Scene(r, 200, 200);

        // set the scene
        s.setScene(sc);

        s.show();
    }

    public static void main(String args[])
    {
        // launch the application
        launch(args);
    }
}
</code></pre>
<p>This problem was not resolved when I reinstalled my JDK.</p>
",
tags:"<java><javafx><indexoutofboundsexception><gluon>",
score:14,
creationDate:2024-04-16 05:32:27,
creationDate:2024-04-17 10:38:57,
score:5,
acceptedResponderReputation:20501,
acceptedResponder:873282,
QuestionerReputation:143,
Questioner:23913592}
{title:"Why is window.innerHeight incorrect until I tap? Chrome (Android)",
id:"https://stackoverflow.com/questions/76026292",
body:"<p>When I view this page in Chrome on my mobile phone:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;!DOCTYPE html&gt;
&lt;html lang=""en-au""&gt;
    &lt;head&gt;
        &lt;meta charset=""utf-8""&gt;
        &lt;meta name=""viewport"" content=""width=device-width""&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;div style=""position:fixed;bottom:0;right:0;background:#f00;width:50px;height:50px""&gt;
        &lt;/div&gt;
        &lt;div id=""output""&gt;
        &lt;/div&gt;
        &lt;script&gt;

setInterval(() =&gt; document.getElementById(""output"").innerHTML = `windowHeight: ${window.innerHeight}`, 37);

        &lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
</p>
<p>On first load, it looks like this:</p>
<p><a href=""https://i.sstatic.net/CHsrpl.jpg"" rel=""noreferrer""><img src=""https://i.sstatic.net/CHsrpl.jpg"" alt=""Screenshot of appearance on first load"" /></a></p>
<p>And after tapping once on the page (anywhere), it changes to:</p>
<p><a href=""https://i.sstatic.net/EH5v0l.jpg"" rel=""noreferrer""><img src=""https://i.sstatic.net/EH5v0l.jpg"" alt=""Fixed appearance after tapping once"" /></a></p>
<p>You can see from the red box that this also affects the positioning of <code>position:fixed</code> elements on the page. This was the start of my investigation, and I've pared down the page to get to this point, but can't work out what I'm doing wrong!</p>
<p>This only happens for me on Chrome (Android), on my mobile. I've also tested in the responsive view of desktop browsers and I can't get it to happen. I'm running Chrome version 111.0.5563.116 on my mobile and it's a Huawei Y9 Prime 2019.</p>
<p>It also only happens on a fresh tab. If you load the page, tap once, then reload the page, the page will keep the right <code>window.innerHeight</code> when reloaded.</p>
<p>I've listed all these details because I'm fearing it may be some weird browser bug. Is it a bug? Is there a workaround? Or am I doing something wrong?</p>
",
tags:"<javascript><android><html><css><google-chrome>",
score:21,
creationDate:2023-04-16 06:52:41,
creationDate:2023-04-18 19:14:39,
score:5,
acceptedResponderReputation:3009,
acceptedResponder:2817442,
QuestionerReputation:800,
Questioner:2080294}
{title:"Java-Generated Private Key Imports in Chrome but Fails in Safari",
id:"https://stackoverflow.com/questions/78864922",
body:"<p>I am working on a project where I generate an EC private key using Java and then import it in the browser using JavaScript. The key imports successfully in Chrome, but it fails in Safari.Here’s my JavaScript code for importing private key:</p>
<p>[Try running this html file in browser]</p>
<pre class=""lang-js prettyprint-override""><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
&lt;head&gt;
  &lt;title&gt;ECDH Key Pair Generation&lt;/title&gt;
&lt;/head&gt;
&lt;body&gt; 
  &lt;script&gt;

//Utils
function _extractRawKeyMaterial(pem, type) {
  const pemHeader = `-----BEGIN ${type} KEY-----`;
  const pemFooter = `-----END ${type} KEY-----`;

  const endingIndex = pem.indexOf(pemFooter);
  const startingIndex = pem.indexOf(pemHeader) + pemHeader.length;

  const pemContents = pem.substring(startingIndex, endingIndex);
  var return_object = convertBase64StringToArrayBuffer(pemContents.trim());
  return return_object;
}

 const convertBase64StringToArrayBuffer = base64String =&gt; {
  const text = window.atob(base64String);
  return convertStringToArrayBuffer(text);
};

 const convertStringToArrayBuffer = str =&gt; {
  const buf = new ArrayBuffer(str.length);
  const bufView = new Uint8Array(buf);
  for (let i = 0, strLen = str.length; i &lt; strLen; i++) {
    bufView[i] = str.charCodeAt(i);
  }
  return buf;
};


// private key
var privateKeyGenerated = `-----BEGIN PRIVATE KEY-----
ME4CAQAwEAYHKoZIzj0CAQYFK4EEACIENzA1AgEBBDAMvyd7HU0FwJxgs5N87NVw
MPOR60umJXnhPjdtn0O0RHgx2J0sVnvw7B6ue1Wb5uQ=
-----END PRIVATE KEY-----`

// Pass the loaded private key to your function
_loadEccPrivateKey(privateKeyGenerated);

// Code working in chrome but fails in safari with an error : Data provided to an operation does not meet requirements
 async function _loadEccPrivateKey(pemKey) {
  try {
     const rawKey = _extractRawKeyMaterial(pemKey.trim(), &quot;PRIVATE&quot;);

    //console.log(rawKey)
    const key = await window.crypto.subtle.importKey(
      &quot;pkcs8&quot;, // Format for private keys
      rawKey,
      {
        name: &quot;ECDH&quot;,
        namedCurve: &quot;P-384&quot;,
      },
      true,
      [&quot;deriveBits&quot;, &quot;deriveKey&quot;] // Key usages
    );

    console.log('Imported Private Key:', key);
    return key;
  } catch (e) {
    console.error('Error importing private key:', e);
    throw e;
  }
}

&lt;/script&gt; 
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>The code works perfectly in Chrome but throws an error in Safari. The error message is
&quot;DATA PROVIDED TO AN OPERATION DOES NOT MEET REQUIREMENTS&quot;</p>
<p>Here is my JAVA CODE for more information:</p>
<pre class=""lang-java prettyprint-override""><code>
import org.bouncycastle.jce.provider.BouncyCastleProvider;

import java.io.FileOutputStream;
import java.io.IOException;
import java.security.*;
import java.security.spec.ECGenParameterSpec;
import java.util.Base64;

public class TestApplication {

    private static final String CURVE = &quot;secp384r1&quot;; // P-384 curve

    public static void main(String[] args) {
        try {
            // Add BouncyCastle Provider
            Security.addProvider(new BouncyCastleProvider());

            // Generate EC key pair
            ECGenParameterSpec parameterSpec = new ECGenParameterSpec(CURVE);
            KeyPairGenerator keyPairGenerator = KeyPairGenerator.getInstance(&quot;EC&quot;, &quot;BC&quot;);
            keyPairGenerator.initialize(parameterSpec, new SecureRandom());
            KeyPair keyPair = keyPairGenerator.generateKeyPair();

            // Extract and print private key
            PrivateKey privateKey = keyPair.getPrivate();
            String privateKeyPem = convertToPem(privateKey);
            System.out.println(&quot;Private Key in PEM format:\n&quot; + privateKeyPem);

            // Save the private key in binary format to a file (optional)
            String privateKeyFilePath = &quot;private_key.bin&quot;;
            saveKeyToBinaryFile(privateKey, privateKeyFilePath);

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    // Convert private key to PEM format
    private static String convertToPem(PrivateKey privateKey) {
        String base64Key = Base64.getEncoder().encodeToString(privateKey.getEncoded());
        return &quot;-----BEGIN PRIVATE KEY-----\n&quot; +
                base64Key +
                &quot;\n-----END PRIVATE KEY-----&quot;;
    }

    // Save the private key in binary format
    private static void saveKeyToBinaryFile(PrivateKey privateKey, String filePath) {
        try (FileOutputStream fos = new FileOutputStream(filePath)) {
            fos.write(privateKey.getEncoded());
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}


</code></pre>
<p>If you want to try it yourself, just run this Java POC: <a href=""https://github.com/ChetanTailor/JavaPrivateKeyPOC"" rel=""nofollow noreferrer"">https://github.com/ChetanTailor/JavaPrivateKeyPOC</a></p>
",
tags:"<javascript><java><cryptography><bouncycastle><webcrypto>",
score:9,
creationDate:2024-08-13 07:24:12,
creationDate:2024-09-09 10:13:29,
score:5,
acceptedResponderReputation:10173,
acceptedResponder:252218,
QuestionerReputation:93,
Questioner:15540286}
{title:"why js dom api 'querySelector' select itself",
id:"https://stackoverflow.com/questions/77174249",
body:"<p>I'm confused why <code>$1</code> is <code>firstBB</code>, The <code>querySelector('.aa .bb')</code> call should execute under <code>#root</code> element.</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const $1 = document.querySelector('#root').querySelector('.aa .bb');
const $2 = document.querySelector('#root').querySelector('.aa').querySelector('.bb');

document.querySelector('#result').innerHTML = `$1 is ${$1.id}; $2 is ${$2.id}`</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;div class=""aa"" id=""root""&gt;
  &lt;div class=""bb"" id=""firstBB""&gt;xxx&lt;/div&gt;
  &lt;div class=""aa""&gt;
    &lt;div class=""bb"" id=""secondBB""&gt;xxx&lt;/div&gt;
  &lt;/div&gt;
&lt;/div&gt;
&lt;div&gt;Result: &lt;span id=""result""&gt;&lt;/span&gt;&lt;/div&gt;</code></pre>
</div>
</div>
</p>
<p>Chrome version: 116.0.5845.188</p>
<p>Is this the correct behavior of <code>querySelector</code>?</p>
",
tags:"<javascript><selectors-api><queryselector>",
score:6,
creationDate:2023-09-25 16:13:52,
creationDate:2023-09-25 16:28:15,
score:5,
acceptedResponderReputation:195952,
acceptedResponder:128165,
QuestionerReputation:233,
Questioner:4772730}
{title:"Correct setup for debugging NextJs app inside Neovim with dap",
id:"https://stackoverflow.com/questions/78455585",
body:"<p>I've been trying to set up neovim and dap for Nexjs app for more then 5 month. So I'm here.</p>
<p>This is the <em>.vscode/launch.json</em> in project directory.</p>
<pre><code>  &quot;version&quot;: &quot;0.2.0&quot;,
  &quot;configurations&quot;: [
    {
      &quot;name&quot;: &quot;Launch file&quot;,
      &quot;type&quot;: &quot;go&quot;,
      &quot;request&quot;: &quot;launch&quot;,
      &quot;env&quot;: {
        &quot;USER_NAME&quot;: &quot;REPLACE_FROM_SECRETS_MANAGER&quot;,
        &quot;USER_PASS&quot;: &quot;REPLACE_FROM_SECRETS_MANAGER&quot;,
        &quot;BASE_URL&quot;: &quot;https://dev.liminal.security&quot;
      },
      &quot;mode&quot;: &quot;debug&quot;,
      &quot;program&quot;: &quot;${file}&quot;
    },
    {
      &quot;name&quot;: &quot;Next.js: debug server-side&quot;,
      &quot;type&quot;: &quot;node-terminal&quot;,
      &quot;request&quot;: &quot;launch&quot;,
      &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,
      &quot;command&quot;: &quot;rm -rf .next/ &amp;&amp; pnpm next dev -p 3000&quot;
    },
    {
      &quot;name&quot;: &quot;Next.js: debug client-side&quot;,
      &quot;type&quot;: &quot;pwa-chrome&quot;,
      &quot;request&quot;: &quot;launch&quot;,
      &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,
      &quot;url&quot;: &quot;http://localhost:3000&quot;
    },
    {
      &quot;name&quot;: &quot;Next.js: debug full stack&quot;,
      &quot;type&quot;: &quot;node-terminal&quot;,
      &quot;request&quot;: &quot;launch&quot;,
      &quot;command&quot;: &quot;pnpm dev&quot;,
      &quot;cwd&quot;: &quot;${workspaceFolder}&quot;,
      &quot;console&quot;: &quot;integratedTerminal&quot;,
      &quot;serverReadyAction&quot;: {
        &quot;pattern&quot;: &quot;started server on .+, url: (https?://.+)&quot;,
        &quot;uriFormat&quot;: &quot;%s&quot;,
        &quot;action&quot;: &quot;debugWithChrome&quot;
      }
    }
  ]
}
</code></pre>
<p>I'm using Neovim 9+ version, this is my neovim <a href=""https://github.com/Aaron-Vasilev/vim-config"" rel=""noreferrer"">config</a></p>
<p>I succeed in debugging a single js file. So the <a href=""https://github.com/microsoft/vscode-js-debug"" rel=""noreferrer"">vscode-js-debug</a> is installed properly.</p>
<p>I would really appreciate any help...</p>
<p>I tried all adapters, another debugger, looking through logs, launch an debugger from terminal, but didn't succeed. I use neovim as an idea and want to have the same functionality for debugging as VSCode</p>
",
tags:"<next.js><neovim><javascript-debugger><neovim-plugin>",
score:6,
creationDate:2024-05-09 15:47:19,
creationDate:2024-05-23 20:31:15,
score:5,
acceptedResponderReputation:68,
acceptedResponder:13751488,
QuestionerReputation:110,
Questioner:15169801}
{title:"How to create a scientific HTML slider with input type=""range"",
id:"https://stackoverflow.com/questions/75802357",
body:"<p>I need to create a scientific input slider. More precisely:</p>
<ul>
<li>n ticks, example: no matter the range (0 - 200, 1 - 11, etc.), I want 11 ticks covering the whole range</li>
<li>the number value label below each tick</li>
<li>no &quot;glue&quot; attraction effect when the slider cursor is near a tick</li>
</ul>
<p>Mockup:</p>
<p><a href=""https://i.sstatic.net/d8HUq.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/d8HUq.png"" alt=""enter image description here"" /></a></p>
<p>Note:</p>
<ul>
<li><p>this is not a duplicate of <a href=""https://stackoverflow.com/questions/26612700/ticks-for-type-range-html-input"">Ticks for type=&quot;range&quot; HTML input</a> because of these 3 points.</p>
</li>
<li><p>browser support: at least Chrome</p>
</li>
</ul>
<p>The following code produces a HTML slider with ticks, and it works. However, it fails both the 2nd and 3rd criteria above.</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-css lang-css prettyprint-override""><code>input { width: 400px; }</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;input type=range min=0 max=200 value=0 step=1 list=tickmarks&gt;
&lt;datalist id=tickmarks&gt;
    &lt;option&gt;0&lt;/option&gt;
    &lt;option&gt;20&lt;/option&gt;
    &lt;option&gt;40&lt;/option&gt;
    &lt;option&gt;60&lt;/option&gt;
    &lt;option&gt;80&lt;/option&gt;
    &lt;option&gt;100&lt;/option&gt;
    &lt;option&gt;120&lt;/option&gt;
    &lt;option&gt;140&lt;/option&gt;
    &lt;option&gt;160&lt;/option&gt;
    &lt;option&gt;180&lt;/option&gt;
    &lt;option&gt;200&lt;/option&gt;
 &lt;/datalist&gt;</code></pre>
</div>
</div>
</p>
<p>Is there an attribute for an HTML <code>&lt;input type=&quot;range&quot;&gt;</code> to enable these &quot;number-labelled&quot; ticks?</p>
<p>Is an implementation that satisfies all three criteria possible?</p>
",
tags:"<javascript><html><css><html-input>",
score:12,
creationDate:2023-03-21 14:15:12,
creationDate:2023-03-25 07:36:14,
score:5,
acceptedResponderReputation:4761,
acceptedResponder:1427563,
QuestionerReputation:46351,
Questioner:1422096}
{title:"how get response in axios when api is steam like SSE (Server-Send Events)",
id:"https://stackoverflow.com/questions/76334679",
body:"<p>Environment: web browser, javascript.</p>
<p>I want to use post method to call sse api (<strong>Server-Send Events</strong>) like</p>
<p><a href=""https://platform.openai.com/docs/api-reference/completions/create"" rel=""noreferrer"">https://platform.openai.com/docs/api-reference/completions/create</a></p>
<pre><code> curl https://api.openai.com/v1/completions \
      -H &quot;Content-Type: application/json&quot; \
      -H &quot;Authorization: Bearer $OPENAI_API_KEY&quot; \
      -d '{
        &quot;model&quot;: &quot;gpt-3.5-turbo&quot;,
        &quot;prompt&quot;: &quot;Say this is a test&quot;,
        &quot;max_tokens&quot;: 7,
        &quot;steam&quot;: true,
        &quot;temperature&quot;: 0
      }'
</code></pre>
<p>I did some research online, and found I couldn't use EventSource , because it doesn't support send post data.</p>
<p>So I write the code like this in the browser try to read text in steam.</p>
<p>I don't know if that's a good idea:</p>
<pre><code>    const response = await axios({
                    method: 'post',
                    url: '/my-service/chat',
                    data: data,
                    headers: {
                        'SESSION_ID': 'Header-Value',
                        &quot;Content-Type&quot;: &quot;application/json&quot;,
                        &quot;Accept&quot;: &quot;text/event-stream&quot;,
                    }
                    , responseType: 'steam',
                });
//TODO: read steam and convert to text
</code></pre>
<p>I appreciate any help you could provide. Thank you in advance!</p>
",
tags:"<javascript><node.js><reactjs><vue.js><axios>",
score:6,
creationDate:2023-05-25 17:00:25,
creationDate:2023-08-22 02:56:01,
score:5,
acceptedResponderReputation:443,
acceptedResponder:6803950,
QuestionerReputation:443,
Questioner:6803950}
{title:"Nx no longer supports the v2 format of angular.json",
id:"https://stackoverflow.com/questions/76993932",
body:"<p>I am trying to upgrade angular (v15) and nx (v16) in my project, but the issue that I am running into is when I start my project NX throws an error:</p>
<pre><code> &gt;  NX   angular.json format is incorrect

   Nx no longer supports the v2 format of angular.json.
   Run &quot;nx g @nx/workspace:fix-configuration&quot; to split angular.json into individual project.json files. (Recommended)
   If you want to preserve angular.json, run &quot;nx g @nx/workspace:fix-configuration --reformat&quot;
</code></pre>
<p>Which is confusing to me, as my project is already split into <code>project.json</code> files. I did try to run the two suggested commands, it succeeds, but no files get updated...</p>
<p>Here is my <code>angular.json</code> file which looks like it is the correct format:</p>
<pre><code>{
  &quot;$schema&quot;: &quot;./node_modules/nx/schemas/workspace-schema.json&quot;,
  &quot;version&quot;: 2,
  &quot;projects&quot;: {
    &quot;xxx&quot;: &quot;libs/xxx&quot;,
    &quot;xxx-e2e&quot;: &quot;apps/xxx-e2e&quot;,
    &quot;yyy&quot;: &quot;libs/yyy&quot;,
    &quot;yyy-e2e&quot;: &quot;apps/yyy-e2e&quot;
  }
}
</code></pre>
<p>Then, I have the <code>project.json</code> where each one looks like this (where <code>xxx</code> is the project and some contain <code>-e2e</code> and others don't depending on if the project is an e2e application or a library):</p>
<pre><code>{
  &quot;$schema&quot;: &quot;../../node_modules/nx/schemas/project-schema.json&quot;,
  &quot;name&quot;: &quot;xxx-e2e&quot;,
  // Either the e2e schema
  // or the library schema
}
</code></pre>
",
tags:"<javascript><angular><nrwl-nx><nrwl>",
score:6,
creationDate:2023-08-28 14:55:53,
creationDate:2023-11-03 15:11:01,
score:5,
acceptedResponderReputation:36291,
acceptedResponder:1778465,
QuestionerReputation:36291,
Questioner:1778465}
{title:403 Forbbiden: Pre-authenticated entry point called. Rejecting access,
id:"https://stackoverflow.com/questions/76694592",
body:"<p>My controller:</p>
<pre><code>@RestController
@RequestMapping(&quot;/api/vi/client&quot;)
@RequiredArgsConstructor
public class FHubClientController {

    private final FHubService fHubService;
    @GetMapping(&quot;/findAllUsersByRole&quot;)
    public List&lt;User&gt; findAllUsersByRole(@RequestParam(&quot;role&quot;) String role) {
        System.out.println(&quot;sdfasgf&quot;);

        return fHubService.findAllUsersByRole(role.toUpperCase());
    }
}
</code></pre>
<p>My SecurityConfiguration:</p>
<pre><code>package com.org.fhub.config;

import lombok.RequiredArgsConstructor;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.authentication.AuthenticationProvider;
import org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;
import org.springframework.security.config.http.SessionCreationPolicy;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.web.SecurityFilterChain;
import org.springframework.security.web.authentication.UsernamePasswordAuthenticationFilter;
import org.springframework.security.web.authentication.logout.LogoutHandler;

import static com.org.fhub.domain.user.Permission.*;
import static com.org.fhub.domain.user.UserRoleEnum.ADMIN;
import static com.org.fhub.domain.user.UserRoleEnum.STAFF;
import static org.springframework.http.HttpMethod.*;

@Configuration
@EnableWebSecurity
@RequiredArgsConstructor
@EnableMethodSecurity
public class SecurityConfiguration {

    private final JwtAuthenticationFilter jwtAuthFilter;
    private final AuthenticationProvider authenticationProvider;
    private final LogoutHandler logoutHandler;

    @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
        http
                .csrf(AbstractHttpConfigurer::disable)
                .authorizeHttpRequests((authorize) -&gt; {
                    authorize.requestMatchers(
                            &quot;/api/v1/auth/**&quot;,
                            &quot;/v2/api-docs&quot;,
                            &quot;/v3/api-docs&quot;,
                            &quot;/v3/api-docs/**&quot;,
                            &quot;/swagger-resources&quot;,
                            &quot;/swagger-resources/**&quot;,
                            &quot;/configuration/ui&quot;,
                            &quot;/configuration/security&quot;,
                            &quot;/swagger-ui/**&quot;,
                            &quot;/webjars/**&quot;,
                            &quot;/swagger-ui.html&quot;
                    ).permitAll();
                    authorize.requestMatchers(&quot;/api/v1/staff/**&quot;).hasAnyRole(ADMIN.name(), STAFF.name());
                    authorize.requestMatchers(GET, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_READ.name(), STAFF_READ.name());
                    authorize.requestMatchers(POST, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_CREATE.name(), STAFF_CREATE.name());
                    authorize.requestMatchers(PUT, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_UPDATE.name(), STAFF_UPDATE.name());
                    authorize.requestMatchers(DELETE, &quot;/api/v1/staff/**&quot;).hasAnyAuthority(ADMIN_DELETE.name(), STAFF_DELETE.name());
                    authorize.anyRequest().authenticated();
                })

                /* .requestMatchers(&quot;/api/v1/admin/**&quot;).hasRole(ADMIN.name())

                 .requestMatchers(GET, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_READ.name())
                 .requestMatchers(POST, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_CREATE.name())
                 .requestMatchers(PUT, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_UPDATE.name())
                 .requestMatchers(DELETE, &quot;/api/v1/admin/**&quot;).hasAuthority(ADMIN_DELETE.name())*/

                .sessionManagement((session) -&gt; session
                        .sessionCreationPolicy(SessionCreationPolicy.STATELESS)
                )
                .authenticationProvider(authenticationProvider)
                .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)
                .logout((logout) -&gt; logout.logoutUrl(&quot;/api/v1/auth/logout&quot;).addLogoutHandler(logoutHandler).logoutSuccessHandler((request, response, authentication) -&gt; SecurityContextHolder.clearContext()))
        ;

        return http.build();
    }
}

</code></pre>
<p>My Filter:</p>
<pre><code>package com.org.fhub.config;

import com.org.fhub.domain.token.TokenRepository;
import jakarta.servlet.FilterChain;
import jakarta.servlet.ServletException;
import jakarta.servlet.http.HttpServletRequest;
import jakarta.servlet.http.HttpServletResponse;
import lombok.RequiredArgsConstructor;
import org.springframework.lang.NonNull;
import org.springframework.security.authentication.UsernamePasswordAuthenticationToken;
import org.springframework.security.core.context.SecurityContextHolder;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.web.authentication.WebAuthenticationDetailsSource;
import org.springframework.stereotype.Component;
import org.springframework.web.filter.OncePerRequestFilter;

import java.io.IOException;

@RequiredArgsConstructor
@Component
public class JwtAuthenticationFilter extends OncePerRequestFilter {

    private final JwtService jwtService;
    private final UserDetailsService userDetailsService;
    private final TokenRepository tokenRepository;

    @Override
    protected void doFilterInternal(
            @NonNull HttpServletRequest request,
            @NonNull HttpServletResponse response,
            @NonNull FilterChain filterChain
    ) throws ServletException, IOException {
        if (request.getServletPath().contains(&quot;/api/v1/auth&quot;)) {
            filterChain.doFilter(request, response);
            return;
        }
        final String authHeader = request.getHeader(&quot;Authorization&quot;);
        final String jwt;
        final String username;
        if (authHeader == null ||!authHeader.startsWith(&quot;Bearer &quot;)) {
            filterChain.doFilter(request, response);
            return;
        }
        jwt = authHeader.substring(7);
        username = jwtService.extractUsername(jwt);
        if (username != null &amp;&amp; SecurityContextHolder.getContext().getAuthentication() == null) {
            UserDetails userDetails = this.userDetailsService.loadUserByUsername(username);
            var isTokenValid = tokenRepository.findByToken(jwt)
                    .map(t -&gt; !t.isExpired() &amp;&amp; !t.isRevoked())
                    .orElse(false);
            if (jwtService.isTokenValid(jwt, userDetails) &amp;&amp; isTokenValid) {
                UsernamePasswordAuthenticationToken authToken = new UsernamePasswordAuthenticationToken(
                        userDetails,
                        null,
                        userDetails.getAuthorities()
                );
                authToken.setDetails(
                        new WebAuthenticationDetailsSource().buildDetails(request)
                );
                SecurityContextHolder.getContext().setAuthentication(authToken);
            }
        }
        filterChain.doFilter(request, response);
    }
}
</code></pre>
<p>My AplicationConfig:</p>
<pre><code>package com.org.fhub.config;

import com.org.fhub.domain.user.UserRepository;
import lombok.RequiredArgsConstructor;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.authentication.AuthenticationManager;
import org.springframework.security.authentication.AuthenticationProvider;
import org.springframework.security.authentication.dao.DaoAuthenticationProvider;
import org.springframework.security.config.annotation.authentication.configuration.AuthenticationConfiguration;
import org.springframework.security.core.userdetails.UserDetailsService;
import org.springframework.security.core.userdetails.UsernameNotFoundException;
import org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;
import org.springframework.security.crypto.password.PasswordEncoder;

@Configuration
@RequiredArgsConstructor
public class ApplicationConfig {

    private final UserRepository repository;

    @Bean
    public UserDetailsService userDetailsService() {
        return username -&gt; repository.findUserByUserName(username)
                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;User not found&quot;));
    }

    @Bean
    public AuthenticationProvider authenticationProvider() {
        DaoAuthenticationProvider authProvider = new DaoAuthenticationProvider();
        authProvider.setUserDetailsService(userDetailsService());
        authProvider.setPasswordEncoder(passwordEncoder());
        return authProvider;
    }

    @Bean
    public AuthenticationManager authenticationManager(AuthenticationConfiguration config) throws Exception {
        return config.getAuthenticationManager();
    }

    @Bean
    public PasswordEncoder passwordEncoder() {
        return new BCryptPasswordEncoder();
    }

}
</code></pre>
<p>My jwtService:</p>
<pre><code>package com.org.fhub.config;

import io.jsonwebtoken.Claims;
import io.jsonwebtoken.Jwts;
import io.jsonwebtoken.SignatureAlgorithm;
import io.jsonwebtoken.io.Decoders;
import io.jsonwebtoken.security.Keys;
import java.security.Key;
import java.util.Date;
import java.util.HashMap;
import java.util.Map;
import java.util.function.Function;

import org.springframework.beans.factory.annotation.Value;
import org.springframework.security.core.userdetails.UserDetails;
import org.springframework.stereotype.Service;

@Service
public class JwtService {

    @Value(&quot;${application.security.jwt.secret-key}&quot;)
    private String secretKey;
    @Value(&quot;${application.security.jwt.expiration}&quot;)
    private long jwtExpiration;
    @Value(&quot;${application.security.jwt.refresh-token.expiration}&quot;)
    private long refreshExpiration;

    public String extractUsername(String token) {
        return extractClaim(token, Claims::getSubject);
    }

    public &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {
        final Claims claims = extractAllClaims(token);
        return claimsResolver.apply(claims);
    }

    public String generateToken(UserDetails userDetails) {
        return generateToken(new HashMap&lt;&gt;(), userDetails);
    }

    public String generateToken(
            Map&lt;String, Object&gt; extraClaims,
            UserDetails userDetails
    ) {
        return buildToken(extraClaims, userDetails, jwtExpiration);
    }

    public String generateRefreshToken(
            UserDetails userDetails
    ) {
        return buildToken(new HashMap&lt;&gt;(), userDetails, refreshExpiration);
    }

    private String buildToken(
            Map&lt;String, Object&gt; extraClaims,
            UserDetails userDetails,
            long expiration
    ) {
        return Jwts
                .builder()
                .setClaims(extraClaims)
                .setSubject(userDetails.getUsername())
                .setIssuedAt(new Date(System.currentTimeMillis()))
                .setExpiration(new Date(System.currentTimeMillis() + expiration))
                .signWith(getSignInKey(), SignatureAlgorithm.HS256)
                .compact();
    }

    public boolean isTokenValid(String token, UserDetails userDetails) {
        final String username = extractUsername(token);
        return (username.equals(userDetails.getUsername())) &amp;&amp; !isTokenExpired(token);
    }

    private boolean isTokenExpired(String token) {
        return extractExpiration(token).before(new Date());
    }

    private Date extractExpiration(String token) {
        return extractClaim(token, Claims::getExpiration);
    }

    private Claims extractAllClaims(String token) {
        return Jwts
                .parserBuilder()
                .setSigningKey(getSignInKey())
                .build()
                .parseClaimsJws(token)
                .getBody();
    }

    private Key getSignInKey() {
        byte[] keyBytes = Decoders.BASE64.decode(secretKey);
        return Keys.hmacShaKeyFor(keyBytes);
    }
}

</code></pre>
<p>The token is valid and it says <strong>authenticated=true</strong></p>
<p>the log produced:</p>
<pre><code>2023-07-15T16:58:39.175+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@359e27d2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@277bc3a5, org.springframework.security.web.context.SecurityContextHolderFilter@4ffa7041, org.springframework.security.web.header.HeaderWriterFilter@71fb8301, org.springframework.security.web.authentication.logout.LogoutFilter@749d7c01, com.org.fhub.config.JwtAuthenticationFilter@7cc2c551, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@56b05bd7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e4afd10, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@214fba74, org.springframework.security.web.session.SessionManagementFilter@485c84d7, org.springframework.security.web.access.ExceptionTranslationFilter@5c4714ef, org.springframework.security.web.access.intercept.AuthorizationFilter@7e1d8d41]] (1/1)
2023-07-15T16:58:39.177+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /api/v1/client/findAllUsersByRole?role=PLUS
2023-07-15T16:58:39.177+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)
2023-07-15T16:58:39.178+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)
2023-07-15T16:58:39.181+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)
2023-07-15T16:58:39.182+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)
2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)
2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/api/v1/auth/logout', GET], Ant [pattern='/api/v1/auth/logout', POST], Ant [pattern='/api/v1/auth/logout', PUT], Ant [pattern='/api/v1/auth/logout', DELETE]]
2023-07-15T16:58:39.183+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking JwtAuthenticationFilter (6/12)
2023-07-15T16:58:43.728+01:00 TRACE 21592 --- [0.1-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2023-07-15T16:58:45.906+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)
2023-07-15T16:58:45.906+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)
2023-07-15T16:58:45.908+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)
2023-07-15T16:58:45.908+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)
2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Did not set SecurityContextHolder since already authenticated UsernamePasswordAuthenticationToken [Principal=User(id=64b2afc9b0ab605e709f61b6, username=kokoro, name=Brito, password=$2a$10$2PN0M.nH.tUa6sqXX/RaAOIS8kcH4FZUGEO9AzD6Dat/98gW7BF4S, notes=notas, role=PLUS, tokens=null), Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_PLUS]]
2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] s.CompositeSessionAuthenticationStrategy : Preparing session with ChangeSessionIdAuthenticationStrategy (1/1)
2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)
2023-07-15T16:58:45.909+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)
2023-07-15T16:58:45.910+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1e14ac53]
2023-07-15T16:58:45.923+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ org.springframework.security.web.header.HeaderWriterFilter$HeaderWriterRequest@1e14ac53] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@2918d923
2023-07-15T16:58:45.924+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Secured GET /api/v1/client/findAllUsersByRole?role=PLUS
2023-07-15T16:58:45.937+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.header.writers.HstsHeaderWriter  : Not injecting HSTS header since it did not match request to [Is Secure]
2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Trying to match request against DefaultSecurityFilterChain [RequestMatcher=any request, Filters=[org.springframework.security.web.session.DisableEncodeUrlFilter@359e27d2, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@277bc3a5, org.springframework.security.web.context.SecurityContextHolderFilter@4ffa7041, org.springframework.security.web.header.HeaderWriterFilter@71fb8301, org.springframework.security.web.authentication.logout.LogoutFilter@749d7c01, com.org.fhub.config.JwtAuthenticationFilter@7cc2c551, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@56b05bd7, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@3e4afd10, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@214fba74, org.springframework.security.web.session.SessionManagementFilter@485c84d7, org.springframework.security.web.access.ExceptionTranslationFilter@5c4714ef, org.springframework.security.web.access.intercept.AuthorizationFilter@7e1d8d41]] (1/1)
2023-07-15T16:58:45.940+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Securing GET /error?role=PLUS
2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking DisableEncodeUrlFilter (1/12)
2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking WebAsyncManagerIntegrationFilter (2/12)
2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderFilter (3/12)
2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking HeaderWriterFilter (4/12)
2023-07-15T16:58:45.940+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking LogoutFilter (5/12)
2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.logout.LogoutFilter            : Did not match request to Or [Ant [pattern='/api/v1/auth/logout', GET], Ant [pattern='/api/v1/auth/logout', POST], Ant [pattern='/api/v1/auth/logout', PUT], Ant [pattern='/api/v1/auth/logout', DELETE]]
2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking JwtAuthenticationFilter (6/12)
2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking RequestCacheAwareFilter (7/12)
2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SecurityContextHolderAwareRequestFilter (8/12)
2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AnonymousAuthenticationFilter (9/12)
2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking SessionManagementFilter (10/12)
2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking ExceptionTranslationFilter (11/12)
2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.security.web.FilterChainProxy        : Invoking AuthorizationFilter (12/12)
2023-07-15T16:58:45.941+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Authorizing SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.core.ApplicationHttpRequest@4a6fe6ad]]
2023-07-15T16:58:45.945+01:00 TRACE 21592 --- [0.1-8080-exec-1] estMatcherDelegatingAuthorizationManager : Checking authorization on SecurityContextHolderAwareRequestWrapper[ FirewalledRequest[ org.apache.catalina.core.ApplicationHttpRequest@4a6fe6ad]] using org.springframework.security.authorization.AuthenticatedAuthorizationManager@2918d923
2023-07-15T16:58:45.945+01:00 TRACE 21592 --- [0.1-8080-exec-1] .s.s.w.c.SupplierDeferredSecurityContext : Created SecurityContextImpl [Null authentication]
2023-07-15T16:58:45.946+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]]
2023-07-15T16:58:45.946+01:00 TRACE 21592 --- [0.1-8080-exec-1] o.s.s.w.a.ExceptionTranslationFilter     : Sending AnonymousAuthenticationToken [Principal=anonymousUser, Credentials=[PROTECTED], Authenticated=true, Details=WebAuthenticationDetails [RemoteIpAddress=127.0.0.1, SessionId=null], Granted Authorities=[ROLE_ANONYMOUS]] to authentication entry point since access is denied

org.springframework.security.access.AccessDeniedException: Access Denied
    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:98) ~[spring-security-web-6.1.1.jar:6.1.1]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.1.1.jar:6.1.1]
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.1.1.jar:6.1.1]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.1.1.jar:6.1.1]

2023-07-15T16:58:45.951+01:00 DEBUG 21592 --- [0.1-8080-exec-1] o.s.s.w.a.Http403ForbiddenEntryPoint     : Pre-authenticated entry point called. Rejecting access

</code></pre>
<p>My build.gradle:</p>
<pre><code>    implementation 'org.springframework.boot:spring-boot-starter-data-mongodb'
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-security:3.1.1'
</code></pre>
<p>Im sending the Bearer correctly and validated it with the DB.
All other endpoints/controllers with authorities work fine, register, delete etc... this one doesnt even go in the controller.</p>
<p>I expect this endpoint to be allowed to execute.</p>
",
tags:"<java><spring-boot><authentication><spring-security><jwt>",
score:8,
creationDate:2023-07-15 15:54:02,
creationDate:2023-08-09 22:47:13,
score:5,
acceptedResponderReputation:131,
acceptedResponder:22232487,
QuestionerReputation:131,
Questioner:22232487}
{title:"Avoiding Javadoc duplication in Java records",
id:"https://stackoverflow.com/questions/76352287",
body:"<p>The new Java <code>record</code> is supposed to cut down on boilerplate. I can quickly create an immutable <code>FooBar</code> class with <code>foo</code> and <code>bar</code> components without worrying about local variables, constructor value copying, and getters, like this:</p>
<pre class=""lang-java prettyprint-override""><code>/**
 * Foo bar record.
 */
public record FooBar(String foo, String bar) {
}
</code></pre>
<p>Of course I want to document what the record components are, so they will show up in the generated Javadocs! So I add this:</p>
<pre class=""lang-java prettyprint-override""><code>/**
 * Foo bar record.
 * @param foo That foo thing; cannot be &lt;code&gt;null&lt;/code&gt;.
 * @param bar That bar thing; cannot be &lt;code&gt;null&lt;/code&gt;.
 */
public record FooBar(String foo, String bar) {
}
</code></pre>
<p>That works nicely—the record components show up in the documentation.</p>
<p>Except that for almost 100% of records, as a good developer of course I need to validate the <code>foo</code> and <code>bar</code> to ensure they are non-null, right? (Right.) Records allow this easily:</p>
<pre class=""lang-java prettyprint-override""><code>/**
 * Foo bar record.
 * @param foo That foo thing; cannot be &lt;code&gt;null&lt;/code&gt;.
 * @param bar That bar thing; cannot be &lt;code&gt;null&lt;/code&gt;.
 */
public record FooBar(String foo, String bar) {

  /** Constructor for argument validation and normalization. */
  public FooBar {
    Objects.requireNonNull(foo);
    Objects.requireNonNull(bar);
  }

}
</code></pre>
<p>And now, since I am using <code>-Xdoclint:all</code>, I get a warning because the construct doesn't document its (implicit) parameters:</p>
<pre><code>[WARNING] Javadoc Warnings
[WARNING] …/FooBar.java:xx: warning: no @param for foo
[WARNING] public FooBar {
[WARNING] ^
[WARNING] …/FooBar.java:xx: warning: no @param for bar
[WARNING] public FooBar {
[WARNING] ^
[WARNING] 2 warnings
</code></pre>
<p>If you say &quot;just turn off <code>-Xdoclint:all</code>&quot;, you're missing the point. The warning is valid, because indeed no documentation shows up for the constructor in the generated Javadocs! If there is a constructor, there should be documentation for the parameters. So I'm forced to do the old copy and paste:</p>
<pre class=""lang-java prettyprint-override""><code>/**
 * Foo bar record.
 * @param foo That foo thing; cannot be &lt;code&gt;null&lt;/code&gt;.
 * @param bar That bar thing; cannot be &lt;code&gt;null&lt;/code&gt;.
 */
public record FooBar(String foo, String bar) {

  /**
   * Constructor for argument validation and normalization.
   * @param foo That foo thing; cannot be &lt;code&gt;null&lt;/code&gt;.
   * @param bar That bar thing; cannot be &lt;code&gt;null&lt;/code&gt;.
   */
  public FooBar {
    Objects.requireNonNull(foo);
    Objects.requireNonNull(bar);
  }

}
</code></pre>
<p>Wait, what happened to cutting down on boilerplate? The boilerplate seems almost as bad as before, if not worse, because now it's complete duplication. Sure, maybe the semantics are slightly different, so maybe I could tweak the wording. Maybe one should say &quot;can never be <code>null</code>&quot; and the other should say &quot;throws an exception if <code>null</code>&quot;, but really, this is not ideal.</p>
<p>Javadoc isn't this unintelligent when I'm overriding methods. If I leave off the Javadoc for a method with an <code>@Override</code> annotation, then Javadoc copies over the documentation from the overridden class or interface. And if I decide I want to tweak the documentation, I even have a <code>{@inheritDoc}</code> Javadoc tag that allows me to copy the documentation from the method I'm overriding.</p>
<p>What's the solution here? Is there a way I can tell Javadoc to use the main record parameter documentation for the constructor or vice versa? Is there some Javadoc tag I can use to make it happen automatically? Because the situation as-is is very far from ideal.</p>
",
tags:"<java><javadoc><java-record>",
score:8,
creationDate:2023-05-28 15:43:19,
creationDate:2023-05-28 17:40:36,
score:5,
acceptedResponderReputation:21316,
acceptedResponder:421049,
QuestionerReputation:21316,
Questioner:421049}
{title:"Next-Auth gives error on sign in: ""API handler should not return a value, received object."",
id:"https://stackoverflow.com/questions/76547978",
body:"<p>I'm using <code>next-auth@4.22.1</code> with <code>next@13.4.7</code> and Typescript. Whenever I use the <code>signIn()</code> function, it goes through sign in as normal, but then print the following line to the server's console: API handler should not return a value, received object. I am not signed in after doing this.</p>
<p>I've checked my <code>[...nextauth].ts</code> file and can't find any errors. The code is below:</p>
<pre><code>import clientPromise from &quot;@/lib/mongodbadapter&quot;;
import { MongoDBAdapter } from &quot;@next-auth/mongodb-adapter&quot;;
import NextAuth, { AuthOptions } from &quot;next-auth&quot;
import DiscordProvider from &quot;next-auth/providers/discord&quot;;
import GitHubProvider from &quot;next-auth/providers/github&quot;;

export const authOptions: AuthOptions = {
    adapter: MongoDBAdapter(clientPromise),
    providers: [
        DiscordProvider({
            clientId: process.env.DISCORD_CLIENT_ID!,
            clientSecret: process.env.DISCORD_CLIENT_SECRET!
        }),
        GitHubProvider({
            clientId: process.env.GITHUB_CLIENT_ID!,
            clientSecret: process.env.GITHUB_CLIENT_SECRET!
        })
    ]
}

export default NextAuth(authOptions)
</code></pre>
<p>I've wrapped all HTML elements in a SessionProvider, like so:</p>
<pre><code>export default function App({ Component, pageProps: { session, ...pageProps } }: AppProps) {
  return &lt;SessionProvider session={session}&gt;
    &lt;Navbar /&gt;
    &lt;Component {...pageProps} /&gt;
  &lt;/SessionProvider&gt;
}
</code></pre>
<p>In my index.ts, I log session, like so:</p>
<pre><code>export async function getServerSideProps(ctx: any) {
  return {
    props: {
        session: await getServerSession(ctx.req, ctx.res, authOptions)
    }
  }
}
</code></pre>
<p>The server log is this:</p>
<pre><code>undefined
- wait compiling /api/auth/[...nextauth] (client and server)...
- event compiled successfully in 265 ms (63 modules)
API handler should not return a value, received object.
API handler should not return a value, received object.
undefined
</code></pre>
<p>The undefined come from where I log the session. The compiling is from me returning to the index.ts page after signing in.</p>
<p>Even though session is undefined, my database (I'm using <code>@next-auth/mongodb-adapter@1.1.3</code>) has the relevant user and account documents.</p>
<p>What do I need to change to avoid this error and make it actually sign me in, or is it an issue with Next-Auth that's out of my control?</p>
<p>Edit: I confirmed my IP is allowed in my MongoDB Atlas instance.</p>
",
tags:"<javascript><typescript><next.js><next-auth>",
score:7,
creationDate:2023-06-24 20:59:44,
creationDate:2023-08-04 15:12:40,
score:5,
acceptedResponderReputation:66,
acceptedResponder:20548233,
QuestionerReputation:662,
Questioner:22099600}
{title:"Vite reloading full page on every change",
id:"https://stackoverflow.com/questions/76881057",
body:"<p>On the newer version of vite, it was causing full page reload even on all the changes, wheather i change a text or remove a heading tag. Adding <strong>import.meta.hot.accept()</strong> in my index.js file fixed the issue but it caused the build to fail <strong>causing the error:</strong></p>
<pre><code>index-f28df0af.js:1195  Uncaught TypeError: Cannot read properties of undefined (reading 'accept')
    at index-f28df0af.js:1195:82439
    at index-f28df0af.js:1:23
    at index-f28df0af.js:1195:82709
    
</code></pre>
<p>On every change the vite compiler says <strong>Full page reload</strong>, instead of doing a <strong>HMR update</strong>. On previous version of vite 3.0.*, i was not getting full page reload and HMR update was working fine, after updating to the latest version I started encountering this full page reload, making the development experience slow and worse.</p>
<blockquote>
<p>package.json file</p>
</blockquote>
<pre><code>    {
    &quot;name&quot;: &quot;Lala-Intl&quot;,
    &quot;homepage&quot;: &quot;http://lalaintltravel.pk/&quot;,
    &quot;version&quot;: &quot;0.1.0&quot;,
    &quot;private&quot;: true,
    &quot;dependencies&quot;: {
        &quot;@fortawesome/fontawesome-svg-core&quot;: &quot;^6.2.0&quot;,
        &quot;@fortawesome/free-regular-svg-icons&quot;: &quot;^6.2.0&quot;,
        &quot;@fortawesome/free-solid-svg-icons&quot;: &quot;^6.2.0&quot;,
        &quot;@fortawesome/react-fontawesome&quot;: &quot;^0.2.0&quot;,
        &quot;@mui/icons-material&quot;: &quot;^5.14.3&quot;,
        &quot;@mui/x-date-pickers-pro&quot;: &quot;^6.6.0&quot;,
        &quot;@testing-library/jest-dom&quot;: &quot;^5.16.5&quot;,
        &quot;@testing-library/react&quot;: &quot;^13.4.0&quot;,
        &quot;@testing-library/user-event&quot;: &quot;^13.5.0&quot;,
        &quot;@vitejs/plugin-react&quot;: &quot;^4.0.4&quot;,
        &quot;antd&quot;: &quot;^5.8.1&quot;,
        &quot;axios&quot;: &quot;^0.27.2&quot;,
        &quot;jquery&quot;: &quot;^3.6.1&quot;,
        &quot;mdb-react-ui-kit&quot;: &quot;^6.1.0&quot;,
        &quot;moment&quot;: &quot;^2.29.4&quot;,
        &quot;pickadate&quot;: &quot;^3.6.4&quot;,
        &quot;react&quot;: &quot;^18.2.0&quot;,
        &quot;react-bootstrap&quot;: &quot;^2.5.0&quot;,
        &quot;react-date-range&quot;: &quot;^1.4.0&quot;,
        &quot;react-datepicker&quot;: &quot;^4.12.0&quot;,
        &quot;react-dom&quot;: &quot;^18.2.0&quot;,
        &quot;react-helmet&quot;: &quot;^6.1.0&quot;,
        &quot;react-multi-carousel&quot;: &quot;^2.8.2&quot;,
        &quot;react-redux&quot;: &quot;^8.1.2&quot;,
        &quot;react-router-dom&quot;: &quot;^6.13.0&quot;,
        &quot;react-select&quot;: &quot;^5.7.4&quot;,
        &quot;react-spinners&quot;: &quot;^0.13.8&quot;,
        &quot;redux&quot;: &quot;^4.2.1&quot;,
        &quot;redux-persist&quot;: &quot;^6.0.0&quot;,
        &quot;redux-thunk&quot;: &quot;^2.4.2&quot;,
        &quot;usehooks-ts&quot;: &quot;^2.7.0&quot;,
        &quot;vite&quot;: &quot;^4.4.8&quot;,
        &quot;vite-plugin-svgr&quot;: &quot;^3.2.0&quot;,
        &quot;web-vitals&quot;: &quot;^2.1.4&quot;
    },
    &quot;scripts&quot;: {
        &quot;dev&quot;: &quot;vite&quot;,
        &quot;build&quot;: &quot;vite build&quot;,
        &quot;serve&quot;: &quot;vite preview&quot;
    },
    &quot;eslintConfig&quot;: {
        &quot;extends&quot;: [
            &quot;react-app&quot;,
            &quot;react-app/jest&quot;
        ]
    },
    &quot;browserslist&quot;: {
        &quot;production&quot;: [
            &quot;&gt;0.2%&quot;,
            &quot;not dead&quot;,
            &quot;not op_mini all&quot;
        ],
        &quot;development&quot;: [
            &quot;last 1 chrome version&quot;,
            &quot;last 1 firefox version&quot;,
            &quot;last 1 safari version&quot;
           ]
        }
    }
</code></pre>
<blockquote>
<p>Index.js</p>
</blockquote>
<pre><code>    import React from &quot;react&quot;;
    import ReactDOM from &quot;react-dom/client&quot;;
    import { Provider } from &quot;react-redux&quot;;
    import { store, persistor } from &quot;./store&quot;;
    import { PersistGate } from &quot;redux-persist/integration/react&quot;;
    import { BrowserRouter } from &quot;react-router-dom&quot;;

    // meta.hot.accept is required for HMR update
    // import.meta.hot.accept();

    import &quot;./index.css&quot;;
    import App from &quot;./App&quot;;

    ReactDOM.createRoot(document.getElementById(&quot;root&quot;)).render(
        &lt;Provider store={store}&gt;
            &lt;PersistGate loading={null} persistor={persistor}&gt;
                &lt;React.StrictMode&gt;
                    &lt;React.StrictMode&gt;
                        &lt;BrowserRouter basename=&quot;/&quot;&gt;
                            &lt;App /&gt;
                        &lt;/BrowserRouter&gt;
                    &lt;/React.StrictMode&gt;
                &lt;/React.StrictMode&gt;
            &lt;/PersistGate&gt;
        &lt;/Provider&gt;
     );

</code></pre>
",
tags:"<javascript><reactjs><vite>",
score:7,
creationDate:2023-08-11 06:06:53,
creationDate:2023-08-16 04:47:03,
score:5,
acceptedResponderReputation:335,
acceptedResponder:19428413,
QuestionerReputation:138,
Questioner:19344063}
{title:"Spring: Native Query in batch using query annotation in a Repository?",
id:"https://stackoverflow.com/questions/77113432",
body:"<p>I've got to do <strong>upserts</strong> of thousands of records at a time, broken into batches of let's say 25 actual upserts at a time. The upsert is based on a unique constraint being service+key, and if the insert fails, it updates the value.</p>
<p>Note that I'm interested in the UPSERT case, not just standard inserts, as I want to avoid the extra db READ operations as well as this data is mostly static.</p>
<p>I'm using Spring with Postgres 14, and was thinking I'd do something like the following to do the upsert in a Repository class, but wanted to ensure that the upserts are done in batches if possible.</p>
<p>I've set the following spring boot properties, but don't see any log messages suggesting batching is happening:</p>
<pre><code>spring.jpa.properties.hibernate.jdbc.batch_size = 25
spring.jpa.properties.hibernate.order_inserts = true
</code></pre>
<p>Can I do it using a method like so, or do I have to do it another way, <a href=""https://stackoverflow.com/q/25419488/26510"">like so possibly</a>?</p>
<pre class=""lang-java prettyprint-override""><code>@Transactional
@Modifying
@Query(
  nativeQuery = true,
  value =
      &quot;INSERT INTO my_table &quot;
          + &quot;  (service, key, value, version) &quot;
          + &quot;VALUES &quot;
          + &quot;  (:service, :key, :value, :version) &quot;
          + &quot;ON CONFLICT ON CONSTRAINT allow_one_value_per_service_key DO &quot;
          + &quot;  UPDATE &quot;
          + &quot;    SET &quot;
          + &quot;      value = excluded.value, version=my_table.version + 1 &quot;
          + &quot;    WHERE  &quot;
          + &quot;      my_table.value &lt;&gt; excluded.value&quot;)
void upsertValue(
      @Param(&quot;service&quot;) String service,
      @Param(&quot;key&quot;) String key,
      @Param(&quot;value&quot;) String value,
      @Param(&quot;version&quot;) int version
      );
</code></pre>
<p>EDIT: My goal is to only ever do DB inserts or updates in batches (single transaction per batch), and do nothing if the value hasn't changed. So for a new &quot;service&quot; that hasn't had any values inserted yet, I will be inserting about 5000 values at once, which I want to ensure is done in groups, to avoid overloading Postgres and causing large transaction logs.</p>
<p>EDIT 2: Note that if your using @DataJpaTest to test your upsert, it will fail with H2 database, as it doesn't support `INSERT ON CONFLICT(unique) UPDATE. <a href=""https://stackoverflow.com/a/73502879/26510"">More details here</a></p>
",
tags:"<java><spring-boot><spring-repositories>",
score:7,
creationDate:2023-09-15 14:59:23,
creationDate:2023-09-23 19:08:27,
score:5,
acceptedResponderReputation:90417,
acceptedResponder:339637,
QuestionerReputation:71961,
Questioner:26510}
{title:"How to differentiate first and last position of wrapped text in firefox",
id:"https://stackoverflow.com/questions/77474614",
body:"<p>I am working with a <code>contentEditable span</code> where I want to place a <code>position: absolute</code> element on the same line as the cursor. The problem happens when the text gets wrapped because it doesn't fit - the first and last position of the wrapped lines have weird behaviours.</p>
<p>For both of them, when I am at the first position in the second line the <code>y</code> offset of <code>getBoundingClientRect()</code> is equal to offset of the first line, however if I move one place further on second line the <code>y offset</code> is correctly matching the second line.</p>
<p>In the snippet below this behaviour is displayed for Firefox. For Chrome it seems to work fine although in my full implementation it also has imprecise behavior, but I was able to solve it for chrome. However for Firefox the last position of first line has <code>offset</code> equal to the first line, the first position on second line has <code>offset</code> equal to the first line, afterwards it works fine.</p>
<p>In the example, go to the last place on first line and notice the <code>CURRENT_TOP</code> value in the console says <code>16</code>. If you go one place right so the cursor is already on next line, it still says <code>16</code>. if you move one more right, it will say <code>36</code></p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const textEl = document.getElementById(""myText"")

textEl.addEventListener(""keyup"", (event) =&gt; {
  const domSelection = window.getSelection();
  if (domSelection &amp;&amp; domSelection.isCollapsed &amp;&amp; domSelection.anchorNode) {
    let offsetNewLine = 0;

    const domRange = domSelection.getRangeAt(0);
    const rect = domRange.getBoundingClientRect();
    const rects = domRange.getClientRects();
    const newRange = document.createRange();
    const newRangeNextOffset = domSelection.anchorNode.textContent.length &lt; domSelection.anchorOffset + 1 ? domSelection.anchorOffset : domSelection.anchorOffset + 1

    newRange.setStart(domSelection.anchorNode, newRangeNextOffset);
    newRange.setEnd(domSelection.anchorNode, newRangeNextOffset);
    const nextCharacterRect = newRange.getBoundingClientRect();

    console.log(`CURRENT_TOP: ${rect.y}, NEXT_CHAR_TOP: ${nextCharacterRect.y}`);
  }
})</code></pre>
<pre class=""snippet-code-css lang-css prettyprint-override""><code>.text-container {
  width: 500px;
  display: inline-block;
  border: 1px solid black;
  line-height: 20px;
  padding: 5px;
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;span id=""myText"" class=""text-container"" contentEditable=""true""&gt;Go on the last position in the first row and come it to first position in the second row&lt;/span&gt;</code></pre>
</div>
</div>
</p>
",
tags:"<javascript><html><css>",
score:9,
creationDate:2023-11-13 14:29:41,
creationDate:2023-11-16 09:12:19,
score:5,
acceptedResponderReputation:5803,
acceptedResponder:19980636,
QuestionerReputation:209,
Questioner:6124837}
{title:"How to get SQL from Hibernate Criteria API in Hibernate 6?",
id:"https://stackoverflow.com/questions/76314412",
body:"<p>I'd like to get the sql string from a <a href=""https://jakarta.ee/specifications/persistence/2.2/apidocs/javax/persistence/criteria/criteriaquery"" rel=""noreferrer"">CriteriaQuery</a> using Hibernate 6.</p>
<ul>
<li><a href=""https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/query/Query.html#getQueryString()"" rel=""noreferrer"">Query.getQueryString()</a> does no longer work in Hibernate 6 for <code>CriteriaQuery</code>.</li>
<li><code>SQLExtractor.from()</code> dos not work either because it just uses reflection to call <a href=""https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/query/Query.html#getQueryString()"" rel=""noreferrer"">Query.getQueryString()</a></li>
<li><a href=""https://stackoverflow.com/questions/554481/how-to-get-sql-from-hibernate-criteria-api-not-for-logging#3888873"">How to get SQL from Hibernate Criteria API (*not* for logging)</a> only works for hibernate versions up to 5.</li>
<li>logging the sql statements is not enough in my use case. I need to store them in a string for processing.</li>
</ul>
<p>Any ideas?</p>
",
tags:"<java><hibernate><hibernate-6.x>",
score:9,
creationDate:2023-05-23 11:48:02,
creationDate:2023-09-22 15:56:06,
score:5,
acceptedResponderReputation:6706,
acceptedResponder:42344,
QuestionerReputation:16834,
Questioner:671639}
{title:"Add another layer of validation for sequencing data",
id:"https://stackoverflow.com/questions/75617497",
body:"<p>I am creating a matchmaking function where 2 players with the same weight will be paired.</p>
<p>It is currently working now based on the same weight. Now, my target is, to add a sequence per match. For example.</p>
<p>*If <em>player 1</em> is in 1st match, then player 1's next match should be on the 4th or 6th match. Every match of the player there should be a minimum of 3 and Maximum of 6 gaps before that specific player can be matched again.</p>
<p>I have provided my current output and my target output below.</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>    const source = [
        {
            entryID: 1,
            entryName: ""player1"",
            weight: 1900,
            class:[],

        }, 
        {
            entryID: 2,
            entryName: ""player1"",
            weight: 1900,
            class:[],

        },
        {
            entryID: 3,
            entryName: ""player2"",
            weight: 1900,
            class:[],
        },
        {
            entryID: 4,
            entryName: ""player3"",
            weight: 1900,
            class:[],
        },
        {
            entryID: 5,
            entryName: ""player4"",
            weight: 1900,
            class:[],
        },
        {
            entryID: 6,
            entryName: ""player5"",
            weight: 1900,
            class:[],
        },
        {
            entryID: 7,
            entryName: ""player6"",
            weight: 1900,
            class:[],
        },
        {
            entryID: 8,
            entryName: ""player7"",
            weight: 1900,
            class:[],

        },
        {
            entryID: 9,
            entryName: ""player8"",
            weight: 1900,
            class:[],
        },
        {
            entryID: 10,
            entryName: ""player9"",
            weight: 1900,
           class:[],
        },
        {
            entryID: 11,
           entryName: ""player10"",
            weight: 1900,
            class:[],
        },
        {
            entryID: 12,
           entryName: ""player11"",
            weight: 1900,
              class:[],
        },
        {
            entryID: 13,
           entryName: ""player12"",
            weight: 1900,
            class:[],
        },
        {
            entryID: 14,
           entryName: ""player1"",
            weight: 1900,
            class:[],
        },

    ];

console.log(combine(source))

function combine(data = [], different = 0, maxGroupSize = 2) {
    const groups = [], related = [], sortedData = [...data].sort((a, b) =&gt; a.weight - b.weight),
        alreadyInRela = (setX, eName) =&gt; {
            let list = [...setX, eName]
            return related.some(rela =&gt; list.every(l =&gt; rela.has(l)))
        };
    
    sortedData.forEach((el, indx) =&gt; {
        let place = groups.findIndex( // find a place in a group forEach element, use indx as track
            g =&gt; g.names.size &lt; maxGroupSize              // is the group incomplete ?
                &amp;&amp; !g.names.has(el.entryName)             // is entryName not in the group list (names Set) ?
                &amp;&amp; (el.weight - g.weight) &lt;= different
                &amp;&amp; !alreadyInRela(g.names, el.entryName) // is (entryName + group list) does not already used ?
                &amp;&amp; el.class.every(c =&gt; !g.usedClasses.has(c)) // check class
        )

        if (place &lt; 0) { // not found -&gt; create new group
            let names = new Set().add(el.entryName)                      // create new group
            groups.push({ names, indxs: [indx], weight: el.weight, usedClasses: new Set(el.class) })  // group constitutive info 
            related.push(names)                                      // keep track of group list
        } else { // find a place in a group
            groups[place].names.add(el.entryName)  // related list is also updated
            el.class.forEach(c =&gt; groups[place].usedClasses.add(c)) // add classes
            groups[place].indxs.push(indx)        // add indx to retreive element in sortedData 
        }
    });

    return groups.reduce((r, g, i) =&gt; { // build result
        if (g.indxs.length &gt; 1) {
            let key = `${i}_` + g.indxs.map(x =&gt; sortedData[x].weight).join('_')
            r[key] = []
            g.indxs.forEach(x =&gt; r[key].push(sortedData[x]))
        }
        return r
    }, {})
}</code></pre>
</div>
</div>
</p>
<p>Current result:</p>
<pre><code>{
  0_1900_1900: [{ // 1st match
  class: [],
  entryID: 1,
  entryName: &quot;player1&quot;,
  weight: 1900
}, {
  class: [],
  entryID: 3,
  entryName: &quot;player2&quot;,
  weight: 1900
}],
  1_1900_1900: [{ // 2nd match (As we can see here, player 1 has been matched again. There should be 3-6 matches before this player can be matched again)
  class: [],
  entryID: 2,
  entryName: &quot;player1&quot;,
  weight: 1900
}, {
  class: [],
  entryID: 4,
  entryName: &quot;player3&quot;,
  weight: 1900
}],
  2_1900_1900: [{ // 3rd match
  class: [],
  entryID: 5,
  entryName: &quot;player4&quot;,
  weight: 1900
}, {
  class: [],
  entryID: 6,
  entryName: &quot;player5&quot;,
  weight: 1900
}],
  3_1900_1900: [{ // 4th match
  class: [],
  entryID: 7,
  entryName: &quot;player6&quot;,
  weight: 1900
}, {
  class: [],
  entryID: 8,
  entryName: &quot;player7&quot;,
  weight: 1900
}],
  4_1900_1900: [{ // 5th match
  class: [],
  entryID: 9,
  entryName: &quot;player8&quot;,
  weight: 1900
}, {
  class: [],
  entryID: 10,
  entryName: &quot;player9&quot;,
  weight: 1900
}],
  5_1900_1900: [{ // 6th match
  class: [],
  entryID: 11,
  entryName: &quot;player10&quot;,
  weight: 1900
}, {
  class: [],
  entryID: 12,
  entryName: &quot;player11&quot;,
  weight: 1900
}],
  6_1900_1900: [{ // 7th match
  class: [],
  entryID: 13,
  entryName: &quot;player12&quot;,
  weight: 1900
}, {
  class: [],
  entryID: 14,
  entryName: &quot;player1&quot;,
  weight: 1900
}]
}
</code></pre>
<p>Target result:</p>
<pre><code>{
  0_1900_1900: [{// 1st match
  class: [],
  entryID: 1,
  entryName: &quot;player1&quot;,
  weight: 1900
}, {
  class: [],
  entryID: 3,
  entryName: &quot;player2&quot;,
  weight: 1900
}],
  1_1900_1900: [{ //2nd match
  class: [],
  entryID: 4,
  entryName: &quot;player3&quot;,
  weight: 1900
}, {
  class: [],
  entryID: 5,
  entryName: &quot;player4&quot;,
  weight: 1900
}],
  2_1900_1900: [{ //3rd match
  class: [],
  entryID: 6,
  entryName: &quot;player5&quot;,
  weight: 1900
}, {
  class: [],
  entryID: 7,
  entryName: &quot;player6&quot;,
  weight: 1900
}],
  3_1900_1900: [{ //4th match (As we can see here, there are 2 matches before player 1 got matched again. This is my target output)
  class: [],
  entryID: 2,
  entryName: &quot;player1&quot;,
  weight: 1900
}, {
  class: [],
  entryID: 8,
  entryName: &quot;player7&quot;,
  weight: 1900
}],
  4_1900_1900: [{ //5th match
  class: [],
  entryID: 9,
  entryName: &quot;player8&quot;,
  weight: 1900
}, {
  class: [],
  entryID: 10,
  entryName: &quot;player9&quot;,
  weight: 1900
}],
  5_1900_1900: [{ //6th match
  class: [],
  entryID: 11,
  entryName: &quot;player10&quot;,
  weight: 1900
}, {
  class: [],
  entryID: 12,
  entryName: &quot;player11&quot;,
  weight: 1900
}],
  6_1900_1900: [{ //7th match
  class: [],
  entryID: 14,
  entryName: &quot;player1&quot;,
  weight: 1900
}, {
  class: [],
  entryID: 13,
  entryName: &quot;player12&quot;,
  weight: 1900
}]
}
</code></pre>
<p>Any help will be appreciated. Thank you</p>
",
tags:"<javascript><algorithm>",
score:6,
creationDate:2023-03-02 15:24:15,
creationDate:2023-03-11 09:36:11,
score:5,
acceptedResponderReputation:1960,
acceptedResponder:12715723,
QuestionerReputation:219,
Questioner:14793352}
{title:"Android 14 (UpsideDownCake) doesn't see certificate installed in /system/etc/security/cacert",
id:"https://stackoverflow.com/questions/76007110",
body:"<p>For our automated testing platform for Android emulator, we are able to push a Proxyman certificate to a <code>/system/etc/security/cacerts</code> with the tried and tested commands:</p>
<ol>
<li><p>Start emulator with <code>-writable-system</code> flag: <code>emulator -avd emulator_name -writable-system</code></p>
</li>
<li><p>Prepare Proxyman certificate:</p>
<ul>
<li><p><code>openssl x509 -inform PEM -subject_hash_old -in proxyman-ssl-proxying-certificate.pem | head -1</code> - it returns a hash for the cert, eg. 30eb732c</p>
</li>
<li><p>save that to a file: <code>cat proxyman-ssl-proxying-certificate.pem &gt; 30eb732c.0</code></p>
</li>
<li><p><code>openssl x509 -inform PEM -text -in proxyman-ssl-proxying-certificate.pem -out /dev/null &gt;&gt; 30eb732c.0</code></p>
</li>
</ul>
</li>
<li><p>Push the created <code>30eb732c.0</code> to emulator:</p>
<ul>
<li><code>adb root</code></li>
<li><code>adb remount</code></li>
<li><code>adb root</code></li>
<li><code>adb shell avbctl disable-verification</code></li>
<li><code>adb reboot</code></li>
<li><code>adb root</code></li>
<li><code>adb remount</code></li>
<li><code>adb push 30eb732c.0 /system/etc/security/cacerts</code></li>
</ul>
</li>
<li><p>I can verify that the file is there by listing all certs with <code>adb shell ls /system/etc/security/cacert</code> and seeing mine on the list.</p>
</li>
</ol>
<p>With these, we are able to see the traffic in Proxyman on release builds of our apps, up to API 33, and I can see the certificate installed on system partition in the Emulator Settings/Security/Encryption &amp; credentials/Trusted credentials.</p>
<p><a href=""https://i.sstatic.net/wSDAv.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/wSDAv.png"" alt=""enter image description here"" /></a></p>
<p>With the same steps for Android Emulator UpsideDownCake, I can see that the cert file is indeed in <code>/system/etc/security/cacert</code>, but the UI doesn't show it, and the traffic also fails to be captured by Proxyman (getting <code>SSL Handshake Failed</code>).</p>
<p>The method for installing cert has been informed by many of these:</p>
<ul>
<li><a href=""https://stackoverflow.com/questions/58010655/is-adb-remount-broken-on-android-api-29"">Is adb remount broken on android api 29?</a></li>
<li><a href=""https://issuetracker.google.com/issues/144891973?pli=1"" rel=""noreferrer"">https://issuetracker.google.com/issues/144891973?pli=1</a></li>
<li><a href=""https://gist.github.com/pwlin/8a0d01e6428b7a96e2eb"" rel=""noreferrer"">https://gist.github.com/pwlin/8a0d01e6428b7a96e2eb</a></li>
<li><a href=""https://blog.ropnop.com/configuring-burp-suite-with-android-nougat"" rel=""noreferrer"">https://blog.ropnop.com/configuring-burp-suite-with-android-nougat</a></li>
</ul>
<p>I feel like I might be missing something here, but also wondering what's the difference between API 33 and UpsideDownCake emulators. Has anyone been successful in installing a certificate in <code>/system/etc/security/cacert</code> on Android 14 (UpsideDownCake) emulator?</p>
",
tags:"<java><android><kotlin><android-emulator>",
score:8,
creationDate:2023-04-13 15:14:29,
creationDate:2023-09-21 17:09:12,
score:5,
acceptedResponderReputation:13216,
acceptedResponder:68051,
QuestionerReputation:8598,
Questioner:2964945}
{title:"How to resolve intermittent ""nonce has already been used"" error when deploying multiple smart contracts to Hedera Testnet?",
id:"https://stackoverflow.com/questions/76109301",
body:"<p>When I deploy 2 smart contracts at the same time to Hedera Testnet,
I get the following error:</p>
<pre><code>nonce has already been used [ See: https://links.ethers.org/v5-errors-NONCE_EXPIRED ]
</code></pre>
<p>This occurs intermittently, roughly about 20% of the time.
Their occurrence appears to be non-deterministic, although I am unable confirm this.</p>
<p>My deployment code is:</p>
<pre><code>        const deploymentSigner: Signer = (await hre.ethers.getSigners())[0];
        // console.log('Deployment signer address', (await deploymentSigner.getAddress()));
        const scDeploymentPromises: Promise&lt;Contract&gt;[] = [];
        for (let idx = 0; idx &lt; scNamesToDeploy.length; ++idx) {
            const scName = scNamesToDeploy[idx];
            const scFactory: ContractFactory =
                await hre.ethers.getContractFactory(scName);
            console.log(`Deploying ${scName} on ${networkName} ...`);
            const sc: Contract = await scFactory.deploy();
            // NOTE deployment with constructor params not needed for these particular SCs
            const scDeploymentPromise: Promise&lt;Contract&gt; = sc.deployed();
            scDeploymentPromises.push(scDeploymentPromise);
        }

        // NOTE collect deployment promises without `await`-ing them,
        // so as to be able to run them in parallel.
        const deployedScs: Contract[] = await Promise.all(scDeploymentPromises);
        deployedScs.forEach((sc, idx) =&gt; {
            const scName = scNamesToDeploy[idx];
            console.log(`Deployed ${scName} on ${networkName} at ${sc.address}`);
        });
</code></pre>
<p>Where <code>scNamesToDeploy</code> is an array of strings, initialised elsewhere,
containing the smart contract names that I'd like to deploy.</p>
<p>Worth noting that if I change the code within the first loop to do</p>
<pre class=""lang-js prettyprint-override""><code>await sc.deployed()
</code></pre>
<p>... and therefore skip the 2nd loop, this error stops occurring.
Therefore I think it has something to do with the 2nd deployment transaction
occurring <strong>too quickly</strong> after the 1st one.
But, technically, this should be possible,
I should be able to submit both transactions within the same &quot;block&quot; even.
(&quot;block&quot; is in quotes because Hedera does not have blocks, AFAICT.)</p>
<hr />
<h3>Details</h3>
<p><em>Versions</em></p>
<p>I'm using hardhat (<code>hardhat@2.13.0</code>) + ethers.js (<code>ethers@5.7.2</code> via <code>@nomicfoundation/hardhat-toolbox@2.0.2</code>).</p>
<p><em>Error details</em></p>
<p>This is the full error message:</p>
<pre><code>nonce has already been used [ See: https://links.ethers.org/v5-errors-NONCE_EXPIRED ] (error={&quot;name&quot;:&quot;ProviderError&quot;,&quot;_stack&quot;:&quot;ProviderError: [Request ID: 356c0cee-949f-4f52-b936-25bbba9ef603] Nonce too low\n    at HttpProvider.request (/Users/user/code/hedera/hedera-scratch/chain/node_modules/hardhat/src/internal/core/providers/http.ts:88:21)\n    at processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async EthersProviderWrapper.send (/Users/user/code/hedera/hedera-scratch/chain/node_modules/@nomiclabs/hardhat-ethers/src/internal/ethers-provider-wrapper.ts:13:20)&quot;,&quot;code&quot;:32001,&quot;_isProviderError&quot;:true}, method=&quot;sendTransaction&quot;, transaction=undefined, code=NONCE_EXPIRED, version=providers/5.7.2)\
</code></pre>
<p><em>Network config</em></p>
<p>This is from the <code>networks</code> section of <code>hardhat.config.js</code>:</p>
<pre class=""lang-js prettyprint-override""><code>    hederatestnet: {
      chainId: 296,
      url: 'https://testnet.hashio.io/api',
      // gasPrice: Math.floor(rskTestnetMinimumGasPrice * 1.1),
      gasMultiplier: hederaTestnetGasMultiplier,
      accounts,
    },
    hederatestnetrelay: {
      chainId: 296,
      url: 'http://localhost:7546',
      // gasPrice: Math.floor(rskTestnetMinimumGasPrice * 1.1),
      gasMultiplier: hederaTestnetGasMultiplier,
      accounts,
    },
</code></pre>
<p>Note that I'm using <code>hederatestnetrelay</code> which is a local instance of <code>hedera-json-rpc-relay</code> connected to the Hedera Testnet, as that seems to be less flaky than connecting to the public RPC endpoint directly, where I <a href=""https://stackoverflow.com/q/76050923/194982"">get different intermittent errors (&quot;Unknown error invoking RPC&quot;)</a>.</p>
",
tags:"<javascript><ethers.js><hardhat><hedera-hashgraph><hedera>",
score:6,
creationDate:2023-04-26 09:41:12,
creationDate:2023-04-27 12:49:00,
score:5,
acceptedResponderReputation:148,
acceptedResponder:21746247,
QuestionerReputation:28577,
Questioner:194982}
{title:"import inside Electron renderer script",
id:"https://stackoverflow.com/questions/75270684",
body:"<p>I followed the Electron typescript quick-start code structure. Basically I cloned the repo.
It worked fine until I wanted to split my code in multiple .ts files, and import them in the renderer script.</p>
<p>Then I get the <code>Uncaught ReferenceError: exports is not defined</code>. Because of this line on top of the renderer.ts:</p>
<pre><code>import { stuff } from &quot;./otherfile.ts&quot;;
</code></pre>
<p>After digging for more info, it seems that the reason is the <code>&quot;module&quot;: &quot;commonjs&quot;</code> from tsconfig... But if I change that to <code>esnext</code> then Electron will not load the preload script anymore!</p>
<p>Has anyone actually managed to get Electron and typescript fully working? I mean, with being able to use import across multiple files and stuff like that?</p>
<hr />
<h2>Minimal reproductible example:</h2>
<p>file structure:</p>
<pre><code>/dist
/dist/main.js
/dist/preload.js
/dist/renderer.js
/dist/stuff.js
/src
/src/main.ts
/src/preload.ts
/src/renderer.ts
/src/stuff.ts
/index.html
</code></pre>
<p>/src/main.ts:</p>
<pre><code>import { ipcMain } from &quot;electron&quot;; // imports work fine in main
...

ipcMain.on(...
</code></pre>
<p>/src/preload.ts:</p>
<pre><code> import { contextBridge, ipcRenderer} from &quot;electron&quot;; // imports work fine in preload

 contextBridge.exposeInMainWorld(&quot;my-api&quot;, { ....
</code></pre>
<p>/src/renderer.ts</p>
<pre><code> import stuff from &quot;./stuff.ts&quot;; // import fails in renderer (exports is not defined error)
</code></pre>
<p>/src/stuff.ts</p>
<pre><code> const stuff = { ... };
 export default stuff;
</code></pre>
<p>/index.html</p>
<pre><code> &lt;html&gt;
   ...
   &lt;script src=&quot;./dist/renderer.js&quot;&gt;&lt;/script&gt;
 &lt;/html&gt;
</code></pre>
<p>ts.config:</p>
<ul>
<li>if I change &quot;module&quot; to &quot;es6&quot;, then preload.ts will not load.</li>
<li>if I leave &quot;module&quot; to &quot;commonjs&quot; then imports in renderer.ts not work</li>
</ul>
<p>If I manually add <code>var exports = {}</code> in <code>renderer.js</code> after ts compiles the file, then I get a different error &quot;require is not defined&quot;</p>
",
tags:"<javascript><typescript><electron>",
score:10,
creationDate:2023-01-28 20:32:36,
creationDate:2023-02-03 00:14:05,
score:5,
acceptedResponderReputation:13108,
acceptedResponder:6025788,
QuestionerReputation:68396,
Questioner:376947}
{title:"ControlsFX RangeSlider is laggy when orientation is vertical",
id:"https://stackoverflow.com/questions/77239808",
body:"<p>When <code>setOrientation</code> is set to <code>Orientation.HORIZONTAL</code> the movement of the slider is very smooth, but when <code>setOrientation</code> is set to <code>Orientation.VERTICAL</code> the movement is laggy.</p>
<p>Below is minimal reproduction:</p>
<pre class=""lang-java prettyprint-override""><code>package org.example;

import javafx.application.Application;
import javafx.geometry.Orientation;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.layout.FlowPane;
import javafx.scene.layout.HBox;
import javafx.scene.layout.Priority;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;
import org.controlsfx.control.RangeSlider;

public class App extends Application {

    @Override
    public void start(Stage stage) {

        RangeSlider rangeSliderVertical = new RangeSlider();
        rangeSliderVertical.setOrientation(Orientation.VERTICAL);
        rangeSliderVertical.setMinHeight(500);
        rangeSliderVertical.setMax(100);
        rangeSliderVertical.setMin(0);
        rangeSliderVertical.setHighValue(100);
        rangeSliderVertical.setLowValue(0);

        RangeSlider rangeSliderHorizontal = new RangeSlider();
        rangeSliderHorizontal.setMinWidth(500);
        rangeSliderHorizontal.setMax(100);
        rangeSliderHorizontal.setMin(0);
        rangeSliderHorizontal.setHighValue(100);
        rangeSliderHorizontal.setLowValue(0);
        rangeSliderHorizontal.setOrientation(Orientation.HORIZONTAL);

        FlowPane vBoxWithSliders = new FlowPane();
        VBox.setVgrow(vBoxWithSliders, Priority.ALWAYS);
        HBox.setHgrow(vBoxWithSliders, Priority.ALWAYS);

        vBoxWithSliders.setAlignment(Pos.CENTER);
        vBoxWithSliders.getChildren().addAll(rangeSliderVertical, rangeSliderHorizontal);

        var scene = new Scene(vBoxWithSliders, 600, 600);
        stage.setScene(scene);
        stage.show();
    }

    public static void main(String[] args) {
        launch();
    }

}
</code></pre>
<p>Any hints on how to achieve smooth movement when RangeSlider is vertical?</p>
<p><a href=""https://i.sstatic.net/f7gvB.gif"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/f7gvB.gif"" alt=""enter image description here"" /></a></p>
",
tags:"<java><javafx><controlsfx>",
score:7,
creationDate:2023-10-05 18:44:23,
creationDate:2023-10-06 18:57:52,
score:5,
acceptedResponderReputation:209225,
acceptedResponder:2189127,
QuestionerReputation:148,
Questioner:6050980}
{title:"Play Console Error: You need approval to use the following Health Connect permissions in your app",
id:"https://stackoverflow.com/questions/77064586",
body:"<p>I am using <code>react-native-health-connect</code> package to get user health info from device. everything is working fine, I am getting user's health info and displaying it.</p>
<p>I have given following permission in <code>AndroidMenifest.json</code> file to get health data from any health app in device.</p>
<pre><code>&lt;uses-permission android:name=&quot;android.permission.health.READ_ACTIVE_CALORIES_BURNED&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.health.READ_TOTAL_CALORIES_BURNED&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.health.READ_WEIGHT&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.health.READ_HEIGHT&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.health.READ_STEPS&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.health.READ_HEART_RATE&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.health.READ_LEAN_BODY_MASS&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.health.READ_BONE_MASS&quot;/&gt;
&lt;uses-permission android:name=&quot;android.permission.health.READ_BODY_FAT&quot;/&gt;
</code></pre>
<p>Now I am uploading an update to play store and it is giving me following error
<a href=""https://i.sstatic.net/jEQwB.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/jEQwB.png"" alt=""enter image description here"" /></a></p>
<p>I have gone through the <a href=""https://support.google.com/googleplay/android-developer/answer/12991134"" rel=""nofollow noreferrer"">FAQs</a> but I don't understand what should I need to do to resolve this issue.</p>
<p>Thanks</p>
",
tags:"<javascript><xcode><react-native><google-play-console><healthconnect>",
score:8,
creationDate:2023-09-08 06:22:52,
creationDate:2024-02-19 04:15:17,
score:6,
acceptedResponderReputation:1,
acceptedResponder:20587701,
QuestionerReputation:1,
Questioner:20587701}
{title:"Why the height of bottom app bar grow significantly when displaying content edge-to-edge?",
id:"https://stackoverflow.com/questions/76164938",
body:"<p>I want to let user enjoy full screen experience.</p>
<p>I am following guideline from <a href=""https://developer.android.com/develop/ui/views/layout/edge-to-edge"" rel=""noreferrer"">https://developer.android.com/develop/ui/views/layout/edge-to-edge</a></p>
<p>However, when I apply <code>WindowCompat.setDecorFitsSystemWindows(getWindow(), false);</code>, the height of bottom app bar grows significantly.</p>
<p>The picture on the left is before applying <code>WindowCompat.setDecorFitsSystemWindows(getWindow(), false);</code>, and the picture on the right is after applying <code>WindowCompat.setDecorFitsSystemWindows(getWindow(), false);</code>.</p>
<p><a href=""https://i.sstatic.net/LI0zR.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/LI0zR.png"" alt=""enter image description here"" /></a></p>
<p>I am using the following components to implement bottom app bar.</p>
<ol>
<li><code>BottomAppBar</code> (So that <code>FloatingActionButton</code> can position in center)</li>
<li><code>FloatingActionButton</code></li>
<li><code>BottomNavigationView</code> (So that I can integrate with <code>NavController</code> and <code>NavigationUI</code>).</li>
</ol>
<p>This is my layout XML</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;
&lt;androidx.coordinatorlayout.widget.CoordinatorLayout
    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;
    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;
    android:id=&quot;@+id/linear_layout&quot;
    android:layout_width=&quot;match_parent&quot;
    android:layout_height=&quot;match_parent&quot;&gt;

    &lt;FrameLayout
        android:id=&quot;@+id/toolbar_content_and_background_image_frame_layout&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;match_parent&quot;&gt;

        &lt;ImageView
            android:id=&quot;@+id/background_image_view&quot;
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;match_parent&quot;
            android:src=&quot;@drawable/background2&quot;
            android:scaleType=&quot;centerCrop&quot; /&gt;

        &lt;LinearLayout
            android:id=&quot;@+id/toolbar_content_linear_layout&quot;
            android:orientation=&quot;vertical&quot;
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;match_parent&quot;&gt;

            &lt;com.google.android.material.appbar.AppBarLayout
                app:elevation=&quot;0dp&quot;
                android:background=&quot;@android:color/transparent&quot;

                android:layout_width=&quot;match_parent&quot;
                android:layout_height=&quot;wrap_content&quot;
                android:fitsSystemWindows=&quot;true&quot;&gt;

                &lt;com.google.android.material.appbar.MaterialToolbar
                    android:background=&quot;@android:color/transparent&quot;

                    android:id=&quot;@+id/toolbar&quot;
                    android:layout_width=&quot;match_parent&quot;
                    android:layout_height=&quot;?attr/actionBarSize&quot; /&gt;

            &lt;/com.google.android.material.appbar.AppBarLayout&gt;

            &lt;fragment

                android:id=&quot;@+id/nav_host_fragment_activity_main&quot;
                android:name=&quot;androidx.navigation.fragment.NavHostFragment&quot;
                android:layout_width=&quot;match_parent&quot;
                android:layout_height=&quot;0dp&quot;
                android:layout_weight=&quot;1&quot;
                app:defaultNavHost=&quot;true&quot;
                app:navGraph=&quot;@navigation/mobile_navigation&quot; /&gt;
        &lt;/LinearLayout&gt;
    &lt;/FrameLayout&gt;

    &lt;com.google.android.material.bottomappbar.BottomAppBar
        android:backgroundTint=&quot;#ff0000&quot;
        app:fabCradleRoundedCornerRadius=&quot;0dp&quot;

        android:layout_gravity=&quot;bottom&quot;

        android:id=&quot;@+id/bottom_app_bar&quot;
        android:layout_width=&quot;match_parent&quot;
        android:layout_height=&quot;wrap_content&quot;&gt;

        &lt;com.google.android.material.bottomnavigation.BottomNavigationView
            android:layout_marginEnd=&quot;16dp&quot;
            app:elevation=&quot;0dp&quot;
            app:backgroundTint=&quot;@android:color/transparent&quot;

            android:id=&quot;@+id/nav_view&quot;
            android:layout_width=&quot;match_parent&quot;
            android:layout_height=&quot;wrap_content&quot;

            app:labelVisibilityMode=&quot;unlabeled&quot;
            app:itemBackground=&quot;?attr/actionBarItemBackground&quot;
            app:menu=&quot;@menu/bottom_nav_menu&quot; /&gt;
    &lt;/com.google.android.material.bottomappbar.BottomAppBar&gt;

    &lt;com.google.android.material.floatingactionbutton.FloatingActionButton
        android:id=&quot;@+id/fab&quot;
        android:layout_width=&quot;wrap_content&quot;
        android:layout_height=&quot;wrap_content&quot;
        android:src=&quot;@drawable/ic_android_black_24dp&quot;
        android:contentDescription=&quot;@string/app_name&quot;
        app:layout_anchor=&quot;@id/bottom_app_bar&quot; /&gt;

&lt;/androidx.coordinatorlayout.widget.CoordinatorLayout&gt;
</code></pre>
<p>I was wondering, why the height of bottom app bar grow significantly when displaying content edge-to-edge, and how we can avoid such?</p>
<p>Here's the minimal workable example to try out such an issue - <a href=""https://github.com/yccheok/bottom-navigation-example/tree/4494860eba7959ab59bb5ac2497302473ca0ad85"" rel=""noreferrer"">https://github.com/yccheok/bottom-navigation-example/tree/4494860eba7959ab59bb5ac2497302473ca0ad85</a></p>
",
tags:"<java><android>",
score:9,
creationDate:2023-05-03 14:19:46,
creationDate:2023-05-05 23:26:22,
score:6,
acceptedResponderReputation:40810,
acceptedResponder:9851608,
QuestionerReputation:42642,
Questioner:72437}
{title:"How to flip an image without moving it",
id:"https://stackoverflow.com/questions/76602447",
body:"<p>In the example below, click on logo and you'll see - it is flipped but also moved<br />
How to flip it without moving ?<br />
I also tried this, without success:</p>
<pre><code>.flip{transform:scaleX(-1) translatex(-50%);}
</code></pre>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>$('img').on('click', function(){
    $(this).addClass('flip');
 });</code></pre>
<pre class=""snippet-code-css lang-css prettyprint-override""><code>.flip{transform:scaleX(-1);}

.wrap{
  position:relative;
  width:50%;
  height:100px;
  background:darkorange;
 }
img{
  position:absolute;
  bottom:0;
  width:140px;
  left:50%;
  transform:translatex(-50%);
 }</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script src=""https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js""&gt;&lt;/script&gt;

&lt;div class='wrap'&gt;
&lt;img src='https://abuena.net/img/logo_01.png' alt='img'&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
</p>
",
tags:"<javascript><html><jquery><css>",
score:7,
creationDate:2023-07-03 06:51:15,
creationDate:2023-07-03 07:01:07,
score:6,
acceptedResponderReputation:14413,
acceptedResponder:7867822,
QuestionerReputation:927,
Questioner:10983537}
{title:"Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114",
id:"https://stackoverflow.com/questions/76911590",
body:"<p>OS : Windows server</p>
<p>Language : Java</p>
<p>Chrome version : 116.0.5845.97</p>
<p>Chrome driver version : 116.0.5845.96</p>
<h1>OUTPUT :</h1>
<pre><code>SLF4J: No SLF4J providers were found.
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.
Starting ChromeDriver 114.0.5735.90 (386bc09e8f4f2e025eddae123f36f6263096ae49-refs/branch-heads/5735@{#1052}) on port 10267
Only local connections are allowed.
Please see https://chromedriver.chromium.org/security-considerations for suggestions on keeping ChromeDriver safe.
ChromeDriver was started successfully.
FAILED CONFIGURATION: @BeforeMethod StartDriver
org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Response code 500. Message: session not created: This version of ChromeDriver only supports Chrome version 114
Current browser version is 116.0.5845.97 with binary path C:\Program Files\Google\Chrome\Application\chrome.exe 
Host info: host: 'WSAMZN-5U0L0QME', ip: '10.40.2.21'
Build info: version: '4.8.2', revision: '826dbfc730'
System info: os.name: 'Windows Server 2019', os.arch: 'amd64', os.version: '10.0', java.version: '17.0.2'
Driver info: org.openqa.selenium.chrome.ChromeDriver
Command: [null, newSession {capabilities=[Capabilities {acceptInsecureCerts: true, browserName: chrome, goog:chromeOptions: {args: [--disable-notifications, ----disable-gpu, --disable-blink-features, --disable-blink-features=Au..., enable-automation, --no-sandbox, --disable-setuid-sandbox, --disable-infobars, --disable-dev-shm-usage, --disable-browser-side-navi..., --force-device-scale-factor=1, --remote-allow-origins=*, start-maximized, --safebrowsing-disable-down..., safebrowsing-disable-extens...], extensions: [], prefs: {download.default_directory: D:\SeleniumWebdriver\backlo..., download.extensions_to_open: application/exe, download.prompt_for_download: false, safebrowsing.enabled: true}}, pageLoadStrategy: none, unhandledPromptBehavior: accept}], desiredCapabilities=Capabilities {acceptInsecureCerts: true, browserName: chrome, goog:chromeOptions: {args: [--disable-notifications, ----disable-gpu, --disable-blink-features, --disable-blink-features=Au..., enable-automation, --no-sandbox, --disable-setuid-sandbox, --disable-infobars, --disable-dev-shm-usage, --disable-browser-side-navi..., --force-device-scale-factor=1, --remote-allow-origins=*, start-maximized, --safebrowsing-disable-down..., safebrowsing-disable-extens...], extensions: [], prefs: {download.default_directory: D:\SeleniumWebdriver\backlo..., download.extensions_to_open: application/exe, download.prompt_for_download: false, safebrowsing.enabled: true}}, pageLoadStrategy: none, unhandledPromptBehavior: accept}}]
    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:148)
    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:106)
    at org.openqa.selenium.remote.ProtocolHandshake.createSession(ProtocolHandshake.java:67)
    at org.openqa.selenium.remote.HttpCommandExecutor.execute(HttpCommandExecutor.java:165)
    at org.openqa.selenium.remote.service.DriverCommandExecutor.invokeExecute(DriverCommandExecutor.java:183)
    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:158)
    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543)
    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:229)
    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157)
    at org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:101)
    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:88)
    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:84)
    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:73)
    at com.cgw.resources.Base.StartDriver(Base.java:151)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)
    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.base/java.lang.reflect.Method.invoke(Method.java:568)
    at org.testng.internal.MethodInvocationHelper.invokeMethod(MethodInvocationHelper.java:133)
    at org.testng.internal.MethodInvocationHelper.invokeMethodConsideringTimeout(MethodInvocationHelper.java:62)
    at org.testng.internal.ConfigInvoker.invokeConfigurationMethod(ConfigInvoker.java:385)
    at org.testng.internal.ConfigInvoker.invokeConfigurations(ConfigInvoker.java:321)
    at org.testng.internal.TestInvoker.runConfigMethods(TestInvoker.java:700)
    at org.testng.internal.TestInvoker.invokeMethod(TestInvoker.java:527)
    at org.testng.internal.TestInvoker.invokeTestMethod(TestInvoker.java:173)
    at org.testng.internal.MethodRunner.runInSequence(MethodRunner.java:46)
    at org.testng.internal.TestInvoker$MethodInvocationAgent.invoke(TestInvoker.java:824)
    at org.testng.internal.TestInvoker.invokeTestMethods(TestInvoker.java:146)
    at org.testng.internal.TestMethodWorker.invokeTestMethods(TestMethodWorker.java:146)
    at org.testng.internal.TestMethodWorker.run(TestMethodWorker.java:128)
    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)
    at org.testng.TestRunner.privateRun(TestRunner.java:794)
    at org.testng.TestRunner.run(TestRunner.java:596)
    at org.testng.SuiteRunner.runTest(SuiteRunner.java:377)
    at org.testng.SuiteRunner.runSequentially(SuiteRunner.java:371)
    at org.testng.SuiteRunner.privateRun(SuiteRunner.java:332)
    at org.testng.SuiteRunner.run(SuiteRunner.java:276)
    at org.testng.SuiteRunnerWorker.runSuite(SuiteRunnerWorker.java:53)
    at org.testng.SuiteRunnerWorker.run(SuiteRunnerWorker.java:96)
    at org.testng.TestNG.runSuitesSequentially(TestNG.java:1212)
    at org.testng.TestNG.runSuitesLocally(TestNG.java:1134)
    at org.testng.TestNG.runSuites(TestNG.java:1063)
    at org.testng.TestNG.run(TestNG.java:1031)
    at org.testng.remote.AbstractRemoteTestNG.run(AbstractRemoteTestNG.java:115)
    at org.testng.remote.RemoteTestNG.initAndRun(RemoteTestNG.java:251)
    at org.testng.remote.RemoteTestNG.main(RemoteTestNG.java:77)
</code></pre>
",
tags:"<java><selenium-webdriver><selenium-chromedriver><selenium-java>",
score:8,
creationDate:2023-08-16 08:00:02,
creationDate:2023-08-16 09:54:20,
score:6,
acceptedResponderReputation:8478,
acceptedResponder:7598774,
QuestionerReputation:83,
Questioner:22397799}
{title:"Generating azure storage SAS token for client in java",
id:"https://stackoverflow.com/questions/75833896",
body:"<p>For uploading media my client will send a request to the server:</p>
<pre><code>message GetMediaUploadCredRequest {
  media.MediaType.Enum media_type = 1;
  media.Extension.Enum extension = 2;
  string file_name = 3;
  bool is_private = 4;
  string uploaded_by = 5;
}
</code></pre>
<p>And the server will generate a SAS token (like <code>presigned_url</code> from AWS) and <code>http_header</code> will send back to the client.</p>
<pre><code>message GetMediaUploadCredResponse {
  string upload_credential_url = 1;
  map&lt;string, string&gt; https_headers = 2;
  string media_id = 3;
}
</code></pre>
<p>client will then make a PUT request to the URL with the <code>https_headers</code> and the upload process will be complete.</p>
<p>Here is the implementation:</p>
<pre><code>public class StorexServiceImpl extends StorexServiceGrpc.StorexServiceImplBase {
    private static final Logger log = LoggerFactory.getLogger(StorexServiceImpl.class);

    private static final String STORAGE_ACCOUNT_CONNECTION_STRING = &quot;&lt;connection-string&gt;&quot;;
    
    private static final String CONTAINER_NAME = &quot;&lt;container-name&gt;&quot;;



    @Override
    public void getMediaUploadCred(GetMediaUploadCredRequest request, StreamObserver&lt;GetMediaUploadCredResponse&gt; response) {
        try{
            MediaType.Enum mediaType = request.getMediaType();
            Extension.Enum extension = request.getExtension();
            
            String fileName = String.format(&quot;%s.%s&quot;, UUID.randomUUID(), extension.toString());

            BlobServiceClient blobServiceClient = new BlobServiceClientBuilder().connectionString(STORAGE_ACCOUNT_CONNECTION_STRING).buildClient();
            BlobContainerClient containerClient = blobServiceClient.getBlobContainerClient(CONTAINER_NAME);
            BlobClient blobClient = containerClient.getBlobClient(fileName);
            BlobHttpHeaders headers = new BlobHttpHeaders().setContentEncoding(&quot;gzip&quot;);

            BlobSasPermission permission = new BlobSasPermission().setWritePermission(true); // Set the permission to allow uploading
            OffsetDateTime expiryTime = OffsetDateTime.now().plusHours(1); // Set the expiration time to 1 hour from now

            BlobServiceSasSignatureValues sasValues = new BlobServiceSasSignatureValues(expiryTime, permission)
                    .setProtocol(SasProtocol.HTTPS_HTTP);

            String sasUrl = blobClient.generateSas(sasValues);

            Map&lt;String, String&gt; httpHeaders = new TreeMap&lt;&gt;();
            httpHeaders.put(&quot;Content-Type&quot;, getContentType(mediaType, extension));
            if(!request.getIsPrivate()) {
                httpHeaders.put(&quot;x-amz-acl&quot;, &quot;public-read&quot;);
            }

            String blobId = blobClient.getBlobName(); // get the ID of the blob

            GetMediaUploadCredResponse res = GetMediaUploadCredResponse.newBuilder()
                    .setMediaId(blobId) // set the blob ID in the response
                    .setUploadCredentialUrl(sasUrl)
                    .putAllHttpsHeaders(httpHeaders)
                    .build();
            response.onNext(res);
            response.onCompleted();
        } catch (Exception e){}
        super.getMediaUploadCred(request, response);

    }

    private String getContentType(MediaType.Enum mediaType, Extension.Enum extension) {
        if(mediaType == MediaType.Enum.IMAGE) {
            return &quot;image/&quot; + extension.toString().toLowerCase();
        } else if(mediaType == MediaType.Enum.AUDIO) {
            return &quot;audio/mp3&quot;;
        } else if(mediaType == MediaType.Enum.VIDEO) {
            return &quot;audio/mp4&quot;;
        } else if(mediaType == MediaType.Enum.FILE) {
            return &quot;application/&quot; + extension.toString().toLowerCase();
        }
        return &quot;binary/octet-stream&quot;;
    }
}
</code></pre>
<p>But for result I got this:</p>
<pre><code>{
    &quot;uploadCredentialUrl&quot;: &quot;sv=2021-10-04&amp;spr=https%2Chttp&amp;se=2023-03-24T13%3A36%3A38Z&amp;sr=b&amp;sp=w&amp;sig=JUXXe1Qi13VWipgFWzx70mTOsVqadQCjmIF%2BxRl14cs%3D&quot;,
    &quot;httpsHeaders&quot;: {
        &quot;Content-Type&quot;: &quot;image/jpeg&quot;
    },
    &quot;mediaId&quot;: &quot;0ae4a0c5-167d-4a32-9752-0ad0d2b67e66.JPEG&quot;
}
</code></pre>
<p>The uploadCredentialUrl seems weird and not like an actual URL at all.</p>
<p><strong>Update 1:</strong></p>
<p>Found this <a href=""https://stackoverflow.com/questions/61135060/azure-blob-storage-java-generate-sas-token-always-throw-sr-is-mandatory-cannot"">post</a>. So I changed my code a bit:</p>
<pre><code>    public void getMediaUploadCred(GetMediaUploadCredRequest request, StreamObserver&lt;GetMediaUploadCredResponse&gt; response) {
        try{
            MediaType.Enum mediaType = request.getMediaType();
            Extension.Enum extension = request.getExtension();

            String fileName = String.format(&quot;%s.%s&quot;, UUID.randomUUID(), extension.toString());

            
            log.info(&quot;New Implementations Started&quot;);
            SimpleDateFormat fmt = new SimpleDateFormat(&quot;yyyy-MM-dd&quot;);
            fmt.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));
            Calendar cal = Calendar.getInstance();
            cal.setTime(new Date());
            cal.add(Calendar.DATE, -2);
            String start = fmt.format(cal.getTime());
            cal.add(Calendar.DATE, 4);
            String expiry =  fmt.format(cal.getTime());
            SecretKeySpec secretKey = new SecretKeySpec(Base64.getDecoder().decode(STORAGE_ACCOUNT_KEY), &quot;HmacSHA256&quot;);
            Mac sha256HMAC = Mac.getInstance(&quot;HmacSHA256&quot;);
            sha256HMAC.init(secretKey);
            String  resource =&quot;sc&quot;;
            String permissions =&quot;rwdlac&quot;;
            String service = &quot;b&quot;;
            String apiVersion=&quot;2019-07-07&quot;;
            String stringToSign = STORAGE_ACCOUNT_NAME + &quot;\n&quot; +
                    permissions +&quot;\n&quot; +  // signed permissions
                    service+&quot;\n&quot; + // signed service
                    resource+&quot;\n&quot; + // signed resource type
                    start + &quot;\n&quot; + // signed start
                    expiry + &quot;\n&quot; + // signed expiry
                    &quot;\n&quot; +  // signed IP
                    &quot;https\n&quot;;
            log.info(&quot;string to sign: {}&quot;, stringToSign);

            String signature=Base64.getEncoder().encodeToString(sha256HMAC.doFinal(stringToSign.getBytes(&quot;UTF-8&quot;)));
            String sasToken = &quot;sv=&quot; + apiVersion +
                    &quot;&amp;ss=&quot; + service+
                    &quot;&amp;srt=&quot; + resource+
                    &quot;&amp;sp=&quot; +permissions+
                    &quot;&amp;se=&quot; + URLEncoder.encode(expiry, &quot;UTF-8&quot;) +
                    &quot;&amp;st=&quot; + URLEncoder.encode(start, &quot;UTF-8&quot;) +
                    &quot;&amp;spr=https&quot; +
                    &quot;&amp;sig=&quot; + URLEncoder.encode(signature,&quot;UTF-8&quot;);
            log.info(&quot;sas token: {}&quot;, sasToken);
            String resourceUrl = &quot;https://&quot; + STORAGE_ACCOUNT_NAME + &quot;.blob.core.windows.net/&quot; + CONTAINER_NAME + &quot;?comp=block&amp;&quot; + sasToken;
            
            

            Map&lt;String, String&gt; httpHeaders = new TreeMap&lt;&gt;();
            httpHeaders.put(&quot;Content-Type&quot;, getContentType(mediaType, extension));
            if(!request.getIsPrivate()) {
                httpHeaders.put(&quot;x-amz-acl&quot;, &quot;public-read&quot;);
            }

            GetMediaUploadCredResponse res = GetMediaUploadCredResponse.newBuilder()
                    .setMediaId(&quot;blob id&quot;) // set the blob ID in the response
                    .setUploadCredentialUrl(resourceUrl)
                    .putAllHttpsHeaders(httpHeaders)
                    .build();
            response.onNext(res);
            response.onCompleted();
        } catch (Exception e){}
    }
</code></pre>
<p>And I got a response:</p>
<pre><code>{
    &quot;uploadCredentialUrl&quot;: &quot;https://&lt;STORAGE_ACCOUNT&gt;.blob.core.windows.net/&lt;CONTAINER_NAME&gt;?comp=block&amp;sv=2019-07-07&amp;ss=b&amp;srt=sc&amp;sp=rwdlac&amp;se=2023-03-28&amp;st=2023-03-24&amp;spr=https&amp;sig=RpdV8prUgjzFApNo6bkuuiRAPHnw1mqww5l42cwVwyY%3D&quot;,
    &quot;httpsHeaders&quot;: {
        &quot;Content-Type&quot;: &quot;image/jpeg&quot;
    },
    &quot;mediaId&quot;: &quot;blob id&quot;
}
</code></pre>
<p>But when I tried this:</p>
<pre><code>curl -X PUT -T ~/Downloads/gfx100s_sample_04_thum-1.jpg -H &quot;x-ms-date: $(date -u)&quot; &quot;https://&lt;STORAGE_ACCOUNT&gt;.blob.core.windows.net/&lt;CONTAINER_NAME&gt;/myimage.jpg?comp=block&amp;sv=2019-07-07&amp;ss=b&amp;srt=sc&amp;sp=rwdlac&amp;se=2023-03-28&amp;st=2023-03-24&amp;spr=https&amp;sig=RpdV8prUgjzFApNo6bkuuiRAPHnw1mqww5l42cwVwyY%3D&quot;
</code></pre>
<p>I got this:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;AuthenticationFailed&lt;/Code&gt;&lt;Message&gt;Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.
RequestId:337c6e4d-301e-0019-7ebd-5f3baf000000
Time:2023-03-26T08:30:28.5705948Z&lt;/Message&gt;&lt;AuthenticationErrorDetail&gt;Signature did not match. String to sign used was storageapollodevappstro
rwdlac
b
sc
2023-03-24
2023-03-28

https
2019-07-07
&lt;/AuthenticationErrorDetail&gt;&lt;/Error&gt;%
</code></pre>
<p><strong>Update 2:</strong></p>
<p>I have updated my code following jccampanero guideline:</p>
<pre><code>    @Override
    public void getMediaUploadCred(GetMediaUploadCredRequest request, StreamObserver&lt;GetMediaUploadCredResponse&gt; response) {
        BlobServiceClient blobServiceClient = new BlobServiceClientBuilder().connectionString(STORAGE_ACCOUNT_CONNECTION_STRING).buildClient();
        BlobContainerClient containerClient = blobServiceClient.getBlobContainerClient(CONTAINER_NAME);
        BlobSasPermission permission = new BlobSasPermission().setReadPermission(true).setWritePermission(true);
        OffsetDateTime expiryTime = OffsetDateTime.now().plusMinutes(30);

        String blobName = containerClient.getBlobClient(request.getFileName()).getBlobName();
        String sasToken = generateSasToken(STORAGE_ACCOUNT_NAME, STORAGE_ACCOUNT_KEY, CONTAINER_NAME, blobName, permission, expiryTime);
        String url = String.format(&quot;https://%s.blob.core.windows.net/%s/%s?%s&quot;, STORAGE_ACCOUNT_NAME, CONTAINER_NAME, request.getFileName(), sasToken);
        GetMediaUploadCredResponse res = GetMediaUploadCredResponse.newBuilder()
                .setMediaId(blobName)
                .setUploadCredentialUrl(url)
                .build();
        response.onNext(res);
        response.onCompleted();
    }

    private static String generateSasToken(String accountName, String accountKey, String containerName, String blobName, BlobSasPermission permission, OffsetDateTime expiryTime) {
        String sasToken = null;
        try {
            String signedPermissions = permission.toString();
            String signedStart = OffsetDateTime.now().format(DateTimeFormatter.ISO_OFFSET_DATE_TIME);
            String signedExpiry = expiryTime.format(DateTimeFormatter.ISO_OFFSET_DATE_TIME);
            String canonicalizedResource = String.format(&quot;/blob/%s/%s/%s&quot;, accountName, containerName, blobName);
            String signedVersion = &quot;2020-12-06&quot;;

            String stringToSign = signedPermissions + &quot;\n&quot; +
                    signedStart + &quot;\n&quot; +
                    signedExpiry + &quot;\n&quot; +
                    canonicalizedResource + &quot;\n&quot; +
                    &quot;\n&quot; + // signedKeyObjectId
                    &quot;\n&quot; + // signedKeyTenantId
                    &quot;\n&quot; + // signedKeyStart
                    &quot;\n&quot; + // signedKeyExpiry
                    &quot;\n&quot; + // signedKeyService
                    &quot;\n&quot; + // signedKeyVersion
                    &quot;\n&quot; + // signedAuthorizedUserObjectId
                    &quot;\n&quot; + // signedUnauthorizedUserObjectId
                    &quot;\n&quot; + // signedCorrelationId
                    &quot;\n&quot; + // signedIP
                    &quot;https\n&quot; + // signedProtocol
                    signedVersion + &quot;\n&quot; +
                    &quot;\n&quot; + // signedResource
                    &quot;\n&quot; + // signedSnapshotTime
                    &quot;\n&quot; + // signedEncryptionScope
                    &quot;\n&quot; + // rscc
                    &quot;\n&quot; + // rscd
                    &quot;\n&quot; + // rsce
                    &quot;\n&quot; + // rscl
                    &quot;\n&quot;; // rsct

            Mac mac = Mac.getInstance(&quot;HmacSHA256&quot;);
            mac.init(new SecretKeySpec(Base64.getDecoder().decode(accountKey), &quot;HmacSHA256&quot;));
            String signature = Base64.getEncoder().encodeToString(mac.doFinal(stringToSign.getBytes(&quot;UTF-8&quot;)));
            sasToken = String.format(&quot;sv=%s&amp;st=%s&amp;se=%s&amp;sr=b&amp;sp=%s&amp;sig=%s&quot;,
                    signedVersion, signedStart, signedExpiry, permission.toString(), URLEncoder.encode(signature, &quot;UTF-8&quot;));
        } catch (Exception e) {
            e.printStackTrace();
        }
        return sasToken;
    }
</code></pre>
<p>And running the CURL command:</p>
<pre><code>curl -X PUT \
  -T ~/Downloads/gfx100s_sample_04_thum-1.jpg \
  -H &quot;x-ms-blob-type: BlockBlob&quot; \
  -H &quot;x-ms-meta-name: example&quot; \
  &quot;&lt;URL-with sas token&gt;&quot;
</code></pre>
<p>gives me:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;&lt;Error&gt;&lt;Code&gt;AuthenticationFailed&lt;/Code&gt;&lt;Message&gt;Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.
RequestId:124d92c4-101e-001e-189f-6157cc000000
Time:2023-03-28T18:02:50.6977457Z&lt;/Message&gt;&lt;AuthenticationErrorDetail&gt;Signature fields not well formed.&lt;/AuthenticationErrorDetail&gt;&lt;/Error&gt;%
</code></pre>
<p>But I followed the Signature fields from <a href=""https://learn.microsoft.com/en-us/rest/api/storageservices/create-user-delegation-sas#version-2020-12-06-and-later"" rel=""noreferrer"">docs</a>. So why am I still getting the error?</p>
<p><strong>Update 3:</strong></p>
<pre><code>        BlobServiceClient blobServiceClient = new BlobServiceClientBuilder().connectionString(STORAGE_ACCOUNT_CONNECTION_STRING).buildClient();
        BlobContainerClient containerClient = blobServiceClient.getBlobContainerClient(CONTAINER_NAME);

        OffsetDateTime expiryTime = OffsetDateTime.now().plusMinutes(30);
        BlobClient blobClient = blobServiceClient.getBlobContainerClient(CONTAINER_NAME)
                .getBlobClient(request.getFileName());
        BlobSasPermission permission = new BlobSasPermission().setReadPermission(true).setWritePermission(true);
        BlobServiceSasSignatureValues sasValues = new BlobServiceSasSignatureValues(expiryTime, permission);
        String sasToken = blobClient.generateSas(sasValues);

        String blobName = containerClient.getBlobClient(request.getFileName()).getBlobName();
        log.info(sasToken);
        String url = String.format(&quot;https://%s.blob.core.windows.net/%s/%s?%s&quot;, STORAGE_ACCOUNT_NAME, CONTAINER_NAME, request.getFileName(), sasToken);
        GetMediaUploadCredResponse res = GetMediaUploadCredResponse.newBuilder()
                .setMediaId(blobName)
                .setUploadCredentialUrl(url)
                .build();
</code></pre>
<p>Error:</p>
<pre><code>Server failed to authenticate the request. Make sure the value of Authorization header is formed correctly including the signature.
</code></pre>
",
tags:"<java><azure><maven><azure-blob-storage>",
score:8,
creationDate:2023-03-24 12:52:21,
creationDate:2023-03-27 22:05:26,
score:6,
acceptedResponderReputation:53381,
acceptedResponder:13942448,
QuestionerReputation:527,
Questioner:19231322}
{title:"Fonts not loading in Vite + React",
id:"https://stackoverflow.com/questions/77212739",
body:"<p>I'm trying to switch over from CRA to Vite to build my React projects, and I'm running into an issue where I can't get my fonts to load at all. The browser gives me the following error.</p>
<pre><code>GET
http://localhost:5173/assets/fonts/Roboto-Regular.woff
[HTTP/1.1 404 Not Found 1ms]

downloadable font: download failed (font-family: &quot;Roboto&quot; style:normal weight:400 stretch:100 src index:0): status=2147746065 source: http://localhost:5173/assets/fonts/Roboto-Regular.woff
</code></pre>
<p>These are the font face rules I'm using.</p>
<pre class=""lang-scss prettyprint-override""><code>// _fonts.scss
@font-face {
  font-family: &quot;Roboto&quot;;
  src: url(&quot;../../assets/fonts/Roboto-Regular.woff&quot;) format(&quot;woff&quot;);
  font-weight: 400;
}
</code></pre>
<p>And this is my index.scss file.</p>
<pre class=""lang-scss prettyprint-override""><code>@use &quot;./styles/partials/fonts&quot; as *;

body {
  font-family: &quot;Roboto&quot;, Arial, Helvetica, sans-serif;
}
</code></pre>
<p>I thought it might be my folder structure, but that's not it either. I'm really confused as to why my fonts are loading when I do <code>npm run dev</code> and I've even tried to replicate the issue in a CRA project with no success at all.</p>
<p><a href=""https://i.sstatic.net/rcAHW.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/rcAHW.png"" alt=""Project Folder Structure"" /></a></p>
",
tags:"<javascript><css><reactjs><fonts><vite>",
score:9,
creationDate:2023-10-02 00:06:19,
creationDate:2023-10-02 04:44:23,
score:6,
acceptedResponderReputation:391,
acceptedResponder:1882858,
QuestionerReputation:391,
Questioner:1882858}
{title:"Proxy is not working in Vite js project and request is not getting redirected to the proper api",
id:"https://stackoverflow.com/questions/76921210",
body:"<p>I have a basic MERN stack application which I have deployed using vercel. <br>
The frontend is at &quot;https://ticketify-silk.vercel.app/&quot;. <br>
The backend is at &quot;https://ticketify-api.vercel.app/&quot;. <br></p>
<hr>
In the frontend code, I have used vite and also proxy to fetch data from api. Following is the code in the vite config file.
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>import { defineConfig } from ""vite"";
import react from ""@vitejs/plugin-react"";

// https://vitejs.dev/config/
export default defineConfig({
  server: {
    proxy: {
        '/api': {
          target: 'https://ticketify-api.vercel.app',
          changeOrigin: true,
          secure: false,
          rewrite: (path) =&gt; path.replace(/^\/api/, '')
        }
      },
  },
  plugins: [react()],
});</code></pre>
</div>
</div>
</p>
<p>In the backend code as well, I have defined the following code to avoid the CORS error.</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>app.use(
  cors({
    origin: [""https://ticketify-silk.vercel.app""],
    methods: [""GET"", ""POST"", ""PUT"", ""UPDATE""],
    credentials: true,
    allowedHeaders: [""Content-Type"", ""Authorization""],
  })
);</code></pre>
</div>
</div>
</p>
<p>When I send a request from the frontend, instead of going to &quot;https://ticketify-api.vercel.app/&quot; it is going to &quot;https://ticketify-silk.vercel.app/&quot;. This is the error that I am getting -&gt;</p>
<p><a href=""https://i.sstatic.net/6fp1V.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/6fp1V.png"" alt=""enter image description here"" /></a></p>
<p>So basically, the proxy is not working. And everything is running fine in my local environment, where the frontend is at &quot;http://localhost:5173&quot; and backend is at &quot;http://localhost:8080&quot;.</p>
<p>Could anyone please suggest a solution? I already tried <a href=""https://stackoverflow.com/q/73267938"">proxy api is not working in Vite + Vue 3 project when it&#39;s deployed to Vercel</a>, but the solutions did not work for me. Can the issue be solved by any changes to the vercel.json file? I am not sure about it because I am deploying using vercel for the first time.</p>
",
tags:"<javascript><reactjs><proxy><vite><mern>",
score:6,
creationDate:2023-08-17 11:46:04,
creationDate:2023-12-25 09:05:38,
score:6,
acceptedResponderReputation:76,
acceptedResponder:23154098,
QuestionerReputation:155,
Questioner:13738155}
{title:"JavaFX show tooltip in a fixed position relative to the node",
id:"https://stackoverflow.com/questions/76964928",
body:"<p><strong>Goal:</strong> To make ToolTip always show in the bottom-right position of the node</p>
<p><strong>Problem:</strong> Regardless my efforts, I'm unable to override or adapt ToolTip behavior. It always shows up based on the mouse position.</p>
<p><strong>MRE:</strong></p>
<pre><code>import javafx.application.Application;
import javafx.geometry.Point2D;
import javafx.scene.Scene;
import javafx.scene.control.Label;
import javafx.scene.control.Tooltip;
import javafx.scene.layout.AnchorPane;
import javafx.stage.Stage;
import javafx.util.Duration;

public class HelloApplication extends Application {

    @Override
    public void start(Stage stage) {
        Label label = new Label(&quot;TEST\nTEST\nTEST&quot;);
        label.setStyle(&quot;-fx-background-color: green;&quot;);

        Tooltip tooltip = new Tooltip(&quot;TOOLTIP&quot;);
        tooltip.setShowDelay(Duration.seconds(0.5));
        label.setTooltip(tooltip);

        Scene scene = new Scene(new AnchorPane(label));
        stage.setScene(scene);
        
        stage.show();

        Point2D p = label.localToScene(0.0, 0.0);
        label.getTooltip().show(label,
                p.getX() + label.getScene().getX() + label.getScene().getWindow().getX(),
                p.getY() + label.getScene().getY() + label.getScene().getWindow().getY());
    }

    public static void main(String[] args) {
        launch();
    }
}
</code></pre>
<p>To make it clearer, this is what I'm looking for:</p>
<p><a href=""https://i.sstatic.net/V3b18.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/V3b18.png"" alt=""enter image description here"" /></a></p>
<p>Instead, ToolTip always shows on top of the node:</p>
<p><a href=""https://i.sstatic.net/EwKyh.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/EwKyh.png"" alt=""enter image description here"" /></a></p>
",
tags:"<java><javafx>",
score:6,
creationDate:2023-08-23 21:14:41,
creationDate:2023-08-24 00:29:19,
score:6,
acceptedResponderReputation:9869,
acceptedResponder:5844477,
QuestionerReputation:457,
Questioner:8336150}
{title:"How to limit the number of Spring @Async tasks with virtual threads enabled",
id:"https://stackoverflow.com/questions/77825075",
body:"<p>I have an @Async task executing some database related background work. After enabling virtual threads (<code>spring.threads.virtual.enabled: true</code>) the number of Async jobs executed in parallel is no longer limited. The result is an exhausted database connection pool. When virtual threads is disabled only 8 (default) jobs are executed in parallel so less database connections are used.</p>
<p>What would be the recommended approach to solve this problem?</p>
<blockquote>
<p>org.apache.tomcat.jdbc.pool.PoolExhaustedException: [task-49889]
Timeout: Pool empty. Unable to fetch a connection in 30 seconds, none
available[size:100; busy:100; idle:0; lastwait:30000]</p>
</blockquote>
<pre><code>@Component
@RequiredArgsConstructor
public class TestTask {

    private final MyRepository myRepository;
    @Async
    public void execute() {
        // some database calls.
        myRepository.doSomething();
    }
}
</code></pre>
<p>When executing 200 tasks the pool is exhausted.</p>
<pre><code>IntStream.range(1, 200).forEach(value -&gt; testTask.execute());
</code></pre>
<p>I'm using Java 21 with Spring Boot 3.2.1.</p>
",
tags:"<spring><spring-boot><spring-async><java-21><virtual-threads>",
score:6,
creationDate:2024-01-16 10:31:23,
creationDate:2024-01-16 12:30:25,
score:6,
acceptedResponderReputation:124441,
acceptedResponder:2696260,
QuestionerReputation:5487,
Questioner:1433372}
{title:"Replacing ListenableFuture with CompletableFuture in Kafka producer/consumer",
id:"https://stackoverflow.com/questions/77951258",
body:"<p>I'm migrating to <code>spring-kafka</code> 3.1. One of the things I've noticed was</p>
<pre><code>    ListenableFuture&lt;SendResult&lt;String, Object&gt;&gt; future = kafkaTemplate.send(message);

    future.addCallback(new ListenableFutureCallback&lt;SendResult&lt;String, Object&gt;&gt;() {
        @Override
        public void onSuccess(SendResult&lt;String, Object&gt; result) {
            log.info(&quot;Sent message=[&quot; + payload +
                    &quot;] with offset=[&quot; + result.getRecordMetadata()
                    .offset() + &quot;]&quot;);
        }

        @Override
        public void onFailure(Throwable ex) {
            log.info(&quot;Unable to send message=[&quot;
                    + message + &quot;] due to : &quot; + ex.getMessage());
        }
    });
    return future.get()
            .getRecordMetadata()
            .partition() + &quot;-&quot; + future.get()
            .getRecordMetadata()
            .offset();
</code></pre>
<p><code>ListenableFuture</code> was deprecated in Spring 6, replaced with <code>CompletableFuture</code>. However, there's no <code>addCallBack</code> method with <code>CompletableFuture</code>. What would be the correct way to fix the above callback, in order to be backwards compatible?</p>
",
tags:"<java><spring><spring-boot><apache-kafka><spring-kafka>",
score:6,
creationDate:2024-02-06 22:45:54,
creationDate:2024-02-07 07:36:48,
score:6,
acceptedResponderReputation:14999,
acceptedResponder:2837741,
QuestionerReputation:10961,
Questioner:1040718}
{title:"Longest Repeating Subarray (With Overlapping)",
id:"https://stackoverflow.com/questions/77856631",
body:"<p>Given an array of arbitrary numbers, I am looking to quickly [with time and space complexity lower than O(n²) at minimum, n = length of array] find the longest subarray (a contiguous segment of elements within array) that is repeated (appears more than once, or at least twice).<br />
Please don't assume any bounds on the numbers in the array apart from all the values are valid JavaScript numbers and <code>isFinite</code> is true for every number in the array.</p>
<p>Overlapping is allowed, that is partial occurrences of a subarray within itself is allowed. for ex, in the array <code>[1, 2, 1, 2, 1, 2]</code> the longest repeating subarray is <code>[1, 2, 1, 2]</code>. Look here</p>
<pre><code>[1, 2, 1, 2, 1, 2]
^         ^        occurrence #1
       ^        ^  occurrence #2
</code></pre>
<p>The two occurrences overlap, but that is a-ok as long as the two occurrence differ in either starting or ending index.</p>
<p>In case there are multiple distinct repeated subarrays that all have the longest length, the answer can be any of them. However, I suspect that any way that can find one answer can find all of them with the same ease.<br />
A sample for this scenario is the array <code>[1, 1, 2, 2]</code>. The subarray <code>[1]</code> and <code>[2]</code> both appear twice. Either of those may be returned as the result.</p>
<p>Finally, if no subarray occurs more than once, the answer is <code>[]</code> (the empty array).</p>
<p>I recently came across the question <a href=""https://stackoverflow.com/questions/77828008/find-repeat-sequence-in-an-array"">Find Repeat Sequence in an Array</a> but all the answers there are ridiculously slow. Everyone's using o(n³) solutions, with only one answer in o(n²).</p>
<p>I'm seeking a method that can handle arrays with length up to a couple hundred thousand (100,000) in a few seconds. Sub quadratic time complexity at least. It'd be great if you can provide a sample implementation in JS of the solution too because my understanding of some data structures is not that solid</p>
<p>Sorry for the long question, let me know if anything is unclear. If you have an idea but not a full solution just drop it in the comments, it can still be helpful to me.</p>
<p>I made some more examples if it helps:</p>
<div class=""s-table-container"">
<table class=""s-table"">
<thead>
<tr>
<th>Array</th>
<th>Result</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>[1, 2, 5, 7, 1, 2, 4, 5]</code></td>
<td><code>[1, 2]</code></td>
</tr>
<tr>
<td><code>[9, 7, 0, 1, 6, 3, 6, 5, 2, 1, 6, 3, 8, 3, 6, 1, 6, 3]</code></td>
<td><code>[1, 6, 3]</code></td>
</tr>
<tr>
<td><code>[1, 2, 1, 2, 7, 0, -1, 7, 0, -1]</code></td>
<td><code>[7, 0, -1]</code></td>
</tr>
<tr>
<td><code>[1, 1, 1, 1]</code></td>
<td><code>[1, 1, 1]</code></td>
</tr>
<tr>
<td><code>[1, 1, 1]</code></td>
<td><code>[1, 1]</code></td>
</tr>
<tr>
<td><code>[1, 2, 3, 4, 2, 5]</code></td>
<td><code>[2]</code></td>
</tr>
<tr>
<td><code>[1, 2, 3, 4, 5]</code></td>
<td><code>[]</code></td>
</tr>
<tr>
<td><code>[1, 6, 2, 1, 6, 2, 1, 5]</code></td>
<td><code>[1, 6, 2, 1]</code></td>
</tr>
</tbody>
</table>
</div>
<p>Here's a function to generate large test case with array size 100,000 for reference, the answer is [1, 2, 3, ..., 100] (the 100 consecutive integers from 1 to 100)</p>
<pre><code>function make_case() {
    let array = [];
    let number = 200;
    for (let i = 0; i &lt; 500; i++) {
        array.push(number); array.push(number);
        number++;
    }
    for (let i = 1; i &lt; 101; i++) {
        array.push(i);
    }
    for (let i = 0; i &lt; 1700; i++) {
        array.push(number); array.push(number);
        number++;
    }
    for (let i = 1; i &lt; 101; i++) {
        array.push(i);
    }
    for (let i = 0; i &lt; (100_000 - 500 * 2 - 100 - 1700 * 2 - 100) / 2; i++) {
        array.push(number); array.push(number);
        number++;
    }
    return array;
}
</code></pre>
<p>Another important case is <code>new Array(100_000).fill(0)</code>, the answer is the array with 99,999 zeros.</p>
",
tags:"<javascript><arrays><algorithm><time-complexity>",
score:8,
creationDate:2024-01-21 21:01:13,
creationDate:2024-01-22 03:29:12,
score:6,
acceptedResponderReputation:89139,
acceptedResponder:9513184,
QuestionerReputation:326,
Questioner:23274861}
{title:"After update of Vue 3 withDefaults throws a TypeScript error",
id:"https://stackoverflow.com/questions/76322580",
body:"<p>I'm trying to update version of Vue 3 (<code>3.2.x</code> -&gt; <code>3.3.x</code>).</p>
<p>But for some reason I have an error when using <code>withDefaults</code>:</p>
<pre class=""lang-js prettyprint-override""><code>&lt;script setup lang=&quot;ts&quot;&gt;
interface Props {
  readonly title: string;
}

// THIS WORKS
const props = defineProps&lt;Props&gt;(); 

// THIS DOESN'T WORK (guess because of withDefaults)
const props = withDefaults(defineProps&lt;Props&gt;(), { title: '' });
...
&lt;/script&gt;
</code></pre>
<p>The error message is:</p>
<blockquote>
<p>Argument type <code>DefineProps&lt;Props, BooleanKey&lt;Props&gt;&gt;</code> is not assignable to parameter type <code>DefineProps&lt;Readonly&lt;Props&gt; &amp; {}, keyof Readonly&lt;Props&gt; &amp; {}&gt;</code></p>
</blockquote>
<p>I guess I'm doing this exactly how it's <a href=""https://vuejs.org/guide/typescript/composition-api.html#typing-component-props"" rel=""noreferrer"">described in docs</a>, what's the problem here?</p>
<hr />
<p><strong>Update</strong>: Looks like this issue happens only for non-boolean fields:</p>
<pre class=""lang-js prettyprint-override""><code>
// THIS WORKS
withDefaults(defineProps&lt;{readonly foo: boolean}&gt;(), { foo: true });


// THIS DOESN'T WORK
withDefaults(defineProps&lt;{readonly foo: string}&gt;(), { foo: 'foo' });
</code></pre>
",
tags:"<javascript><typescript><vue.js><vuejs3><webstorm>",
score:6,
creationDate:2023-05-24 10:35:00,
creationDate:2023-06-21 12:05:35,
score:6,
acceptedResponderReputation:93728,
acceptedResponder:2274212,
QuestionerReputation:2301,
Questioner:16280429}
{title:"Mocking axios.create using vitest",
id:"https://stackoverflow.com/questions/76072066",
body:"<p>I am using <code>axios.create</code> method to create and configure <code>axios</code> instance. And I can't get it to work in tests with <code>vi.fn()</code> so I cannot assert if endpoint was called.</p>
<p>workaround for tests to be able to return data from api calls looks like</p>
<pre><code>  return {
    AxiosInstance: {},
    AxiosRequestConfig: {},
    default: {
      post: vi.fn(),
      create: vi.fn(() =&gt; {
        return {
          post: (url: string, config: object) =&gt; {
            return Promise.resolve({ status: 200 });
          },
          get: (url: string, config: object) =&gt; {
            return Promise.resolve({ status: 200 });
          },
          interceptors: {
            request: {
              use: vi.fn(),
              eject: vi.fn(),
            },
            response: {
              use: vi.fn(),
              eject: vi.fn(),
            },
          },
        };
      }),
    },
  };
});
</code></pre>
<p>But would like to use something like</p>
<pre><code>    (axios.get as MockedFunction&lt;typeof axios.get&gt;).mockImplementationOnce(
      () =&gt; promise
    );
</code></pre>
<p>maybe someone mocked <code>axios.create</code> using <code>vitest</code> and could share configuration?</p>
",
tags:"<javascript><typescript><axios><vitest>",
score:6,
creationDate:2023-04-21 09:59:19,
creationDate:2023-07-03 17:06:12,
score:6,
acceptedResponderReputation:363,
acceptedResponder:18913031,
QuestionerReputation:1056,
Questioner:1955569}
{title:"Understanding Playwright locator Promises",
id:"https://stackoverflow.com/questions/76155060",
body:"<p>So im trying to figure out/explain why a piece of code works the way it does. Im familiar with async for the most part and understand how promises work on a basic level, but I am trying to explain why a block of code works the way it does in Playwright.</p>
<pre><code>import { test, expect } from &quot;@playwright/test&quot;;

test.only(&quot;Basic Login&quot;, async ({ page }) =&gt; {
  //Basic test that demonstrates logging into a webpage
  await page.goto(&quot;/&quot;);
  page
    .getByPlaceholder(&quot;Email Address&quot;)
    .fill(&quot;foo@email.com&quot;);
  await page.getByPlaceholder(&quot;Password&quot;).fill(&quot;bar&quot;);
  await page.getByRole(&quot;button&quot;, { name: &quot;Sign In&quot; }).click();
  await expect(page).toHaveTitle(&quot;The Foobar Page&quot;);
});
</code></pre>
<p>So obviously this will not work, because the first &quot;fill&quot; for email address input isn't <code>await</code>ing. Currently the behavior is it fills in the password field with both the email and password strings together (I assume, I can't see it because it's a password field, but the number of <code>*</code>'s is longer so I assume it's putting both <code>fill</code> strings into the password field.</p>
<p>However I can't really understand why. <code>getByPlaceholder</code> will keep retrying until it fails.  and I also believe <code>fill</code> waits for checks (IE: the field is fillable/visible/etc...)</p>
<p>However Playwright specifically doesn't state whether these return promises specifically. I ASSUME they do but the docs don't specifically say.</p>
<p>So what is actually going on here step by step? I can't really &quot;walk&quot; my way through it, so it makes it difficult to explain to others. As in I understand why it doesn't work on a high level, but not exactly why it doesn't work in detail.</p>
<p>This also leads me to a side question: Does Playwright wait for BOTH promises when chaining functions? Or only the last one?</p>
",
tags:"<javascript><async-await><playwright>",
score:6,
creationDate:2023-05-02 12:53:48,
creationDate:2023-05-02 15:25:17,
score:6,
acceptedResponderReputation:56855,
acceptedResponder:6243352,
QuestionerReputation:3229,
Questioner:5065860}
{title:"Actuator endpoints returning 500 error after upgrade to spring boot 3",
id:"https://stackoverflow.com/questions/77710370",
body:"<p>I am upgrading a service from spring boot 2.7 to 3.2.0 and bumping into an issue where I get an <code>HTTP Status 500 – Internal Server Error</code> error when accessing actuator endpoints.</p>
<p>Looking at the stack trace I can see that when accessing an actuator endpoint via port 9090 the <code>org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry.DispatcherServletDelegatingRequestMatcher#matcher</code> method fails to find the <code>dispatcherServletRegistration</code> in the <code>this.servletContext.getServletRegistration(name);</code> call.</p>
<p>When accessing normal app endpoints on port 8080, I can see that it finds it just fine.</p>
<p>This is my actuator configuration, besides the <code>defaults</code> update it is unchanged from my spring-boot 2.7 config.</p>
<pre><code>management:
  defaults:
    metrics:
      export:
        enabled: true
  endpoints:
    web:
      exposure:
        include: '*'
  info:
    build:
      enabled: true
  endpoint:
    health:
      show-details: when_authorized
  server:
    port: 9090

</code></pre>
<p>During start-up logs seem to indicate that things are setup ok</p>
<pre><code>2023-12-23T21:36:28.729 [main] [] INFO  o.a.coyote.http11.Http11NioProtocol.log - Starting ProtocolHandler [&quot;http-nio-8080&quot;]
2023-12-23T21:36:28.755 [main] [] INFO  o.s.b.w.e.tomcat.TomcatWebServer.start - Tomcat started on port 8080 (http) with context path ''
HOTSWAP AGENT: 21:36:28.756 INFO (org.hotswap.agent.plugin.spring.SpringPlugin) - Spring plugin initialized - Spring core version '6.1.1'
2023-12-23T21:36:28.813 [main] [] INFO  o.s.b.w.e.tomcat.TomcatWebServer.initialize - Tomcat initialized with port 9090 (http)
2023-12-23T21:36:28.813 [main] [] INFO  o.a.coyote.http11.Http11NioProtocol.log - Initializing ProtocolHandler [&quot;http-nio-9090&quot;]
2023-12-23T21:36:28.813 [main] [] INFO  o.a.catalina.core.StandardService.log - Starting service [Tomcat]
2023-12-23T21:36:28.813 [main] [] INFO  o.a.catalina.core.StandardEngine.log - Starting Servlet engine: [Apache Tomcat/10.1.16]
</code></pre>
<p>(No difference if starting it up without the hotswap agent)</p>
<p>Quite a lot of other spring-boot 2-&gt;3 migration done, perhaps I missed something (perhaps spring-security related)?</p>
<p>Any advice on what the issue might be or how to troubleshoot it greatly appreciated.</p>
<p>Edit1: this is the stack trace when accessing e.g. localhost:9090/actuator</p>
<pre><code>java.lang.IllegalArgumentException: Failed to find servlet [dispatcherServletRegistration] in the servlet context
    org.springframework.util.Assert.notNull(Assert.java:172)
    org.springframework.security.config.annotation.web.AbstractRequestMatcherRegistry$DispatcherServletDelegatingRequestMatcher.matcher(AbstractRequestMatcherRegistry.java:529)
    org.springframework.security.web.access.intercept.RequestMatcherDelegatingAuthorizationManager.check(RequestMatcherDelegatingAuthorizationManager.java:79)
    org.springframework.security.web.access.intercept.RequestMatcherDelegatingAuthorizationManager.check(RequestMatcherDelegatingAuthorizationManager.java:48)
    org.springframework.security.authorization.ObservationAuthorizationManager.check(ObservationAuthorizationManager.java:63)
    org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:95)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
    org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126)
    org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
    org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
    org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
    org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:145)
    org.springframework.security.web.authentication.rememberme.RememberMeAuthenticationFilter.doFilter(RememberMeAuthenticationFilter.java:101)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
    org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
    org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
    org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
    org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
    org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227)
    org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
    org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107)
    org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
    org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
    org.springframework.security.web.csrf.CsrfFilter.doFilterInternal(CsrfFilter.java:117)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
    org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
    org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
    org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
    org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90)
    org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
    org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
    org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82)
    org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
    org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
    org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:227)
    org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
    org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42)
    org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.wrapFilter(ObservationFilterChainDecorator.java:240)
    org.springframework.security.web.ObservationFilterChainDecorator$AroundFilterObservation$SimpleAroundFilterObservation.lambda$wrap$0(ObservationFilterChainDecorator.java:323)
    org.springframework.security.web.ObservationFilterChainDecorator$ObservationFilter.doFilter(ObservationFilterChainDecorator.java:224)
    org.springframework.security.web.ObservationFilterChainDecorator$VirtualFilterChain.doFilter(ObservationFilterChainDecorator.java:137)
    org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233)
    org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191)
    org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352)
    org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268)

</code></pre>
<p>Edit2:</p>
<p>Created a brand new Spring Initilizer project and see the following differences which look relevant, but not yet sure why.</p>
<p>Spring Initilizer new project:</p>
<pre><code>2023-12-26T18:23:07.912Z  INFO 43176 --- [2)-192.168.0.31] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-26T18:23:07.912Z  INFO 43176 --- [2)-192.168.0.31] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServlet'
2023-12-26T18:23:07.913Z  INFO 43176 --- [2)-192.168.0.31] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
2023-12-26T18:23:13.567Z  INFO 43176 --- [nio-9090-exec-1] o.a.c.c.C.[Tomcat-1].[localhost].[/]     : Initializing Spring DispatcherServlet 'dispatcherServletRegistration'
2023-12-26T18:23:13.567Z  INFO 43176 --- [nio-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Initializing Servlet 'dispatcherServletRegistration'
2023-12-26T18:23:13.567Z  INFO 43176 --- [nio-9090-exec-1] o.s.web.servlet.DispatcherServlet        : Completed initialization in 0 ms
</code></pre>
<p>My app</p>
<pre><code>2023-12-26T18:24:40.958 [RMI TCP Connection(4)-192.168.0.31] [] INFO  o.a.c.c.C.[Tomcat].[localhost].[/].log - Initializing Spring DispatcherServlet 'dispatcherServlet'
2023-12-26T18:24:40.958 [RMI TCP Connection(4)-192.168.0.31] [] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Initializing Servlet 'dispatcherServlet'
2023-12-26T18:24:40.960 [RMI TCP Connection(4)-192.168.0.31] [] INFO  o.s.web.servlet.DispatcherServlet.initServletBean - Completed initialization in 1 ms
</code></pre>
<p>Cheers,
Mike</p>
",
tags:"<java><spring-boot><spring-boot-actuator><spring-boot-3>",
score:9,
creationDate:2023-12-24 10:51:20,
creationDate:2024-01-02 10:39:56,
score:6,
acceptedResponderReputation:258,
acceptedResponder:3632426,
QuestionerReputation:258,
Questioner:3632426}
{title:"Nullability of an array in Eclipse",
id:"https://stackoverflow.com/questions/77809202",
body:"<p>suggest the following code in Eclipse 4.30:</p>
<pre><code>    public void doSomething(@NonNull SomeType[] pArray) {
       // Whatever
    }
</code></pre>
<p>If I enable checks for nullability (Preferences/Java Compiler/&quot;Errors/Warnings&quot;/Null analysis/Enable annotation based null-analysis), then I notice the following:</p>
<p>The Compiler takes the parameter type as &quot;an array of SomeType elements, all of which are non-null&quot;, or in other words an array of @NonNull SomeType. (If you don't believe me, change SomeType to byte, and notice the error message, because byte is a primitive type, so @NonNull byte makes no sense.)</p>
<p>Which is all very well. However, I would like to tell the compiler, that the array itself is non-null. Is there any possibility to express this? (Let's say @NonNull (SomeType[]) pArray.)</p>
<p>Thanks!</p>
",
tags:"<java>",
score:7,
creationDate:2024-01-12 20:39:34,
creationDate:2024-01-12 22:19:42,
score:6,
acceptedResponderReputation:102795,
acceptedResponder:768644,
QuestionerReputation:1053,
Questioner:1774051}
{title:"reduce styled-component className length in next",
id:"https://stackoverflow.com/questions/76034241",
body:"<p>When using <code>styled-components</code> in <strong>Next</strong> with <strong>React</strong>, it can become challenging to ensure that the styled components render correctly. To address this issue, <strong>Next</strong> supplies the <code>compiler.styledComponents</code> flag
in <code>next.config.js</code> as follows:</p>
<pre><code>compiler: {
    styledComponents: true
}
</code></pre>
<p>However, when this flag is enabled, it leads to the class names becoming unreadable as they increase in size <em>exponentially</em>.</p>
<p>The following images illustrate the difference in class names between when <code>compiler.styledComponents</code> is disabled and when it is enabled.</p>
<p>When <code>compiler.styledComponents</code> <em>is not</em> set:</p>
<p><a href=""https://i.sstatic.net/apfrR.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/apfrR.png"" alt=""before"" /></a></p>
<p>When <code>compiler.styledComponents</code> <em>is</em> set:</p>
<p><a href=""https://i.sstatic.net/MxQal.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/MxQal.png"" alt=""after"" /></a></p>
<p>Is there a way to reduce the class name sizes to just their regular <code>sc-XXXXXX</code> names?</p>
<p>I should note that we're <em>not</em> using the latest version of <strong>Next</strong>, but instead <code>next@12.3.4</code></p>
",
tags:"<javascript><reactjs><next.js><styled-components>",
score:6,
creationDate:2023-04-17 10:37:00,
creationDate:2023-04-21 17:57:09,
score:6,
acceptedResponderReputation:5065,
acceptedResponder:4709300,
QuestionerReputation:4378,
Questioner:6425936}
{title:"Legacy vs canonical Logback configuration",
id:"https://stackoverflow.com/questions/78357841",
body:"<p>When looking through <a href=""https://logback.qos.ch/manual/configuration.html"" rel=""noreferrer"">Chapter 3</a> of the <strong>Logback manual</strong>, I've noticed that the configuration examples come in three varieties: <strong>Legacy</strong>, <strong>Canonical (1.3)</strong> and <strong>Tyler</strong>.</p>
<p>The manual stays pretty much <em>silent</em> about these options. So I wonder now what are these, and of their purpose and use cases.</p>
<p>I've only ever seen the <strong>Legacy</strong> option in practice and this is the one I use since it's the most succinct. The <strong>Canonical</strong> option adds a bit of boilerplate (<code>&lt;import&gt;</code>ing Java classes) and a weird <code>&lt;!DOCTYPE&gt;</code> declaration. (Note a note later on that the configuration syntax is so flexible that it's impossible to define a DTD schema for it. Why <code>&lt;!DOCTYPE&gt;</code> then?)</p>
",
tags:"<java><xml><logback><doctype>",
score:6,
creationDate:2024-04-20 10:18:57,
creationDate:2024-04-29 17:25:14,
score:6,
acceptedResponderReputation:5075,
acceptedResponder:2846138,
QuestionerReputation:1242,
Questioner:17695211}
{title:"What is the design philosophy behind Promise.reject(reason) wrapping the reason with a Promise while Promise.resolve() not doing so?",
id:"https://stackoverflow.com/questions/76900981",
body:"<p>So I was reading the article on <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Promise/reject"" rel=""noreferrer"">MDN</a> about Promises and got stuck here:</p>
<blockquote>
<p>Unlike Promise.resolve(), Promise.reject() always wraps reason in a new Promise object, even when reason is already a Promise.</p>
</blockquote>
<p>I'm just trying to understand what difference it makes in coding. What would happen if <code>Reject</code> doesn't wrap the <code>reason</code> with another Promise just as <code>resolve</code> does and how exactly this simplifies the usage.</p>
<p>Appreciate some hypothetical examples.</p>
",
tags:"<javascript><promise>",
score:6,
creationDate:2023-08-14 17:23:29,
creationDate:2023-08-14 18:11:48,
score:6,
acceptedResponderReputation:21926,
acceptedResponder:3757232,
QuestionerReputation:5205,
Questioner:4650975}
{title:"Which exact classes are loaded by Platform ClassLoader?",
id:"https://stackoverflow.com/questions/76699669",
body:"<p>Let's assume, we're using OpenJDK 20. The <a href=""https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ClassLoader.html#builtinLoaders"" rel=""noreferrer"">official documentation says</a>:</p>
<blockquote>
<p>The <a href=""https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ClassLoader.html#getPlatformClassLoader()"" rel=""noreferrer"">platform class loader</a> is responsible for loading the platform classes. Platform classes include Java SE platform APIs, their implementation classes, and JDK-specific run-time classes that are defined by the platform class loader or its ancestors. The platform class loader can be used as the parent of a <code>ClassLoader</code> instance.</p>
</blockquote>
<p>At the same time, I understood from the Oracle specification that Bootstrap ClassLoader loads the core runtime classes <strong>required</strong> to start the JVM. I also understood that Platform ClassLoader does not load anything into an empty program:</p>
<pre class=""lang-bash prettyprint-override""><code>jshell&gt; ClassLoader.getPlatformClassLoader().getDefinedPackages();
$1 ==&gt; Package[0] { }
</code></pre>
<p>But it loads <strong>some</strong> packages from Java SE, like <code>java.sql</code>:</p>
<pre class=""lang-bash prettyprint-override""><code>jshell&gt; java.sql.Connection.class.getClassLoader()
$2 ==&gt; jdk.internal.loader.ClassLoaders$PlatformClassLoader@27fa135a

jshell&gt; ClassLoader.getPlatformClassLoader().getDefinedPackages()
$3 ==&gt; Package[1] { package java.sql }
</code></pre>
<p>And some not (like <code>java.util.logging</code>, as the same child of <a href=""https://docs.oracle.com/en/java/javase/20/docs/api/java.se/module-summary.html"" rel=""noreferrer"">java-se module</a>):</p>
<pre class=""lang-bash prettyprint-override""><code>jshell&gt; java.util.logging.ConsoleHandler.class.getClassLoader();
$4 ==&gt; null
</code></pre>
<p>Am I correct in stating that Platform ClassLoader loads the public types of system modules that a developer <strong>might</strong> need? If so, which specific packages (or better ask, modules?) fall under this &quot;might&quot;?</p>
<p>Thanks in advance.</p>
",
tags:"<java><jvm><classloader>",
score:13,
creationDate:2023-07-16 17:49:31,
creationDate:2023-07-20 20:18:32,
score:6,
acceptedResponderReputation:298103,
acceptedResponder:2711488,
QuestionerReputation:1546,
Questioner:16606223}
{title:"Next.js how to ignore a complete folder in app?",
id:"https://stackoverflow.com/questions/76403957",
body:"<p>On next 13, app/api folder creates an error during build when nextConfig.output is &quot;export&quot;.</p>
<p>In my project, I need different build type depending on environnement variable.</p>
<p>Any way to ignore &quot;api&quot; folder during build when &quot;output&quot; is &quot;export&quot; ?</p>
<p>When I run build with nextConfig.output as &quot;export&quot; I got following error:</p>
<blockquote>
<p>Export encountered errors on following paths:
/api/revalidate/route: /api/revalidate</p>
</blockquote>
<h3>src/app/api/revalidate/route.ts file</h3>
<pre><code>import { NextRequest, NextResponse } from 'next/server';
import { revalidateTag } from 'next/cache';
 
export async function GET(request: NextRequest) {
  const tag = request.nextUrl.searchParams.get('tag');
  if(tag){
    revalidateTag(tag);
  }
  return NextResponse.json({ revalidated: true, now: Date.now() });
}
</code></pre>
<h3>Next.config.js</h3>
<pre class=""lang-js prettyprint-override""><code>/** @type {import('next').NextConfig} */
const nextConfig = {
  output: process.env.NEXT_OUTPUT_MODE,
};

module.exports = nextConfig;

</code></pre>
<h2>Reproducible repository</h2>
<p>Here is a repository to reproduce this error
<a href=""https://github.com/zeckaissue/next-export-api-crash"" rel=""nofollow noreferrer"">https://github.com/zeckaissue/next-export-api-crash</a></p>
",
tags:"<javascript><next.js><static-site-generation>",
score:6,
creationDate:2023-06-05 06:25:41,
creationDate:2023-06-11 09:10:59,
score:6,
acceptedResponderReputation:2934,
acceptedResponder:2838586,
QuestionerReputation:2934,
Questioner:2838586}
{title:"org.springframework.core.NestedIOException when have migrated to Spring Boot 3.1.0, Spring 6.0.0 and Java 17",
id:"https://stackoverflow.com/questions/76448040",
body:"<p>The application worked well on Spring Boot 3.1.0 and Java 17, but whn was migrated to Spring 6.0.0 with such modules upgrated, isnt started with below error:</p>
<pre><code>implementation 'org.springframework:spring-core:6.0.0'
implementation 'org.springframework:spring-beans:6.0.0'
implementation 'org.springframework:spring-expression:6.0.0'
implementation 'org.springframework:spring-webflux:6.0.0'
implementation 'org.springframework:spring-webmvc:6.0.0'
implementation 'org.springframework:spring-web:6.0.0'
</code></pre>
<p>and the logs output is:</p>
<pre><code>2023-06-10 23:17:34.892 [main] ERROR o.s.boot.SpringApplication - Application run failed
java.lang.NoClassDefFoundError: org/springframework/core/NestedIOException
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:312)
    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:236)
    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:280)
    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:96)
    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:707)
    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:533)
    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:758)
    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:750)
    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:405)
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:315)
    at org.springframework.boot.builder.SpringApplicationBuilder.run(SpringApplicationBuilder.java:140)
    at org.springframework.cloud.bootstrap.BootstrapApplicationListener.bootstrapServiceContext(BootstrapApplicationListener.java:212)
    at org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:117)
    at org.springframework.cloud.bootstrap.BootstrapApplicationListener.onApplicationEvent(BootstrapApplicationListener.java:74)
    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)
    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)
    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)
    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)
    at org.springframework.boot.context.event.EventPublishingRunListener.environmentPrepared(EventPublishingRunListener.java:80)
    at org.springframework.boot.SpringApplicationRunListeners.environmentPrepared(SpringApplicationRunListeners.java:53)
    at org.springframework.boot.SpringApplication.prepareEnvironment(SpringApplication.java:345)
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1237)
    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1226)
    at rf.dom.billing.ap.Application.main(Application.java:24)
Caused by: java.lang.ClassNotFoundException: org.springframework.core.NestedIOException
    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)
    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)
    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)
    ... 25 common frames omitted
</code></pre>
",
tags:"<java><spring><spring-boot><java-17>",
score:7,
creationDate:2023-06-10 20:24:38,
creationDate:2023-09-19 21:19:20,
score:6,
acceptedResponderReputation:154,
acceptedResponder:10588571,
QuestionerReputation:5144,
Questioner:1759063}
{title:"Nuxt instance unavailable when trying to run useRuntimeConfig in a file within utils directory during server side rendering (SSR)",
id:"https://stackoverflow.com/questions/75575272",
body:"<p>I'm building a website in Nuxt 3 for frontend with SSR, and Laravel in the backend. In the Nuxt 3 project, I have an ApiBridge.js file in the <a href=""https://nuxt.com/docs/guide/directory-structure/utils"" rel=""noreferrer"">utils</a> directory that I use to organize API calls, set the base URL etc. Since starting the project, I've been running this with server side rendering turned off for my convenience, but when I try to run this with SSR on (Turned on in nuxt.config.js), I get a &quot;Nuxt instance unavailable&quot; error. I'm working on this project while learning Nuxt 3 on the go, so I might be missing something obvious.</p>
<pre><code>import axios from &quot;axios&quot;;

const runtimeConfig = useRuntimeConfig()

const api = axios.create({
    baseURL: runtimeConfig?.API_BASE_URL,
    withCredentials: true,
});


const apiBridge = {
    login: (info) =&gt; api.post('/login', {
        ...info,
    }),

    register: (info) =&gt; api.post('/register', {
        ...info,
    })

    /* .... */
}

export default apiBridge;
</code></pre>
<p>Why is this happening? Is this a bad way to do this? How to fix it? Why's it working with SSR turned off? Is it because of the auto imports? Thanks in advance!</p>
<p>Looked around the web but found nothing useful.</p>
<p>EDIT:
nuxt.config.js as requested by a comment</p>
<pre><code>// https://nuxt.com/docs/api/configuration/nuxt-config
export default defineNuxtConfig({
    modules: [
        '@nuxtjs/tailwindcss',
        [
            '@pinia/nuxt',
            {
                autoImports: [
                    // automatically imports `defineStore`
                    'defineStore', // import { defineStore } from 'pinia'
                    // automatically imports `defineStore` as `definePiniaStore`
                    ['defineStore', 'definePiniaStore'], // import { defineStore as definePiniaStore } from 'pinia'
                ],
            },
        ],
    ],
    tailwindcss: {
        configPath: './tailwind.config.js'
    },
    build: {

    },
    // ssr: false, // remove later
    runtimeConfig: {
        public: {
            BASE_URL: process.env.BASE_URL,
            API_BASE_URL: process.env.API_BASE_URL,
        }
    },
})
</code></pre>
",
tags:"<javascript><vue.js><nuxt.js><server-side-rendering><nuxt3.js>",
score:8,
creationDate:2023-02-26 22:02:53,
creationDate:2023-02-27 01:09:45,
score:6,
acceptedResponderReputation:161,
acceptedResponder:19694936,
QuestionerReputation:161,
Questioner:19694936}
{title:"Router.refresh() not refreshing in next 13?",
id:"https://stackoverflow.com/questions/75655010",
body:"<pre><code>'use client';

import { useRouter } from &quot;next/navigation&quot;;

export default function Todo({ todo }) {
    const router = useRouter();
    return (
        &lt;&gt;
            &lt;li key={todo.id}&gt;
                &lt;input type='checkbox' checked={todo.isDone} onChange={(e) =&gt; update(todo.id, e.target.checked, router.refresh)}&gt;&lt;/input&gt;
                {todo.name}
                &lt;button onClick={() =&gt; todoDelete(todo.id, router)}&gt;Delete&lt;/button&gt;
            &lt;/li&gt;
        &lt;/&gt;
    )

    async function todoDelete(id, router) {
        await fetch(`/api/todo/delete?id=${id}`, {
            method: 'DELETE',
    
        });
        router.refresh();
    }
    
}
</code></pre>
<p>The code seems to jump right over the refresh() function, but the rest of the API call is working fine. Anyone know why I'm unable to refresh?</p>
",
tags:"<javascript><reactjs><next.js>",
score:16,
creationDate:2023-03-06 19:26:05,
creationDate:2023-03-24 02:23:40,
score:6,
acceptedResponderReputation:380,
acceptedResponder:17003621,
QuestionerReputation:203,
Questioner:10393863}
{title:"Adjusting elements in the React DOM based on render-time information (i.e. line height)",
id:"https://stackoverflow.com/questions/77440566",
body:"<h2>Context</h2>
<p>I have created a simple text-editor with line-numbers using React JS. It should only edit plaintext (i.e. no rich text editing is desired). The text-input field is represented with a <code>contentEditable</code> div. When typing, I am facing three challenges:</p>
<ol>
<li>I want line-numbers to appear for each newline.</li>
<li>I do not want to re-render to the DOM the user is typing in, because it will reset the cursor (<a href=""https://stackoverflow.com/questions/45306325/react-contenteditable-and-cursor-position"">see a sort of similar question about this here</a>).</li>
<li>I want line-numbers to only appear for actual newlines. Not for lines that wrap-around due to the boundary of the containing box.</li>
</ol>
<hr />
<h2>Attempted Solution</h2>
<ol>
<li>To show line-numbers, I create a column of numbers next to the editable content. I use React's <code>map</code> to create one for each line. ✅</li>
<li>To avoid the problem with the DOM re-rendering, I used <code>React.useRef</code> to ensure that my text input does not get re-rendered (and the cursor position is not lost). ✅</li>
<li>To ensure that line numbers only appear next to actual newlines, I tried to mirror the text-input in a hidden div. The idea is that I can insert each line into its own div. Then, I can get the height of the div of each line, and use it to set the height of the line-number divs so they are matching (see figure below) ❌ :</li>
</ol>
<p><a href=""https://i.sstatic.net/sY1uV.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/sY1uV.png"" alt=""enter image description here"" /></a></p>
<p>Unfortunately, this is presently not working quite how I wanted. I can't seem to figure out how to fetch the heights of the rendered div's, and then set them for the line-numbers. I've tried to use <code>useEffect</code> to run <em>after</em> the DOM is rendered, but I'm not able to find out how to 'hook' into the div-array and calculate their height.</p>
<hr />
<h1>Minimum Code Example</h1>
<p>Please see this <a href=""https://jsfiddle.net/vy41t9sL/71/"" rel=""noreferrer"">working JSFiddle example</a>. Unfortunately I could't get it to work in the StackOverflow code tool. For convenience, I still paste the relevant code below:</p>
<h3>React + JavaScript</h3>
<pre><code>const initialText=`Nature's first green is gold,
Her hardest hue to hold.
Her early leaf's a flower;
But only so an hour.
Then leaf subsides to leaf.
So Eden sank to grief,
So dawn does down to day.
Nothing gold can stay.`

function App () {
  const [lines, setLines] = React.useState(initialText.split(&quot;\n&quot;));
  let text = React.useRef(initialText)
  
  React.useEffect(() =&gt; { 
    console.log('Rendered!')
    // TODO: Update the height of each line-number to match the real-lines
  });
  
  function handleInput(e) {
    console.log('Edited!')
    setLines(e.target.textContent.split(&quot;\n&quot;));
  }
  
  return (
    &lt;div  className='container'&gt;
      &lt;div className='margin'&gt;
          {lines.map((line,i)=&gt;(&lt;div&gt;{(1+i).toString()}&lt;/div&gt;))}
      &lt;/div&gt;

      &lt;div className='editor-container'&gt;
        &lt;div onInput={handleInput} contentEditable='plaintext-only' className='editor' suppressContentEditableWarning={true}&gt;
          {text.current}
        &lt;/div&gt;
        &lt;div className='editor' style={{visibility:'hidden'}}&gt;
          {lines.map(line=&gt;(&lt;div&gt;{line}&lt;/div&gt;))}
        &lt;/div&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  )
}
const root = ReactDOM.createRoot(document.getElementById(&quot;app&quot;))
root.render(&lt;App/&gt;)
</code></pre>
<h3>CSS</h3>
<pre><code>.container {
  display: flex;
  justify-content: space-between;
}

.margin {
  text-align: right;
  flex-shrink: 0;
  max-width: 1em;
}

.margin &gt; div {
  width: 100%;
}

.editor-container {
  margin-left: 0.5em;
  flex-grow: 1;
  position: relative;
}

.editor {
  flex-grow: 1;
  position: absolute;
  white-space: pre-wrap;
  width: 100%;
  height: 100%;
}
</code></pre>
<h3>HTML</h3>
<pre><code>&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;
</code></pre>
<hr />
<p><a href=""https://jsfiddle.net/vy41t9sL/71/"" rel=""noreferrer"">JSFiddle</a></p>
",
tags:"<javascript><reactjs><dom><jsx>",
score:7,
creationDate:2023-11-07 18:16:47,
creationDate:2023-11-07 19:43:34,
score:6,
acceptedResponderReputation:1230,
acceptedResponder:20600646,
QuestionerReputation:3640,
Questioner:1883304}
{title:"How can I parse HTML into a DOM tree, taking into account its origin location?",
id:"https://stackoverflow.com/questions/75847414",
body:"<p>I am writing a user script that runs on <code>https://example.net</code> and makes <code>fetch</code> requests for HTML documents from <code>https://example.com</code> that I want to parse into HTML DOM trees.</p>
<p>The <code>fetch</code> API only gives me the raw HTML source.  I can parse it myself using <code>DOMParser</code>, but I run into a problem with relative links.  Suppose the document from <code>https://example.com</code> contains something like this:</p>
<pre class=""lang-html prettyprint-override""><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
  &lt;body&gt;
    &lt;p&gt; &lt;a href=&quot;/foo&quot;&gt;hello!&lt;/a&gt;
</code></pre>
<p>If I obtain the DOM node for that <code>body &gt; p &gt; a</code> element and read its <code>href</code> property, the value I obtain will be <code>https://example.net/foo</code>.  This is because <code>DOMParser</code> assigns the source location of the ambient document to the parsing result.  I want to assign it the actual source of the document so that relative links resolve correctly.</p>
<p>Right now the only workarounds I can think of are:</p>
<ul>
<li>inject a <code>&lt;base&gt;</code> element into the DOM tree, which may interfere with a <code>&lt;base&gt;</code> tag present in the actual HTML source</li>
<li>use <code>document.implementation.createHTMLDocument()</code> and then <code>.write()</code>, which gives me a document with a blank source location, where relative links are at least not resolved incorrectly (but will not be resolved at all).  Except this doesn't work in a user script: it throws a <code>SecurityError</code>.</li>
<li>use <code>Proxy</code> to intercept accesses to the <code>href</code> property, which seems too heavyweight to comfortably fit in a user script</li>
<li>include a userland HTML parser and DOM implementation, which again seems too burdensome</li>
</ul>
<p>I also realise that parsing HTML from Unicode text obtained by <code>.text()</code> will bypass the HTML encoding detection algorithm.  I can live with that myself, because the site I am interested in exclusively uses UTF-8 correctly denoted in headers, but this is also a flaw that should be noted.  Ideally, an HTML document ought to be parsed directly from a <code>Blob</code> or even a <code>ReadableStream</code>.</p>
<p>Is there a better way to accomplish what I want?</p>
",
tags:"<javascript><html><domparser>",
score:6,
creationDate:2023-03-26 11:23:34,
creationDate:2023-04-01 05:11:51,
score:6,
acceptedResponderReputation:28687,
acceptedResponder:165674,
QuestionerReputation:27211,
Questioner:3840170}
{title:"React Leaflet map rendering all over the page",
id:"https://stackoverflow.com/questions/76134323",
body:"<p>I am fairly new to React and Leaflet. I have gotten Leaflet working just fine in a simple HTML page. So now I am trying to make a more dynamic site by using React.</p>
<p>The problem I am running into is I can get it to render sort-of. The map appears all over the page in chunks. I put an h1 above and a simple div with text below the map dev and you can see it render randomly past the lower text. its also not one contiguous map.</p>
<p>I'm using React v18.2.0 with React Leaflet at 4.2.1 with Leaflet 1.9.3.</p>
<p>Here is my app code:</p>
<pre><code>import React from 'react';
import './App.css';
import { MapContainer, TileLayer, Marker, Popup } from 'react-leaflet';

function App() {
  return (
    &lt;div&gt;
      &lt;h1&gt;See my map&lt;/h1&gt;
      &lt;MapContainer center={[45.4, -75.7]} zoom={12}scrollWheelZoom={false}&gt;
        &lt;TileLayer
          url=&quot;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&quot;
          attribution='&amp;copy; &lt;a href=&quot;http://osm.org/copyright&quot;&gt;OpenStreetMap&lt;/a&gt; contributors'
        /&gt;
      &lt;/MapContainer&gt;
      &lt;div&gt;After map report&lt;/div&gt;
    &lt;/div&gt;
  );
}

export default App;
</code></pre>
<p><a href=""https://i.sstatic.net/n9S1y.jpg"" rel=""noreferrer""><img src=""https://i.sstatic.net/n9S1y.jpg"" alt=""enter image description here"" /></a>
<a href=""https://i.sstatic.net/G1fij.jpg"" rel=""noreferrer""><img src=""https://i.sstatic.net/G1fij.jpg"" alt=""enter image description here"" /></a></p>
<p>I would love for any advice on what is going on and what I can do to fix it.</p>
<p>Thanks!</p>
",
tags:"<javascript><reactjs><leaflet><react-leaflet>",
score:6,
creationDate:2023-04-29 02:52:47,
creationDate:2023-04-29 02:59:17,
score:6,
acceptedResponderReputation:3450,
acceptedResponder:306295,
QuestionerReputation:3450,
Questioner:306295}
{title:"JavaScript - Attach context to async function call?",
id:"https://stackoverflow.com/questions/75427892",
body:"<h4>Synchronous function call context</h4>
<p>In JavaScript, it's easy to associate some context with a synchronous function call by using a stack in a global scope.</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>// Context management

let contextStack = [];
let context;

const withContext = (ctx, func) =&gt; {
  contextStack.push(ctx);
  context = ctx;

  try {
    return func();
  } finally {
    context = contextStack.pop();
  }
};

// Example

const foo = (message) =&gt; {
  console.log(message);
  console.log(context);
};

const bar = () =&gt; {
  withContext(""calling from bar"", () =&gt; foo(""hello""));
};

bar();</code></pre>
</div>
</div>
</p>
<p>This allows us to write context-specific code without having to pass around a context object everywhere and have every function we use depend on this context object.</p>
<p>This is possible in JavaScript because of the guarantee of sequential code execution, that is, these synchronous functions are run to completion before any other code can modify the global state.</p>
<h4>Generator function call context</h4>
<p>We can achieve something similar with generator functions. Generator functions give us an opportunity to take control just before conceptual execution of the generator function resumes. This means that even if execution is suspended for a few seconds (that is, the function is not run to completion before any other code runs), we can still ensure that there is an accurate context attached to its execution.</p>
<pre><code>const iterWithContext = function* (ctx, generator) {
  // not a perfect implementation

  let iter = generator();
  let reply;

  while (true) {
    const { done, value } = withContext(ctx, () =&gt; iter.next(reply));
    
    if (done) {
      return;
    }
    
    reply = yield value;
  }
};
</code></pre>
<h4>Question: Async function call context?</h4>
<p>It would also be very useful to attach some context to the execution of an async function.</p>
<pre><code>const timeout = (ms) =&gt; new Promise(res =&gt; setTimeout(res, ms));

const foo = async () =&gt; {
  await timeout(1000);
  console.log(context);
};

const bar = async () =&gt; {
  await asyncWithContext(&quot;calling from bar&quot;, foo);
};
</code></pre>
<p>The problem is, to the best of my knowledge, there is no way of intercepting the moment before an async function resumes execution, or the moment after the async function suspends execution, in order to provide this context.</p>
<p>Is there any way of achieving this?</p>
<p>My best option right now is to not use async functions, but to use <a href=""https://medium.com/@davidcallanan/implementing-async-await-syntax-in-vanilla-javascript-1f18408043f5"" rel=""noreferrer"">generator functions that behave like async functions</a>. But this is not very practical as it requires the entire codebase to be written like this.</p>
<h4>Background / Motivation</h4>
<p>Using context like this is incredibly valuable because the context is available deep down the call-stack. This is especially useful if a library needs to call an external handler such that if the handler calls back to the library, the library will have the appropriate context. For example, I'd imagine React hooks and Solid.js extensively use context in this way under-the-hood. If not done this way, the programmer would have to pass a context object around everywhere and use it when calling back to the library, which is both messy and error-prone. Context is a way to neatly &quot;curry&quot; or abstract away a context object from function calls, based on where we are in the call stack. Whether it is good practice or not is debatable, but I think we can agree that it's something library authors have chosen to do. I would like to extend the use of context to asynchronous functions, which are supposed to conceptually behave like synchronous functions when it comes to the execution flow.</p>
<h4>Bounty</h4>
<p>I'm only realizing now that the previously-accepted answer does not work in browsers, as browsers do not implement async stack traces. I hope that an alternative hack is possible and so I am starting another bounty.</p>
",
tags:"<javascript><async-await><method-call><asynchronous-method-call>",
score:14,
creationDate:2023-02-12 14:56:31,
creationDate:2023-02-14 15:03:05,
score:6,
acceptedResponderReputation:1524,
acceptedResponder:7588455,
QuestionerReputation:5958,
Questioner:1541397}
{title:"What is the unit of size, spacing and other properties in JavaFX",
id:"https://stackoverflow.com/questions/75596840",
body:"<p>When learning JavaFX you find that you can set the height and width of scene, you can set the spacing between nodes in HBox, and other similar aspects.
My question is about the unit of such values.
For example, in this simple code:</p>
<pre><code>import javafx.application.Application;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.HBox;
import javafx.stage.Stage;

public class TestGUI extends Application{
    @Override
    public void start(Stage primaryStage) {
        Button btn1 = new Button(&quot;OK&quot;);
        Button btn2 = new Button(&quot;Cancel&quot;);
        HBox root = new HBox(15,btn1,btn2);
        root.setAlignment(Pos.CENTER);
        Scene scene = new Scene(root,250,50);
        primaryStage.setScene(scene);
        primaryStage.setTitle(&quot;GUI Example&quot;);
        primaryStage.show();
    }
    public static void main(String[] args) {
        launch(args);
    }
}
</code></pre>
<p>What is the units of 250, 50 and 15?</p>
",
tags:"<java><javafx>",
score:6,
creationDate:2023-02-28 20:11:39,
creationDate:2023-02-28 22:22:21,
score:6,
acceptedResponderReputation:4371,
acceptedResponder:1165724,
QuestionerReputation:363,
Questioner:2316663}
{title:"Static Site Generation (SSG) vs. Server-Side Rendering vs. Client-Side Rendering",
id:"https://stackoverflow.com/questions/75457090",
body:"<p>I am baffled by the lack of concrete information about how <em>Client-Side Rendering</em> (CSR), <em>Server-Side Rendering</em> (SSR), and <em>Static Site Generation</em> (SSG) actually work.</p>
<p>There are tons of articles loosely explaining the concepts, but I have not found a single source that goes in-depth and explains exactly what HTML, CSS and JS are created on the server vs on the client, in the three concepts.</p>
<p>From the Next.js docs, we can read that:</p>
<blockquote>
<p><a href=""https://beta.nextjs.org/docs/rendering/fundamentals#static-rendering"" rel=""noreferrer""><strong>Static Rendering</strong></a></p>
<ul>
<li>With Static Rendering, both Server and Client Components can be prerendered on the server at build time.</li>
<li>Client Components have their HTML and JSON prerendered and cached on the server. The cached result is then sent to the client for hydration.</li>
<li>Server Components are rendered on the server by React, and their payload is used to generate HTML. The same rendered payload is also used to hydrate the components on the client, resulting in no JavaScript needed on the client.</li>
</ul>
<p><strong>Note</strong>: Static Rendering is equivalent to Static Site Generation (SSG) and Incremental Static Regeneration (ISR).</p>
</blockquote>
<p>And:</p>
<blockquote>
<p><strong><a href=""https://beta.nextjs.org/docs/rendering/fundamentals#dynamic-rendering"" rel=""noreferrer"">Dynamic Rendering</a></strong></p>
<ul>
<li>With Dynamic Rendering, both Server and Client Components are rendered on the server at request time.</li>
</ul>
<p><strong>Note</strong>: This is equivalent to Server-Side Rendering(getServerSideProps()).</p>
</blockquote>
<p>Fine, so <em>Static Rendering</em> equals <em>Static Site Generation</em> (SSG), meaning that some html+css is created build-time. Exactly what html is created build-time depends on whether you use <em>Client Components</em> or <em>Server Components</em>.</p>
<p>I inspected the built <code>public</code> folder of a built Gatsby project and noticed that none of the React components were actually turned into html (regardless of whether they depended on user interaction). Gatsby had created an html file for each page, but the <code>&lt;body&gt;</code> of each of those was still React components defined in JS, expecting to be turned into html by React on the client, <strong>run-time</strong>. This breaks with my understanding of the second bullet from the Next.js docs, which states that the html is &quot;prerendered&quot;.</p>
<hr />
<p><strong>Questions</strong></p>
<ol>
<li><p>By the above docs, could we say that <em>Static Site Generation</em> (SSG) actually requires <strong>both</strong> <em>Server-Side Rendering</em> (SSR) and <em>Client-Side Rendering</em> (CSR)?</p>
</li>
<li><p>If so, does that not conflict with the <em>Dynamic Rendering</em> definition above, which states that <em>Dynamic Rendering</em> is equivalent to <em>Server-Side Rendering</em>?</p>
</li>
<li><p>Finally, exactly what html+css+js is created upon <em>Static Rendering</em> with <em>Client Components</em>?</p>
</li>
</ol>
",
tags:"<javascript><reactjs><next.js><gatsby>",
score:7,
creationDate:2023-02-15 08:21:52,
creationDate:2023-02-23 21:52:34,
score:6,
acceptedResponderReputation:80041,
acceptedResponder:203130,
QuestionerReputation:7801,
Questioner:3006096}
{title:"javafx bidirectional bindings out of sync",
id:"https://stackoverflow.com/questions/79137339",
body:"<p>I was writing a class in javafx where I had two properties that were bound bidirectionally and was testing some edge cases. I found that if you change the value of one of the properties from inside an invalidation listener it caused the properties to be out of sync. Here's a small example:</p>
<pre><code>static class A {
    IntegerProperty x = new SimpleIntegerProperty(this, &quot;x&quot;, 0);
    IntegerProperty y = new SimpleIntegerProperty(this, &quot;y&quot;, 0);
    A() {
        x.bindBidirectional(y);
    }
}

static void testA() {
    A a = new A();
    a.x.addListener( o -&gt; { //InvalidationListener
        if (a.x.get() &lt; 0) a.x.set(0);
    });
    // after y is set to a negative value, x and y hold different values
    // until either y is set to a value that's &gt;= 0 or x is set to any value
    a.y.set(-2);
    System.out.println(a.x.get());
    System.out.println(a.y.get());
}
</code></pre>
<p>Output:</p>
<pre><code>0
-2
</code></pre>
<p>I was assuming that when using a bidirectional binding, changing one property would always cause the other to be updated. It's seems rare (and possibly unwise) that one would write an invalidation listener like that, but I'm thinking defensively here. If at least one these properties were exposed, I don't want it to be possible to break any invariants of my class. I was thinking that there are three possible explanations here:</p>
<ol>
<li><p>The contract on bidirectional bindings is not that they always are in sync (either they hold the same value or they are marked as invalid), it's just on a best-effort basis. Thus, class invariants shouldn't be based on this fact.</p>
</li>
<li><p>Changing the value inside an invalidation listener breaks the precondition of bidirectional binds and should be avoided. Otherwise they are always in sync. Thus, you might base a class invariant on this fact, since it's reasonable to demand that clients shouldn't be writing invalidation listeners like that.</p>
</li>
<li><p>It's a bug and they are really meant to be sync, no matter what. I guess if this were true, then you could easily produce an infinite loop of change notifications (like adding an invalidation listener to y that always sets the value to &lt; 0). So, it would be up to the client to prevent such cases.</p>
</li>
</ol>
<p>Is any of these explanations close to the truth, or am I missing something else here? Also, I'd be interested to know if there exist some other kind of bind operation that takes these kinds of situations into account.</p>
",
tags:"<java><javafx><properties>",
score:7,
creationDate:2024-10-29 13:02:25,
creationDate:2024-10-30 05:31:09,
score:6,
acceptedResponderReputation:159281,
acceptedResponder:1155209,
QuestionerReputation:155,
Questioner:20726076}
{title:"C++ implementation of a simple map slower than equivalent implementation in Java: Code/Benchmark Issue?",
id:"https://stackoverflow.com/questions/79268109",
body:"<p>The goal of this research is to explore the performance differences between JIT (just-in-time compilation) and AOT (ahead-of-time compilation) strategies and to understand their respective advantages and disadvantages. The intent is not to claim that one language is slower or worse than the other.<br />
In our tests, we observed better results with the HotSpot JVM 23 using JIT compilation (JVMCI and C2). We got slower results with C++ (compiled with Clang 18), GraalVM 23 (compiled with native-image), and HotSpot JVM 23 with the -Xcomp flag (JVMCI and C2). We are seeking to understand why this happens, and if possible, identify ways to improve the performance of the C++ version to match the results of Java's JIT compilation.</p>
<p>Our benchmark involves comparing a simple and small hash table (map) implementation in Java to an equivalent (<em>line-by-line</em>) implementation in C++. We made every effort to ensure consistency between the two implementations. The goal is <em><strong>not</strong></em> to compare the standard library implementations of hash table (<code>java.util.HashMap</code> and <code>std::unordered_map</code>) as they are of course implemented with non-equivalent source code.</p>
<p>The benchmark creates a hash table with 20,000 buckets and inserts 2,000,000 objects. We insert once, clear the map and then insert again, to take advantage of the <code>Entry</code> object internal object pool of the hash table. In other words, the first time you insert, objects are going to be allocated in the heap. The second time you insert objects are going to be re-used from the internal object pool.</p>
<p>The <code>Bench</code> class, which handles the measurements, should also be equivalent in both languages.</p>
<p><strong>Given these details, does anyone have insights into why the C++ map implementation was slower than the Java map implementation? Could there be something we overlooked or an aspect of the C++ implementation that could be optimized further? Perhaps specific Clang optimization options we should explore?</strong></p>
<hr />
<p>(This section added by @petercordes to describe in more detail what the benchmark does. And from discussion in comments with the OP, to describe what I think one of the goals is.)</p>
<p><strong>The C++ version is written such that it could compile to similar machine code to what a JVM might JIT for the Java version.</strong>  How does Java manages to do the same machine operations as the C++ version but faster.</p>
<p>(Editor's note (@petercordes): I have single-stepped the machine code generated by the Hotspot JVM, and indeed the main loops are linked-list linear searches, using 32-bit compressed references vs. <code>clang++</code> using native pointers.  Interrupting the JVM with GDB, usually RIP points to a place where the code spends most of its time.
<code>clang++ -O3 ... -m32</code> is still slower, so it's not just 32-bit pointers, and the Java objects were still at least 24 bytes, not just 12 for 2 references + an int.  Probably something about allocation patterns and cache misses, since Java runs more machine instructions inside the loop and even has to <code>shl</code> by 3 to turn a 32-bit value into a pointer, so best-case load-use latency is worse.)</p>
<p>The C++ version uses pointers extensively to mirror Java's semantics.  The &quot;values&quot; stored and retrieved are just pointers (all to the same dummy object).  It's probably not useful for most use-cases. For example, <code>put</code> takes an object by <code>const</code>-reference, i.e. a pointer in asm, while <code>get</code> returns it as a non-<code>const</code> pointer.  The hash table never dereferences the value pointer or deletes the pointed-to object; in Java the GC takes care of this.  In C++ it could hypothetically be used for building a map of objects owned by something else, or in automatic or static storage.  It could equivalently take a <code>uintptr_t</code> by value. (A reference is non-nullable but we don't depend on that.)</p>
<p>The hash table is an array of linked lists (pointers in C++, with <code>nullptr</code> indicating on keys in that bucket).  With a load-factor of 100, this is really a linked-list benchmark, not normal operating conditions for a hash table.</p>
<p>This was chosen to make the time for each operation long enough to measure with Linux <code>clock_gettime</code> as called from Java's <code>System.nanoTime</code> or Glibc's <code>chrono::steady_clock::now</code>.  Measurement overhead should be fairly equal in both languages, and very high compared to just a hash-bucket lookup that hits in cache, but pretty small compared to traversing a 50-element (average length) linked list.<br />
The <code>Bench</code> class itself also adds each time to a <code>std::map</code> in C++, or a custom hashmap in Java using a similar design to the hash table being benchmarked, used with a load factor well below 1.  This is outside the timed region but does need to do some allocation on the first run, so that will happen between every allocation of a node for the hash table being benchmarked.</p>
<p>To attempt to minimize performance differences between Java's GC vs. non-GC C++, we use a free-list with unbounded size, only ever deleting in the destructor: if <code>remove()</code> finds a match, it moves the node from the bucket's linked list to the <code>head</code> of the free list.  <code>put</code> takes the head of the free list, only calling <code>new</code> if empty.  So <code>new</code> gets called only inside the first round of <code>put</code> calls, with the second (after <code>clear</code>) having to advance through the linked-list of nodes.  Which should be cheap because there's a whole linked-list search between allocations for out-of-order execution to hide the load latency even on a cache miss.</p>
<p>The initial <code>put</code> stage is not the only one that's slower for the C++ version than the Java version, so it's not <em>just</em> raw performance of <code>new</code>.  Perhaps something about locality of allocations?</p>
<hr />
<p>All source code, which is not much, with scripts to compile and execute together with our results are in the open-source Github project <a href=""https://github.com/coralblocks/CoralBench?tab=readme-ov-file#hotspotvm--xcomp-and-jit-vs-c-llvm-clang-vs-graalvm"" rel=""nofollow noreferrer"">CoralBench</a>.</p>
<p>From the comments below, it looks like <strong>a major source of improvement for the C++ code could be <em>custom allocators</em></strong> for the hash table internal <code>Entry</code> objects. It has been mentioned that Java has an easier/faster time allocating objects in the heap than C++, through the <code>new</code> keyword, but that this shortcoming can be addressed in C++ by using <strong>custom allocators</strong>. Unfortunately my knowledge of C++ is limited and I will have to do some research to understand how to do that. <strong>An answer here with such a change/improvement in the C++ code would be great.</strong></p>
<p>It is important to note that <strong>on the second put benchmark, the C++ code will not be allocating any <code>Entry</code> in the heap</strong>, as the objects will be all available in the internal object pool (from the first put). Therefore I'm not sure why C++ is still slower on the second put benchmark.</p>
<p>FTR, below are our current results for Java and C++:</p>
<p><strong>HotSpotVM JIT: (with Graal JVMCI JIT)</strong></p>
<pre><code>PUT =&gt; Avg: 371 ns | Min: 28 ns | 99.9% = [avg: 367 ns, max: 1.743 micros]
PUT =&gt; Avg: 613 ns | Min: 27 ns | 99.9% = [avg: 606 ns, max: 2.184 micros]
GET =&gt; Avg: 615 ns | Min: 14 ns | 99.9% = [avg: 607 ns, max: 2.549 micros]
DEL =&gt; Avg: 662 ns | Min: 18 ns | 99.9% = [avg: 658 ns, max: 2.538 micros]
</code></pre>
<p><strong>HotSpotVM JIT: (with C2 JIT)</strong></p>
<pre><code>PUT =&gt; Avg: 342 ns | Min: 29 ns | 99.9% = [avg: 338 ns, max: 1.661 micros]
PUT =&gt; Avg: 596 ns | Min: 28 ns | 99.9% = [avg: 589 ns, max: 2.161 micros]
GET =&gt; Avg: 599 ns | Min: 20 ns | 99.9% = [avg: 592 ns, max: 2.275 micros]
DEL =&gt; Avg: 826 ns | Min: 23 ns | 99.9% = [avg: 817 ns, max: 3.420 micros]
</code></pre>
<p><strong>C++ LLVM: (clang)</strong></p>
<pre><code>PUT =&gt; Avg: 726 ns | Min: 30 ns | 99.9% = [avg: 720 ns, max: 4.097 micros]
PUT =&gt; Avg: 857 ns | Min: 18 ns | 99.9% = [avg: 848 ns, max: 2.933 micros]
GET =&gt; Avg: 874 ns | Min: 18 ns | 99.9% = [avg: 865 ns, max: 3.010 micros]
DEL =&gt; Avg: 875 ns | Min: 19 ns | 99.9% = [avg: 871 ns, max: 2.810 micros]
</code></pre>
<p><strong>GraalVM: (native-image)</strong></p>
<pre><code>PUT =&gt; Avg: 190 ns | Min: 21 ns | 99.9% = [avg: 183 ns, max: 814 ns]
PUT =&gt; Avg: 659 ns | Min: 23 ns | 99.9% = [avg: 656 ns, max: 2.762 micros]
GET =&gt; Avg: 399 ns | Min: 21 ns | 99.9% = [avg: 396 ns, max: 2.124 micros]
DEL =&gt; Avg: 323 ns | Min: 27 ns | 99.9% = [avg: 321 ns, max: 1.850 micros]
</code></pre>
<p><strong>Benchmark Environment:</strong></p>
<pre><code>$ uname -a
Linux hivelocity 4.15.0-20-generic #21-Ubuntu SMP Tue Apr 24 06:16:15 UTC 2018 x86_64 x86_64 x86_64 GNU/Linux

$ cat /etc/issue | head -n 1
Ubuntu 18.04.6 LTS \n \l

$ cat /proc/cpuinfo | grep &quot;model name&quot; | head -n 1 | awk -F &quot;: &quot; '{print $NF}'
Intel(R) Xeon(R) E-2288G CPU @ 3.70GHz

$ arch
x86_64

$ clang++ --version
Ubuntu clang version 18.1.0 (++20240220094926+390dcd4cbbf5-1~exp1~20240220214944.50)
Target: x86_64-pc-linux-gnu
Thread model: posix
InstalledDir: /usr/bin

$ java -version
java version &quot;23.0.1&quot; 2024-10-15
Java(TM) SE Runtime Environment Oracle GraalVM 23.0.1+11.1 (build 23.0.1+11-jvmci-b01)
Java HotSpot(TM) 64-Bit Server VM Oracle GraalVM 23.0.1+11.1 (build 23.0.1+11-jvmci-b01, mixed mode, sharing)

$ native-image --version
native-image 23.0.1 2024-10-15
GraalVM Runtime Environment Oracle GraalVM 23.0.1+11.1 (build 23.0.1+11-jvmci-b01)
Substrate VM Oracle GraalVM 23.0.1+11.1 (build 23.0.1+11, serial gc, compressed references)
</code></pre>
<p><strong>To compile the C++ code:</strong></p>
<pre><code>rm -f target/cpp/int_map_benchmark target/cpp/int_map.o target/cpp/bench.o target/cpp/int_map_benchmark.o

mkdir -p target/cpp

clang++ -Ofast -march=native -flto -std=c++17 -I./src/main/c -c ./src/main/c/int_map.cpp -o ./target/cpp/int_map.o
clang++ -Ofast -march=native -flto -std=c++17 -I./src/main/c -c ./src/main/c/bench.cpp -o ./target/cpp/bench.o
clang++ -Ofast -march=native -flto -std=c++17 -I./src/main/c -c ./src/main/c/int_map_benchmark.cpp -o ./target/cpp/int_map_benchmark.o

clang++ -Ofast -march=native -flto -std=c++17 -o ./target/cpp/int_map_benchmark ./target/cpp/int_map.o ./target/cpp/bench.o ./target/cpp/int_map_benchmark.o
</code></pre>
<p><strong>To run the C++ code:</strong></p>
<pre><code>#!/bin/bash

WARMUP=${1:-0}
MEASUREMENTS=${2:-2000000}
CAPACITY=${3:-20000}

./target/cpp/int_map_benchmark $WARMUP $MEASUREMENTS $CAPACITY
</code></pre>
<p><strong>Below the C++ code:</strong></p>
<pre><code>// =====&gt; bench.hpp
#ifndef BENCH_HPP
#define BENCH_HPP

#include &lt;chrono&gt;
#include &lt;iostream&gt;
#include &lt;limits&gt;
#include &lt;iomanip&gt;
#include &lt;string&gt;
#include &lt;cmath&gt;
#include &lt;map&gt;
#include &lt;sstream&gt;

class Bench {
public:
    Bench(int warmupCount = 0);
    ~Bench();

    void mark();
    void measure();
    bool measure(long long);
    void reset();
    void reset(bool);
    void printResults() const;
    void printResults(bool) const;
    bool isWarmingUp() const;
    int getIterations() const;
    int getMeasurements() const;
    double getAverage() const;

private:
    int warmupCount;
    int measurementCount;
    long long sum;
    long long minTime;
    long long maxTime;
    int size;
    std::map&lt;long long, long long&gt;* results;
    std::chrono::steady_clock::time_point startTime;
    
    static std::string formatWithCommas(long long value);
    static std::pair&lt;double, std::string&gt; formatTime(double nanos);
    static std::string formatPercentage(double perc);
    static double roundToDecimals(double d, int decimals);
    void printPercentiles() const;
    void addPercentile(double perc) const;
    double avg() const;
};

#endif // BENCH_HPP

// =====&gt; bench.cpp
#include &quot;bench.hpp&quot;
using namespace std;

Bench::Bench(int warmupCount)
    : warmupCount(warmupCount),
      measurementCount(0),
      sum(0),
      minTime(numeric_limits&lt;long long&gt;::max()),
      maxTime(numeric_limits&lt;long long&gt;::min()),
      size(0) {

        results = new map&lt;long long, long long&gt;();

}

Bench::~Bench() {
    delete results;
}

void Bench::mark() {
    startTime = chrono::steady_clock::now();
}

void Bench::measure() {
    auto endTime = chrono::steady_clock::now();
    auto elapsed = chrono::duration_cast&lt;chrono::nanoseconds&gt;(endTime - startTime).count();
    measure(elapsed);
}

bool Bench::measure(long long elapsed) {

    bool isToMeasure = ++measurementCount &gt; warmupCount;

    if (isToMeasure) {
        sum += elapsed;
        if (elapsed &lt; minTime) minTime = elapsed;
        if (elapsed &gt; maxTime) maxTime = elapsed;

        // Increment the frequency of this elapsed time
        auto it = results-&gt;find(elapsed);
        if (it == results-&gt;end()) {
            results-&gt;insert({elapsed, 1});
        } else {
            it-&gt;second++;
        }
        size++;
    }
    
    return isToMeasure;
}

int Bench::getIterations() const {
    return measurementCount;
}

int Bench::getMeasurements() const {
    return size;
}

void Bench::reset() {
    reset(false);
}

void Bench::reset(bool repeatWarmup) {
    measurementCount = 0;
    sum = 0;
    if (!repeatWarmup) warmupCount = 0;
    minTime = numeric_limits&lt;long long&gt;::max();
    maxTime = numeric_limits&lt;long long&gt;::min();
    results-&gt;clear();
    size = 0;
}

bool Bench::isWarmingUp() const {
    return warmupCount &lt;= measurementCount;
}

double Bench::avg() const {
    const int effectiveCount = measurementCount - warmupCount;
    if (effectiveCount &lt;= 0) {
        return 0;
    }
    const double avg = static_cast&lt;double&gt;(sum) / effectiveCount;
    const double rounded = round(avg * 100.0) / 100.0;
    return rounded;
}

double Bench::getAverage() const {
    return avg();
}   

void Bench::printResults() const {
    printResults(true);
}

void Bench::printResults(bool includePercentiles) const {

    int effectiveCount = measurementCount - warmupCount;

    string effCountStr = formatWithCommas(effectiveCount);
    string warmupStr = formatWithCommas(warmupCount);
    string totalStr = formatWithCommas(measurementCount);

    cout &lt;&lt; &quot;Measurements: &quot; &lt;&lt; effCountStr
         &lt;&lt; &quot; | Warm-Up: &quot; &lt;&lt; warmupStr
         &lt;&lt; &quot; | Iterations: &quot; &lt;&lt; totalStr &lt;&lt; endl;
         
    if (effectiveCount &gt; 0) {

        auto [avgVal, avgUnit] = formatTime(avg());
        auto [minVal, minUnit] = formatTime(static_cast&lt;double&gt;(minTime));
        auto [maxVal, maxUnit] = formatTime(static_cast&lt;double&gt;(maxTime));
    
        cout &lt;&lt; fixed &lt;&lt; setprecision(3);
        cout &lt;&lt; &quot;Avg Time: &quot; &lt;&lt; avgVal &lt;&lt; &quot; &quot; &lt;&lt; avgUnit &lt;&lt; &quot; | &quot;
             &lt;&lt; &quot;Min Time: &quot; &lt;&lt; minVal &lt;&lt; &quot; &quot; &lt;&lt; minUnit &lt;&lt; &quot; | &quot;
             &lt;&lt; &quot;Max Time: &quot; &lt;&lt; maxVal &lt;&lt; &quot; &quot; &lt;&lt; maxUnit &lt;&lt; endl;
    
        if (includePercentiles) printPercentiles();
    }
    
    cout &lt;&lt; endl;
}

string Bench::formatWithCommas(long long value) {
    string numStr = to_string(value);
    int insertPosition = static_cast&lt;int&gt;(numStr.length()) - 3;
    while (insertPosition &gt; 0) {
        numStr.insert(insertPosition, &quot;,&quot;);
        insertPosition -= 3;
    }
    return numStr;
}

pair&lt;double, string&gt; Bench::formatTime(double nanos) {
    if (nanos &gt;= 1'000'000'000.0) {
        double seconds = nanos / 1'000'000'000.0;
        return {roundToDecimals(seconds, 3), seconds &gt; 1 ? &quot;seconds&quot; : &quot;second&quot;};
    } else if (nanos &gt;= 1'000'000.0) {
        double millis = nanos / 1'000'000.0;
        return {roundToDecimals(millis, 3), millis &gt; 1 ? &quot;millis&quot; : &quot;milli&quot;};
    } else if (nanos &gt;= 1000.0) {
        double micros = nanos / 1000.0;
        return {roundToDecimals(micros, 3), micros &gt; 1 ? &quot;micros&quot; : &quot;micro&quot;};
    } else {
        double ns = nanos;
        return {roundToDecimals(ns, 3), ns &gt; 1 ? &quot;nanos&quot; : &quot;nano&quot;};
    }
}

double Bench::roundToDecimals(double d, int decimals) {
    double pow10 = pow(10.0, decimals);
    return round(d * pow10) / pow10;
}

void Bench::printPercentiles() const {

    if (size == 0) return;

    double percentiles[] = {0.75, 0.90, 0.99, 0.999, 0.9999, 0.99999};

    for (double p : percentiles) {
        addPercentile(p);
    }
}

string Bench::formatPercentage(double perc) {
    double p = perc * 100.0;

    ostringstream oss;
    oss &lt;&lt; fixed &lt;&lt; setprecision(6) &lt;&lt; p;

    string s = oss.str();
    // remove trailing zeros
    while (s.back() == '0') {
        s.pop_back();
    }

    // if the last character is now a '.', remove it
    if (s.back() == '.') {
        s.pop_back();
    }

    // Append the '%' sign
    s += &quot;%&quot;;

    return s;
}

void Bench::addPercentile(double perc) const {

    if (results-&gt;empty()) return;

    long long target = static_cast&lt;long long&gt;(llround(perc * size));
    if (target == 0) return;
    if (target &gt; size) target = size;

    // Iterate through the map to find the top element at position target
    long long iTop = 0;
    long long sumTop = 0;
    long long maxTop = -1;

    for (auto &amp;entry : *results) {
        long long time = entry.first;
        long long count = entry.second;

        for (int i = 0; i &lt; count; i++) {
            iTop++;
            sumTop += time;
            if (iTop == target) {
                maxTop = time;
                goto FOUND;
            }
        }
    }

FOUND:;

    double avgTop = static_cast&lt;double&gt;(sumTop) / iTop;
    auto [avgVal, avgUnit] = formatTime(avgTop);
    auto [maxVal, maxUnit] = formatTime(static_cast&lt;double&gt;(maxTop));

    cout &lt;&lt; fixed &lt;&lt; setprecision(3);
    cout &lt;&lt; formatPercentage(perc) &lt;&lt; &quot; = [avg: &quot; &lt;&lt; avgVal &lt;&lt; &quot; &quot; &lt;&lt; avgUnit
         &lt;&lt; &quot;, max: &quot; &lt;&lt; maxVal &lt;&lt; &quot; &quot; &lt;&lt; maxUnit &lt;&lt; &quot;]\n&quot;;
}

// =====&gt; int_map.hpp
#ifndef INT_MAP_HPP
#define INT_MAP_HPP

#include &lt;optional&gt;
#include &lt;cstddef&gt;

template &lt;typename E&gt;
class IntMap {

private:

    template &lt;typename T&gt;
    struct Entry {
        int key;
        T* value; // removed unnecessary std::optional (thanks to Paul McKenzie at https://stackoverflow.com/users/3133316/paulmckenzie)
        Entry&lt;T&gt;* next;
    };

    Entry&lt;E&gt;** data;
    int count;
    Entry&lt;E&gt;* head;
    const int capacity;

    Entry&lt;E&gt;* newEntry(int key, const E&amp; value, Entry&lt;E&gt;* next) {
        Entry&lt;E&gt;* newEntry = head;

        if (newEntry != nullptr) {
            head = newEntry-&gt;next;
        } else {
            newEntry = new Entry&lt;E&gt;();
        }

        newEntry-&gt;key = key;
        newEntry-&gt;value = const_cast&lt;E*&gt;(&amp;value);
        newEntry-&gt;next = next;

        return newEntry;
    }

    void free(Entry&lt;E&gt;* e) {
        e-&gt;value = nullptr;
        e-&gt;next = head;
        head = e;
    }

    int toArrayIndex(int key) const {
        return (key &amp; 0x7FFFFFFF) % capacity;
    }

public:

    IntMap(int capacity)
        : capacity(capacity), count(0), head(nullptr) {
        data = new Entry&lt;E&gt;*[capacity];
        for (int i = 0; i &lt; capacity; i++) {
            data[i] = nullptr;
        }
    }

    ~IntMap() {
        clear();

        while (head != nullptr) {
            Entry&lt;E&gt;* temp = head;
            head = head-&gt;next;
            delete temp;
        }

        delete[] data;
    }

    int size() const {
        return count;
    }

    E* get(int key) const {
        Entry&lt;E&gt;* e = data[toArrayIndex(key)];
        while (e != nullptr) {
            if (e-&gt;key == key) {
                return e-&gt;value;
            }
            e = e-&gt;next;
        }
        return nullptr;
    }

    E* put(int key, const E&amp; value) {
        int index = toArrayIndex(key);
        Entry&lt;E&gt;* e = data[index];

        while (e != nullptr) {
            if (e-&gt;key == key) {
                E* old = e-&gt;value;
                e-&gt;value = const_cast&lt;E*&gt;(&amp;value);
                return old;
            }
            e = e-&gt;next;
        }

        data[index] = newEntry(key, value, data[index]);
        count++;
        return nullptr;
    }

    E* remove(int key) {
        int index = toArrayIndex(key);
        Entry&lt;E&gt;* e = data[index];
        Entry&lt;E&gt;* prev = nullptr;

        while (e != nullptr) {
            if (e-&gt;key == key) {
                if (prev != nullptr) {
                    prev-&gt;next = e-&gt;next;
                } else {
                    data[index] = e-&gt;next;
                }

                E* oldValue = e-&gt;value;
                free(e);
                count--;
                return oldValue;
            }
            prev = e;
            e = e-&gt;next;
        }
        return nullptr;
    }

    void clear() {
        for (int index = capacity - 1; index &gt;= 0; index--) {
            while (data[index] != nullptr) {
                Entry&lt;E&gt;* next = data[index]-&gt;next;
                free(data[index]);
                data[index] = next;
            }
        }
        count = 0;
    }
};

#endif // INT_MAP_HPP

// =====&gt; int_map.cpp
#include &quot;int_map.hpp&quot;

// NOOP

// =====&gt; int_map_benchmark.cpp
#include &quot;int_map.hpp&quot;
#include &quot;bench.hpp&quot;

using namespace std;

struct Dummy {};

int main(int argc, char* argv[]) {

    int warmupCount = 1000000;
    int measureCount = 1000000;
    int capacity = 100000;

    if (argc &gt; 1) {
        warmupCount = atoi(argv[1]);
    }
    if (argc &gt; 2) {
        measureCount = atoi(argv[2]);
    }
    if (argc &gt; 3) {
        capacity = atoi(argv[3]);
    }

    cout &lt;&lt; &quot;\nArguments: warmup=&quot; &lt;&lt; warmupCount &lt;&lt; &quot; measurements=&quot; &lt;&lt; measureCount &lt;&lt; &quot; mapCapacity=&quot; &lt;&lt; capacity &lt;&lt; endl &lt;&lt; endl;

    int iterations = warmupCount + measureCount;

    IntMap&lt;Dummy&gt;* map = new IntMap&lt;Dummy&gt;(capacity);
    Bench bench(warmupCount);
    Dummy dummy;

    cout &lt;&lt; &quot;Benchmarking put on empty map... (1) =&gt; creating new Entry objects&quot; &lt;&lt; endl;
    for (int i = 0; i &lt; iterations; i++) {
        bench.mark();
        map-&gt;put(i, dummy);
        bench.measure();
    }
    bench.printResults();
    
    cout &lt;&lt; &quot;Benchmarking put after clear()... (2) =&gt; hitting the pool of Entry objects&quot; &lt;&lt; endl;
    map-&gt;clear(); // clear the map, but the entry pool will be there
    bench.reset(true);
    for (int i = 0; i &lt; iterations; i++) {
        bench.mark();
        map-&gt;put(i, dummy);
        bench.measure();
    }
    bench.printResults();

    cout &lt;&lt; &quot;Benchmarking get...&quot; &lt;&lt; endl;
    bench.reset(true);
    for (int i = 0; i &lt; iterations; i++) {
        bench.mark();
        volatile auto val = map-&gt;get(i); // volatile to prevent optimization out
        bench.measure();
    }
    bench.printResults();

    cout &lt;&lt; &quot;Benchmarking remove...&quot; &lt;&lt; endl;
    bench.reset(true);
    for (int i = 0; i &lt; iterations; i++) {
        bench.mark();
        map-&gt;remove(i);
        bench.measure();
    }
    bench.printResults();

    delete map; 
    return 0;
}
</code></pre>
<p><strong>Disclaimer:</strong> I'm one of the developers of the open-source project <a href=""https://www.github.com/coralblocks/CoralBench"" rel=""nofollow noreferrer"">CoralBench</a></p>
",
tags:"<java><c++><benchmarking><jit>",
score:16,
creationDate:2024-12-10 11:42:41,
creationDate:2024-12-16 02:02:29,
score:6,
acceptedResponderReputation:275200,
acceptedResponder:1774667,
QuestionerReputation:218,
Questioner:28712954}
{title:"Determine the shortest possible match of a regular expression",
id:"https://stackoverflow.com/questions/75166789",
body:"<p>I have an randomly ordered array of regular expressions like this:</p>
<pre class=""lang-js prettyprint-override""><code>let patterns = [
    /foo+ba+r/,
    /foo/,
    /foo+bar/,
    /foobar/,
    /m[eo]{4,}w/,
    /boo/,
    /fooo*/,
    /meow/
]
</code></pre>
<p>I'm not sure if this is possible but I would like to write an algorithm which sorts the regular expressions from least greedy to most greedy, like this:</p>
<pre class=""lang-js prettyprint-override""><code>[
    /foo/,
    /boo/,
    /fooo*/,
    /meow/,
    /foobar/,
    /foo+bar/,
    /m[eo]{4,}w/,
    /foo+ba+r/
]
</code></pre>
<p>I would imagine such sorting could be achieved like so:</p>
<pre class=""lang-js prettyprint-override""><code>patterns.sort((p1, p2) { return p1.greediness() - p2.greediness() });
</code></pre>
<p>But there exists no method called <code>greediness</code> in the the <code>RegExpr</code> class.</p>
<p>Ideally, the <code>greediness</code> method would return the number of characters which could be possibly matched at minimum. i.e:</p>
<pre class=""lang-js prettyprint-override""><code>/foo/.greediness() == 3
/boo/.greediness() == 3
/fooo*/.greediness() == 3
/meow/.greediness() == 4
/foobar/.greediness() == 6
/foo+bar/.greediness() == 6
/m[eo]{4,}w/.greediness() == 6
/foo+ba+r/.greediness() == 6
</code></pre>
<p>What would your solution be to this problem?</p>
",
tags:"<javascript><sorting>",
score:7,
creationDate:2023-01-19 00:50:39,
creationDate:2023-01-23 12:29:15,
score:6,
acceptedResponderReputation:44013,
acceptedResponder:2823719,
QuestionerReputation:468,
Questioner:14684823}
{title:"How to manage taskbar from JavaFX, via native code in Linux",
id:"https://stackoverflow.com/questions/79354536",
body:"<p>I'm trying get more experience with the new <a href=""https://openjdk.org/jeps/454"" rel=""nofollow noreferrer"">Foreign Function &amp; Memory API</a> in Java 22+. The best way how to learn a new API is by using it in a project.</p>
<p>My project's goal is to report on the <a href=""https://en.m.wikipedia.org/wiki/Taskbar"" rel=""nofollow noreferrer"">taskbar</a> the progress of some long-running task. As far as I know, there is no &quot;native&quot; support of this in JavaFX. There are some libraries like
<a href=""https://github.com/Dansoftowner/FXTaskbarProgressBar"" rel=""nofollow noreferrer""><em>FXTaskbarProgressBar</em></a> which serves the purpose, but only for Windows OS. And it is using the &quot;old&quot; <a href=""https://en.m.wikipedia.org/wiki/Java_Native_Interface"" rel=""nofollow noreferrer"">Java Native Interface (JNI)</a>.</p>
<p>After a short research, I found a simple <a href=""https://en.wikipedia.org/wiki/Go_(programming_language)"" rel=""nofollow noreferrer"">Go</a> library
<a href=""https://github.com/bibelin/taskbar"" rel=""nofollow noreferrer""><em>taskbar</em></a>. This library inspired me to try porting to Java for JavaFX.</p>
<p>First I used <code>jextract</code> to get java bindings to native library calls:</p>
<pre class=""lang-bash prettyprint-override""><code>jextract --output target/generated-sources/jextract -t &quot;taskbar_test.gen&quot; --include-function &quot;XOpenDisplay&quot; --include-function &quot;XChangeProperty&quot; --include-function &quot;XFlush&quot; --include-function &quot;XCloseDisplay&quot; /usr/include/X11/Xlib.h
</code></pre>
<p>Then I created a simple application to simulate long running process
where I try to update progress on taskbar by calling method
&quot;XChangeProperty&quot; which I found in documentation of X11:
<a href=""https://www.x.org/releases/X11R7.7/doc/libX11/libX11/libX11.html#XChangeProperty"" rel=""nofollow noreferrer"">https://www.x.org/releases/X11R7.7/doc/libX11/libX11/libX11.html#XChangeProperty</a></p>
<p>Unfortunately this does not work. The program does not crash,
task is running on background, but no update on taskbar is happening.</p>
<p>Here is the code I created:</p>
<pre class=""lang-java prettyprint-override""><code>package taskbar_test;

import com.sun.glass.ui.Window;
import javafx.application.Application;
import javafx.concurrent.Task;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;
import taskbar_test.gen.Xlib_h;

import java.lang.foreign.Arena;
import java.lang.foreign.MemorySegment;
import java.lang.foreign.ValueLayout;

public class AppLinuxXlib extends Application {

    @Override
    public void start(Stage primaryStage) {
        Button startButton = new Button(&quot;Start Long Running Task&quot;);

        startButton.setOnAction(event -&gt; {
            final long rawHandle = Window.getWindows().getFirst().getRawHandle();
            System.out.println(rawHandle);
            // Create a long-running task
            Task&lt;Void&gt; longTask = new Task&lt;&gt;() {
                @Override
                protected Void call() throws Exception {
                    System.out.println(&quot;Started&quot;);

                    try (var arena = Arena.ofConfined()) {
                        var NET_WM_XAPP_PROGRESS = arena.allocateFrom(&quot;NET_WM_XAPP_PROGRESS&quot;);
//                        var NET_WM_XAPP_PROGRESS_PULSE = arena.allocateFrom(&quot;NET_WM_XAPP_PROGRESS_PULSE&quot;);

                        MemorySegment x11Session = Xlib_h.XOpenDisplay(MemorySegment.NULL);
                        System.out.println(x11Session);

                        // Prepare the progress data
                        MemorySegment initData = arena.allocateFrom(ValueLayout.JAVA_INT, 0);
                        Xlib_h.XChangeProperty(x11Session,                    // display
                                MemorySegment.ofAddress(rawHandle).address(), // window
                                NET_WM_XAPP_PROGRESS.address(),               // property
                                6,                                            // type
                                32,                                           // format
                                0,                                            // mode PropModeReplace=0
                                initData,                                     // data
                                1);                                           // nelements
                        Xlib_h.XFlush(x11Session);

                        System.out.println(&quot;Countdown started&quot;);

                        // Set the taskbar progress
                        for (int i = 0; i &lt;= 100; i+=20) {
                            // Simulate work
                            Thread.sleep(500);
                            System.out.println(i);
                            MemorySegment progressData = arena.allocateFrom(ValueLayout.JAVA_INT, i);
                            // Update taskbar progress
                            // https://www.x.org/releases/X11R7.7/doc/libX11/libX11/libX11.html#XChangeProperty
                            Xlib_h.XChangeProperty(x11Session,                    // display
                                    MemorySegment.ofAddress(rawHandle).address(), // window
                                    NET_WM_XAPP_PROGRESS.address(),               // property
                                    6,                                            // type
                                    32,                                           // format
                                    0,                                            // mode PropModeReplace=0
                                    progressData,                                 // data
                                    1);                                           // nelements
                            Xlib_h.XFlush(x11Session);
                        }
                        System.out.println(&quot;Finished&quot;);
                        Xlib_h.XCloseDisplay(x11Session);

                    } catch (Throwable ex) {
                        ex.printStackTrace();
                    }
                    return null;
                }
            };

            // Start the task in a new thread
            new Thread(longTask).start();
        });

        VBox vbox = new VBox(10, startButton);
        Scene scene = new Scene(vbox, 300, 200);
        primaryStage.setScene(scene);
        primaryStage.setTitle(&quot;Taskbar Progress Example Linux&quot;);
        primaryStage.show();
    }

    public static void main(String[] args) {
        launch(args);
    }
}
</code></pre>
<p>What am I doing wrong and what is the correct direction with how to make the implementation work?</p>
",
tags:"<java><javafx><taskbar><java-ffm>",
score:7,
creationDate:2025-01-14 09:38:06,
creationDate:2025-01-16 12:48:56,
score:6,
acceptedResponderReputation:44292,
acceptedResponder:1831987,
QuestionerReputation:231,
Questioner:6628911}
{title:"How can I listen to a keystroke combination with lexical.js?",
id:"https://stackoverflow.com/questions/75338385",
body:"<p>I'm new to lexical.js and don't fully understand how I can listen to different keystroke combinations. I want to listen to &quot;Ctrl/Cmd+S&quot; and then fire off a callback (to save data). How can I do that?</p>
<p>With a textarea I can do something like:</p>
<pre><code>const onKeyDown = (event) =&gt; {
  // &quot;Ctrl&quot; or &quot;Cmd&quot; + &quot;s&quot;
  if ((event.ctrlKey || event.metaKey) &amp;&amp; event.which === 83) {
    // save data
  }
}

&lt;textarea onKeyDown={onKeyDown} /&gt;

</code></pre>
<p>With lexical I've tried to do something like:</p>
<pre><code>const MY_SAVE_COMMAND: LexicalCommand&lt;string&gt; = createCommand('MY_SAVE_COMMAND')

editor.registerCommand&lt;KeyboardEvent&gt;(
  MY_SAVE_COMMAND,
  (event) =&gt; {
    console.log('[MY_SAVE_COMMAND] event', event)
    return true
  },
  COMMAND_PRIORITY_HIGH,
)
</code></pre>
<p>which does not work. Where do I insert the part where I listen to the keystrokes, or is there a different way of doing this altogether?</p>
",
tags:"<javascript><typescript><lexicaljs>",
score:6,
creationDate:2023-02-03 16:17:39,
creationDate:2023-02-03 17:25:37,
score:6,
acceptedResponderReputation:6491,
acceptedResponder:864233,
QuestionerReputation:456,
Questioner:3773014}
{title:"What is the explanation of null values in a cyclic dependency in final private enum fields?",
id:"https://stackoverflow.com/questions/75182408",
body:"<p>Consider these enum declarations:</p>
<pre><code>enum Color {
    RED(Shape.CIRCLE),
    GREEN(Shape.TRIANGLE),
    BLUE(Shape.SQUARE);

    private final Shape shape;

    Color(Shape shape) {
        this.shape = shape;
    }

    Shape getShape() {
        return shape;
    }
}

enum Shape {
    CIRCLE(Color.RED),
    TRIANGLE(Color.GREEN),
    SQUARE(Color.BLUE);

    private final Color color;

    Shape(Color color) {
        this.color = color;
    }

    Color getColor() {
        return color;
    }
}
</code></pre>
<p>There are cyclic dependencies between the enum fields. There are no compiler warnings (using Java 8).</p>
<p>However, all these tests will fail in the second line:</p>
<pre><code>@Test
public void testRedAndCircle() {
    assertThat(Color.RED.getShape()).isNotNull();
    assertThat(Shape.CIRCLE.getColor()).isNotNull(); // fails
}

@Test
public void testCircleAndRed() {
    assertThat(Shape.CIRCLE.getColor()).isNotNull();
    assertThat(Color.RED.getShape()).isNotNull(); // fails
}

@Test
public void testGreenAndTriangle() {
    assertThat(Color.GREEN.getShape()).isNotNull();
    assertThat(Shape.TRIANGLE.getColor()).isNotNull(); // fails
}

@Test
public void testBlueAndSquare() {
    assertThat(Color.BLUE.getShape()).isNotNull();
    assertThat(Shape.SQUARE.getColor()).isNotNull(); // fails
}
</code></pre>
<p>How can the null value in the enum field be explained?</p>
<p>It seems that the enum object in the private final fields is not yet completely instantiated.</p>
",
tags:"<java><enums><nullpointerexception><jls><cyclic-reference>",
score:10,
creationDate:2023-01-20 09:58:23,
creationDate:2023-02-05 11:26:18,
score:6,
acceptedResponderReputation:38195,
acceptedResponder:262683,
QuestionerReputation:36634,
Questioner:80901}
{title:"Java array memory size",
id:"https://stackoverflow.com/questions/79170030",
body:"<p>For those eager to flag this as duplicate, this question is not related to any of the questions like:</p>
<p><a href=""https://stackoverflow.com/questions/50502663/how-to-calculate-java-arrays-memory-size"">How to calculate Java array&#39;s memory size?</a></p>
<p><a href=""https://stackoverflow.com/questions/16032797/memory-size-of-java-32-bit-system-int-arrays"">Memory size of Java 32-bit system int[] arrays</a></p>
<hr />
<p>In Java when an array of primitive <code>int</code> is created:</p>
<pre><code>int[] arr = new int[1000];
</code></pre>
<p>Does the JVM allocate memory for the entire array length * 4 bytes, i.e. 4000 bytes after the above statement? Let's not bother about constant overheads like headers etc.</p>
<p>My understanding is that in case of primitive numeric types, e.g. <code>int</code>, <code>double</code> etc., the default value '0' is also a valid value, hence needs memory. In effect, full required memory must be allocated at the time of such declarations.</p>
<p>How could I verify it?</p>
",
tags:"<java><arrays>",
score:6,
creationDate:2024-11-08 12:24:45,
creationDate:2024-11-08 18:10:15,
score:6,
acceptedResponderReputation:298103,
acceptedResponder:2711488,
QuestionerReputation:2654,
Questioner:1439122}
{title:"java.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible",
id:"https://stackoverflow.com/questions/76121875",
body:"<p>I am getting the issue below:</p>
<pre><code>java.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @43393097
    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)
</code></pre>
<p>The fix is widely-documented on the net: use JVM options</p>
<p>--illegal-access=permit</p>
<p>or</p>
<p>--add-opens=java.base/java.util=ALL-UNNAMED.</p>
<p>The former was removed after JDK 11. I started with JDK 17 and have now tried both Amazon and Open JDK 11. Neither of these options used with a JDK version 11 eliminates the error, nor does using both at once. I've tried every permutation (and also using --illegal-access=warn).</p>
<p>I'm launching the app like this:</p>
<pre><code>me in ~/dev/project on branch main &gt; java --version
openjdk 11.0.19 2023-04-18 LTS
OpenJDK Runtime Environment Corretto-11.0.19.7.1 (build 11.0.19+7-LTS)
OpenJDK 64-Bit Server VM Corretto-11.0.19.7.1 (build 11.0.19+7-LTS, mixed mode)
me in ~/dev/project on branch main &gt;                          
me in ~/dev/project on branch main &gt; java -jar --add-opens=java.base/java.util=ALL-UNNAMED out/server/assembly.dest/out.jar 
</code></pre>
<p>Everything I read suggests that using --add-opens=java.base... will fix the issue on JDK11. It does not.</p>
<p>Using --illegal-access=permit, either along or with --add-opens, also doesn't work.</p>
<p>There's no chance the way a jar is <em>built</em> can influence this, right? It's strictly a runtime permissions thing.</p>
",
tags:"<java><scala>",
score:6,
creationDate:2023-04-27 14:57:37,
creationDate:2023-07-20 15:06:46,
score:6,
acceptedResponderReputation:395,
acceptedResponder:2653184,
QuestionerReputation:97,
Questioner:14459924}
{title:"How to globally add a custom Serializer to Jackson and be used by default",
id:"https://stackoverflow.com/questions/75093378",
body:"<p>Let's say I want to serialize <code>Boolean</code> into <code>Number</code> <strong>by default</strong>.</p>
<p>I know I can do it field-by-field</p>
<pre class=""lang-java prettyprint-override""><code>@JsonFormat(shape = Shape.NUMBER)
private Boolean success;
</code></pre>
<p>But can I &quot;register&quot; my custom Serializer so that when I return an Object from my API, the <code>Boolean</code>s in the class will be serialized into <code>Number</code> in the json response.</p>
<p>I have the following Serializer</p>
<pre class=""lang-java prettyprint-override""><code>public class MyBooleanSerializer extends JsonSerializer&lt;Boolean&gt; {
    @Override
    public void serialize(
                    Boolean value, 
                    JsonGenerator gen, 
                    SerializerProvider serializers) throws IOException {

        gen.writeString(value ? &quot;1&quot; : &quot;0&quot;);

    }
}
</code></pre>
<p>And I have the following class</p>
<pre class=""lang-java prettyprint-override""><code>@Data
public class MyResponse {
    private Boolean success;
    private String message;
}
</code></pre>
<p>It will be used like this</p>
<pre class=""lang-java prettyprint-override""><code>@GetMapping(&quot;/hello&quot;)
public MyResponse hello() {
    Boolean success = true;
    String message = &quot;Hi there&quot;;
    return new MyResponse(success, message);
}
</code></pre>
<p>And when I <code>GET</code> this API, I am expecting this response</p>
<pre class=""lang-json prettyprint-override""><code>{
  success: 1,
  message: &quot;Hi there&quot;
}
</code></pre>
<p>I am expecting some Beans to be injected. I have tried</p>
<pre class=""lang-java prettyprint-override""><code>@Bean
@Primary
ObjectMapper objectMapper() {
    SimpleModule module = new SimpleModule();
    module.addSerializer(new MyBooleanSerializer());
    return new ObjectMapper()
            .setSerializationInclusion(JsonInclude.Include.NON_NULL)
            .registerModule(module);
}
</code></pre>
<p>but it does not work.</p>
<p>I have read <a href=""https://howtodoinjava.com/jackson/jackson-booleans/"" rel=""nofollow noreferrer"">this</a> tutorial and seems like it needs to create the <code>jsonMapper</code> every time I want to serialize an object. All I want is whenever I return <code>MyResponse</code> from an API, the <code>Boolean</code>s are serialized into <code>Number</code>s.</p>
",
tags:"<java><spring><spring-boot><jackson>",
score:8,
creationDate:2023-01-12 08:26:37,
creationDate:2023-01-12 10:50:01,
score:6,
acceptedResponderReputation:18899,
acceptedResponder:7237884,
QuestionerReputation:550,
Questioner:6625422}
{title:"can GA4 custom dimensions be updated after the initial 'config' call?",
id:"https://stackoverflow.com/questions/76177242",
body:"<p>I have google analytics 4 being loaded via GTM, and i've been struggling with adding custom dimensions to the &quot;enhanced measurement&quot; events. after reading <a href=""https://stackoverflow.com/a/73870959/14809536"">some</a> <a href=""https://stackoverflow.com/a/75618803/14809536"">other</a> <a href=""https://stackoverflow.com/a/75618781/14809536"">answers</a> i've determined that yes, the dimensions work when set in the <code>'config'</code> call for the tracking id (which i can do in GTM under &quot;fields to set&quot;), but <code>'config'</code> seems like it noops on subsequent calls for an already configured tracker with GA4 (with UA it does something).</p>
<p>as discussed in the other questions, <code>'set'</code> operations don't seem to do anything, and i'm not manually dispatching the &quot;enhanced collection&quot; events so i can't manually specify the parameters in the call.</p>
<p>is there any way to add parameters to &quot;enhanced measurement&quot; events after the tracker is configured?</p>
<p>a minimal example:</p>
<pre><code>gtag('set', {'dimension1': 'test1'})
gtag('config', 'G-XXXXX', {dimension2: 'test2'})
gtag('set', {'dimension3': 'test3'})
gtag('event', 'test', {send_to: 'G-XXXXXX', foobar: 'baz'})
</code></pre>
<p>the debugger shows the event parameters:
en: test
_ee: 1
ep.dimension2: test2
ep.foobar: baz</p>
<p>on a page navigation the automatic enhanced collection event looks like this:
en: page_view
ep.dimension2: test2
_et: 922</p>
<p>however when using an old GA account:</p>
<pre><code>gtag('config', 'UA-XXXXXX')
gtag('event', 'test', {send_to: 'UA-XXXX', foobar: 'baz'})
</code></pre>
<p>it shows all the set dimensions:
&quot;dimension1&quot;: &quot;test1&quot;
&quot;dimension3&quot;: &quot;test3&quot;
&quot;&amp;jsscut&quot;: &quot;1&quot;
&quot;hitCallback&quot;: [function]
&quot;hitType&quot;: &quot;event&quot;
&quot;eventCategory&quot;: &quot;general&quot;
&quot;eventAction&quot;: &quot;test&quot;</p>
<p>why does the G4 integration not pick up on set dimensions? and is there any way to modify dimensions after the tracker is configured other than including them on the event call</p>
",
tags:"<javascript><google-analytics><google-analytics-4>",
score:6,
creationDate:2023-05-04 20:44:37,
creationDate:2023-05-10 21:55:32,
score:6,
acceptedResponderReputation:8081,
acceptedResponder:3700993,
QuestionerReputation:95,
Questioner:14809536}
{title:"Is this a bug in the JVM, or in NASM?",
id:"https://stackoverflow.com/questions/79327777",
body:"<p>I think I've found a bug, but I'm not sure whether to blame the JVM, JNI, NASM, GCC, or ld.</p>
<p>The bug causes <a href=""https://mynameistrez.github.io/2024/02/29/creating-the-perfect-modding-language.html"" rel=""nofollow noreferrer"">my compiled modding language</a> called grug (see this for videos and explanations) to sporadically crash Minecraft (Java edition) when mods cause a <code>SIGSEGV</code> with infinite recursion.</p>
<p>My modding language just consists of a 9k line <code>grug.c</code>, delivering a compiler and linker for my custom programming language. Its shared object (<code>.so</code>) output is based on ~300 tests I wrote that diff it against the expected NASM output. So my compiler is basically a NASM compiler that takes <code>.grug</code> files as input, rather than <code>.s</code> x86-64 Assembly files. I'm explaining this to clarify why I can't just ditch NASM.</p>
<p>After days of carefully shaving my original program down, I've finally got a minimal reproducible example which shows that errors like <code>FATAL ERROR in native method: Static field ID passed to JNI</code> have a roughly 1 in 20 chance of being printed when these conditions are met:</p>
<ol>
<li>JNI is used to call a C function that opens <code>mage.so</code></li>
<li><code>mage.so</code> was generated with <code>ld</code> from <code>mage.o</code>, where <code>mage.o</code> was generated with <code>nasm</code> from <code>mage.s</code> (where <code>mage.s</code> can just be an empty file)</li>
<li>After loading <code>mage.so</code>, JNI is used to call a C function that causes a <code>SIGSEGV</code></li>
</ol>
<p>I have been able to reproduce the errors on both my Ubuntu and Arch Linux computers.</p>
<p>What's strange is that generating <code>mage.o</code> from an empty <code>mage.c</code> with <code>gcc</code>, instead of using NASM, <em>does not</em> cause the errors to be printed, which is why I think NASM may be to blame.</p>
<h1>Minimal reproducible example</h1>
<p><code>Main.java</code>:</p>
<pre class=""lang-java prettyprint-override""><code>class Main {
    private native void init();
    private native void foo();

    public static void main(String[] args) {
        new Main().run();
    }

    public void run() {
        System.loadLibrary(&quot;foo&quot;);

        init();

        long iteration = 0;
        for (int i = 0; i &lt; 2; i++) {
            System.out.println(&quot;Iteration: &quot; + ++iteration);
            foo();
        }
    }
}
</code></pre>
<p><code>foo.c</code>:</p>
<pre class=""lang-c prettyprint-override""><code>#include &lt;dlfcn.h&gt;
#include &lt;jni.h&gt;
#include &lt;pthread.h&gt;
#include &lt;setjmp.h&gt;
#include &lt;signal.h&gt;
#include &lt;stdio.h&gt;
#include &lt;stdlib.h&gt;
#include &lt;unistd.h&gt;

jmp_buf jmp_buffer;

volatile pthread_t expected_thread;

static void segv_handler(int sig) {
    (void)sig;

    {
        char msg[] = &quot;In segv_handler()\n&quot;;
        write(STDERR_FILENO, msg, sizeof(msg)-1);
    }

    if (!pthread_equal(pthread_self(), expected_thread)) {
        char msg[] = &quot;Unexpected thread entered handler; exiting\n&quot;;
        write(STDERR_FILENO, msg, sizeof(msg)-1);
        _exit(EXIT_FAILURE);
    }

    siglongjmp(jmp_buffer, 1);
}

JNIEXPORT void JNICALL Java_Main_init(JNIEnv *env, jobject obj) {
    (void)env;
    (void)obj;

    fprintf(stderr, &quot;Initializing...\n&quot;);

    struct sigaction sigsegv_sa = {
        .sa_handler = segv_handler,
        .sa_flags = SA_ONSTACK, // SA_ONSTACK gives SIGSEGV its own stack
    };

    // Handle stack overflow
    // See https://stackoverflow.com/a/7342398/13279557
    static char stack[SIGSTKSZ];
    stack_t ss = {
        .ss_size = SIGSTKSZ,
        .ss_sp = stack,
    };

    if (sigaltstack(&amp;ss, NULL) == -1) {
        perror(&quot;sigaltstack&quot;);
        exit(EXIT_FAILURE);
    }

    if (sigfillset(&amp;sigsegv_sa.sa_mask) == -1) {
        perror(&quot;sigfillset&quot;);
        exit(EXIT_FAILURE);
    }

    if (sigaction(SIGSEGV, &amp;sigsegv_sa, NULL) == -1) {
        perror(&quot;sigaction&quot;);
        exit(EXIT_FAILURE);
    }

    void *dll = dlopen(&quot;./mage.so&quot;, RTLD_NOW);
    if (!dll) {
        fprintf(stderr, &quot;dlopen(): %s\n&quot;, dlerror());
    }
}

void recurse() {
    recurse();
}

JNIEXPORT void JNICALL Java_Main_foo(JNIEnv *env, jobject obj) {
    (void)env;
    (void)obj;

    expected_thread = pthread_self();

    if (sigsetjmp(jmp_buffer, 1)) {
        fprintf(stderr, &quot;Jumped\n&quot;);
        return;
    }

    fprintf(stderr, &quot;Recursing...\n&quot;);

    recurse();
}
</code></pre>
<p><code>mage.s</code>: an empty file</p>
<p><code>mage.c</code>: an empty file</p>
<p>Compiling <code>foo.so</code> (you will need to replace the jdk include paths here with your own, which <code>ls /usr/lib/jvm</code> can help with):</p>
<pre class=""lang-none prettyprint-override""><code>gcc foo.c -o libfoo.so -shared -fPIC -g -Wall -Wextra -Wpedantic -Werror -Wfatal-errors -Wno-infinite-recursion -I/usr/lib/jvm/jdk-23.0.1-oracle-x64/include -I/usr/lib/jvm/jdk-23.0.1-oracle-x64/include/linux
</code></pre>
<p>Then assemble <code>mage.s</code> to <code>mage.o</code>:</p>
<pre class=""lang-bash prettyprint-override""><code>nasm mage.s -felf64
</code></pre>
<p>And link <code>mage.o</code> to <code>mage.so</code>:</p>
<pre class=""lang-bash prettyprint-override""><code>ld mage.o -o mage.so -shared
</code></pre>
<p>Finally we run <code>Main.java</code> in an infinite loop, which should eventually print <code>FATAL ERROR in native method: Static field ID passed to JNI</code>:</p>
<pre class=""lang-bash prettyprint-override""><code>while true; do java -Xcheck:jni -XX:+AllowUserSignalHandlers -Djava.library.path=. Main.java; done
</code></pre>
<p>Hitting <code>Ctrl</code>+<code>Z</code> a few times will suspend the loop, where you can then use <code>kill %%</code> to kill it.</p>
<h1>My questions</h1>
<p>What I don't get is why generating <code>mage.o</code> from compiling <code>mage.c</code>, instead of from assembling <code>mage.s</code>, never gets the program to print the error:</p>
<pre class=""lang-bash prettyprint-override""><code>gcc mage.c -c
</code></pre>
<p>I can see that the output of <code>readelf -a mage.o</code>, <code>objdump -D mage.o</code>, and <code>xxd mage.o</code> are all significantly larger when <code>mage.o</code> is generated from <code>mage.c</code>. This is due to GCC dumping GNU-specific sections in the ELF file and such, so I guess the error only being printed when using NASM to assemble <code>mage.s</code> may have to do with the sections in the ELF file?</p>
<p>What I also don't understand is why the <code>pthread_equal()</code> check I put in the signal handler that exits right away does not prevent the <code>FATAL ERROR in native method: Static field ID passed to JNI</code> from being printed. I figured that the error was caused by an internal JVM thread entering my handler, while it was meant to enter JVM's own <code>SIGSEGV</code> handler, but I guess not?</p>
<p>I know the program prints warnings about it wanting it to be ran with jsig, but <a href=""https://stackoverflow.com/a/79327636/13279557"">as I described in this answer</a>, using jsig is not possible when wanting to overwrite JVM's <code>SIGSEGV</code> handler with your own handler in C (as far as I've been able to tell from a week of research).</p>
<p>It's easy to throw my hands up by blaming the odd behavior of the NASM version on me not using jsig, but it doesn't make any logical sense to me. I'm still not sure whether it's actually a NASM or JVM issue.</p>
<p>I'm on Ubuntu 24.04.1, and here are the versions of the programs I am calling in the MRE:</p>
<pre class=""lang-none prettyprint-override""><code>$ java --version
java 23.0.1 2024-10-15
Java(TM) SE Runtime Environment (build 23.0.1+11-39)
Java HotSpot(TM) 64-Bit Server VM (build 23.0.1+11-39, mixed mode, sharing)

$ nasm --version
NASM version 2.16.01 # 2.16.03-1 also reproduces the error

$ gcc --version
gcc (Ubuntu 13.3.0-6ubuntu2~24.04) 13.3.0

$ ld --version
GNU ld (GNU Binutils for Ubuntu) 2.42
</code></pre>
",
tags:"<java><java-native-interface><shared-libraries><nasm>",
score:13,
creationDate:2025-01-03 21:56:59,
creationDate:2025-01-09 14:53:42,
score:6,
acceptedResponderReputation:672,
acceptedResponder:5639961,
QuestionerReputation:662,
Questioner:13279557}
{title:"Type 'MutableRefObject<undefined>' is not assignable to type 'LegacyRef<HTMLDivElement> | undefined'",
id:"https://stackoverflow.com/questions/74989176",
body:"<p>I have set up a custom hook which gets a <code>ref</code> object and observes it:</p>
<pre><code>import { useState, useEffect, MutableRefObject } from &quot;react&quot;;

const UseOnScreen = (ref: MutableRefObject&lt;undefined&gt;) =&gt; {
  const [isIntersecting, setIntersecting] = useState(false);
  useEffect(() =&gt; {
    const observer = new IntersectionObserver(([entry]) =&gt;
      setIntersecting(entry.isIntersecting)
    );
    if (ref.current) {
      observer.observe(ref.current);
    }
  });
  return isIntersecting;
};
export default UseOnScreen;
</code></pre>
<p>Next, in my page component, I have declared a <code>ref</code> using <code>useRef()</code>:</p>
<pre><code>import { useRef } from &quot;react&quot;;
import UseOnScreen from &quot;../hooks/UseOnScreen&quot;;
import About from &quot;./about&quot;;

export default function Home() {
  const aboutRef = useRef();
  const aboutRefValue = UseOnScreen(aboutRef);

  return (
     &lt;&gt;
         {/* other components */}
         &lt;div ref={aboutRef}&gt;{aboutRefValue &amp;&amp; &lt;About /&gt;}&lt;/div&gt;
     &lt;/&gt;
  );
}
</code></pre>
<p>This gives the following error:</p>
<pre><code>Type 'MutableRefObject&lt;undefined&gt;' is not assignable to type 'LegacyRef&lt;HTMLDivElement&gt; | undefined'.
  Type 'MutableRefObject&lt;undefined&gt;' is not assignable to type 'RefObject&lt;HTMLDivElement&gt;'.
    Types of property 'current' are incompatible.
      Type 'undefined' is not assignable to type 'HTMLDivElement | null'.ts(2322)
index.d.ts(138, 9): The expected type comes from property 'ref', which is declared here on type 'DetailedHTMLProps&lt;HTMLAttributes&lt;HTMLDivElement&gt;, HTMLDivElement&gt;'
</code></pre>
<p>The strange fact about this error is, though this gives an error in my editor, the code still works as expected.
I tried setting the type of ref object to <code>LegacyRef&lt;HTMLDivElement&gt; | undefined</code>, but the error still persists.</p>
<p>I would like to get rid of this error in my editor.</p>
",
tags:"<javascript><reactjs><typescript><next.js>",
score:7,
creationDate:2023-01-03 04:58:43,
creationDate:2023-01-03 12:06:31,
score:6,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:1442,
Questioner:10951873}
{title:"""webpack-cli"": Failed to load 'webpack.config.ts' config, TypeError [ERR_UNKNOWN_FILE_EXTENSION]: Unknown file extension "".ts"",
id:"https://stackoverflow.com/questions/75988522",
body:"<p>I have a TypeScript project, where I transpile to code to JavaScript using Webpack.</p>
<p>My versions:</p>
<pre class=""lang-json prettyprint-override""><code>    &quot;devDependencies&quot;: {
        &quot;@commitlint/cli&quot;: &quot;17.0.2&quot;,
        &quot;@exlint.io/inflint&quot;: &quot;1.2.9&quot;,
        &quot;@types/inquirer&quot;: &quot;8.2.1&quot;,
        &quot;@types/micromatch&quot;: &quot;4.0.2&quot;,
        &quot;@types/minimist&quot;: &quot;1.2.2&quot;,
        &quot;@types/webpack-node-externals&quot;: &quot;2.5.3&quot;,
        &quot;@typescript-eslint/eslint-plugin&quot;: &quot;5.58.0&quot;,
        &quot;@typescript-eslint/parser&quot;: &quot;5.58.0&quot;,
        &quot;chalk&quot;: &quot;5.2.0&quot;,
        &quot;commitizen&quot;: &quot;4.2.4&quot;,
        &quot;cz-vinyl&quot;: &quot;1.3.2&quot;,
        &quot;depcheck&quot;: &quot;1.4.3&quot;,
        &quot;eslint&quot;: &quot;8.38.0&quot;,
        &quot;eslint-config-prettier&quot;: &quot;8.8.0&quot;,
        &quot;eslint-plugin-deprecation&quot;: &quot;1.4.1&quot;,
        &quot;eslint-plugin-import&quot;: &quot;2.27.5&quot;,
        &quot;eslint-plugin-node&quot;: &quot;11.1.0&quot;,
        &quot;eslint-plugin-unused-imports&quot;: &quot;2.0.0&quot;,
        &quot;figlet&quot;: &quot;1.5.2&quot;,
        &quot;husky&quot;: &quot;8.0.1&quot;,
        &quot;is-ci&quot;: &quot;3.0.1&quot;,
        &quot;lint-staged&quot;: &quot;13.0.1&quot;,
        &quot;npm-run-all&quot;: &quot;4.1.5&quot;,
        &quot;prettier&quot;: &quot;2.6.2&quot;,
        &quot;rimraf&quot;: &quot;3.0.2&quot;,
        &quot;ts-loader&quot;: &quot;9.4.2&quot;,
        &quot;ts-node&quot;: &quot;10.9.1&quot;,
        &quot;tsconfig-paths-webpack-plugin&quot;: &quot;4.0.1&quot;,
        &quot;typescript&quot;: &quot;5.0.4&quot;,
        &quot;webpack&quot;: &quot;5.78.0&quot;,
        &quot;webpack-cli&quot;: &quot;5.0.1&quot;,
        &quot;webpack-node-externals&quot;: &quot;3.0.0&quot;,
        &quot;webpack-shell-plugin-next&quot;: &quot;2.3.1&quot;
    }
</code></pre>
<p>I running the following: <code>webpack -c ./webpack.config.ts</code> and then I get this error:</p>
<pre><code>&gt; webpack -c ./webpack.config.ts

[webpack-cli] Failed to load 'webpack.config.ts' config
[webpack-cli] TypeError [ERR_UNKNOWN_FILE_EXTENSION]: Unknown file extension &quot;.ts&quot; for webpack.config.ts
    at new NodeError (node:internal/errors:399:5)
    at Object.getFileProtocolModuleFormat [as file:] (node:internal/modules/esm/get_format:79:11)
    at defaultGetFormat (node:internal/modules/esm/get_format:121:38)
    at defaultLoad (node:internal/modules/esm/load:81:20)
    at nextLoad (node:internal/modules/esm/loader:163:28)
    at ESMLoader.load (node:internal/modules/esm/loader:605:26)
    at ESMLoader.moduleProvider (node:internal/modules/esm/loader:457:22)
    at new ModuleJob (node:internal/modules/esm/module_job:64:26)
    at ESMLoader.#createModuleJob (node:internal/modules/esm/loader:480:17)
    at ESMLoader.getModuleJob (node:internal/modules/esm/loader:434:34) {
  code: 'ERR_UNKNOWN_FILE_EXTENSION'
}
 ELIFECYCLE  Command failed with exit code 2.
</code></pre>
<p>I also configured, in <code>package.json</code> file this: <code>&quot;type&quot;: &quot;module&quot;</code>.</p>
<p>This is my <code>tsconfig.base.json</code> file:</p>
<pre class=""lang-json prettyprint-override""><code>{
    &quot;extends&quot;: &quot;./tsconfig.paths.json&quot;,
    &quot;compilerOptions&quot;: {
        &quot;target&quot;: &quot;ES2018&quot;,
        &quot;module&quot;: &quot;ESNext&quot;,
        &quot;moduleResolution&quot;: &quot;bundler&quot;,
        &quot;noEmit&quot;: true,
        &quot;baseUrl&quot;: &quot;./&quot;,
        &quot;allowJs&quot;: false,
        &quot;skipLibCheck&quot;: true,
        &quot;strict&quot;: true,
        &quot;forceConsistentCasingInFileNames&quot;: true,
        &quot;esModuleInterop&quot;: true,
        &quot;resolveJsonModule&quot;: true,
        &quot;isolatedModules&quot;: true,
        &quot;incremental&quot;: true,
        &quot;removeComments&quot;: true,
        &quot;allowUnreachableCode&quot;: false,
        &quot;allowUnusedLabels&quot;: false,
        &quot;alwaysStrict&quot;: true,
        &quot;noFallthroughCasesInSwitch&quot;: true,
        &quot;noImplicitAny&quot;: true,
        &quot;noImplicitOverride&quot;: true,
        &quot;noImplicitReturns&quot;: true,
        &quot;noImplicitThis&quot;: true,
        &quot;noPropertyAccessFromIndexSignature&quot;: true,
        &quot;noUncheckedIndexedAccess&quot;: true,
        &quot;noUnusedLocals&quot;: true,
        &quot;noUnusedParameters&quot;: true,
        &quot;typeRoots&quot;: [&quot;./node_modules/@types&quot;, &quot;./@types&quot;]
    }
}
</code></pre>
<p>And this is my <code>tsconfig.build.json</code> file:</p>
<pre class=""lang-json prettyprint-override""><code>{
    &quot;extends&quot;: &quot;./tsconfig.base.json&quot;,
    &quot;compilerOptions&quot;: {
        &quot;noEmit&quot;: false,
        &quot;outDir&quot;: &quot;./dist&quot;,
        &quot;declaration&quot;: true
    },
    &quot;include&quot;: [&quot;./src/**/*.ts&quot;]
}
</code></pre>
<p>I won't provide the <code>webpack.config.ts</code> file for now, as its content seems to be irrelevant for that issue, because even if I keep the file empty, I got same error.</p>
<hr />
<p>I tried to run the build with:
<code>node --loader ts-node/esm node_modules/.bin/webpack -c ./webpack.config.ts</code> But then I got the error:</p>
<pre><code>&gt; node --loader ts-node/esm node_modules/.bin/webpack -c ./webpack.config.ts

(node:16287) ExperimentalWarning: Custom ESM Loaders is an experimental feature and might change at any time
(Use `node --trace-warnings ...` to show where the warning was created)
/node_modules/.bin/webpack:2
basedir=$(dirname &quot;$(echo &quot;$0&quot; | sed -e 's,\\,/,g')&quot;)
          ^^^^^^^

SyntaxError: missing ) after argument list
    at internalCompileFunction (node:internal/vm:73:18)
    at wrapSafe (node:internal/modules/cjs/loader:1176:20)
    at Module._compile (node:internal/modules/cjs/loader:1218:27)
    at Module._extensions..js (node:internal/modules/cjs/loader:1308:10)
    at Object.require.extensions.&lt;computed&gt; [as .js] (/node_modules/.pnpm/ts-node@10.9.1_@types+node@18.11.18_typescript@5.0.4/node_modules/ts-node/src/index.ts:1608:43)
    at Module.load (node:internal/modules/cjs/loader:1117:32)
    at Function.Module._load (node:internal/modules/cjs/loader:958:12)
    at ModuleWrap.&lt;anonymous&gt; (node:internal/modules/esm/translators:169:29)
    at ModuleJob.run (node:internal/modules/esm/module_job:194:25)
 ELIFECYCLE  Command failed with exit code 1.
</code></pre>
",
tags:"<javascript><typescript><webpack>",
score:6,
creationDate:2023-04-11 17:14:29,
creationDate:2023-04-13 12:46:57,
score:6,
acceptedResponderReputation:2896,
acceptedResponder:4225384,
QuestionerReputation:1814,
Questioner:9105207}
{title:"Incompatible changes in generics in Java 21",
id:"https://stackoverflow.com/questions/77496020",
body:"<p>Has anyone else also noticed changes in Java's generics in Java 21?</p>
<p>We're using <a href=""https://jdbi.org"" rel=""nofollow noreferrer"">Jdbi</a> for database access and when updating to Java 21 things go wrong because a generic type cannot be determined anymore.</p>
<p>While debugging I noticed that a condition</p>
<pre class=""lang-java prettyprint-override""><code>java.lang.reflect.Type type = ...
if (type instanceof Class) {..}
</code></pre>
<p>where <code>type</code> is an interface evaluates to <code>false</code> in Java 17 but is <code>true</code> in Java 21.</p>
<p>Jdbi depends on the <a href=""https://github.com/leangen/geantyref"" rel=""nofollow noreferrer"">Geantyref</a> library for some of its generics. The static method <a href=""https://github.com/leangen/geantyref/blob/91ee19aa430752b1872b918d9a2d02efa7126946/src/main/java/io/leangen/geantyref/GenericTypeReflector.java#L389"" rel=""nofollow noreferrer"">GenericTypeReflector.getTypeParameter(..)</a> returns the generic type in Java 17, but returns <code>null</code> in Java 21.</p>
<p>Nowhere in the release notes or other announcements I can find anything about that something around generics has changed in Java 21. Nor that there are backwards compatible breaking changes.</p>
<p>I assume some internals might have changed due to record reflection (JEP-440) or the pattern matching for switch (JEP-441), but those features I am already using as 17-preview features without any issue.</p>
<p>Anyone an idea what caused theses changes and why?</p>
<h3>Update 17-Nov-2023</h3>
<p>I think I have figured it out. I trace the problem back to constructor arguments of a record class.
It seems that in Java 21 for a record class somehow the arguments of the default constructor somehow do not have the generic type.
So for a record like</p>
<pre class=""lang-java prettyprint-override""><code>record Person(Optional&lt;String&gt; name, Optional&lt;Integer&gt; age) {}
</code></pre>
<p>the generic types <code>String</code> and <code>Integer</code> are lost in the Person's default constructor.
The default constructor generated by Java can be changed by explicitly adding a canonical constructor with all record properties:</p>
<pre><code>record Person(Optional&lt;String&gt; name, Optional&lt;Integer&gt; age) {
  @JdbiConstructor
  public Person(Optional&lt;String&gt; aName, Integer anAge) {
    this(aName, anAge);
  }
}
</code></pre>
<p>By adding the <code>@JdbiConstructor</code> annotation (which Jdbi always requires on a Record) Jdbi is instructed which constructor to use.
Because this constructor now explicitly defines the argument types including the generic type, the reflection util is able to determine the type and I got it to work with Java 21.</p>
<p>The last 2 hours I have been trying to create a bare minimum test case to verify that the generic type is lost in the Record's default constructor arguments, but I have not been able to reproduce it in a test. Even though it fails consistently in our application.
I have been comparing type arguments while debugging the application and the test at the same time. The arguments values and types look the same, but the test still succeeds in Java 21.</p>
<p>I'm leaving the test for now since I have to get on with my work and I now do have a working workaround by adding an additional constructor.
I'll try to get back to this later. It must be reproducible in a simple test.</p>
<h3>Update 20-Nov-2023</h3>
<p>Thanks to Holger for creating a small test case proving the issue.</p>
<p>I had 2 things wrong in the 17-Nov update:</p>
<ul>
<li>swapping both Optional arguments does <em>not</em> create a different constructor since the erased types are equal.</li>
<li>the default record constructor <em>can</em> be overridden by explicitly providing a canonical constructor.</li>
</ul>
<p>I have updated the 17-Nov update accordingly. Thanks for pointing out these mistakes.</p>
<p>I have submitted a bug report with ID <code>9076247</code> which is now under review.</p>
<h3>Update 22-Nov-2023</h3>
<p>The reported bug has been evaluated and assigned Bug ID: JDK-8320575 and is now visible on the url <a href=""https://bugs.openjdk.org/browse/JDK-8320575"" rel=""nofollow noreferrer"">JDK-8320575</a></p>
",
tags:"<java><generics><jdbi><java-21>",
score:7,
creationDate:2023-11-16 15:21:41,
creationDate:2023-11-17 18:51:43,
score:7,
acceptedResponderReputation:298103,
acceptedResponder:2711488,
QuestionerReputation:5017,
Questioner:3309859}
{title:"Missing comma in JS array literal - Why does this compile?",
id:"https://stackoverflow.com/questions/77114154",
body:"<p>I forgot a comma initializing a 2D array in javascript and, to my surprise, it compiled. E.g.:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>amIMissingSomething = [
    [1, 2, 3]
    [4, 5, 6],
    [7, 8, 9]
]

console.log(amIMissingSomething) // [undefined, [7, 8, 9]]</code></pre>
</div>
</div>
</p>
<p>I expected a syntax error to occur. However, after a whole lot of time, I learned this is valid javascript and evaluates to: <code>[undefined, [7, 8, 9]]</code>. What's going on here?</p>
",
tags:"<javascript>",
score:7,
creationDate:2023-09-15 16:55:41,
creationDate:2023-09-15 16:59:58,
score:7,
acceptedResponderReputation:2627,
acceptedResponder:10892722,
QuestionerReputation:140,
Questioner:22570649}
{title:"What is the best way to render component by condition in React?",
id:"https://stackoverflow.com/questions/76735336",
body:"<p>I have a component that needs to render by condition, I'm confused between the two ways like the code below and I am figuring out the recommended way of React. What is the best way to set render conditions for a component? I'm new to React and would love some help.</p>
<p>The first way:</p>
<pre><code>const MyComponent1 = () =&gt; {
  return (
    &lt;div&gt;This is my component 1&lt;/div&gt;
  )
}

{isRender &amp;&amp; &lt;MyComponent /&gt;}
</code></pre>
<p>The second way:</p>
<pre><code>const MyComponent2 = ({ isRender }) =&gt; {
  if (!isRender) return null;

  return (
    &lt;div&gt;This is my component 2&lt;/div&gt;
  )
}

&lt;MyComponent isRender/&gt;
</code></pre>
<p>I feel the second approach will redundancy the logic code inside this component if the component is not rendered (e.g: hooks, handle function, ...)
The first way will not affect the CPU because the component is not rendered so the internal logic will not be executed. Is that true?</p>
",
tags:"<javascript><reactjs><node.js><typescript><jsx>",
score:7,
creationDate:2023-07-21 05:32:50,
creationDate:2023-07-21 05:50:24,
score:7,
acceptedResponderReputation:18528,
acceptedResponder:9640177,
QuestionerReputation:962,
Questioner:20206220}
{title:"What are the ways to implement speech recognition in Electron?",
id:"https://stackoverflow.com/questions/75163498",
body:"<p>So I have an Electron app that uses the web speech API (SpeechRecognition) to take the user's voice, however, it's not working. The code:</p>
<pre class=""lang-js prettyprint-override""><code>if (&quot;webkitSpeechRecognition&quot; in window) {
  let SpeechRecognition =
    window.SpeechRecognition || window.webkitSpeechRecognition;
  let recognition = new SpeechRecognition();

  recognition.onstart = () =&gt; {
    console.log(&quot;We are listening. Try speaking into the microphone.&quot;);
  };

  recognition.onspeechend = () =&gt; {
    recognition.stop();
  };

  recognition.onresult = (event) =&gt; {
    let transcript = event.results[0][0].transcript;
    console.log(transcript);
  };

  recognition.start();
} else {
  alert(&quot;Browser not supported.&quot;);
}
</code></pre>
<p>It says <code>We are listening...</code> in the console, but no matter what you say, it doesn't give an output. On the other hand, running the exact same thing in Google Chrome works and whatever I say gets console logged out with the <code>console.log(transcript);</code> part. I did some more research and it turns out that Google has recently stopped support for the Web Speech API in shell-based Chromium windows (Tmk, everything that is not Google Chrome or MS Edge), so that seems to be the reason it is not working on my Electron app.</p>
<p>See: <a href=""https://www.npmjs.com/package/electron-speech"" rel=""noreferrer"">electron-speech library's end</a>  <a href=""https://github.com/sdkcarlos/artyom.js/issues/4"" rel=""noreferrer"">Artyom.js issue</a> <a href=""https://stackoverflow.com/questions/60501410/electron-not-working-with-web-speech-api"">another stackOverflow question regarding this</a></p>
<p>So is there any way I can get it to work in Electron?</p>
",
tags:"<javascript><electron><speech-recognition><speech-to-text>",
score:11,
creationDate:2023-01-18 18:08:12,
creationDate:2023-01-19 15:44:17,
score:7,
acceptedResponderReputation:97,
acceptedResponder:13944742,
QuestionerReputation:97,
Questioner:13944742}
{title:"Is rethrow in multi-catch formally defined?",
id:"https://stackoverflow.com/questions/78901654",
body:"<p>Why is <code>throw e</code> allowed, but not <code>throw a</code>, in the following case?</p>
<pre><code>  void test() {
    try {
      System.out.println();
    } catch (Error | RuntimeException e) {
      var a = e;
      //throw a; unreported exception Throwable; must be caught or declared to be thrown
      throw e;
    }
  }
</code></pre>
<p>All of this intuitively makes sense, but from <a href=""https://docs.oracle.com/javase/specs/jls/se17/html/jls-14.html#jls-14.20"" rel=""nofollow noreferrer"">JLS 14.20</a></p>
<blockquote>
<p>A multi-catch clause can be thought of as a sequence of uni-catch clauses. That is, a catch clause where the type of the exception parameter is denoted as a union <code>D1|D2|...|Dn</code> is equivalent to a sequence of <em>n</em> catch clauses where the types of the exception parameters are class types <code>D1, D2, ..., Dn</code> respectively.
In the Block of each of the <em>n</em> catch clauses, the declared type of the exception parameter is <code>lub(D1, D2, ..., Dn)</code>.</p>
</blockquote>
<p>Since <code>lub(Error,RuntimeException)</code> is <code>Throwable</code>, the code above should be equivalent to:</p>
<pre><code>    try {
      System.out.println();
    } catch (Error e) {
      Throwable lub = e;
      throw lub;
    } catch (RuntimeException e) {
      Throwable lub = e;
      throw lub;
    }
</code></pre>
<p>(which obviously doesn't compile)</p>
<p>Moreover, the type of the <code>a</code> is the type of <code>e</code> &quot;when treated as if it did not appear in an assignment context&quot; (<a href=""https://docs.oracle.com/javase/specs/jls/se17/html/jls-14.html#jls-14.4.1"" rel=""nofollow noreferrer"">JLS 14.4.1</a>), but as shown above it's not the same as the type of <code>e</code>.</p>
<p>Is there anything I've overlooked?</p>
<hr>
<p><em>Edit</em>: this is not a duplicate of <a href=""https://stackoverflow.com/questions/23581611"">Why is it legal to re-throw a Throwable in certain cases, without declaring it?</a> because this question is specific to multi-catch (which isn't discussed there) and arises due to a misunderstanding of a specific fragment of the JLS that addresses multi-catch. The answers provided in this question helped me to connect the dots :)</p>
",
tags:"<java><jls>",
score:9,
creationDate:2024-08-22 12:46:50,
creationDate:2024-08-22 13:18:42,
score:7,
acceptedResponderReputation:270770,
acceptedResponder:5133585,
QuestionerReputation:12388,
Questioner:1297272}
{title:"How to disable smoothing for the Line node in TextFlow in JavaFX?",
id:"https://stackoverflow.com/questions/79071408",
body:"<p>I have two TextFlow and in I need one vertical line across them (thanks to James_D who <a href=""https://stackoverflow.com/a/79071197/26656564"">helped</a> me with it. However, I need a line with width <code>1px</code>, but it seems that line is smoothed, so the rendered line width is <code>2px</code> This is my code:</p>
<pre><code>public class Test extends Application {

    @Override
    public void start(Stage primaryStage) throws IOException {
        var textFlow1 = createTextFlow();
        textFlow1.setStyle(&quot;-fx-background-color: cyan&quot;);
        var textFlow2 = createTextFlow();
        textFlow2.setStyle(&quot;-fx-background-color: yellow&quot;);

        VBox vbox = new VBox(textFlow1, textFlow2);
        Scene scene = new Scene(vbox, 300, 100);
        primaryStage.setScene(scene);
        primaryStage.show();
    }

    private TextFlow createTextFlow() {
        Text textA = new Text(&quot;ABC &quot;);
        textA.setStyle(&quot;-fx-font-family: 'monospace'; -fx-font-size: 14;&quot;);
        Line line = new Line();
        line.setManaged(false);
        line.setSmooth(false);
        Text textB = new Text(&quot; DEF&quot;);
        textB.setStyle(&quot;-fx-font-family: 'monospace'; -fx-font-size: 14;&quot;);
        TextFlow textFlow = new TextFlow(textA, line, textB) {
            @Override
            protected void layoutChildren() {
                super.layoutChildren();
                double x = textB.getBoundsInParent().getMinX();
                line.setStartX(x);
                line.setEndX(x);
                line.setEndY(getHeight());
            }
        };
        return textFlow;
    }

    public static void main(String[] args) {
        launch(args);
    }
}
</code></pre>
<p>And this is the result:</p>
<p><a href=""https://i.sstatic.net/fmfbAu6t.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/fmfbAu6t.png"" alt=""enter image description here"" /></a></p>
<p>Could anyone say how to disable this smoothing for the line?</p>
",
tags:"<javafx>",
score:6,
creationDate:2024-10-09 17:22:27,
creationDate:2024-10-09 23:44:14,
score:7,
acceptedResponderReputation:159281,
acceptedResponder:1155209,
QuestionerReputation:440,
Questioner:26656564}
{title:"Next js 13 App router build error. (when i try fetch api route in server component)",
id:"https://stackoverflow.com/questions/76591751",
body:"<p>I get an error when i build next app (yarn run build)</p>
<p>I made new clean project i tried there.
This is my route (/api/categories/route.ts)</p>
<pre><code>export async function GET() {
  return new Response(JSON.stringify({ msg: &quot;categories&quot; }));
}
</code></pre>
<p>And my /page.tsx:</p>
<pre><code>export default async function Home() {
  const res = await fetch(&quot;http://localhost:3000/api/categories&quot;);
  console.log(await res.json());

  return (
    &lt;main&gt;
      &lt;h1&gt;Home&lt;/h1&gt;
    &lt;/main&gt;
  );
}
</code></pre>
<p>When i run dev app (yarn run dev) i dont have any errors but when i try build i get this error:</p>
<p><a href=""https://i.sstatic.net/TbZEu.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/TbZEu.png"" alt=""error"" /></a></p>
<p>I tried also fetch data from fake data json api that i found in web and it worked perfect. But when i try to use my api routes i have an error.</p>
<p>And i tried to change url like: /api/categories and <a href=""http://127.0.0.1/api/categories"" rel=""noreferrer"">http://127.0.0.1/api/categories</a></p>
<p>Is there any way I can solve this problem? Because i want to deploy my app.</p>
<p>But when i use prisma in project and i tried to fetch data from prisma exact in page.tsx like: prisma.categories.findMany(...), i dont have problem. But i want thet code will be clean, i have many options for findMay(). So maybe you know how i can solve this without using prisma right in page.tsx</p>
",
tags:"<javascript><reactjs><routes><next.js><app-router>",
score:6,
creationDate:2023-06-30 19:23:17,
creationDate:2023-06-30 20:09:56,
score:7,
acceptedResponderReputation:3358,
acceptedResponder:21872981,
QuestionerReputation:133,
Questioner:22036715}
{title:"Is there a java.time equivalent of DateTime.dayOfYear().isLeap()?",
id:"https://stackoverflow.com/questions/79304476",
body:"<p>We have some code which checks whether a given day is a leap day using <code>org.joda.time</code>. It is simply</p>
<pre><code>import org.joda.time.DateTime;

DateTime date;
return date.dayOfYear().isLeap()
</code></pre>
<p>Is there an equivalent in the <code>java.time</code> package that checks whether a given date is leap day?</p>
<p>I can't find the question asked anywhere on the site and hard-coding February 29 seems bad to me for some reason. I thought I was just overlooking something and thought this would be a good place to ask.</p>
<p>We only use the Gregorian (<a href=""https://en.wikipedia.org/wiki/ISO_8601"" rel=""nofollow noreferrer"">ISO 8601</a>) calendar, though we do operate internationally.</p>
",
tags:"<java><jodatime><java-time>",
score:6,
creationDate:2024-12-23 23:40:52,
creationDate:2024-12-24 00:01:33,
score:7,
acceptedResponderReputation:11934,
acceptedResponder:214525,
QuestionerReputation:15855,
Questioner:266531}
{title:"Why my API Routes are called when I build my NextJS project?",
id:"https://stackoverflow.com/questions/76391400",
body:"<p>I have an API route that generates data in my DataBase, this API route is only called in my CRON job set in Vercel.</p>
<p>However, every time I build the project, new data show in the database. I do believe it is because of the Nature of NextJS to pre-execute an endpoint so it will have on cache, but how do I prevent adding data in my Database?</p>
<p><a href=""https://i.sstatic.net/EYwl4.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/EYwl4.png"" alt=""enter image description here"" /></a>
<a href=""https://i.sstatic.net/gFTJt.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/gFTJt.png"" alt=""enter image description here"" /></a></p>
<p>The code is simple: <a href=""https://github.com/guifeliper/dart-throwing-monkey-crypto/blob/main/apps/monkey-crypto/app/api/generateTokens/route.ts"" rel=""noreferrer"">https://github.com/guifeliper/dart-throwing-monkey-crypto/blob/main/apps/monkey-crypto/app/api/generateTokens/route.ts</a></p>
<pre><code>export const revalidate = 60 * 60 * 24 * 6; // every 6 days
export async function GET(request: Request) {
  const url =
    `${process.env.COINMARKETCAP_URL}/v1/cryptocurrency/listings/latest?limit=100` ??
    &quot;&quot;;
  var options = {
    headers: {
      &quot;X-CMC_PRO_API_KEY&quot;: process.env.COINMARKETCAP_API ?? &quot;&quot;,
    },
    next: { revalidate: 60 * 60 * 24 * 6 },
  };

  const res = await fetch(url, options);
  const data = await res.json();

  const tokensList: Tokens[] =
    data?.data?.map((token: any) =&gt; {
      return {
        name: token.name,
        symbol: token.symbol,
        priceAtDrawn: token.quote[&quot;USD&quot;].price,
        priceAtContest: 0,
        category: &quot;Top-100&quot;,
        timeframe: getYearWeekString(),
      };
    }) ?? [];

  const BTCBenchmark = tokensList
    .filter((token) =&gt; token.symbol === &quot;BTC&quot;)
    .map((token) =&gt; ({ ...token, category: &quot;BTC-benchmark&quot; }));

  if (tokensList?.length == 0) {
    return NextResponse.json(
      { message: &quot;Error on token list&quot; },
      { status: 500 }
    );
  }
  const selectedTokens = selectTokens(tokensList, 10);
  return await addTokensDrawn([...selectedTokens, ...BTCBenchmark]);
}

async function addTokensDrawn(data: any) {
  try {
    await prisma.tokenDrawn.createMany({ data });
    return NextResponse.json({ message: &quot;Add Successfully&quot; }, { status: 200 });
  } catch (error) {
    console.error(&quot;Request error&quot;, error);
    return NextResponse.json({ message: &quot;Error on add&quot; }, { status: 500 });
  }
}
</code></pre>
",
tags:"<javascript><next.js><next.js13><nextjs-dynamic-routing>",
score:6,
creationDate:2023-06-02 15:10:52,
creationDate:2023-06-04 18:10:06,
score:7,
acceptedResponderReputation:1876,
acceptedResponder:2448104,
QuestionerReputation:918,
Questioner:6227808}
{title:"Is it possible to align MUI Snackbar relative to its parent div, rather than to relative to the entire page",
id:"https://stackoverflow.com/questions/75371693",
body:"<p>I am using a combination of Material UI's Snackbar &amp; Alert components to display Success or Error messages following a database Post action.  Standard Material UI allows positioning of that message relative to the page using the <code>anchorOrigin</code> prop, which I have used to align the message centrally at the bottom of the page in the following code:</p>
<pre><code>&lt;Snackbar open={open} autoHideDuration={5000} onClose={handleClose}         
    anchorOrigin={{
        vertical: 'bottom',
        horizontal: 'center',
    }}&gt;

    &lt;Alert
        severity={severity}
        variant=&quot;filled&quot;
        sx={{ width: '100%' }}
        &gt;
        {message}
    &lt;/Alert&gt;
&lt;/Snackbar&gt;
</code></pre>
<p>Rather than aligning to the overall page though, I would like to align the alert centrally relative to the parent div which contains the code which triggers the message.  Is there a way to do this?  I was looking at Material UI's custom <code>sx</code> prop to see if there was a way this could be used in my scenario, but couldn't see anything helpful.</p>
",
tags:"<javascript><reactjs><material-ui>",
score:7,
creationDate:2023-02-07 09:58:41,
creationDate:2023-02-13 15:33:51,
score:7,
acceptedResponderReputation:1682,
acceptedResponder:5613027,
QuestionerReputation:211,
Questioner:20695270}
{title:"Is there a way to install OpenJDK Java in Amazon Linux 2023?",
id:"https://stackoverflow.com/questions/77084761",
body:"<p>In the process of trying out a switch to Amazon Linux 2023 from Centos7 and I am trying to understand my options for Java.</p>
<p>I am currenly running Java 11 openjdk in Centos7. Ideally I'd like to match my old java version as closely as possible. In the past we've had bugs come up due to errantly using Oracle java instead of OpenJDK. So what I really want is OpenJDK, but it's not clear if anyone even builds OpenJDK for AL2023 yet (or ever will?).</p>
<p>The latest amazon corretto java rpm from <code>java-11-amazon-corretto</code> has version 11.0.20+9-1.amzn2023, which is quite close, but I'd like to minimize my changes if possible.</p>
<p>When I do a <code>dnf search openjdk</code>  I don't get any hits:</p>
<pre><code>[ec2-user@blah ~]$ dnf search openjdk
Amazon Linux 2023 repository                                                         17 MB/s |  14 MB     00:00
Amazon Linux 2023 Kernel Livepatch repository                                       496 kB/s | 159 kB     00:00
Last metadata expiration check: 0:00:01 ago on Mon Sep 11 20:47:56 2023.
No matches found.
</code></pre>
<p>I understand that AL2023 is Fedora-based, but also it doesn't seem like AL2023 is compatible with Fedora packages either (as per <a href=""https://docs.aws.amazon.com/linux/al2023/ug/relationship-to-fedora.html"" rel=""noreferrer"">https://docs.aws.amazon.com/linux/al2023/ug/relationship-to-fedora.html</a>)</p>
<p>So... is there an openjdk alternative to Amazon Corretto Java? What repo would provide that? If not, is that something that is likely to get created in the future?</p>
",
tags:"<java><centos7><java-11><amazon-linux-2023>",
score:6,
creationDate:2023-09-11 21:03:09,
creationDate:2023-11-20 16:37:33,
score:7,
acceptedResponderReputation:332,
acceptedResponder:1544626,
QuestionerReputation:191,
Questioner:3457453}
{title:"Hardcoding large amounts of data without inducing memory spike",
id:"https://stackoverflow.com/questions/77126765",
body:"<p>So I am exploring the concept of storing WebAssembly inside the JavaScript file so it can all be bundled up in one shippable file. I did manage to make a working example of this where it stores the wasm file in a big literal string in base64 and at runtime is converted to a Uint8Array before being processed into a Module and Instance.</p>
<pre class=""lang-js prettyprint-override""><code>await Deno.writeTextFile(
    './static/wasm/bundle.js',
    `import { initSync } from './app.js'\ninitSync(new WebAssembly.Module(Uint8Array.from(atob('${btoa(
        [ ...await Deno.readFile('./static/wasm/app_bg.wasm') ]
            .map(byte =&gt; String.fromCharCode(byte))
            .join('')
    )}').split('').map(char =&gt; char.charCodeAt(0)))))`
)
</code></pre>
<p><em><a href=""https://github.com/BlackAsLight/BundleWasm"" rel=""noreferrer"">Source of above snippet</a></em></p>
<p>But I have been wondering if JavaScript might have problems with processing this literal string in instances that the wasm file was very large. In this snippet the base64 literal string is only needed once at the very start, and I imagine is disposed off by the garbage collector as it's no longer accessible.</p>
<p>I am wondering if people have any ideas on how one could store this same type of data, hardcoded in the javascript, where it is only run once, but won't causes any huge memory spikes at the start of the runtime. Increased processing time for reduced peak memory usage is an acceptable trade-off here, but fetching any external resources would defeat the point of the question.</p>
",
tags:"<javascript><webassembly><deno>",
score:14,
creationDate:2023-09-18 11:22:24,
creationDate:2023-09-18 16:33:26,
score:7,
acceptedResponderReputation:40374,
acceptedResponder:1119863,
QuestionerReputation:434,
Questioner:13225518}
{title:"Angular 17 Top-level await Error while using pdfjs-dist",
id:"https://stackoverflow.com/questions/77818835",
body:"<p>I'm using Pdfjs library and i'm facing this error</p>
<p><strong>Top-level await is not available in the configured target environment (&quot;chrome119.0&quot;, &quot;edge119.0&quot;, &quot;firefox115.0&quot;, &quot;ios16.0&quot;, &quot;safari16.0&quot; + 7 overrides)</strong></p>
<p><strong>/</strong>****/ <strong>webpack_exports</strong> = globalThis.pdfjsLib = await (globalThis.pdfjsLibPromise = <strong>webpack_exports</strong>);**</p>
<p>I saw an issue at github saying that i can fix this with vite but i'm not using vite at all in my project..</p>
<p>This is my tsconfig file</p>
<pre><code>{
  &quot;compileOnSave&quot;: false,
  &quot;compilerOptions&quot;: {
    &quot;outDir&quot;: &quot;./dist/out-tsc&quot;,
    &quot;forceConsistentCasingInFileNames&quot;: true,
    &quot;strict&quot;: true,
    &quot;noImplicitOverride&quot;: true,
    &quot;noPropertyAccessFromIndexSignature&quot;: true,
    &quot;noImplicitReturns&quot;: true,
    &quot;noFallthroughCasesInSwitch&quot;: true,
    &quot;skipLibCheck&quot;: true,
    &quot;esModuleInterop&quot;: true,
    &quot;sourceMap&quot;: true,
    &quot;declaration&quot;: false,
    &quot;experimentalDecorators&quot;: true,
    &quot;moduleResolution&quot;: &quot;node&quot;,
    &quot;importHelpers&quot;: true,
    &quot;target&quot;: &quot;ESNext&quot;,
    &quot;module&quot;: &quot;ESNext&quot;,
    &quot;useDefineForClassFields&quot;: false,
    &quot;lib&quot;: [&quot;ESNext&quot;, &quot;dom&quot;]
  },
  &quot;angularCompilerOptions&quot;: {
    &quot;enableI18nLegacyMessageIdFormat&quot;: false,
    &quot;strictInjectionParameters&quot;: true,
    &quot;strictInputAccessModifiers&quot;: true,
    &quot;strictTemplates&quot;: true
  }
}
</code></pre>
<p><a href=""https://github.com/angular/angular-cli/issues/26507"" rel=""noreferrer"">Please check this</a></p>
<p>I tried to change the target in tsconfig from ES2022 to ESNext but nothing works</p>
",
tags:"<javascript><angular><typescript><pdfjs-dist>",
score:7,
creationDate:2024-01-15 09:36:21,
creationDate:2024-01-22 19:59:01,
score:7,
acceptedResponderReputation:136,
acceptedResponder:6267804,
QuestionerReputation:83,
Questioner:23120894}
{title:"How to get returned value from async generator when using for await",
id:"https://stackoverflow.com/questions/77727664",
body:"<p>I have following code:</p>
<pre><code>for await (const part of resolveData(data)) {
    console.log({part});
}
</code></pre>
<p>It iterates over an async generator that looks like this:</p>
<pre><code>const resolveData = async function* &lt;T&gt; (data: SomeValue&lt;T&gt;) {
    if (&lt;expression1&gt;) {
        if (&lt;expression2&gt;) {
            console.log(&quot;valid&quot;);
            yield 1;
        }
    }
    return 2;
}
</code></pre>
<p>The output of the for await loop looks like this:</p>
<pre><code>{ part: 1 }
</code></pre>
<p>I want to get the returned value (number 2 in this case) as well. How to get the value inside or outside of the loop?</p>
<p>Tried looking online but found nothing.</p>
",
tags:"<javascript><typescript><ecmascript-6>",
score:8,
creationDate:2023-12-28 15:09:42,
creationDate:2023-12-28 15:21:28,
score:7,
acceptedResponderReputation:1073968,
acceptedResponder:157247,
QuestionerReputation:95,
Questioner:22505411}
{title:"How to check if a string ONLY contains specific strings",
id:"https://stackoverflow.com/questions/77744271",
body:"<p>I want to test if a string ONLY contains specific substrings (as whole words) / spaces</p>
<p>I've written some code and it works, but I am concerned that I don't understand the regex (I've copied from elsewhere)</p>
<p>Is there a way of doing this without complex regex?</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const str1 = 'a♭ apple a a a a a apple   a♭ a'; // valid
const str2 = 'a♭ apple a a a a a apple   a♭ aa'; // invalid aa
const str3 = 'a♭ apple ad  a a a apple   a♭ a'; // invalid ad
const str4 = ' a♭ apple a a a a a apple   a♭ a'; // valid
const str5 = ' a♭ apple a a a a a apple   a♭ a '; // valid
const str6 = 'a♭ apple a a a a a apple   a♭ a '; // valid
const str7 = '      '; // invalid
const str8 = ''; // invalid

const allowedSubstrings = [
  'a', 'a♭', 'apple'
]

const isStringValid = str =&gt; {
  if (str.trim() === '') return false
  allowedSubstrings.forEach(sub =&gt; {
    // https://stackoverflow.com/a/6713427/1205871
    // regex for whole words only
    const strRegex = `(?&lt;!\\S)${sub}(?!\\S)`
    const regex = new RegExp(strRegex, 'g')
    str = str.replace(regex, '')
  })
  str = str.replaceAll(' ', '')
  // console.log(str)
  return str === ''
}

console.log('str1', isStringValid(str1))
console.log('str2', isStringValid(str2))
console.log('str3', isStringValid(str3))
console.log('str4', isStringValid(str4))
console.log('str5', isStringValid(str5))
console.log('str6', isStringValid(str6))
console.log('str7', isStringValid(str7))
console.log('str8', isStringValid(str8))</code></pre>
</div>
</div>
</p>
",
tags:"<javascript><regex>",
score:7,
creationDate:2024-01-02 05:13:24,
creationDate:2024-01-02 05:27:24,
score:7,
acceptedResponderReputation:6705,
acceptedResponder:19090048,
QuestionerReputation:56936,
Questioner:1205871}
{title:"How is browser able to use typescript file directly in Vite index.html?",
id:"https://stackoverflow.com/questions/77022419",
body:"<p>Recently I've been playing around with Vite. One thing that intrigues me is that it's ability to use typescript file directly in the index.html, e.g.</p>
<pre class=""lang-html prettyprint-override""><code>&lt;script type=&quot;module&quot; src=&quot;/src/main.ts&quot;&gt;&lt;/script&gt;
</code></pre>
<p>From the docs, I understand that Vite will transpile the original code from Typescript into Javascript (I inspected that the contents of <code>main.ts</code> are indeed transformed). But how can the browser run the Javascript code inside a <code>*.ts</code> file?</p>
<p>I tried to replicate it by creating a simple static server with an <code>index.html</code> containing the script tag like above. Yet, the browser will throw an error:</p>
<pre><code>Failed to load module script: Expected a JavaScript module script but the server responded with a MIME type of &quot;video/mp2t&quot;. Strict MIME type checking is enforced for module scripts per HTML spec.
</code></pre>
<p>So how is this possible with Vite?</p>
",
tags:"<javascript><html><node.js><typescript><vite>",
score:10,
creationDate:2023-09-01 10:39:51,
creationDate:2023-09-01 10:44:58,
score:7,
acceptedResponderReputation:943100,
acceptedResponder:19068,
QuestionerReputation:399,
Questioner:13013820}
{title:"Configure Keycloak 21 with Spring Security 6",
id:"https://stackoverflow.com/questions/76307796",
body:"<p>I'm trying to setup Spring Security to work with Keycloak 21 but unfortunately most of the tutorials on Internet are outdated. I configured client and realms into Keycloak but Spring security is not clear what should be. I tried the code from this <a href=""https://stackoverflow.com/questions/74571191/use-keycloak-spring-adapter-with-spring-boot-3"">link</a>:</p>
<p>I added these gradle dependencies:</p>
<pre><code>implementation 'org.springframework.boot:spring-boot-starter-oauth2-client:3.1.0'
implementation 'org.springframework.boot:spring-boot-starter-security:3.1.0'
implementation 'org.springframework.boot:spring-boot-starter-oauth2-resource-server:3.1.0'
</code></pre>
<p>and this yml config:</p>
<pre><code>spring:
  security:
    oauth2:
      client:
        provider:
          keycloak:
            issuer-uri: https://ip/realms/admin_console_realm
        registration:
          keycloak-login:
            authorization-grant-type: authorization_code
            client-name: My Keycloak instance
            client-id: admin_console_client
            client-secret: qwerty
            provider: keycloak
            scope: openid,profile,email,offline_access
      resourceserver:
        jwt:
          issuer-uri: https://ip/realms/admin_console_realm
          jwk-set-uri: https://ip/realms/admin_console_realm/protocol/openid-connect/certs
</code></pre>
<p>It's not clear what I need to add as a Spring security configuration here:</p>
<pre><code>import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import org.springframework.security.config.annotation.web.builders.HttpSecurity;
import org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;
import org.springframework.security.web.SecurityFilterChain;

@Configuration
@EnableWebSecurity
public class WebSecurityConfig {

    @Bean
    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception {

        httpSecurity.authorizeHttpRequests()
                .requestMatchers(&quot;/*&quot;).hasAuthority(&quot;ROLE_TECH_SUPPORT&quot;)
                .anyRequest().authenticated()
                .and()
                .oauth2Login();

        return  httpSecurity.build();
    }
}
</code></pre>
<p>I added the role into Keycloak client:</p>
<p><a href=""https://i.sstatic.net/VJlwx.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/VJlwx.png"" alt=""enter image description here"" /></a></p>
<p>When I open a Rest API link into the browser I'm redirected to Keycloak's login page. After successful authentication I get:</p>
<pre><code>Access to ip was deniedYou don't have authorization to view this page.
HTTP ERROR 403
</code></pre>
<p>Do you know how I can fix this issue?</p>
",
tags:"<java><spring><spring-boot><spring-security>",
score:7,
creationDate:2023-05-22 15:33:43,
creationDate:2023-05-27 21:52:23,
score:7,
acceptedResponderReputation:419,
acceptedResponder:20889523,
QuestionerReputation:1648,
Questioner:1103606}
{title:"For flat config, how do I run ESLint from the command line?",
id:"https://stackoverflow.com/questions/77411036",
body:"<p><em>For <code>eslint.config.js</code> (<a href=""https://eslint.org/blog/2022/08/new-config-system-part-2"" rel=""noreferrer"">flat config</a>), what command should I use when linting <code>*.js</code> files recursively from the command line?</em> <sup>1</sup></p>
<hr />
<p>With <code>eslintrc.js</code> or <code>eslintrc.json</code>, I have been using <code>npx eslint . --ext .js</code>, as suggested <a href=""https://eslint.org/docs/latest/use/command-line-interface#--ext-example"" rel=""noreferrer"">here</a>.
Until now, it always worked fine.</p>
<p>But when I try that with <code>eslint.config.js</code>, the response in the command line is :</p>
<blockquote>
<p>Invalid option '--ext' - perhaps you meant '-c'?
You're using eslint.config.js, some command line flags are no longer available.
Please see <a href=""https://eslint.org/docs/latest/use/command-line-interface"" rel=""noreferrer"">https://eslint.org/docs/latest/use/command-line-interface</a> for details.</p>
</blockquote>
<p>I didn't find any solution at the suggested link.</p>
<p>My <code>eslint.config.js</code> is in the directory where I try to run the lint command. <sup>2</sup></p>
<pre class=""lang-js prettyprint-override""><code>import eslintJs from '@eslint/js';
import globals from 'globals';

export default [
  eslintJs.configs.recommended,
  {
    // files: ['**/*.js', '**/*.cjs', '**/*.mjs'], // = default, not needed
    languageOptions: { globals: { ...globals.node } },
    rules: { 'no-unused-vars': ['warn', { argsIgnorePattern: '^_' }] },
  },
];
</code></pre>
<p><code>package.json</code> :</p>
<pre class=""lang-json prettyprint-override""><code>{
  &quot;name&quot;: &quot;flat-config&quot;,
  &quot;devDependencies&quot;: {
    &quot;eslint&quot;: &quot;^8.52.0&quot;
  },
  &quot;private&quot;: true,
  &quot;type&quot;: &quot;module&quot;
}
</code></pre>
<p>I ran <code>npm install</code> before running <code>npx eslint . --ext .js</code>.</p>
<p>For demo purposes, I have a small <code>bad-code.js</code> file :</p>
<pre class=""lang-js prettyprint-override""><code>const hiUnused = 'hi there';
const hello='Hello world';
const unusedFunc = function(unusedVariable) { console.log('hi!') }
consoler.log(hello);
</code></pre>
<p>If and when ESLint works, I expect it to respond with three warnings and one error.</p>
<pre><code>warning  'hiUnused'       never used
warning  'unusedFunc'     never used
warning  'unusedVariable' never used
 error   'consoler'       not defined
</code></pre>
<hr />
<sup>
<p><sup>1</sup>
I include the <a href=""/questions/tagged/typescript"" class=""post-tag"" title=""show questions tagged &#39;typescript&#39;"" aria-label=""show questions tagged &#39;typescript&#39;"" rel=""tag"" aria-labelledby=""tag-typescript-tooltip-container"">typescript</a> tag because I expect the corresponding question and answer(s) to be very similar for <a href=""https://stackoverflow.com/tags/typescript/info"">TypeScript</a>.</p>
<p><sup>2</sup>
I include the line <code>files: ['**/*.js', '**/*.cjs', '**/*.mjs'],</code> to indicate that <a href=""https://eslint.org/docs/latest/use/configure/configuration-files-new#specifying-files-and-ignores"" rel=""noreferrer""><em>by default, ESLint matches <code>**/*.js</code>, <code>**/*.cjs</code>, and <code>**/*.mjs</code></em></a>.
Commenting out or leaving it in should therefore not make any difference.</p>
</sup>
",
tags:"<javascript><node.js><typescript><eslint><eslint-flat-config>",
score:6,
creationDate:2023-11-02 15:47:06,
creationDate:2023-11-02 15:47:06,
score:7,
acceptedResponderReputation:5767,
acceptedResponder:9213345,
QuestionerReputation:5767,
Questioner:9213345}
{title:"Google Gemini API error: ""The response is blocked due to safety reason."" although I set the harm block threshold to BLOCK_NONE",
id:"https://stackoverflow.com/questions/77717061",
body:"<p>I have this piece of code:</p>
<pre><code>public static String simpleQuestion(String projectId, String location, String modelName) throws Exception {
        // Initialize client that will be used to send requests.
        // This client only needs to be created once, and can be reused for multiple requests.
        try (VertexAI vertexAI = new VertexAI(projectId, location)) {
            String output;
            GenerativeModel model = new GenerativeModel(modelName, vertexAI);
            model.setGenerationConfig(GenerationConfig.newBuilder().build());
            model.setSafetySettings(Collections.singletonList(
                    SafetySetting.newBuilder()
                            .setThreshold(SafetySetting
                                    .HarmBlockThreshold.BLOCK_NONE).build()));
            GenerateContentResponse response = model.generateContent(&quot;What can you tell me about Pythagorean theorem&quot;);
            output = ResponseHandler.getText(response);
            return output;
        }
    }
</code></pre>
<p>and sometimes I get this error;</p>
<pre><code>context/6.1.1/spring-context-6.1.1.jar com.mysticriver.service.GoogleGeminiService
Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: The response is blocked due to safety reason.
    at com.google.cloud.vertexai.generativeai.preview.ResponseHandler.getText(ResponseHandler.java:46)
</code></pre>
<p>even I have <code>HarmBlockThreshold.BLOCK_NONE</code> in the settings</p>
",
tags:"<java><spring-boot><google-cloud-vertex-ai><google-gemini>",
score:8,
creationDate:2023-12-26 11:43:04,
creationDate:2023-12-27 11:29:10,
score:7,
acceptedResponderReputation:22880,
acceptedResponder:10347145,
QuestionerReputation:2056,
Questioner:4450024}
{title:"Next.js 14.1 Dev Mode compilation extremely slow",
id:"https://stackoverflow.com/questions/77980237",
body:"<p>I've recently upgraded my Next.js project to version 14.1, excited about the new features and improvements. However, I've noticed a significant slowdown in compilation times while running the project in development mode (next dev). It's taking noticeably longer than before, which impacts my workflow productivity.</p>
<p>What could be the reason for this issue with Next.js 14.1 in development mode? Are there any known fixes or optimizations that can help speed up the compilation process?</p>
<p>Here are a few details about my setup:</p>
<pre><code>Next.js version: 14.1
Node.js version: node-v20.11.0-x64
Operating system: Win 10
</code></pre>
<p>I've tried some basic troubleshooting steps like clearing caches and ensuring my dependencies are up to date, but the issue persists.</p>
",
tags:"<javascript><reactjs><typescript><next.js>",
score:10,
creationDate:2024-02-12 08:46:43,
creationDate:2024-02-21 21:37:43,
score:7,
acceptedResponderReputation:146,
acceptedResponder:14946972,
QuestionerReputation:886,
Questioner:10506370}
{title:"Why does the `instanceof` operator return false on instance passed to library? (No inheritance involved)",
id:"https://stackoverflow.com/questions/75976618",
body:"<p>I am building a library with TS. This library uses the <code>ssh2</code> library as a dependency.</p>
<p>I'm trying to create a function that can either accept an <code>ssh2</code> configuration object or an already existing <code>Client</code> instance to execute a command (this is a simplified case):</p>
<pre><code>import { Client, ConnectConfig } from 'ssh2';

export function runCommand(params: Client | ConnectConfig) {
  if(params instanceof Client) {
    // do something
  } else {
    // create our own client
    // do something
  }
}
</code></pre>
<p>When I build this library and call the function like so:</p>
<pre class=""lang-js prettyprint-override""><code>const { readFileSync } = require(&quot;fs&quot;);
const { Client } = require(&quot;ssh2&quot;);
const { runCommand } = require(&quot;myLib&quot;);
const conn = new Client();

conn
  .on(&quot;ready&quot;, () =&gt; {
    console.log(&quot;Client :: ready&quot;);
    runCommand(conn);
  })
  .connect({
    host: &quot;example.com&quot;,
    port: 22,
    username: &quot;me&quot;,
    privateKey: readFileSync(process.env.HOME + &quot;/.ssh/id_ed25519&quot;),
  });
</code></pre>
<p>the <code>instanceof</code> check in my function will return <code>false</code> for some reason. What exactly is happening here? Is it a TS compilation issue or does Node.js see the <code>Client</code> from my lib's dependency and my consumer code's dependency as two different classes?</p>
<p>The compiled code looks something like:</p>
<pre class=""lang-js prettyprint-override""><code>const ssh2_1 = require(&quot;ssh2&quot;);
//...
function runCommand(params) {
    if (params instanceof ssh2_1.Client) {
        // do something
    }
    else {
       // create our own client
    // do something
    }
}
</code></pre>
",
tags:"<javascript><node.js><typescript><class><instanceof>",
score:8,
creationDate:2023-04-10 11:19:37,
creationDate:2023-04-10 13:57:17,
score:7,
acceptedResponderReputation:53185,
acceptedResponder:5108796,
QuestionerReputation:1258,
Questioner:6598814}
{title:"How was there no collision among 50,000 random 7-digit hex strings? (The Birthday Problem)",
id:"https://stackoverflow.com/questions/76095452",
body:"<p>I've encountered some code that generates a number of UUIDs via <code>UUID.randomUUID()</code>, takes the last 7 digits of each (recent versions of UUID are uniformly distributed in terms of entropy), and uses that as a key to insert rows into a database.</p>
<p>I wondered what the probability of collision was. I remembered <a href=""https://en.wikipedia.org/wiki/Birthday_problem"" rel=""noreferrer"">the Birthday Problem</a>. This is an instance of that problem, is it not? Instead of 365 days in a year, there are 16^7 possible strings. Then according to that Wikipedia page, the probability of collision given <em>n</em> strings is</p>
<p><a href=""https://i.sstatic.net/Kc4IF.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/Kc4IF.png"" alt=""enter image description here"" /></a></p>
<p>where <em>d</em> is 16^7.</p>
<p>A colleague asserted that they were able to insert 50,000 rows without an issue. I doubted this because the probably of collision with <em>n=50,000</em> and <em>d=16^7</em> is</p>
<pre><code>1-((16^7-1)/16^7)^(50000*(50000-1)/2) = 99.05%
</code></pre>
<p>But then I checked our database. Indeed the 50,000 inserts succeeded.</p>
<p>How was that possible? (Besides that they got really lucky.) Am I misapplying the Birthday Problem?</p>
<hr />
<p><strong>Edit</strong></p>
<p>Here's a minimal test that shows there <em>should</em> have been collisions.</p>
<pre><code>import java.util.UUID;
import java.util.HashSet;

public class MyClass {
    public static void main(String args[]) {
        final int N = 50000;
        for (int trial = 0; trial &lt; 10; trial++) {
            HashSet&lt;String&gt; strings = new HashSet&lt;&gt;();
            Boolean success = true;
            for (int i = 0; i &lt; N; i++) {
                String uuid = UUID.randomUUID().toString();
                String id = uuid.substring(uuid.length() - 7);
                if (strings.contains(id)) {
                    success = false;
                    // System.out.println(id);
                    break;
                }
                strings.add(id);
            }
            System.out.println(success);
        }
    }
}
</code></pre>
<p>For N=50,000, 10 out of 10 attempts had a collision—which would be expected of a 99% collision rate. For N=10,000, I see 0, 1, 2, or 3 out of 10 attempts with collisions, which all fall within expectations for a 17% collision rate.</p>
",
tags:"<java><probability><uuid><birthday-paradox>",
score:18,
creationDate:2023-04-24 19:32:51,
creationDate:2023-04-25 09:36:16,
score:7,
acceptedResponderReputation:30273,
acceptedResponder:925913,
QuestionerReputation:30273,
Questioner:925913}
{title:"Why is JavaScript private method accessible from console.log",
id:"https://stackoverflow.com/questions/75837140",
body:"<p>I wrote a simple code:</p>
<pre><code>const secure = new class {
    #privateProperty = 4;
    #privateMethod() {
        console.log( 'The property ' + this.#privateProperty + ' should not be accessible outside this class' );
    }
}
</code></pre>
<p>If it is immediately followed by the syntax below</p>
<p><code>secure.#privateMethod();</code></p>
<p>I get an error which says <code>Uncaught SyntaxError: Private field '#privateMethod' must be declared in an enclosing class</code></p>
<p>However, If I don't immediately call the <code>secure.#privateMethod()</code> and then go to developer tool - console and write the syntax there, it outputs:</p>
<p><code>The property 4 should not be accessible outside this class</code></p>
<p>Is there a special reason why this is happening?</p>
",
tags:"<javascript><class><google-chrome-devtools><private-members><private-methods>",
score:6,
creationDate:2023-03-24 18:38:21,
creationDate:2023-03-24 23:48:54,
score:7,
acceptedResponderReputation:664185,
acceptedResponder:1048572,
QuestionerReputation:368,
Questioner:9463084}
{title:"Problem loading external scripts like jQuery",
id:"https://stackoverflow.com/questions/77564335",
body:"<p>I'm facing a problem since this morning with webapps deployed with Apps Script that used to works fine previously. Of course no changes has been made to justify this problem.</p>
<p>External scripts are not loaded from the HTML side, and a new error arise in the console.</p>
<p>In order to have a reproducible example:</p>
<p>Code.gs</p>
<pre><code>function doGet() {

  var template = HtmlService.createTemplateFromFile('index');

  return template.evaluate()
                .setTitle('TEST')
                .addMetaTag('viewport', 'width=device-width, initial-scale=1')
                .setSandboxMode(HtmlService.SandboxMode.IFRAME)
}
</code></pre>
<p>index.html:</p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;
  &lt;head&gt;
    &lt;base target=&quot;_top&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;/&gt;
  &lt;/head&gt;
  &lt;body&gt;
        &lt;div id=&quot;title&quot;&gt;Hello&lt;/div&gt;
  &lt;/body&gt;
  &lt;script src=&quot;https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js&quot;&gt;&lt;/script&gt;

  &lt;script&gt;
    window.onload = function() {

      console.log('loaded');
      console.log($('#title').html());

    }
  &lt;/script&gt;
&lt;/html&gt;
</code></pre>
<p>Results in the console:</p>
<pre><code>[ERROR] This document requires 'TrustedHTML' assignment. (jquery.min.js:2)

[ERROR] Uncaught TypeError: Failed to set the 'innerHTML' property on 'Element': This document requires 'TrustedHTML' assignment. (jquery.min.js:2)

[LOG] loaded

[ERROR] Uncaught ReferenceError: $ is not defined

</code></pre>
<p>The source problem appears to be the <code>&lt;script src=''</code> loading jQuery. But I didn't notice any troubleshoot coming from Google, is it a new restriction for Apps Script?</p>
<p>Screenshots:
<a href=""https://i.sstatic.net/zch29.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/zch29.png"" alt=""projet/console"" /></a></p>
<p><a href=""https://i.sstatic.net/VH9W4.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/VH9W4.png"" alt=""Error Sources"" /></a></p>
<p><a href=""https://i.sstatic.net/cRV3g.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/cRV3g.png"" alt=""Network + CSP"" /></a></p>
",
tags:"<javascript><html><jquery><google-apps-script><google-workspace>",
score:19,
creationDate:2023-11-28 13:37:38,
creationDate:2023-11-28 16:23:55,
score:7,
acceptedResponderReputation:452,
acceptedResponder:13598384,
QuestionerReputation:917,
Questioner:5623780}
{title:"Is there a way of accessing React context data in React Router 6 action function",
id:"https://stackoverflow.com/questions/75806705",
body:"<p>I understand hooks can only be called inside the body of a function component but I was wondering if there is a way to access context data from inside <code>react-router@6</code> action function. I have an action function that handles the user login form process. I'd like to use the <code>setCurrentUser</code> function which is coming from the app context in order  to update the state with the logged in user data returned from the API</p>
<pre class=""lang-js prettyprint-override""><code>export const AuthAction = async ({ request }) =&gt; {
  const { setCurrentUser } = useAppContext()
  const data = await request.formData()
  const userData = {
    email: data.get('email'),
    password: data.get('password')
  }
  if (!userData.email || !userData.password) {
    throw json(
      { message: 'Please provide all values' },
      { status: 400, statusText: 'Please provide all values' }
    )
  }
  try {
    const { data } = await axios.post('/api/auth/login', userData)
    setCurrentUser(data)
    return redirect('/')
  } catch (error) {
    return error.response.data.msg
  }
}
</code></pre>
<p>appContext.js</p>
<pre><code>const AppContextProvider = ({ children }) =&gt; {
  const [state, dispatchFn] = useReducer(reducer, initialState)

  const setCurrentUser = (user) =&gt; {
    dispatchFn({ type: 'SET_CURRENT_USER', payload: user })
  }

  return (
    &lt;AppContext.Provider value={{setCurrentUser}}&gt;
      {children}
    &lt;/AppContext.Provider&gt;
  )
}

const useAppContext = () =&gt; {
  return useContext(AppContext)
}

export { AppContextProvider, useAppContext }
</code></pre>
<p>I tried  getting the <code>setCurrentUser</code> function from the app context from within my action function but I get the Error: Invalid hook call. I am at a loss, I'd truly appreciate a nudge in the right direction.</p>
<p>What I am hoping to achieve is that upon successful login, to update my app context with the current logged in user information.</p>
",
tags:"<javascript><reactjs><react-router><react-context>",
score:7,
creationDate:2023-03-21 22:00:56,
creationDate:2023-03-22 04:58:28,
score:7,
acceptedResponderReputation:202595,
acceptedResponder:8690857,
QuestionerReputation:73,
Questioner:14610950}
{title:"How to determine the best background color for a div that contains an image?",
id:"https://stackoverflow.com/questions/75988959",
body:"<p>I have a few logos in my image assets. These logos will be imported into <a href=""https://tv.jordkris.com/"" rel=""noreferrer"">this website</a>. Each logo has a random color (can be white, black, gray, red, blue, green, etc.) and has a transparent background. For example:</p>
<p><a href=""https://i.sstatic.net/b7yHv.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/b7yHv.png"" alt=""white logo"" /></a>
<a href=""https://i.sstatic.net/IhCH1.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/IhCH1.png"" alt=""black logo"" /></a>
<a href=""https://i.sstatic.net/tYjdM.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/tYjdM.png"" alt=""gray logo"" /></a></p>
<p>The code below will be applied to display the logo on the website page:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-css lang-css prettyprint-override""><code>.magic-box {
    width: 200px;
    height: 100px;
    border: 1px solid black;
    position: relative;
    border-radius: 20px;
    background-color: white; /* can be changed */
}

.magic-image {
    max-height: 100%;
    max-width: 100%;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
}

.images {
  display: flex;
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;div class=""images""&gt;
  &lt;div class=""magic-box""&gt;
    &lt;img src=""https://i.sstatic.net/b7yHv.png"" class=""magic-image"" /&gt;
  &lt;/div&gt;
  &lt;div class=""magic-box""&gt;
    &lt;img src=""https://i.sstatic.net/IhCH1.png"" class=""magic-image"" /&gt;
  &lt;/div&gt;
  &lt;div class=""magic-box""&gt;
    &lt;img src=""https://i.sstatic.net/tYjdM.png"" class=""magic-image"" /&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
</p>
<p>The problem is when I make the background color of <code>.magic-box</code> white, then the white logo doesn't show up. When the background color is set to black, the black logo is not visible, and so on.</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-css lang-css prettyprint-override""><code>.magic-box {
    width: 200px;
    height: 100px;
    border: 1px solid black;
    position: relative;
    border-radius: 20px;
    background-color: black; /* can be changed */ 
}

.magic-image {
    max-height: 100%;
    max-width: 100%;
    position: absolute;
    top: 0;
    bottom: 0;
    left: 0;
    right: 0;
    margin: auto;
}

.images {
  display: flex;
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;div class=""images""&gt;
  &lt;div class=""magic-box""&gt;
    &lt;img src=""https://i.sstatic.net/b7yHv.png"" class=""magic-image"" /&gt;
  &lt;/div&gt;
  &lt;div class=""magic-box""&gt;
    &lt;img src=""https://i.sstatic.net/IhCH1.png"" class=""magic-image"" /&gt;
  &lt;/div&gt;
  &lt;div class=""magic-box""&gt;
    &lt;img src=""https://i.sstatic.net/tYjdM.png"" class=""magic-image"" /&gt;
  &lt;/div&gt;
&lt;/div&gt;</code></pre>
</div>
</div>
</p>
<p>How to determine the most appropriate <code>background-color</code> to be applied to every <code>.magic-box</code> element programmatically?</p>
<blockquote>
<p><em>Note: Background color can be different for each image</em></p>
</blockquote>
",
tags:"<javascript><html><css><image><colors>",
score:7,
creationDate:2023-04-11 18:18:45,
creationDate:2023-04-15 17:11:39,
score:7,
acceptedResponderReputation:17115,
acceptedResponder:15015675,
QuestionerReputation:1960,
Questioner:12715723}
{title:"Vite-PWA-plugin how to add webpush (notifications)",
id:"https://stackoverflow.com/questions/75988769",
body:"<p>I had the <code>sw.js</code> which receive webpush notifications.
But recently I intalled vite-PWA-plugin and now i can't add notifications by default config.</p>
<p>How can i configure this <code>vite.config.ts</code> to add to generated <code>serviceWorker.js</code> webpush implementation?</p>
<p><code>vite.config.ts</code>:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>import {defineConfig} from 'vite';
import laravel from 'laravel-vite-plugin';
import react from '@vitejs/plugin-react';

import path from 'path';
import {VitePWA} from ""vite-plugin-pwa"";

const manifest = {
    ""theme_color""     : ""#2B2B2B"",
    ""background_color"": ""#2B2B2B"",
    ""display""         : ""standalone"",
    ""scope""           : ""/"",
    ""start_url""       : ""/farm"",
    ""name""            : ""ColorBit"",
    ""short_name""      : ""Mining"",
    ""description""     : ""..."",
    ""icons""           : [
        {
            ""src""  : ""icons/icon-192x192.png"",
            ""sizes"": ""192x192"",
            ""type"" : ""image/png""
        },
        // ...
        {
            ""src""    : ""icons/maskable_icon.png"",
            ""sizes""  : ""682x682"",
            ""type""   : ""image/png"",
            ""purpose"": ""maskable""
        }
    ]
};

const getCache = ({ name, pattern, strategy = ""CacheFirst"" }: any) =&gt; ({
    urlPattern: pattern,
    handler: strategy,
    options: {
        cacheName: name,
        expiration: {
            maxEntries: 500,
            maxAgeSeconds: 60 * 60 * 24 * 60 // 2 months
        },
        cacheableResponse: {
            statuses: [0, 200]
        }
    }
});

export default defineConfig({
    plugins: [
        laravel({
            input  : [ 'resources/js/app.tsx',],
            refresh: true,
        }),
        react({
            fastRefresh: false
        }),
        VitePWA({
            registerType: 'autoUpdate',
            outDir      : path.resolve(__dirname, 'public'),
            manifest    : manifest,
            manifestFilename: 'manifest.webmanifest', // Change name for app manifest
            injectRegister  : false, // I register SW in app.ts, disable auto registration

            workbox         : {
                globDirectory: path.resolve(__dirname, 'public'), // Directory for caching
                globPatterns : [
                    '{build,images,sounds,icons}/**/*.{js,css,html,ico,png,jpg,mp4,svg}'
                ],
                navigateFallback: null, // Say that we don't need to cache index.html
                swDest       : 'public/serviceWorker.js',
                runtimeCaching: [
                    // Google fonts cache
                    getCache({
                        pattern: /^https:\/\/fonts\.googleapis\.com\/.*/i,
                        name: ""google-fonts-cache"",
                    }),
                    // Google fonts api cache
                    getCache({
                        pattern: /^https:\/\/fonts\.gstatic\.com\/.*/i,
                        name: ""gstatic-fonts-cache""
                    }),
                    // Dynamic cache for assets in storage folder
                    getCache({
                        pattern: /.*storage.*/,
                        name: ""dynamic-images-cache"",
                    }),

                ]
            }
        })
    ],
    resolve: {
        alias     : {
            '@'          : path.resolve(__dirname, 'resources/js'),
            '@hooks'     : path.resolve(__dirname, 'resources/js/hooks'),
            '@assets'    : path.resolve(__dirname, 'resources/js/assets/'),
            '@components': path.resolve(__dirname, 'resources/js/components')
        },
        extensions: ['.js', '.ts', '.tsx', '.jsx'],
    },
});</code></pre>
</div>
</div>
</p>
<p>Old webpush implementation in <code>sw.js</code>:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>// ^^^ Activate, Install, Fetch... ^^^

/* Webpush Notifications */

// Receive push notifications
self.addEventListener('push', function (e) {
    if (!(
        self.Notification &amp;&amp;
        self.Notification.permission === 'granted'
    )) {
        //notifications aren't supported or permission not granted!
        return;
    }

    if (e.data) {
        let message = e.data.json();
        e.waitUntil(self.registration.showNotification(message.title, {
            body: message.body,
            icon: message.icon,
            actions: message.actions
        }));
    }
});

// Click and open notification
self.addEventListener('notificationclick', function(event) {
    event.notification.close();

    if (event.action === 'farm') clients.openWindow(""/farm"");
    else if (event.action === 'home') clients.openWindow(""/"");
    else if (event.action === 'training') clients.openWindow(""/mining-training"");
    else if (event.action === 'dns') clients.openWindow(""/shops/dns"");
    else if (event.action === 'ali') clients.openWindow(""/shops/aliexpress"");
    else clients.openWindow(""/farm"");
}, false);</code></pre>
</div>
</div>
</p>
",
tags:"<javascript><progressive-web-apps><vite><workbox><web-push>",
score:6,
creationDate:2023-04-11 17:51:26,
creationDate:2023-04-13 13:29:20,
score:7,
acceptedResponderReputation:419,
acceptedResponder:12615036,
QuestionerReputation:419,
Questioner:12615036}
{title:"Socket connection timout error in Node js",
id:"https://stackoverflow.com/questions/76179568",
body:"<p>I've been having trouble uploading images to cloudinary in Node JS because when I try to I get this error</p>
<pre><code>Error [ERR_SOCKET_CONNECTION_TIMEOUT]: Socket connection timeout 
 {
   error: Error [ERR_SOCKET_CONNECTION_TIMEOUT]: Socket connection timeout
       at new NodeError (node:internal/errors:399:5)
       at internalConnectMultiple (node:net:1099:20)
       at Timeout.internalConnectMultipleTimeout (node:net:1638:3)
       at listOnTimeout (node:internal/timers:575:11)
       at process.processTimers (node:internal/timers:514:7) {
     code: 'ERR_SOCKET_CONNECTION_TIMEOUT'
   }
 }
</code></pre>
<p>Sometimes the image gets uploaded and sometimes it doesn't. I've looked it up online and it says poor internet connection but my internet is good enough, I've had the entire application dockerized so idk if that has something to do with it.</p>
<pre><code>const addProduct = async (req: Request, res: Response, next: NextFunction) =&gt; {
  const {
    title,
    snippet,
    description,
    quantity,
    price,
    coverImage,
    imageArray,
    category,
  } = req.body;
  try {
    cloudinary.api
      .ping()
      .then((res) =&gt; {
        console.log(`Cloudinary connection ${res.status}`);
      })
      .catch((err) =&gt; console.log(err));

    const imageUrlArray: Array&lt;imageObjectType&gt; = [];
    const coverImageUpload = await cloudinary.uploader.upload(coverImage);
    if (imageArray !== undefined) {
      for (let i = 0; i &lt; imageArray.length; i++) {
        const image = await cloudinary.uploader.upload(imageArray[i]);
        imageUrlArray.push({
          publicId: image.public_id,
          secureUrl: image.secure_url,
        });
      }
    }
    console.log(req.seller);
    const product = await Product.create({
      title: title,
      snippet: snippet,
      description: description,
      quantity: quantity,
      price: price,
      coverImage: {
        publicId: coverImageUpload.public_id,
        secureUrl: coverImageUpload.secure_url,
      },
      imageArray: imageUrlArray,
      category: category,
      sellerId: req.seller,
    });
    console.log(product);
    if (product) {
      res.status(200).json({
        message: &quot;Product added&quot;,
        category: category,
      });
    }
  } catch (err) {
    console.log(err);
  }
};
</code></pre>
<p>This is where I'm uploading the images and it's giving me error in the bit where I try to ping to cloudinary.</p>
",
tags:"<javascript><node.js><typescript><rest><file-upload>",
score:8,
creationDate:2023-05-05 06:59:59,
creationDate:2023-06-13 13:17:24,
score:7,
acceptedResponderReputation:3819,
acceptedResponder:3484824,
QuestionerReputation:95,
Questioner:21258501}
{title:"ISO-8601 week data representation for basic temporal operations",
id:"https://stackoverflow.com/questions/78148701",
body:"<p>I've got week data in <a href=""https://en.m.wikipedia.org/wiki/ISO_week_date"" rel=""noreferrer"">ISO 8601</a> format. E.g.:</p>
<pre><code>weekA = '2012-W48'
weekB = '2013-W03'
</code></pre>
<p>Is there a class in Java that can represent those weeks and supports basic temporal operations? I tried <code>LocalDate.parse(&quot;2012-W48&quot;,DateTimeFormatter.ISO_WEEK_DATE);</code> but this throws an error because this is a week, not an actual date (i.e. the day in the week is missing). Similar to the <code>LocalDate</code> class, I'd like to be able to do some basic temporal operations such as:</p>
<ul>
<li><code>weekA.isBefore(weekB)</code> returns <code>true</code> if <code>weekA</code> is before <code>weekB</code></li>
<li><code>weeksBetween(weekA,weekB)</code> returns the number of weeks between the two week dates, i.e. <code>weekB-weekA</code> in weeks.</li>
</ul>
<p>Ideally I'd only use standard Java classes (Java &gt;= 11).</p>
",
tags:"<java><iso8601>",
score:6,
creationDate:2024-03-12 16:32:27,
creationDate:2024-03-12 16:49:16,
score:7,
acceptedResponderReputation:78945,
acceptedResponder:10819573,
QuestionerReputation:2411,
Questioner:1903852}
{title:"Unable to Display Loading Component in Next.js v13",
id:"https://stackoverflow.com/questions/76250173",
body:"<p>I'm having trouble implementing a loading component in Next.js v13. According to the documentation, I created a <code>loading.tsx</code> file in my <code>src</code> directory, but it's not being displayed. I've also included a function to fetch data. However, every time I refresh the page, it directly shows the API response from the server without displaying the loading component. Could anyone suggest how to rectify this? Additionally, is there any further configuration required to display the loading component?</p>
<p>Here is my code:</p>
<p>In <code>page.tsx</code>:</p>
<pre><code>import { IResult } from '@/interface';
import Results from '@/components/Results';

const API_KEY = process.env.API_KEY

export default async function Home({ searchParams } : {searchParams: any}) {
  const genre = searchParams.genre || 'fetchTrending';
  const res = await fetch(`https://api.themoviedb.org/3/${genre === 'fetchTopRated'
    ? 'movie/top_rated' :
      'trending/all/week'
  }?api_key=${API_KEY}&amp;language=en-US&amp;page=1`, { next: {revalidate: 100000 }})

  if (!res.ok) {
    throw new Error('Failed to fetch data')
  }

  const data = await res.json()

  const results = data.results as IResult[]

  console.log({results})
  return (
    &lt;&gt;
      &lt;main className=&quot;flex min-h-screen flex-col items-center justify-between p-4&quot;&gt;
        &lt;Results results={results}&gt;&lt;/Results&gt;
      &lt;/main&gt;
    &lt;/&gt;
  )
}
</code></pre>
<p>And in <code>loading.tsx</code>:</p>
<pre><code>import React from 'react'

export default function Loading() {
  return (
    &lt;div&gt;loading...&lt;/div&gt;
  )
}
</code></pre>
<p>I would greatly appreciate any help or suggestions. Thank you!</p>
",
tags:"<javascript><reactjs><typescript><next.js><next.js13>",
score:7,
creationDate:2023-05-15 00:09:49,
creationDate:2023-05-15 01:15:15,
score:8,
acceptedResponderReputation:49182,
acceptedResponder:10262805,
QuestionerReputation:1065,
Questioner:3011308}
{title:"how to set maxHttpHeaderSize in spring-boot 3.x",
id:"https://stackoverflow.com/questions/75460562",
body:"<p>As stated in the <a href=""https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide"" rel=""noreferrer"">Spring Boot 3 Migration Guide</a> the <strong>server.max-http-header-size</strong> property has been deprecated. You can use the <strong>server.max-http-request-header-size</strong> property to set the max http request header size <strong>only</strong>.</p>
<p>I get the following Exception:</p>
<pre><code>org.apache.coyote.http11.HeadersTooLargeException: An attempt was made to write 
more data to the response headers than there was room available in the buffer. 
Increase maxHttpHeaderSize on the connector 
or write less data into the response headers.
</code></pre>
<p>I need to increase the max http response header size in an embedded Tomcat 10. <a href=""https://tomcat.apache.org/tomcat-10.0-doc/config/http.html"" rel=""noreferrer"">Tomcat 10</a> supports both the <strong>maxHttpHeaderSize</strong> and the <strong>maxHttpResponseHeaderSize</strong> attributes.</p>
<p>How I can set these in spring boot 3.x with a <code>WebServerFactoryCustomizer</code>?</p>
",
tags:"<java><spring><spring-boot><tomcat10><embedded-tomcat>",
score:10,
creationDate:2023-02-15 13:32:57,
creationDate:2023-02-15 18:39:30,
score:8,
acceptedResponderReputation:5105,
acceptedResponder:1299533,
QuestionerReputation:3184,
Questioner:10674026}
{title:"Regex $1, $2 data type conversion issue",
id:"https://stackoverflow.com/questions/79252321",
body:"<p>I'm trying to add YouTube Video Bookmark somewhere.</p>
<p>If my YouTube Video URL is: 'https://www.youtube.com/watch?v=xxxxxx&amp;t=12:13'<br />
Then it should be convert as format: 'https://www.youtube.com/watch?v=xxxxxx&amp;t=25s'</p>
<p>Basically I changes the timer format: <code>12:13</code> to <code>733s</code> (12*60 + 13)</p>
<p>I can do it simple way.<br />
But I want to do it in a single line with regex validation like:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"" data-babel-preset-react=""false"" data-babel-preset-ts=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>let url = 'https://www.youtube.com/watch?v=xxxxxx&amp;t=12:13';

console.log(url.replace(/(\d+)\:(\d+)/g, '$1$2'));

let cUrl = url.replace(/(\d+)\:(\d+)/g, `${Number($1)*60 + Number($2)}s`);
console.log(cUrl);</code></pre>
</div>
</div>
</p>
<h4>Browser Console Output:</h4>
<p><a href=""https://i.sstatic.net/KTr5eDGy.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/KTr5eDGy.png"" alt=""enter image description here"" /></a>
<a href=""https://i.sstatic.net/nSdO2LYP.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/nSdO2LYP.png"" alt=""enter image description here"" /></a></p>
<p>Can some guide me why it's showing the <code>NaN</code>?<br />
What I'm doing wrong ?</p>
",
tags:"<javascript><regex><regex-group>",
score:6,
creationDate:2024-12-04 18:18:38,
creationDate:2024-12-04 18:38:28,
score:8,
acceptedResponderReputation:784868,
acceptedResponder:548225,
QuestionerReputation:1970,
Questioner:10850045}
{title:"Need explanation of error message 'TypeError: Receiver must be an instance of class'",
id:"https://stackoverflow.com/questions/75414798",
body:"<p>When I run this code:</p>
<pre><code>'use strict';

class Base {
  constructor() {
    this._public();
  }
}

class Child extends Base {
  constructor() {
    super();
  }

  _public() {
    this.#privateMethod();
  }

  #privateMethod() {
    this.bar = 1234;
  }
}

const c = new Child();
console.log(c.bar);
</code></pre>
<p>I get the following error:</p>
<pre><code>   this.#privateMethod();
         ^

TypeError: Receiver must be an instance of class Child
</code></pre>
<p>As I understand JavaScript, the receiver in the following code is exactly an instance of the class Child. It's even shown in the dev tools inspector:</p>
<p><a href=""https://i.sstatic.net/vOUBz.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/vOUBz.png"" alt=""dev-tools screenshot"" /></a></p>
<p><strong>So could someone please explain to me what's going on? Is it a bug or what?</strong></p>
<hr />
<p>Actually FF shows a more accurate error message:</p>
<pre><code>Uncaught TypeError: can't access private field or method: object is not the right class
</code></pre>
",
tags:"<javascript><oop><inheritance><typeerror><ecmascript-next>",
score:8,
creationDate:2023-02-10 18:23:42,
creationDate:2023-02-10 18:29:54,
score:8,
acceptedResponderReputation:1073968,
acceptedResponder:157247,
QuestionerReputation:4460,
Questioner:907860}
{title:"Query execution errors after upgrading spring boot 3.2.0 to 3.2.1 - ORA-00933 - command not properly ended",
id:"https://stackoverflow.com/questions/77823240",
body:"<p>I have a Java Spring application with lots of queries, which so far have worked until spring boot <strong>3.2.0</strong>.</p>
<p>Recently, after simply changing to spring boot <strong>3.2.1</strong>, I started getting this kind of error:</p>
<pre><code>org.springframework.dao.InvalidDataAccessResourceUsageException: JDBC exception executing 
SQL [select 
        o1_0.org_id,
        o1_0.name 
     from organizations o1_0 
     where (
            ? is null or 
            trim(BOTH from ?)='' or 
            lower(o1_0.name) like lower(trim(BOTH from ?))
     ) 
     offset ? rows 
     fetch first ? rows only] 
[ORA-00933: comando SQL command not properly ended]
</code></pre>
<p>My pom dependencies look like this:</p>
<pre><code>    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;3.2.1&lt;/version&gt;
        &lt;relativePath /&gt;
    &lt;/parent&gt;

    &lt;properties&gt;
        &lt;java.version&gt;21&lt;/java.version&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
        &lt;/dependency&gt;
        
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        
        &lt;dependency&gt;
            &lt;groupId&gt;com.oracle.database.jdbc&lt;/groupId&gt;
            &lt;artifactId&gt;ojdbc11&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;
            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;
        &lt;/dependency&gt;

    &lt;/dependencies&gt;
</code></pre>
<p>My queries, with some code i cant disclose removed, but still giving errors, has simple conditions:</p>
<pre><code>    
    @Query(&quot;select org  &quot;
         + &quot;  from Organization         org     &quot;
         + &quot; where 1 = 1 &quot;
         + &quot;   and ( &quot;
         + &quot;         :#{#request.name} is null &quot;
         + &quot;         or &quot;
         + &quot;         trim(:#{#request.name}) = '' &quot;
         + &quot;         or &quot;
         + &quot;         lower(org.name) like lower(trim(:#{#request.name}))&quot;
         + &quot;       ) &quot;
    )
    Page&lt;Organization&gt; getPageByCriteria(@Param(&quot;request&quot;) GetOrganizationsRequestDto request, Pageable pageable);
</code></pre>
<p>I am connecting to <strong>oracle database version 11g</strong></p>
<p>Does anyone have this kind of problem or similar and can help me with it? I suspect it is related to ojdbc not having had an update since the last spring boot version.</p>
<p>Thanks</p>
<p><strong>Edit</strong>: added the pure SQL query performed on the database, according to error log</p>
",
tags:"<java><oracle-database><spring-boot><migration><hql>",
score:6,
creationDate:2024-01-16 02:52:06,
creationDate:2024-01-20 15:45:03,
score:8,
acceptedResponderReputation:6053,
acceptedResponder:3426309,
QuestionerReputation:171,
Questioner:1508072}
{title:"React Form being submitted at the wrong time",
id:"https://stackoverflow.com/questions/76601584",
body:"<p>I have two buttons, one of type &quot;button&quot; and one of type &quot;submit&quot;, both wrapped in a form and which toggle each other. Weirdly, if I click on the button of type &quot;button&quot; the form is submitted and if I click of the button of type &quot;submit&quot; the form is not submitted.</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""true"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const rootElement = document.getElementById('root');
const root = ReactDOM.createRoot(rootElement);

function App() {
  const [clicked, setClicked] = React.useState(false);

  return (
    &lt;form
      onSubmit={(e) =&gt; {
        e.preventDefault();
        console.log(""form submitted!"");
      }}
    &gt;
      {!clicked ? (
        &lt;button type=""button"" onClick={() =&gt; setClicked(true)}&gt;
          Button 1
        &lt;/button&gt;
      ) : (
        &lt;button type=""submit"" onClick={() =&gt; setClicked(false)}&gt;
          Button 2
        &lt;/button&gt;
      )}
    &lt;/form&gt;
  );
}

root.render(
  &lt;App /&gt;
);</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;script src=""https://cdnjs.cloudflare.com/ajax/libs/react/18.2.0/umd/react.production.min.js""&gt;&lt;/script&gt;
&lt;script src=""https://cdnjs.cloudflare.com/ajax/libs/react-dom/18.2.0/umd/react-dom.production.min.js""&gt;&lt;/script&gt;
&lt;div id='root'&gt;&lt;/div&gt;</code></pre>
</div>
</div>
</p>
<p>I would expect that the opposite be true in regards to submitting the form.</p>
",
tags:"<javascript><node.js><reactjs><react-hooks><react-forms>",
score:13,
creationDate:2023-07-03 02:47:10,
creationDate:2023-07-03 04:23:08,
score:8,
acceptedResponderReputation:16169,
acceptedResponder:13488990,
QuestionerReputation:143,
Questioner:14820283}
{title:"How to use playwright expect to do an exact match of one of two possible values?",
id:"https://stackoverflow.com/questions/75570005",
body:"<p>How can I use playwright <code>expect</code> to check for one of two exact matches?</p>
<p>Here's my function.</p>
<pre><code>export const assertThirdPartyInternetPath = async (
  page: Page,
  path: string,
) =&gt; {
  expect(page.url()).toBe(path);
};
</code></pre>
<p>I am using it to test links to wikipedia pages.</p>
<p><code>await this.assertThirdPartyInternetPath('https://en.wikipedia.org/wiki/Larry_Sanger'</code></p>
<p>However, some sites like Wikipedia will redirect mobile devices (including playwright devices) to the <code>m</code> subdomain.</p>
<p>So I want to assert that the user is at either <code>https://en.wikipedia.org/wiki/Larry_Sanger</code> or <code>https://en.m.wikipedia.org/wiki/Larry_Sanger</code>.  How can I do that?</p>
<p>Note that I want to do an exact match; I know I can use <code>expect(string.toContain(myPattern)</code> but I have various things to match and I want to do exact matches.</p>
",
tags:"<javascript><playwright>",
score:6,
creationDate:2023-02-26 04:29:00,
creationDate:2023-02-26 08:11:51,
score:8,
acceptedResponderReputation:56855,
acceptedResponder:6243352,
QuestionerReputation:6397,
Questioner:1209486}
{title:"""Timeout on blocking read"" when using new Spring 6 HTTP Interface",
id:"https://stackoverflow.com/questions/75313793",
body:"<p>We recently started testing <a href=""https://docs.spring.io/spring-framework/docs/current/reference/html/integration.html#rest-http-interface"" rel=""noreferrer"">the new HTTP Interface that came with Spring 6.</a></p>
<p>We defined a client like this:</p>
<pre><code>    HttpClient client = (HttpClient)((HttpClient)HttpClient.create().option(ChannelOption.CONNECT_TIMEOUT_MILLIS, 5000)).doOnConnected((conn) -&gt; {
        conn.addHandlerLast(new ReadTimeoutHandler(10000L, TimeUnit.MILLISECONDS));
    });
    WebClient webClient = WebClient.builder().clientConnector(new ReactorClientHttpConnector(client)).baseUrl(locationUrl.toExternalForm()).build();
    HttpServiceProxyFactory factory = HttpServiceProxyFactory.builder(WebClientAdapter.forClient(webClient)).build();
</code></pre>
<p>An interface can look something like this:</p>
<pre><code>@GetExchange(&quot;/availability&quot;)
    AvailabilityResponse getAvailability(@RequestParam(&quot;products&quot;) List&lt;String&gt; itemIds);
</code></pre>
<p>When using the client, we are occasionally getting exceptions like below. We initially thought that this was related to the connect timeout that we defined as 5 seconds, but this seems to be related to the reactor blockingGet rather than the actual HTTP call.</p>
<p>When searching for similar issues, everything I found seem to be related to unit testing of WebClient, with solutions like setting <code>@AutoConfigureWebTestClient(timeout = &quot;30000&quot;)</code>, so this does not help us.
How can we increase the blocking get timeout to match our ReadTimeoutHandler of 10 seconds?</p>
<pre><code>java.lang.IllegalStateException: Timeout on blocking read for 5000000000 NANOSECONDS
    at reactor.core.publisher.BlockingSingleSubscriber.blockingGet(BlockingSingleSubscriber.java:123)
    at reactor.core.publisher.Mono.block(Mono.java:1734)
    at org.springframework.web.service.invoker.HttpServiceMethod$ResponseFunction.execute(HttpServiceMethod.java:296)
    at org.springframework.web.service.invoker.HttpServiceMethod.invoke(HttpServiceMethod.java:105)
    at org.springframework.web.service.invoker.HttpServiceProxyFactory$HttpServiceMethodInterceptor.invoke(HttpServiceProxyFactory.java:271)
    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
    at jdk.proxy3/jdk.proxy3.$Proxy135.searchPharmacies(Unknown Source)
    at &lt;redacted&gt;
    at jdk.internal.reflect.GeneratedMethodAccessor128.invoke(Unknown Source)
    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
    at java.base/java.lang.reflect.Method.invoke(Method.java:568)
    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207)
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152)
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884)
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797)
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080)
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973)
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011)
    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:903)
    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:705)
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885)
    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
    at org.springframework.web.filter.ServerHttpObservationFilter.doFilterInternal(ServerHttpObservationFilter.java:109)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78)
    at org.apache.catalina.valves.RemoteIpValve.invoke(RemoteIpValve.java:741)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357)
    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400)
    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65)
    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859)
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734)
    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52)
    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191)
    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659)
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61)
    at java.base/java.lang.Thread.run(Thread.java:833)
</code></pre>
",
tags:"<java><spring><spring-boot><spring-webclient>",
score:6,
creationDate:2023-02-01 17:11:39,
creationDate:2023-02-22 00:03:30,
score:8,
acceptedResponderReputation:5468,
acceptedResponder:971423,
QuestionerReputation:2500,
Questioner:591935}
{title:"Sharing an image using the WebShare API in iOS is failing",
id:"https://stackoverflow.com/questions/76076190",
body:"<p>I trying to use the WebShare API to share an image in iOS and Android. In Android, my code works perfectly, but in iOS, in some apps like WhatsApp doesn't share the image, it only shares the URL. In a few apps like the email, it's working. I added some code for preventing to share anything else besides the image in iOS like this:</p>
<pre><code>let data = IS_SAFARI ? { files: [], text: '', url: '', title: '' } : { files: [], text: text, url: URL, title: TITLE };
</code></pre>
<p>But it still doesn't show the image, it only shares an URL:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const URL = 'https://upload.wikimedia.org/wikipedia/commons/2/27/Map_of_Spain_1490.jpg';
const TYPE = 'image/jpeg';
const EXT = '.jpg';
const TITLE = ""yourTitle"";
const IS_SAFARI = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);

function webshare(text) {

    let navigator;
    navigator = window.navigator;
    let data = IS_SAFARI ? { files: [], text: '', url: '', title: '' } : { files: [], text: text, url: URL, title: TITLE };

    var xhr = new XMLHttpRequest();
    xhr.open('GET', URL, true);
    xhr.responseType = 'arraybuffer';
    xhr.onload = function() {
        if (xhr.status === 200) {
        var response = xhr.response;
        console.log(response);

        var blob = new File([response], text + EXT, { type: TYPE });
        data.files.push(blob);
        console.log(data);

        if (navigator.canShare &amp;&amp; navigator.canShare(data)) {
            navigator.share(data)
            .then(function() {})
            .catch(function(err) {
                console.error('Unsuccessful share ' + err);
            });
        }
        } else {
        console.error('Failed to load ' + URL + ': ' + xhr.status);
        }
    };
    xhr.send();
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;button onclick=""webshare('Map_of_Spain_1490.jpg')""&gt;Share&lt;/button&gt;</code></pre>
</div>
</div>
</p>
<p>Any idea what am I doing wrong?</p>
",
tags:"<javascript><ios><mobile-safari><web-share>",
score:6,
creationDate:2023-04-21 19:20:50,
creationDate:2023-04-26 09:18:45,
score:8,
acceptedResponderReputation:3274,
acceptedResponder:1928691,
QuestionerReputation:3274,
Questioner:1928691}
{title:"What is the difference between useState and createSignal?",
id:"https://stackoverflow.com/questions/75773364",
body:"<p>What are the differences between React's useState and Solid JS's createSignal.</p>
<p>Do Solid's signal has benefits over React's state?</p>
<pre><code>import React, { useState } from &quot;react&quot;;

function App() {
    const [counter, setCounter] = useState(0);
    return (
      &lt;div&gt;
        &lt;p&gt;{counter}&lt;/p&gt;
        &lt;button onClick={() =&gt; setCounter((counter) =&gt; counter + 1)}&gt;
          Click Me
        &lt;/button&gt;
      &lt;/div&gt;
    );
}
</code></pre>
<pre class=""lang-js prettyprint-override""><code>import React from &quot;react&quot;;
import { createSignal } from &quot;solid-js&quot;;

function App() {
    const [count, setCount] = createSignal(0);
    return (
      &lt;div&gt;
        &lt;p&gt;{count()}&lt;/p&gt;
        &lt;button onClick={() =&gt; setCount(count() + 1)}&gt;Click Me&lt;/button&gt;
      &lt;/div&gt;
    );
}
</code></pre>
<p>Which one is better for performance and mental model?</p>
",
tags:"<javascript><reactjs><solid-js>",
score:7,
creationDate:2023-03-18 01:29:35,
creationDate:2023-03-18 03:53:45,
score:8,
acceptedResponderReputation:13600,
acceptedResponder:7134134,
QuestionerReputation:73,
Questioner:20069960}
{title:"How to check if an exception is a FirebaseError / FirebaseAuthError in TypeScript",
id:"https://stackoverflow.com/questions/75447800",
body:"<p>I'm trying to implement Firebase authentication and user creation on our server, working on TypeScript.</p>
<p>I'm creating a new user, and I have wrapped the whole creation inside a try-catch block. I'm trying to catch several exceptions, one of them being exception thrown by Firebase.</p>
<p>The problem is that I can't check if the exception was thrown by the Firebase, or if it's another type of exception.</p>
<p>Other answers to similar kind of questions suggest to check if the exception is an instance of FirebaseError:</p>
<pre><code>let firebaseUser;
try {
    firebaseUser = await firebase.auth().createUser({
        email: email,
        password: password,
    });

    // Other code here
} catch (error) {
    if(error instanceof FirebaseError){
        // handle FirebaseError here
    }
}
</code></pre>
<p>The problem is, that when there is an error in the createUser function, the error is an instance of FirebaseAuthError, not FirebaseError, so this check fails.</p>
<p>I tried to switch it to FirebaseAuthError and import the FirebaseAuthError as well, but I get an error message:</p>
<blockquote>
<p>Package subpath './lib/utils/error' is not defined by &quot;exports&quot; in
\node_modules\firebase-admin\package.json</p>
</blockquote>
<p>So what would be the correct way to check that the caught exception is thrown by FirebaseAuth?</p>
",
tags:"<javascript><typescript><firebase><firebase-authentication>",
score:11,
creationDate:2023-02-14 12:25:21,
creationDate:2023-02-14 13:42:22,
score:8,
acceptedResponderReputation:1884,
acceptedResponder:8886385,
QuestionerReputation:113,
Questioner:21211227}
{title:"Eslint with Nuxt3 auto-import",
id:"https://stackoverflow.com/questions/76803864",
body:"<p>Seems very basic but I can't find anywhere an eslint setup that works with Nuxt3 <a href=""https://nuxt.com/docs/guide/concepts/auto-imports"" rel=""noreferrer"">auto-import</a>, to avoid <a href=""https://eslint.org/docs/latest/rules/no-undef"" rel=""noreferrer""><code>no-undef</code></a> errors. I'm not using typescript.</p>
<p>I tried the following packages: <code>@antfu/eslint-config</code>, <code>plugin:nuxt/recommended</code>, <code>@nuxt/eslint-config</code>, <code>@nuxtjs/eslint-config</code>, <code>@nuxt/eslint-config-typescript</code>, with no luck so far.</p>
<p>The only thing that works for now is setting each reference in .eslintrc <code>globals</code>...</p>
",
tags:"<javascript><vue.js><nuxt.js><eslint><nuxt3.js>",
score:15,
creationDate:2023-07-31 12:57:31,
creationDate:2023-09-18 15:03:05,
score:8,
acceptedResponderReputation:2316,
acceptedResponder:8086,
QuestionerReputation:8629,
Questioner:3548338}
{title:"Is there a way to get form values with onChange using Shadcn Form & Zod?",
id:"https://stackoverflow.com/questions/77507221",
body:"<p>I have implemented a form to sign in using zod for client-side validation. I wanted to also add a password strength display for which i decided to try out react-password-strength-bar.</p>
<p>The functionality is simple, you just render the PasswordStrengthBar and pass-in the password value as a prop:</p>
<pre class=""lang-js prettyprint-override""><code>import PasswordStrengthBar from &quot;react-password-strength-bar&quot;;

&lt;PasswordStrengthBar password={pass} /&gt;
</code></pre>
<p>While trying so, I've noticed I cannot use onChange event listener for Input field, because apparently it is already used. Same goes with ref, where I would have used useEffect that would trigger every time the input value changes.</p>
<p>I found that I can get the value using form.getValues(&quot;password&quot;) it feels wrong to use form function as a dependency which I would then use as a value for PasswordStrengthBar. I have also tried placing form in useEffect, but it seems like it does not update with input change.</p>
<p>Does anyone have any ideas of how I could make this work?</p>
<p>Full code:</p>
<pre class=""lang-js prettyprint-override""><code>&quot;use client&quot;;

import { zodResolver } from &quot;@hookform/resolvers/zod&quot;;
import * as z from &quot;zod&quot;;
import { useForm } from &quot;react-hook-form&quot;;
import { useContext, useEffect, useState } from &quot;react&quot;;
import NotificationContext from &quot;@/lib/context/notification-context&quot;;
import defaultNotification from &quot;@/lib/locale/default-notification&quot;;
import PasswordStrengthBar from &quot;react-password-strength-bar&quot;;
import { authFormSchema } from &quot;@/lib/formSchema&quot;;
import { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from &quot;@/components/ui/form&quot;;
import { Input } from &quot;@/components/ui/input&quot;;
import SubmitButton from &quot;../ui/custom-ui/submit-btn&quot;;

export default function AuthForm() {
  const notifCtx = useContext(NotificationContext);
  const [pass, setPass] = useState&lt;string&gt;(&quot;&quot;);

  const form = useForm&lt;z.infer&lt;typeof authFormSchema&gt;&gt;({
    resolver: zodResolver(authFormSchema),
    defaultValues: { email: &quot;&quot;, password: &quot;&quot; }
  });
  const isLoading = form.formState.isSubmitting;

  async function onSubmit(values: z.infer&lt;typeof authFormSchema&gt;) {
    // ✅ This will be type-safe and validated.
    notifCtx.setNotification(defaultNotification.pending);

    const res = await fetch(&quot;/api/auth/signup&quot;, {
      method: &quot;POST&quot;,
      body: JSON.stringify({ ...values })
    });
    const { err, msg } = await res.json();

    notifCtx.setNotification(defaultNotification[err ? &quot;error&quot; : &quot;success&quot;](msg));
    !err &amp;&amp; form.reset();
    return;
  }
  useEffect(() =&gt; {
    setPass(form.getValues(&quot;password&quot;));
  }, [form]);

  return (
    &lt;Form {...form}&gt;
      &lt;form onSubmit={form.handleSubmit(onSubmit)} className=&quot;space-y-2&quot;&gt;
        &lt;FormField
          control={form.control}
          name=&quot;email&quot;
          render={({ field }) =&gt; (
            &lt;FormItem&gt;
              &lt;FormLabel&gt;Email&lt;/FormLabel&gt;
              &lt;FormControl&gt;
                &lt;Input placeholder=&quot;john@doe.com&quot; {...field} /&gt;
              &lt;/FormControl&gt;
              &lt;FormMessage /&gt;
            &lt;/FormItem&gt;
          )}
        /&gt;
        &lt;FormField
          control={form.control}
          name=&quot;password&quot;
          render={({ field }) =&gt; (
            &lt;FormItem&gt;
              &lt;FormLabel className=&quot;&quot;&gt;Password&lt;/FormLabel&gt;
              &lt;FormControl&gt;
                &lt;Input placeholder=&quot;password123&quot; type=&quot;password&quot; {...field} /&gt;
              &lt;/FormControl&gt;
              &lt;FormMessage /&gt;
            &lt;/FormItem&gt;
          )}
        /&gt;

        &lt;PasswordStrengthBar password={pass} /&gt;

        &lt;div className=&quot;&quot;&gt;
          &lt;SubmitButton
            className=&quot;w-full my-4 dark:bg-white dark:hover:bg-primary dark:text-black dark:hover:text-white&quot;
            isLoading={isLoading}
            text=&quot;Sign up&quot;
          /&gt;
        &lt;/div&gt;
      &lt;/form&gt;
    &lt;/Form&gt;
  );
}

</code></pre>
",
tags:"<javascript><reactjs><typescript><forms><zod>",
score:7,
creationDate:2023-11-18 14:06:21,
creationDate:2023-11-18 14:13:22,
score:8,
acceptedResponderReputation:175,
acceptedResponder:18382492,
QuestionerReputation:175,
Questioner:18382492}
{title:"why my react native become .tsx instead .js",
id:"https://stackoverflow.com/questions/75119640",
body:"<p>so after installing react native using <code>npx react-native init MyProject </code> the project is running and open in emulator but the app file is not app.js instead app.tsx,</p>
<p><a href=""https://i.sstatic.net/CG1s0.png"" rel=""noreferrer"">file strcuture</a></p>
<p>The question is i am new to react native and many tutorial i see is havgin App.js file, and the code in app.js is different between js and tsx at least that's what i see, or is it just the same if i follow tutorial like folder structure, syntax and everything.</p>
",
tags:"<javascript><typescript><react-native>",
score:6,
creationDate:2023-01-14 16:50:02,
creationDate:2023-01-14 17:20:34,
score:8,
acceptedResponderReputation:24651,
acceptedResponder:5089567,
QuestionerReputation:101,
Questioner:6651089}
{title:"React Native Expo Router - Hiding the Stack header on home screen",
id:"https://stackoverflow.com/questions/75823714",
body:"<p>I'm using <code>expo-router</code> in my React Native Expo app containing 2 screens, <code>app/home.js</code> and <code>app/details.js</code>. There is a <code>Link</code> on <code>home.js</code> that navigates to <code>details.js</code> screen.</p>
<p>Right now both screens have the header on the top of the screen. Is there a way to disable the header only for the <code>home.js</code> screen? After navigation from the home screen to the details screen, the header on the details screen should still show the back arrow for the user to navigate back up to the home screen.</p>
<p><strong><code>app/_layout.js</code></strong></p>
<pre class=""lang-js prettyprint-override""><code>import { Stack } from &quot;expo-router&quot;;
import { SafeAreaProvider } from &quot;react-native-safe-area-context&quot;;

export default function Layout() {

  return (
    &lt;SafeAreaProvider&gt;
      &lt;Stack
        initialRouteName=&quot;home&quot;
      /&gt;
    &lt;/SafeAreaProvider&gt;
  );
}
</code></pre>
",
tags:"<javascript><reactjs><react-native><expo><stack-navigator>",
score:15,
creationDate:2023-03-23 13:35:21,
creationDate:2023-03-30 16:11:01,
score:8,
acceptedResponderReputation:116,
acceptedResponder:14135757,
QuestionerReputation:6811,
Questioner:3023615}
{title:"How to use react hook form 7 with MUI switch",
id:"https://stackoverflow.com/questions/76774332",
body:"<p>When using react-hook-form with MUI switch, the switch doesn't display the initial value on page load, even though the value is set to true. It seems to be a display issue though, because submitting the form with buttons untouched yields <code>true</code> for the switches that have a <code>true</code> value defined. Also, clicking these buttons (showing false) once does nothing (they stay on the left), clicking them a second time will actually toggle them on again.</p>
<p>Setting initial values using hook (works for all other field types):</p>
<pre><code>useEffect(() =&gt; {
  if (userProfile) {
    setValue('firstname', userProfile.firstname);
    setValue('lastname', userProfile.lastname);
    setValue('show_profile', userProfile.show_profile || false);
  }
}, [userProfile]);
</code></pre>
<p>The switch is implemented like this:</p>
<pre><code>&lt;FormControlLabel
    control={&lt;Switch {...register('show_profile')} /&gt;}
    label=&quot;Profil öffentlich (beinhaltet Vor- und Nachname)&quot;
/&gt;
</code></pre>
<p>This in turn is a checkbox component that works perfectly fine:</p>
<pre><code>&lt;FormControlLabel
    control={
      &lt;Checkbox
        {...register('steuerbescheinigung')}
        name=&quot;steuerbescheinigung&quot;
      /&gt;
    }
    label=&quot;Steuerbescheinigung benötigt?&quot;
  /&gt;
</code></pre>
<p>How to use <code>react-hook-form</code> with MUI Switch and set initial values?</p>
",
tags:"<javascript><reactjs><material-ui><react-hook-form>",
score:6,
creationDate:2023-07-26 19:08:50,
creationDate:2023-07-26 21:08:24,
score:8,
acceptedResponderReputation:5065,
acceptedResponder:22140496,
QuestionerReputation:1650,
Questioner:1627106}
{title:"Are refs guaranteed to be set when useEffect runs?",
id:"https://stackoverflow.com/questions/75088157",
body:"<p>I want to set volume on an audio element, after it mounts.</p>
<p>If I have a ref on a DOM node, that isn't conditionally rendered, can I rely on that ref's value being defined once the first useEffect runs?</p>
<pre class=""lang-js prettyprint-override""><code>function Component() {
  const ref = React.useRef();

  React.useEffect(() =&gt; {
    // Can ref.current ever be undefined here?
    ref.current.volume = 0.4;
  }, []);

  return &lt;audio src=&quot;...&quot; ref={ref} /&gt;
}
</code></pre>
<p>I've seen a lot of people put if statements and optional chaining for refs inside useEffect. Is that necessary if there's no conditional rendering?</p>
",
tags:"<javascript><reactjs><react-hooks>",
score:8,
creationDate:2023-01-11 19:34:53,
creationDate:2023-01-11 20:11:39,
score:8,
acceptedResponderReputation:28654,
acceptedResponder:3963067,
QuestionerReputation:408,
Questioner:5459498}
{title:"Vue 3 Internal server error: v-model cannot be used on a prop, because local prop bindings are not writable",
id:"https://stackoverflow.com/questions/75123650",
body:"<p>I found this error and blocked my webapps.</p>
<pre><code>2:32:22 PM [vite] Internal server error: v-model cannot be used on a prop, because local prop bindings are not writable.
Use a v-bind binding combined with a v-on listener that emits update:x event instead.
  Plugin: vite:vue
  File: /Users/julapps/web/myapp/src/components/switch/AudienceTimerSlide.vue
</code></pre>
<p>I want to make timer data become data model (editable) and its default value from component props. Why this not work?  I'm very new in vuejs, how can i solve this problem? Kindly Please Help...</p>
<pre><code>&lt;template&gt;
----
&lt;div class=&quot;field-body&quot;&gt;
    &lt;div class=&quot;field&quot;&gt;
        &lt;div class=&quot;control&quot;&gt;
            &lt;input @keypress.enter=&quot;save&quot; v-model=&quot;timer&quot; type=&quot;number&quot; class=&quot;input is-normal&quot;&gt;
        &lt;/div&gt;
    &lt;/div&gt;
&lt;/div&gt;
-----
&lt;/template&gt;

&lt;script&gt;

export default {

    props:['id', 'timer'],
    setup(props, context){
    
        -----
        
        const save = async() =&gt; {
            // save form
        }
    
        return {
            
        }
    }
}
&lt;/script&gt;
</code></pre>
",
tags:"<javascript><vue.js><vuejs3>",
score:17,
creationDate:2023-01-15 07:46:50,
creationDate:2023-01-15 14:27:13,
score:8,
acceptedResponderReputation:5183,
acceptedResponder:2487565,
QuestionerReputation:1876,
Questioner:9831902}
{title:"ngrx error ""Module '""@ngrx/effects""' has no exported member 'Effect'"",
id:"https://stackoverflow.com/questions/75014243",
body:"<p>I trying to implement an effect in ngRx. I import ted &quot;Effect&quot; from &quot;@ngrx/effects&quot;, but It showing the error &quot;Module '&quot;@ngrx/effects&quot;' has no exported member 'Effect'.ts(2305)&quot;</p>
<pre><code> import { Actions, ofType, Effect } from &quot;@ngrx/effects&quot;;
 import { switchMap } from &quot;rxjs/operators&quot;;

 import * as AuthActions from './auth.actions';

 type loginResponse = { token: string, message: string, loggedIn: boolean, time: number };

 export class AuthEffects {
    @Effect
    login = this.actions$.pipe(
        ofType(AuthActions.LOGIN),
        switchMap((authData: AuthActions.Login) =&gt; {
            return this.http
                .post&lt;loginResponse&gt;(
                    'http://localhost:3000/user/signup',
                    { 
                       email: authData.payload.email, 
                       password: authData.payload.password 
                    }
                )
        })
    )
    constructor(private actions$: Actions, private http: HttpClient) { }
}
</code></pre>
<p>I'm trying to implement a login system using an effect in ngRx. I imported &quot;Effect&quot; from &quot;@ngrx/effects&quot;, but It showing the error &quot;Module '&quot;@ngrx/effects&quot;' has no exported member 'Effect'.ts(2305)&quot;</p>
",
tags:"<javascript><angular><ngrx><mean-stack>",
score:6,
creationDate:2023-01-05 05:36:38,
creationDate:2023-01-05 05:47:44,
score:8,
acceptedResponderReputation:92,
acceptedResponder:16617023,
QuestionerReputation:63,
Questioner:20933482}
{title:"Why doesn't the previous() function loop when the find term is the first word in a textarea?",
id:"https://stackoverflow.com/questions/79320731",
body:"<p>I have a basic text editor where the user can search for a term in the text and navigate to the next or previous occurrence. The issue I’m facing is that when the search term is at the very beginning of the <code>textarea</code> (e.g., the first word &quot;Love&quot;), pressing the &quot;Previous&quot; button doesn’t loop back to the last occurrence. However, this works fine if the search term is not at the start of the text (e.g., searching for the term &quot;never&quot;).</p>
<p>Here is the relevant code:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""false"" data-babel=""false"" data-babel-preset-react=""false"" data-babel-preset-ts=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>let currentMatchIndex = -1; // Tracks the current match index

function resetIndex() {
  currentMatchIndex = -1;
}

function highlightMatch(startIndex, endIndex) {
  const textarea = document.getElementById('myTextarea');
  textarea.setSelectionRange(startIndex, endIndex);
  textarea.focus();
}

function next() {
  const findTerm = document.getElementById('findInput').value;
  const textarea = document.getElementById('myTextarea');
  const text = textarea.value;

  if (findTerm) {
    const startIndex = text.indexOf(findTerm, currentMatchIndex + 1);
    if (startIndex !== -1) {
      currentMatchIndex = startIndex;
    } else {
      currentMatchIndex = text.indexOf(findTerm); // Loop back to first occurrence
    }

    if (currentMatchIndex !== -1) {
      highlightMatch(currentMatchIndex, currentMatchIndex + findTerm.length);
    } else {
      alert(""Find term not found."");
    }
  }
}

function previous() {
  const findTerm = document.getElementById('findInput').value;
  const textarea = document.getElementById('myTextarea');
  const text = textarea.value;

  if (findTerm) {
    const startIndex = text.lastIndexOf(findTerm, currentMatchIndex - 1);
    if (startIndex !== -1) {
      currentMatchIndex = startIndex;
    } else {
      currentMatchIndex = text.lastIndexOf(findTerm); // Loop to last occurrence
    }

    if (currentMatchIndex !== -1) {
      highlightMatch(currentMatchIndex, currentMatchIndex + findTerm.length);
    } else {
      alert(""Find term not found."");
    }
  }
}</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;input type=""text"" id=""findInput"" placeholder=""Find"" onchange=""resetIndex()""&gt;
&lt;button onclick=""next()""&gt;Next&lt;/button&gt;
&lt;button onclick=""previous()""&gt;Previous&lt;/button&gt;
&lt;textarea id=""myTextarea"" rows=""3"" cols=""16""&gt;Love never dies. Love never dies. Love never dies.&lt;/textarea&gt;</code></pre>
</div>
</div>
</p>
<h2>Issue</h2>
<p>When the search term is the first word in the <code>textarea</code> (e.g., &quot;Love&quot;), and I press the &quot;Previous&quot; button, it does not loop back to the last occurrence. However, if I search for a term like &quot;never,&quot; it works fine and loops as expected.</p>
<h2>Expected behavior</h2>
<ul>
<li>When the &quot;Next&quot; button is pressed, it finds the next occurrence.</li>
<li>When the &quot;Previous&quot; button is pressed, it loops to the last occurrence when it reaches the first match.</li>
</ul>
<p>Has anyone encountered this issue before or knows how to fix it? I'm looking for a robust solution that avoids handling edge cases and exceptions with multiple conditional statements.</p>
",
tags:"<javascript><html><string>",
score:9,
creationDate:2024-12-31 20:04:16,
creationDate:2024-12-31 20:39:51,
score:8,
acceptedResponderReputation:10237,
acceptedResponder:13583510,
QuestionerReputation:6770,
Questioner:478018}
{title:"Failed to change placeholder color of an input",
id:"https://stackoverflow.com/questions/75637972",
body:"<p>so I have an input and I was trying to change the color of the placeholder, in some websites I believe I see people are changing the placeholder color</p>
<p>I tried changing with elem.value but it doesn't make any sense value and placeholder are two different things
even .placeholder and then style is not working as you can see below.
can't find the way to do it
am I missing something?
here is my code:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code> const elem = document.getElementById(""myInput"");
 elem.placeholder.style.color = ""green"";</code></pre>
<pre class=""snippet-code-html lang-html prettyprint-override""><code>&lt;!DOCTYPE html&gt;
&lt;html lang=""en""&gt;
  &lt;head&gt;
    &lt;meta charset=""UTF-8"" /&gt;
    &lt;meta http-equiv=""X-UA-Compatible"" content=""IE=edge"" /&gt;
    &lt;meta name=""viewport"" content=""width=device-width, initial-scale=1.0"" /&gt;
    &lt;title&gt;Document&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;div id=""new""&gt;
      &lt;input type=""text"" id=""myInput"" placeholder=""type here"" /&gt;
    &lt;/div&gt;
  &lt;/body&gt;
&lt;/html&gt;</code></pre>
</div>
</div>
</p>
<p>‏</p>
",
tags:"<javascript><html><input><placeholder>",
score:7,
creationDate:2023-03-04 18:59:48,
creationDate:2023-03-04 19:02:36,
score:8,
acceptedResponderReputation:199,
acceptedResponder:19163892,
QuestionerReputation:73,
Questioner:19103209}
{title:"Why actions in SveltKit give ""Error: Cannot prerender pages with actions""?",
id:"https://stackoverflow.com/questions/75044874",
body:"<p>I have a SvelteKit application, just following the example from the docs <a href=""https://learn.svelte.dev/tutorial/named-form-actions"" rel=""noreferrer"">https://learn.svelte.dev/tutorial/named-form-actions</a>, the problem is that everything works until I try to write an action:</p>
<p>at:  <code>+page.server.js</code></p>
<pre><code>export const actions = {
    default: async () =&gt; {
        console.log('test')
    }
};
</code></pre>
<p>vite immediately fails with:
&quot;Cannot prerender pages with actions&quot;</p>
<pre><code>Error: Cannot prerender pages with actions
    at render_page (file:///mydir/node_modules/@sveltejs/kit/src/runtime/server/page/index.js:87:11)
    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)
    at async resolve (file:///mydir/node_modules/@sveltejs/kit/src/runtime/server/index.js:356:17)
    at async respond (file:///mydir/node_modules/@sveltejs/kit/src/runtime/server/index.js:229:20)
    at async file:///mydir/node_modules/@sveltejs/kit/src/exports/vite/dev/index.js:444:22
</code></pre>
<p>Probably I'm missing some configuration or forgot some basics, any idea?</p>
",
tags:"<javascript><vite><sveltekit>",
score:6,
creationDate:2023-01-08 01:06:48,
creationDate:2023-01-08 07:44:48,
score:8,
acceptedResponderReputation:184296,
acceptedResponder:546730,
QuestionerReputation:2102,
Questioner:10416012}
{title:"Error while trying to add external local fonts in nextJS",
id:"https://stackoverflow.com/questions/75439877",
body:"<p>I'm trying to add local font to my NextJS + TailwindCSS project.
I have added the font inside public/fonts folder and I'm following the docs:</p>
<p>This is my code</p>
<pre><code>import localFont from '@next/font/local'
const inter = Inter({
    subsets: ['latin'],
})

const recoleta = localFont({
    src: 'fonts/Recoleta-Regular.ttf',
    fontFamily: 'Recoleta',
})
</code></pre>
<p>And I'm getting this error from the terminal.</p>
<p>I need help on which folder to add it or how to configure it perfectly.</p>
<pre><code>Module not found: Can't resolve './fonts/Recoleta-Regular.ttf'


</code></pre>
",
tags:"<javascript><next.js><fonts>",
score:7,
creationDate:2023-02-13 18:27:22,
creationDate:2023-02-14 03:06:09,
score:8,
acceptedResponderReputation:96,
acceptedResponder:21207841,
QuestionerReputation:185,
Questioner:16006603}
{title:"Intellij - how to get rid of extension when auto-import",
id:"https://stackoverflow.com/questions/77203796",
body:"<p>When I type something like</p>
<pre><code>const func = myFuncti..;
</code></pre>
<p>It will suggest <code>myFunction()</code>, and I accept that.</p>
<p>Afterward the import will be like</p>
<pre><code>import {myFunction} from '../myFunction.ts`;
</code></pre>
<p>I want to get rid of the ts, so it becomes</p>
<pre><code>import {myFunction} from '../myFunction`;
</code></pre>
<p>How to do it?</p>
",
tags:"<javascript><typescript><intellij-idea>",
score:7,
creationDate:2023-09-29 17:26:06,
creationDate:2023-10-18 18:58:41,
score:8,
acceptedResponderReputation:6451,
acceptedResponder:10686620,
QuestionerReputation:6451,
Questioner:10686620}
{title:"Nextjs 13 Hydration failed because the initial UI does not match what was rendered on the server",
id:"https://stackoverflow.com/questions/75094010",
body:"<p>I am using next 13.1.0.
I have a ContextProvider that sets a light and dark theme</p>
<pre><code>'use client';
import { Theme, ThemeContext } from '@store/theme';
import { ReactNode, useState, useEffect } from 'react';

interface ContextProviderProps {
  children: ReactNode
}

const ContextProvider = ({ children }: ContextProviderProps) =&gt; {
  const [theme, setTheme] = useState&lt;Theme&gt;('dark');

  useEffect(() =&gt; {
    const storedTheme = localStorage.getItem('theme');
    if (storedTheme === 'light' || storedTheme === 'dark') {
      setTheme(storedTheme);
    } else {
      localStorage.setItem('theme', theme);
    }
    // added to body because of overscroll-behavior
    document.body.classList.add(theme);
    return () =&gt; {
      document.body.classList.remove(theme);
    };
  }, [theme]);

  const toggle = () =&gt; {
    const newTheme = theme === 'light' ? 'dark' : 'light';
    setTheme(newTheme);
    localStorage.setItem('theme', newTheme);
  };

  return (
    &lt;ThemeContext.Provider value={{ theme, toggle }}&gt;
      {children}
    &lt;/ThemeContext.Provider&gt;
  );
};

export { ContextProvider };
</code></pre>
<p>I use it in my root layout</p>
<pre><code>import '@styles/globals.scss';
import { GlobalContent } from '@components/GlobalContent/GlobalContent';
import { ContextProvider } from '@components/ContextProvider/ContextProvider';
import { Inter } from '@next/font/google';
import { ReactNode } from 'react';

const inter = Inter({ subsets: ['latin'] });

interface RootLayoutProps {
  children: ReactNode
}

const RootLayout = ({ children }: RootLayoutProps) =&gt; {
  return (
    &lt;html lang=&quot;en&quot; className={inter.className}&gt;
      &lt;head /&gt;
      &lt;body&gt;
        &lt;ContextProvider&gt;
          &lt;GlobalContent&gt;
            {children}
          &lt;/GlobalContent&gt;
        &lt;/ContextProvider&gt;
      &lt;/body&gt;
    &lt;/html&gt;
  );
};

export default RootLayout;
</code></pre>
<p>And I consume the theme value in my GlobalContent</p>
<pre><code>'use client';
import styles from '@components/GlobalContent/GlobalContent.module.scss';
import { GlobalHeader } from '@components/GlobalHeader/GlobalHeader';
import { GlobalFooter } from '@components/GlobalFooter/GlobalFooter';
import { ThemeContext } from '@store/theme';
import { ReactNode, useContext } from 'react';

interface GlobalContentProps {
  children: ReactNode
}

const GlobalContent = ({ children }: GlobalContentProps) =&gt; {
  const { theme } = useContext(ThemeContext);
  return (
    &lt;div className={`${theme === 'light' ? styles.lightTheme : styles.darkTheme}`}&gt;
      &lt;GlobalHeader /&gt;
      &lt;div className={styles.globalWrapper}&gt;
        &lt;main className={styles.childrenWrapper}&gt;
          {children}
        &lt;/main&gt;
        &lt;GlobalFooter /&gt;
      &lt;/div&gt;
    &lt;/div&gt;
  );
};

export { GlobalContent };
</code></pre>
<p>I get the error</p>
<pre><code>Hydration failed because the initial UI does not match what was rendered on the server.
</code></pre>
<p><a href=""https://i.sstatic.net/oJb9b.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/oJb9b.png"" alt=""enter image description here"" /></a></p>
<p><a href=""https://reactjs.org/docs/error-decoder.html/?invariant=418"" rel=""noreferrer"">React docs error link</a></p>
<p>I don't understand why I am getting this error because I am accessing <code>localStorage</code> inside my <code>useEffect</code>, so I expect the HTML generated on the server to be the same with the client before the first render.</p>
<p>How can I solve this error?</p>
",
tags:"<javascript><reactjs><next.js><local-storage>",
score:22,
creationDate:2023-01-12 09:21:39,
creationDate:2023-01-13 04:41:39,
score:9,
acceptedResponderReputation:2947,
acceptedResponder:12146388,
QuestionerReputation:2947,
Questioner:12146388}
{title:"Can't import custom JavaScript files with importmaps in Rails 7",
id:"https://stackoverflow.com/questions/75178377",
body:"<p>I am trying to learn about Rails 7 and import maps, and I am following this tutorial by DHH:
<a href=""https://www.youtube.com/watch?v=PtxZvFnL2i0"" rel=""noreferrer"">https://www.youtube.com/watch?v=PtxZvFnL2i0</a></p>
<p>The video is about a year old, and based on an alpha version of Rails 7, but it works up to a point. Now I'm at that point and struggling to figure out what's changed or what needs to change.</p>
<p>I followed along til ~17:18 where he adds Vue.js to the demo. This is the first time he adds a JS file that's custom to the application, instead of importing a library. In the tutorial, he adds the following line to application.js:</p>
<pre><code>import &quot;comps/vue_components&quot;
</code></pre>
<p>That line fails in my implementation with the following JS error:</p>
<blockquote>
<p>Uncaught TypeError: Failed to resolve module specifier &quot;comps/vue_components&quot;. Relative references must start with either &quot;/&quot;, &quot;./&quot;, or &quot;../&quot;.</p>
</blockquote>
<p>I tried updating the line to the following to resolve the error:</p>
<pre><code>import &quot;./comps/vue_components&quot;
</code></pre>
<p>but that just fails silently. It looks like it's killing the execution of javascript altogether - if I put a console.log statement into application.js, it only shows in the console if I omit or comment out the line to import the vue component.</p>
<p>Here is my config/importmap.rb file:</p>
<pre><code># Pin npm packages by running ./bin/importmap

pin &quot;application&quot;, preload: true
pin &quot;@hotwired/turbo-rails&quot;, to: &quot;turbo.min.js&quot;, preload: true
pin &quot;@hotwired/stimulus&quot;, to: &quot;stimulus.min.js&quot;, preload: true
pin &quot;@hotwired/stimulus-loading&quot;, to: &quot;stimulus-loading.js&quot;, preload: true
pin_all_from &quot;app/javascript/controllers&quot;, under: &quot;controllers&quot;

pin &quot;trix&quot;
pin &quot;@rails/actiontext&quot;, to: &quot;actiontext.js&quot;

pin &quot;md5&quot;, to: &quot;https://cdn.skypack.dev/md5&quot;

pin &quot;vue&quot;, to: &quot;https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.esm.browser.js&quot;

pin_all_from &quot;app/javascript/components&quot;, under: &quot;comps&quot;

</code></pre>
<p>this is my application.js file:</p>
<pre><code>// Configure your import map in config/importmap.rb. Read more: https://github.com/rails/importmap-rails
import &quot;@hotwired/turbo-rails&quot;
import &quot;controllers&quot;
import &quot;trix&quot;
import &quot;@rails/actiontext&quot;
import &quot;./comps/vue_components&quot;
console.log('hello')
</code></pre>
<p>The git project is located here: <a href=""https://github.com/fredwillmore/showntell"" rel=""noreferrer"">https://github.com/fredwillmore/showntell</a></p>
",
tags:"<javascript><ruby-on-rails><import-maps>",
score:6,
creationDate:2023-01-19 21:17:00,
creationDate:2023-01-20 07:31:06,
score:9,
acceptedResponderReputation:29719,
acceptedResponder:207090,
QuestionerReputation:4604,
Questioner:2865270}
{title:"Why Node.js does not wait for promise to resolve before exiting?",
id:"https://stackoverflow.com/questions/75857553",
body:"<p>When I execute the following code, I thought Node.js will wait till we call the <code>resolve</code>. Till then the <code>myPromise</code> will be in the <code>&lt;pending&gt;</code> state. Then how come node exits before it resolves?</p>
<p>The following code exits immediately!</p>
<pre class=""lang-js prettyprint-override""><code>const myPromise = new Promise(resolve =&gt; {
  // nothing doing with the resolve
});

myPromise
  .then(() =&gt; console.log('result'))
  .catch(error =&gt; console.log('error', error));
</code></pre>
<hr />
<p><strong>Update 1:</strong> I renamed JavaScript to Node.js to avoid confusion.</p>
",
tags:"<javascript><node.js><promise>",
score:6,
creationDate:2023-03-27 15:23:59,
creationDate:2023-03-27 15:33:35,
score:9,
acceptedResponderReputation:1073968,
acceptedResponder:157247,
QuestionerReputation:4008,
Questioner:3370568}
{title:"Cannot read properties of undefined (reading 'getTokens') Occurred while linting /app/layout.tsx:16 Rule: ""@typescript-eslint/no-empty-function"",
id:"https://stackoverflow.com/questions/76457373",
body:"<p>I don't understand why the function that returns JSX is being linted with the rule <code>&quot;@typescript-eslint/no-empty-function&quot;</code> when running the &quot;next lint&quot; script.</p>
<p>The code at line 16 of the <code>layout.tsx</code> file is as follows:</p>
<pre><code>export default function RootLayout({
  children
}: {
  children: React.ReactNode;
}) {
  return (
    &lt;html lang=&quot;en&quot;&gt;
      &lt;body className={inter.variable}&gt;{children}&lt;/body&gt;
    &lt;/html&gt;
  );
}
</code></pre>
<p>As you can see, the function is not empty, and it does not violate the <code>&quot;@typescript-eslint/no-empty-function&quot;</code> rule. However, the following error message occurs:</p>
<pre><code>Cannot read properties of undefined (reading 'getTokens')
Occurred while linting /Users/najaewan/Desktop/f-lab/clothesgpt/packages/clothes_gpt/app/layout.tsx:16
Rule: &quot;@typescript-eslint/no-empty-function&quot;
error Command failed with exit code 1.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command.
</code></pre>
<p>I also considered the possibility of a misconfigured <code>eslintrc.js</code> file, but I couldn't figure out the cause.</p>
<pre><code>const path = require('path');
module.exports = {
  root: true,
  parserOptions: {
    project: ['./packages/*/tsconfig.json', 'typescript-eslint/parser'],
    ecmaVersion: 2018,
    sourceType: 'module'
  },
  extends: [
    'next/core-web-vitals',
    'plugin:@next/next/recommended',
    'eslint:recommended',
    'plugin:react/recommended',
    'plugin:@typescript-eslint/recommended',
    'plugin:prettier/recommended',
    'prettier',
    'plugin:@typescript-eslint/recommended-requiring-type-checking'
  ],
  plugins: ['@typescript-eslint', 'react', 'react-hooks', 'prettier', 'jest'],
  parser: '@typescript-eslint/parser',
  rules: {
    '@typescript-eslint/no-floating-promises': 'error',
    '@typescript-eslint/no-unused-vars': ['warn', { args: 'none' }],
    '@typescript-eslint/no-empty-function': 0,
    '@typescript-eslint/explicit-function-return-type': 0,
    '@typescript-eslint/no-var-requires': 0,
    '@typescript-eslint/interface-name-prefix': 0,
    '@typescript-eslint/no-empty-interface': 'error',
    '@typescript-eslint/no-use-before-define': 0,
    '@typescript-eslint/no-non-null-assertion': 'error',
    '@typescript-eslint/explicit-module-boundary-types': 0,
    '@typescript-eslint/no-explicit-any': 0,
    'import/no-unresolved': 'error',
    'react/display-name': 0,
    'react/self-closing-comp': 'error',
    'react/react-in-jsx-scope': 'off',
    'react/jsx-filename-extension': [
      'error',
      { extensions: ['.js', '.jsx', '.ts', '.tsx'] }
    ],
    'react/no-unescaped-entities': 0,
    'react/prop-types': 0,
    'no-undef': 0,
    'no-constant-condition': 1,
    'prettier/prettier': [
      'error',
      {
        bracketSpacing: true,
        printWidth: 80,
        singleQuote: true,
        trailingComma: 'none',
        tabWidth: 2,
        useTabs: false,
        bracketSameLine: false,
        semi: true
      }
    ]
  },
  overrides: [
    {
      files: ['**/*.ts?(x)'],
      parser: '@typescript-eslint/parser',
      extends: [
        'plugin:@typescript-eslint/recommended',
        'plugin:@typescript-eslint/recommended-requiring-type-checking'
      ],
      parserOptions: {
        project: ['tsconfig.json', './packages/**/tsconfig.json'],
        ecmaFeatures: {
          jsx: true
        },
        ecmaVersion: 2018,
        sourceType: 'module'
      }
    },
    {
      files: [
        'packages/clothes_gpt/**/*.ts?(x)',
        'packages/clothes_gpt/**/*.js?(x)'
      ],
      rules: {
        '@next/next/no-img-element': 'off'
      },
      settings: {
        'import/parsers': {
          '@typescript-eslint/parser': ['.ts', '.tsx']
        },
        'import/resolver': {
          typescript: {
            project: path.resolve(
              `${__dirname}/packages/clothes_gpt/tsconfig.json`
            )
          }
        }
      }
    }
  ],
  settings: {
    react: {
      pragma: 'React',
      version: 'detect'
    }
  },
  env: {
    browser: true,
    es6: true,
    jest: true
  }
};

</code></pre>
<p>I don't understand why &quot;next lint&quot; is linting the function that returns JSX with the <code>&quot;@typescript-eslint/no-empty-function&quot;</code> rule. You can reproduce this error in the repository available <a href=""https://github.com/f-lab-edu/ClothesGPT/tree/chore/eslint"" rel=""noreferrer"">here</a></p>
<p>When running &quot;next lint&quot; in the root/packages/clothes_gpt directory, you should see the error.</p>
<p><strong>Expected Behavior</strong>: When running the &quot;next lint&quot; script, functions that return JSX should not trigger the &quot;@typescript-eslint/no-empty-function&quot; rule.</p>
<p><strong>Current Behavior</strong>: Functions that return JSX are triggering the &quot;@typescript-eslint/no-empty-function&quot; rule.</p>
",
tags:"<javascript><reactjs><next.js><eslint><typescript-eslint>",
score:23,
creationDate:2023-06-12 13:54:57,
creationDate:2023-06-20 06:42:53,
score:9,
acceptedResponderReputation:333,
acceptedResponder:22061178,
QuestionerReputation:333,
Questioner:22061178}
{title:"No qualifying bean of type 'org.springframework.security.oauth2.client.registration.ClientRegistrationRepository' available",
id:"https://stackoverflow.com/questions/75993646",
body:"<p>When I try to build my project, I get this error message:</p>
<pre><code>: Unsatisfied dependency expressed through method 'webClient' parameter 0; 
nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: 
No qualifying bean of type 
'org.springframework.security.oauth2.client.registration.ReactiveClientRegistrationRepository' 
available: expected at least 1 bean which qualifies as autowire candidate.
</code></pre>
<p>this is my application.properties:</p>
<pre><code>spring.security.oauth2.client.registration.eipo.authorization-grant-type=client_credentials
spring.security.oauth2.client.registration.eipo.token-uri=https://devapi.somedomain.co.xx/v1/auth/token
spring.security.oauth2.client.registration.eipo.client-id=randomClientId
spring.security.oauth2.client.registration.eipo.client-secret=T#%*sty%xp4^sdxb(e*
spring.main.web-application-type= reactive

</code></pre>
<p>this is my configclass:</p>
<pre><code>@Configuration
public class WebClientConfig {
  @Bean
  WebClient webClient(ReactiveClientRegistrationRepository clientRegistrations) {
      ServerOAuth2AuthorizedClientExchangeFilterFunction oauth =
        new ServerOAuth2AuthorizedClientExchangeFilterFunction(
          clientRegistrations,
          new UnAuthenticatedServerOAuth2AuthorizedClientRepository());
      oauth.setDefaultClientRegistrationId(&quot;eipo&quot;); 
      return WebClient.builder()
        .filter(oauth)
        .build();
  }
}

</code></pre>
<p>this is the service class:</p>
<pre><code>
@Slf4j
@Service
public class SettlementService
  @Autowired
  private WebClient webClient;

  public void getAuthThenGetResource(){
    ... //trying to get token
    log.info(&quot;got token&quot;);
    ... //get something from external resource
    log.info(&quot;got response&quot;);
  }
}
</code></pre>
<p>here is the pom.xml</p>
<pre><code>    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;2.7.10&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    &lt;properties&gt;
        &lt;java.version&gt;1.8&lt;/java.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.data&lt;/groupId&gt;
            &lt;artifactId&gt;spring-data-rest-hal-explorer&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;!--feign client to call other API as datasource--&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;
            &lt;artifactId&gt;feign-okhttp&lt;/artifactId&gt;
            &lt;version&gt;10.11&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;
            &lt;artifactId&gt;feign-gson&lt;/artifactId&gt;
            &lt;version&gt;10.11&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;io.github.openfeign&lt;/groupId&gt;
            &lt;artifactId&gt;feign-slf4j&lt;/artifactId&gt;
            &lt;version&gt;10.11&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.playtika.reactivefeign&lt;/groupId&gt;
            &lt;artifactId&gt;feign-reactor-jetty&lt;/artifactId&gt;
            &lt;version&gt;3.1.1&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;!--end of feign client dependencies--&gt;
                
        &lt;dependency&gt;
          &lt;groupId&gt;io.swagger&lt;/groupId&gt;
          &lt;artifactId&gt;swagger-annotations&lt;/artifactId&gt;
          &lt;version&gt;1.5.20&lt;/version&gt;
          &lt;type&gt;jar&lt;/type&gt;
        &lt;/dependency&gt;
     
        &lt;!--WebClient --&gt;
        &lt;dependency&gt; 
          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
          &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;
        &lt;/dependency&gt;
        
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;
            &lt;artifactId&gt;spring-security-oauth2-client&lt;/artifactId&gt;
            &lt;version&gt;5.3.13.RELEASE&lt;/version&gt;
            &lt;type&gt;jar&lt;/type&gt;
        &lt;/dependency&gt;
        
    &lt;/dependencies&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;excludes&gt;
                        &lt;exclude&gt;
                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
                        &lt;/exclude&gt;
                    &lt;/excludes&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
</code></pre>
<p>I've included the parent &amp; dependency part of it. This pom.xml could be the cause, but I'm not sure.
What's wrong with the webclient bean? I've tried many solution i found from stackoverflow, none have worked. Thank's for the help.</p>
",
tags:"<java><spring><oauth-2.0><spring-webclient>",
score:12,
creationDate:2023-04-12 09:00:32,
creationDate:2023-04-13 13:19:03,
score:9,
acceptedResponderReputation:5365,
acceptedResponder:8041003,
QuestionerReputation:137,
Questioner:8712549}
{title:"How to compile Svelte 3 components into IIFE's that can be used in vanilla js",
id:"https://stackoverflow.com/questions/75832641",
body:"<p>I am making a web component in Vanilla JS that use a hidden <code>select</code> in the background and a <code>div</code> and <code>ul&gt;li</code> in front. It became a bit complex with fetching data from an api, ect, so I transitioned to Svelte to simplify it and make it more readable.</p>
<p>Now I've tried for 2 days to export the component as an IIFE. I just can't seem to figure out how. I might be mistaken, but I thought that was one of the main features of Svelte - to make reusable components that can be used anywhere. Making it was the easy part, but now I want to load it and use it directly in the browser (with <code>&lt;script src=&quot;&quot;&gt;&lt;/script&gt;</code>). I thought that should be easy?</p>
<p>I use Svelte 3 (3.57.0) with Vite 4 (4.2.1), and I have tried both <code>npm create svelte</code> to create a library project with SvelteKit and <code>npm init vite</code> with <code>svelte</code> as framework.</p>
<p>I've read quite a lot of the documentation for Vite and Svelte, but it feels overwhelming and I can't seem to find a configuration that works.</p>
<p><em>Does anyone know how to compile components to IIFEs in Svelte?</em></p>
",
tags:"<javascript><svelte><web-component><svelte-3><iife>",
score:9,
creationDate:2023-03-24 10:42:01,
creationDate:2023-03-31 06:54:02,
score:9,
acceptedResponderReputation:184296,
acceptedResponder:546730,
QuestionerReputation:2597,
Questioner:3032543}
{title:"Scroll-to-Top Behavior is not working in Next.js when opening a new page via Link component",
id:"https://stackoverflow.com/questions/76420252",
body:"<p>In Next.js, I'm facing an issue where when I click on a link to open a new page, the new page opens at the same scroll position as the previous page. For example, if I'm on a product listing page and I have scrolled down to view the last product, when I click on that product, the product details page opens with the scroll position still at the bottom.</p>
<p>I would like the page to scroll to the top when opening the product details page. How can I achieve this scroll-to-top behavior in Next.js?</p>
<p>here is the possible solutions that I try</p>
<p><strong>Try 1</strong></p>
<pre class=""lang-js prettyprint-override""><code>import { useEffect } from 'react';
import { useRouter } from 'next/router';
const ProductDetails = () =&gt; {
    const router = useRouter();
    useEffect(() =&gt; {
        const handleRouteChange = () =&gt; {
            window.scrollTo(0, 0);
        };

        router.events.on('routeChangeComplete', handleRouteChange);

        return () =&gt; {
            router.events.off('routeChangeComplete', handleRouteChange);
        };
    }, [router]);

    return &lt;&gt;
        // product details code goes here
    &lt;&gt;;
};
export default ProductDetails;
</code></pre>
<p><strong>Try 2</strong></p>
<pre class=""lang-js prettyprint-override""><code>import { useEffect } from 'react';
import { useRouter } from 'next/router';
const ProductDetails = () =&gt; {
    const router = useRouter();
    
    useEffect(() =&gt; {
        window.scrollTo(0, 0);
    }, [router.pathname]);
  
    return &lt;&gt;
        // product details code goes here
    &lt;&gt;;
};
export default ProductDetails;
</code></pre>
<p><strong>Try 3</strong></p>
<pre class=""lang-js prettyprint-override""><code>import { useEffect } from 'react';
import { useRouter } from 'next/router';
const ProductDetails = () =&gt; {
    const router = useRouter();
    
    useEffect(() =&gt; {
        window.scrollTo(0, 0);
    }, []);
  
    return &lt;&gt;
        // product details code goes here
    &lt;&gt;;
};
export default ProductDetails;
</code></pre>
<p><strong>Try 4</strong></p>
<pre class=""lang-js prettyprint-override""><code>useEffect(() =&gt; {
   // the top id defined on the container of layout which is navbar
   const topElement = document.getElementById(&quot;#top&quot;);
   topElement?.scrollIntoView({ behavior: &quot;smooth&quot; });
}, [router.pathname]);
</code></pre>
<p>The above solution worked for other route but when it comes to dynamic route <code>e.g. /products/product/[slug]</code> it doesn't worked even i add the slug in useEffect dependency array</p>
<p>Note: also try the code directly into that component where i want the screen to move on top but still didn't achieved what i want.</p>
<p>Edited: supported code example added</p>
",
tags:"<javascript><next.js><next.js13><nextjs-dynamic-routing>",
score:8,
creationDate:2023-06-07 05:57:47,
creationDate:2023-06-11 05:45:06,
score:9,
acceptedResponderReputation:437,
acceptedResponder:15162230,
QuestionerReputation:437,
Questioner:15162230}
{title:"What's the correct way to dispatch/forward events across nested in components in Svelte?",
id:"https://stackoverflow.com/questions/75259772",
body:"<p>I'm curious, what's the best way to forward or dispatch events across multiple levels in component tree in Svelte JS?</p>
<p>Say I have App.Svelte, some intermediate number levels, each containing a child component, and Modal.Svelte. If I want to forward or dispatch an event from Modal to App, what's the right way to do this?</p>
<p>As I understand it, event forwarding in Svelte will traverse up the component tree and forward the event to the first parent that references the forwarded event. (Is this the correct interpretation?)</p>
<p>And using event dispatch approach, each nested component would need to 1/ import createEventDispatcher, 2/ create a dispatcher variable, 3/ define a function, which dispatches the event. Then parent's would need to import the function and reference it inside a tag, such as <code>&lt;p&gt;</code>. (Is this correct?)</p>
<p>If I'm correct on both of the above, I'm wondering if there isn't a more streamlined approach, eg connecting the event to stores, which would effectively flatten the component tree such that any component could receive the forwarded event. Though I imagine that this could induce some hard to debug behavior if multiple components reference the same forwarded event.</p>
",
tags:"<javascript><events><svelte>",
score:7,
creationDate:2023-01-27 14:54:09,
creationDate:2023-01-27 14:58:49,
score:9,
acceptedResponderReputation:184296,
acceptedResponder:546730,
QuestionerReputation:1254,
Questioner:13142245}
{title:"Spring Boot application gets stuck when virtual threads are used on Java 21",
id:"https://stackoverflow.com/questions/78790376",
body:"<p>I've run into an issue related to performance of Spring Boot 3 application with virtual threads enabled.</p>
<p><strong>TL;DR reproduction steps:</strong></p>
<ol>
<li>Checkout <a href=""https://github.com/stsypanov/concurrency-demo"" rel=""nofollow noreferrer"">https://github.com/stsypanov/concurrency-demo</a></li>
<li>Run <code>DependencyApplication</code> and <code>ConcurrencyDemoApplication</code></li>
<li>When both apps are up run <code>StuckApplicationTest</code></li>
<li>It will take about 1-2 minutes for the test to complete</li>
<li>Now go to <code>demo-service/application.yml</code> and set <code>spring.threads.virtual.enabled: true</code> (by default it's <code>false</code>).</li>
<li>Restart <code>ConcurrencyDemoApplication</code></li>
<li>Run <code>StuckApplicationTest</code> again</li>
<li>Run <code>YourKit</code> profiler and connect to <code>ConcurrencyDemoApplication</code>, almost immediately you'll see a warning message about potential deadlock and the application itself hangs as all threads of its <code>ForkJoinPool</code> have <code>Waiting</code> status.</li>
</ol>
<p><strong>More detailed description:</strong></p>
<p>General set-up:</p>
<ul>
<li>Windows 11</li>
<li>13th Gen Intel(R) Core(TM) i7-1370P</li>
<li>Liberica JDK 21.0.4</li>
<li>Spring Boot 3.3.2</li>
<li><code>org.springframework.cloud:spring-cloud-dependencies:2023.0.3</code></li>
<li><code>io.github.openfeign:feign-httpclient</code></li>
</ul>
<p>To reproduce the issue you need a test doing not that many concurrent calls to a Spring Boot -based microservice, e.g. calling <code>/actuator/health</code>:</p>
<pre class=""lang-java prettyprint-override""><code>@Test
void run() {
    var restTemplate = new RestTemplate();
    var latch = new CountDownLatch(1);
    var executor = Executors.newVirtualThreadPerTaskExecutor();
    try (executor) {
        for (int i = 0; i &lt; 100; i++) {
            executor.submit(() -&gt; {
                waitOn(latch);
                assertNotNull(restTemplate.getForEntity(&quot;http://localhost:8081/actuator/health&quot;, ResponseEntity.class));
            });
        }
        latch.countDown();
    }
    assertTrue(executor.isTerminated());
}

private static void waitOn(CountDownLatch latch) {
    try {
        latch.await();
    } catch (InterruptedException e) {
        throw new RuntimeException(e);
    }
}
</code></pre>
<p>This test sends GET requests to, let's say, <code>Service A</code>. In <code>Service A</code> I have a pretty simple instance of <code>HealthIndicator</code> and <strong>Feign client</strong>:</p>
<pre class=""lang-java prettyprint-override""><code>@Component
@RequiredArgsConstructor
public class DownstreamServiceHealthIndicator implements HealthIndicator {
    private final HealthClient healthClient;

    @Override
    public Health health() {
        var response = healthClient.checkHealth();
        if (response.getStatusCode().is2xxSuccessful()) {
            return new Health.Builder().up().build();
        }
        return new Health.Builder().down().withDetails(Map.of(&quot;response&quot;, response)).build();
    }
}

@FeignClient(name = &quot;healthClient&quot;, url = &quot;http://localhost:8087/actuator/health&quot;, configuration = InternalFeignConfiguration.class)
public interface HealthClient {
    @GetMapping
    ResponseEntity&lt;String&gt; checkHealth();
}

public class InternalFeignConfiguration {
    @Bean
    public Client client() {
        return new ApacheHttpClient(HttpClients.createDefault());
    }
}
</code></pre>
<p>Again, the test concurrently calls <code>/actuator/health</code> of <code>Service A</code> via <code>RestTemplate</code> and <code>Service A</code> calls <code>/actuator/health</code> of <code>Service B</code> via Feign client. <code>Service B</code> consists of the application main class and <code>application.yml</code> (see the code in the repository specified above), declaring health endpoint.</p>
<p>When you run the system with default settings it's OK. It takes ~1,5 second for the test to complete, but everything else is fine.</p>
<p>However, having virtual threads on, the <code>Service A</code> gets stuck and if you connect to it with e.g. YourKit profiler you'll get a warning message about potential deadlock with this stack trace:</p>
<pre><code>+-----------------------------------------------------------------------------------------------------------------------------+
|                                                            Name                                                             |
+-----------------------------------------------------------------------------------------------------------------------------+
|  +---Read-Updater Frozen for at least 10s &lt;Ignore a false positive&gt;                                                         |
|  | +---jdk.internal.misc.Unsafe.park(boolean, long) Unsafe.java (native)                                                    |
|  | +---java.util.concurrent.locks.LockSupport.park() LockSupport.java:371                                                   |
|  | +---java.util.concurrent.LinkedTransferQueue$DualNode.await(Object, long, Object, boolean) LinkedTransferQueue.java:458  |
|  | +---java.util.concurrent.LinkedTransferQueue.xfer(Object, long) LinkedTransferQueue.java:613                             |
|  | +---java.util.concurrent.LinkedTransferQueue.take() LinkedTransferQueue.java:1257                                        |
|  | +---sun.nio.ch.Poller.updateLoop() Poller.java:286                                                                       |
|  | +---sun.nio.ch.Poller$$Lambda.0x0000024081474670.run()                                                                   |
|  | +---java.lang.Thread.runWith(Object, Runnable) Thread.java:1596                                                          |
|  | +---java.lang.Thread.run() Thread.java:1583                                                                              |
|  | +---jdk.internal.misc.InnocuousThread.run() InnocuousThread.java:186                                                     |
|  |                                                                                                                          |
|  +---spring.cloud.inetutils Frozen for at least 10s &lt;Ignore a false positive&gt;                                               |
|  | +---java.net.Inet6AddressImpl.getHostByAddr(byte[]) Inet6AddressImpl.java (native)                                       |
|  | +---java.net.InetAddress$PlatformResolver.lookupByAddress(byte[]) InetAddress.java:1225                                  |
|  | +---java.net.InetAddress.getHostFromNameService(InetAddress, boolean) InetAddress.java:840                               |
|  | +---java.net.InetAddress.getHostName(boolean) InetAddress.java:782                                                       |
|  | +---java.net.InetAddress.getHostName() InetAddress.java:754                                                              |
|  | +---org.springframework.cloud.commons.util.InetUtils$$Lambda.0x0000024081187240.call()                                   |
|  | +---java.util.concurrent.FutureTask.run() FutureTask.java:317                                                            |
|  | +---java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor$Worker) ThreadPoolExecutor.java:1144            |
|  | +---java.util.concurrent.ThreadPoolExecutor$Worker.run() ThreadPoolExecutor.java:642                                     |
|  | +---java.lang.Thread.runWith(Object, Runnable) Thread.java:1596                                                          |
|  | +---java.lang.Thread.run() Thread.java:1583                                                                              |
|  |                                                                                                                          |
|  +---Write-Updater Frozen for at least 10s &lt;Ignore a false positive&gt;                                                        |
|    +---jdk.internal.misc.Unsafe.park(boolean, long) Unsafe.java (native)                                                    |
|    +---java.util.concurrent.locks.LockSupport.park() LockSupport.java:371                                                   |
|    +---java.util.concurrent.LinkedTransferQueue$DualNode.await(Object, long, Object, boolean) LinkedTransferQueue.java:458  |
|    +---java.util.concurrent.LinkedTransferQueue.xfer(Object, long) LinkedTransferQueue.java:613                             |
|    +---java.util.concurrent.LinkedTransferQueue.take() LinkedTransferQueue.java:1257                                        |
|    +---sun.nio.ch.Poller.updateLoop() Poller.java:286                                                                       |
|    +---sun.nio.ch.Poller$$Lambda.0x0000024081474670.run()                                                                   |
|    +---java.lang.Thread.runWith(Object, Runnable) Thread.java:1596                                                          |
|    +---java.lang.Thread.run() Thread.java:1583                                                                              |
|    +---jdk.internal.misc.InnocuousThread.run() InnocuousThread.java:186                                                     |
+-----------------------------------------------------------------------------------------------------------------------------+
</code></pre>
<p>As it appears from the above, the application's bottleneck is in this method:</p>
<pre class=""lang-java prettyprint-override""><code>// class org.springframework.cloud.commons.util.InetUtils

public HostInfo convertAddress(final InetAddress address) {
    HostInfo hostInfo = new HostInfo();
    Future&lt;String&gt; result = this.executorService.submit(address::getHostName); // &lt;---

    String hostname;
    try {
        hostname = result.get(this.properties.getTimeoutSeconds(), TimeUnit.SECONDS); // &lt;---
    }
    catch (Exception e) {
        this.log.info(&quot;Cannot determine local hostname&quot;);
        hostname = &quot;localhost&quot;;
    }
    hostInfo.setHostname(hostname);
    hostInfo.setIpAddress(address.getHostAddress());
    return hostInfo;
}
</code></pre>
<p>and the root cause is likely to be <code>SingleThreadExecutor</code> used to detect host name when doing a remote call:</p>
<pre class=""lang-java prettyprint-override""><code>public InetUtils(final InetUtilsProperties properties) {
    this.properties = properties;
    this.executorService = Executors.newSingleThreadExecutor(r -&gt; {
        Thread thread = new Thread(r);
        thread.setName(InetUtilsProperties.PREFIX);
        thread.setDaemon(true);
        return thread;
    });
}
</code></pre>
<p>In practice that means only one task can be executed at a moment, i.e. when parallel threads are doing simultaneous calls they resolve the host name sequentially!</p>
<p>What puzzles me is the fact that <strong>if I turn the virtual threads off there'll be no hung in the application</strong>.</p>
<p>Can anyone explain whether my theory about the root cause of the issue is correct and why the application counter-intuitively survives on platform (heavyweight) threads and dies on virtual (i.e. lightweight) ones?</p>
",
tags:"<java><spring-boot><multithreading><java-21><virtual-threads>",
score:7,
creationDate:2024-07-24 20:07:58,
creationDate:2024-07-29 06:00:31,
score:9,
acceptedResponderReputation:4360,
acceptedResponder:12473843,
QuestionerReputation:4360,
Questioner:12473843}
{title:"Generally multithreading a for loop in Java",
id:"https://stackoverflow.com/questions/75031864",
body:"<p>Suppose I am given integers <code>a</code> and <code>b</code> such that a range of interest is formed, of integers in <code>[a,b]</code>. The range can span well over <code>10^9</code> integers. I want to sum the values of a given function <code>f : N -&gt; N</code> over all integers <code>a &lt;= n &lt;= b</code>. The range is very large so I want to do this using multithreading.</p>
<p>Less formaly, I want to parallelize the following code:</p>
<pre><code>long sum = 0;
    
for (long n = a ; n &lt;= b ; n++)
    sum += f(n);
    
System.out.println(sum);
</code></pre>
<p>Ideally (at least in my mind), the range will divided equally across the available number of threads available by the processor (suppose <code>f(n)</code> has near-identical complexity and running time for each <code>n</code> in range). The values are completely independent, and <code>f</code> could really be any function. For example, it could output the sum of digits of the number, but it really could be anything, it's just an example.</p>
<p>Is there a general way to do exactly that in Java using multithreading?</p>
",
tags:"<java><multithreading><algorithm><performance><loops>",
score:6,
creationDate:2023-01-06 13:55:59,
creationDate:2023-01-06 14:03:40,
score:9,
acceptedResponderReputation:27961,
acceptedResponder:4137489,
QuestionerReputation:259,
Questioner:4492659}
{title:"TraceId and SpanId not available after migrating to Spring Boot 3",
id:"https://stackoverflow.com/questions/75170489",
body:"<p>After migrating spring boot from version 2.x to 3 we miss traceId and spanId in our logs.</p>
<p>We removed all <strong>sleuth</strong> dependencies and added</p>
<pre><code>implementation 'io.micrometer:micrometer-core'
implementation 'io.micrometer:micrometer-tracing'
implementation 'io.micrometer:micrometer-tracing-bridge-brave'
implementation platform('io.micrometer:micrometer-tracing-bom:latest.release')
</code></pre>
<p>as well as</p>
<pre class=""lang-yaml prettyprint-override""><code>logging.pattern.level: &quot;%5p [${spring.application.name:},%X{traceId:-},%X{spanId:-}]&quot;
</code></pre>
<p>but no traceIds and spanIds are being logged.</p>
<p>Is there something we missed?</p>
",
tags:"<java><spring-boot><micrometer><spring-micrometer>",
score:14,
creationDate:2023-01-19 09:58:46,
creationDate:2023-02-21 22:49:50,
score:9,
acceptedResponderReputation:6833,
acceptedResponder:971735,
QuestionerReputation:491,
Questioner:10459891}
{title:"How do I cache an API axios response",
id:"https://stackoverflow.com/questions/75012624",
body:"<p>Here is my API code:</p>
<pre class=""lang-js prettyprint-override""><code>import axios from 'axios';


export const getAreaData = async (postcode) =&gt; {
    const { data } = await axios.get(`https://api.zippopotam.us/GB/${postcode}`);
    return data.places;
};
</code></pre>
<p>This API call returns an array of objects. I need to store it in cache to improve performance, how can I do that?</p>
<p>Tried <a href=""https://www.npmjs.com/package/axios-cache-adapter"" rel=""nofollow noreferrer"">https://www.npmjs.com/package/axios-cache-adapter</a>,
YouTube,
Google,
other methods.</p>
<p>I can't change this code too much, I need to add to it to store the response in cache.</p>
",
tags:"<javascript><reactjs><caching><axios>",
score:9,
creationDate:2023-01-05 00:09:47,
creationDate:2023-01-05 00:25:12,
score:9,
acceptedResponderReputation:2251,
acceptedResponder:1857909,
QuestionerReputation:93,
Questioner:20932088}
{title:"getServerSideProps() not being called nextJS 13",
id:"https://stackoverflow.com/questions/76276597",
body:"<p>Was trying to get familiar with nextJS 13.
What I encountered is <code>getServerSideProps</code> function is not prerendering the page props. That's my first time trying it, so I don't know if I'm doing it wrong.</p>
<p>Here's the code written in <code>/app/login/page.js</code></p>
<pre><code>import Content from &quot;@/components/content&quot;;
import LoginForm from &quot;@/components/loginForm&quot;;
import Title from &quot;@/components/title&quot;;

function Login({ message }) {
    return (
        &lt;Content&gt;
            &lt;div className=&quot;ml-2 my-2&quot;&gt;
                {message || &quot;NextJS is ok.&quot;}
                &lt;Title text=&quot;Login&quot; /&gt;
            &lt;/div&gt;
            &lt;LoginForm /&gt;
        &lt;/Content&gt;
    );
}

export default Login;

export async function getServerSideProps() {
    console.log(&quot;running getServerSideProps function..&quot;);
    return {
        props: { message: &quot;NextJS is awesome!&quot; },
    };
}
</code></pre>
<p>Key thing I'm trying to achieve here is to check the session key with axios request to the server before displaying login page. If user's logged in, user should be redirected to homepage. Here's future code if I will be able to make this function work:</p>
<pre><code>export async function getServerSideProps() {
    console.log(&quot;Im running getServerSideProps funct &quot;);
    let isLoggedIn = false;
    try {
        const response = await api.get(&quot;/users/session-check&quot;, {
            withCredentials: true,
        });
        if (response.status === 200) isLoggedIn = true;
    } catch (err) {
        console.log(err.message);
    }
    if (isLoggedIn) {
        return {
            redirect: {
                destination: &quot;/&quot;,
                permanent: false,
            },
        };
    }
    return {
        props: {},
    };
}
</code></pre>
<p>I tried to restart with <code>npm run dev</code>
Still getting the same results...</p>
",
tags:"<javascript><reactjs><next.js><axios>",
score:9,
creationDate:2023-05-17 22:32:45,
creationDate:2023-05-17 23:35:47,
score:9,
acceptedResponderReputation:1487,
acceptedResponder:8998480,
QuestionerReputation:123,
Questioner:21916120}
{title:"How to hard code credentials AWS SES JS SDK V3",
id:"https://stackoverflow.com/questions/75441675",
body:"<p>AWS forced me to upgrade do SDK V3, and now I'm having such a hard time setting up my credentials. They used to be hard-coded like:</p>
<pre class=""lang-js prettyprint-override""><code>AWS.config.update({
  apiVersion: &quot;2010-12-01&quot;,
  accessKeyId: &quot;MYKEY&quot;,
  secretAccessKey: &quot;MYOTHERKEY&quot;,
  region: &quot;us-east-1&quot;,
});
</code></pre>
<p>But now the <code>AWS</code> package is deprecated in favor of the modularized <code>@aws-sdk/client-ses</code>.</p>
<p>How to hard code my credentials as I used to do in this new version of the SDK?</p>
<p>What I have so far:</p>
<pre class=""lang-js prettyprint-override""><code>import {
  SESClient,
  CloneReceiptRuleSetCommand,
} from &quot;@aws-sdk/client-ses&quot;;

const client = new SESClient({
  accessKeyId: &quot;MYKEY&quot;,
  secretAccessKey: &quot;MYOTHERKEY&quot;,
  region: &quot;us-east-1&quot;,
});

const command = new CloneReceiptRuleSetCommand(params);

client.send(command)
</code></pre>
<p>But it returns me the error &quot;CredentialsProviderError: Could not load credentials from any providers&quot;</p>
<p>P.S.: I know the disadvantages of hard-coding credentials, but this is not a issue for this application in particular. It's a backend Node.js service, and only I need to have access to it.</p>
",
tags:"<javascript><amazon-web-services><amazon-ses><aws-sdk-js><aws-sdk-nodejs>",
score:7,
creationDate:2023-02-13 22:09:35,
creationDate:2023-02-13 22:25:37,
score:9,
acceptedResponderReputation:10009,
acceptedResponder:4350275,
QuestionerReputation:391,
Questioner:14067591}
{title:"How to stop slf4j printing a pointless information message at startup?",
id:"https://stackoverflow.com/questions/78063648",
body:"<p>I'm not using SLF4J myself, but some Apache library that I'm using has it as a dependency. (I've installed the latest version: <code>2.1.0-alpha1</code>).</p>
<p>I have added the corresponding <code>slf4j-nop</code> library on my classpath, and now instead of complaining that there's no SLF4J implementation, it prints to STDERR the following message:</p>
<pre><code>SLF4J(I): Connected with provider of type [org.slf4j.nop.NOPServiceProvider]
</code></pre>
<p>It's an information message saying it's found my NOP provider. How can I get rid of this pointlessly irritating message? I did a Google search for the message but came up with no hits.</p>
<p>I would prefer not to redirect STDERR or anything weird like that if I can help it. Surely, there must be a built-in way to stop this message from printing?</p>
",
tags:"<java><slf4j>",
score:9,
creationDate:2024-02-26 20:20:07,
creationDate:2024-02-26 20:57:24,
score:9,
acceptedResponderReputation:12751,
acceptedResponder:1326913,
QuestionerReputation:12751,
Questioner:1326913}
{title:"Weird behaviour of Java MethodHandle.invokeExact",
id:"https://stackoverflow.com/questions/79021244",
body:"<p>Here is a minimal working example (requires Java 22 or later):</p>
<p>(just using libc <code>free</code> for elaborating the behaviour)</p>
<pre class=""lang-java prettyprint-override""><code>import java.lang.foreign.*;
import java.lang.invoke.MethodHandle;

public class Main {
    public static final Linker nativeLinker = Linker.nativeLinker();
    public static final SymbolLookup stdlibLookup = nativeLinker.defaultLookup();
    public static final SymbolLookup loaderLookup = SymbolLookup.loaderLookup();

    private static final FunctionDescriptor DESCRIPTOR$free = FunctionDescriptor.ofVoid(ValueLayout.ADDRESS);
    private static final MethodHandle HANDLE$free =
            loaderLookup.find(&quot;free&quot;)
                    .or(() -&gt; stdlibLookup.find(&quot;free&quot;))
                    .map(symbolSegment -&gt; nativeLinker.downcallHandle(symbolSegment, DESCRIPTOR$free))
                    .orElseThrow(() -&gt; new RuntimeException(&quot;libc function free not found but y?&quot;));

    public static void free(MemorySegment address) {
        try {
            // I want to allow user code to use Java null and MemorySegment.NULL (C NULL) interchangeably
            HANDLE$free.invokeExact(address != null ? address : MemorySegment.NULL);
        } catch (Throwable throwable) {
            throwable.printStackTrace(System.err);
        }
    }

    public static void main(String[] args) {
        free(null); // free(MemorySegment.NULL) will produce same result
    }
}
</code></pre>
<p>Run program and there will be an exception:</p>
<pre><code>java.lang.invoke.WrongMethodTypeException: handle's method type (MemorySegment)void but found (Object)void
    at java.base/java.lang.invoke.Invokers.newWrongMethodTypeException(Invokers.java:521)
    at java.base/java.lang.invoke.Invokers.checkExactType(Invokers.java:530)
    at Main.free(Main.java:19)
    at Main.main(Main.java:26)
</code></pre>
<p>Java complains that the argument used to call <code>invokeExact</code> is an <code>Object</code>, not <code>MemorySegment</code>. However, the expression</p>
<pre class=""lang-java prettyprint-override""><code>address != null ? address : MemorySegment.NULL
</code></pre>
<p>should have type <code>MemorySegment</code> of course. And if we make a small modification to the code:</p>
<pre class=""lang-java prettyprint-override""><code>    public static void free(MemorySegment address) {
        try {
            MemorySegment temp = address != null ? address : MemorySegment.NULL;
            HANDLE$free.invokeExact(temp);
        } catch (Throwable throwable) {
            throwable.printStackTrace(System.err);
        }
    }
</code></pre>
<p>it works correctly.</p>
<p>Also</p>
<ul>
<li><code>HANDLE$free.invoke(address != null ? address : MemorySegment.NULL)</code> works</li>
<li><code>HANDLE$free.invokeExact((MemorySegment)(address != null ? address : MemorySegment.NULL))</code> works, but</li>
<li><code>HANDLE$free.invokeExact((address != null ? address : MemorySegment.NULL))</code> does not work</li>
</ul>
<p>Is this some kind of deliberate design, implementation limitation or JVM bugs?</p>
",
tags:"<java><methodhandle><project-panama><java-22>",
score:7,
creationDate:2024-09-25 05:32:21,
creationDate:2024-09-25 05:58:59,
score:10,
acceptedResponderReputation:270770,
acceptedResponder:5133585,
QuestionerReputation:601,
Questioner:14312575}
{title:"hibernate6 throw exception 'scale has no meaning for floating point numbers'",
id:"https://stackoverflow.com/questions/75862838",
body:"<p>Before, I was used hibernate 5.x everything is ok.</p>
<p>After update hibernate to 6.1.7 the project got exception.</p>
<p>I'm using springboot 3.0.5 and cofing the following properties to auto generate tables on mysql 8.0 :</p>
<pre><code>spring.jpa.generate-ddl=true
spring.jpa.hibernate.ddl-auto=update
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

</code></pre>
<p>My Entity like :</p>
<pre><code>@Data
@Entity
@Table(name = &quot;T_TEST&quot;)
public class TPriceRange implements Serializable {
    @Id
    @Column(name = &quot;ID&quot;, unique = true, nullable = false)
    private Integer id;

    @Column(name = &quot;price&quot;, precision = 5, scale = 2)
    private Double price;
}
</code></pre>
<p>When I start the project , the exception is :</p>
<pre><code>Caused by: org.hibernate.MappingException: Unable to determine SQL type name for column 'price' of table 't_test'
    at org.hibernate.mapping.Column.getSqlTypeName(Column.java:252)
    at org.hibernate.mapping.Column.getSqlType(Column.java:314)
    at org.hibernate.tool.schema.internal.StandardTableExporter.getSqlCreateStrings(StandardTableExporter.java:99)
    ... 179 common frames omitted
Caused by: java.lang.IllegalArgumentException: scale has no meaning for floating point numbers
    at org.hibernate.dialect.Dialect$SizeStrategyImpl.resolveSize(Dialect.java:3853)
    at org.hibernate.dialect.MySQLDialect$1.resolveSize(MySQLDialect.java:108)
    at org.hibernate.mapping.Column.getColumnSize(Column.java:358)
    at org.hibernate.mapping.Column.getSqlTypeName(Column.java:248)
</code></pre>
<p>It seems that the 'scale ' can not be used, I don't know why?</p>
<p>Did someone can help me?</p>
<p>Thank you very mush!</p>
<p>hibernate6 scale has no meaning for floating point numbers</p>
",
tags:"<java><spring-boot><hibernate>",
score:7,
creationDate:2023-03-28 06:09:04,
creationDate:2023-04-07 12:55:00,
score:10,
acceptedResponderReputation:4253,
acceptedResponder:2889760,
QuestionerReputation:83,
Questioner:21507233}
{title:"Correct the classpath of your application so that it contains compatible versions of the classes Log4J2LoggingSystem and PropertiesUtil",
id:"https://stackoverflow.com/questions/75258289",
body:"<p>I'm migrating a project from Spring Boot 2.6.1 to Spring Boot 3.0.2 and I'm having problems with log4j dependencies versions. I have modified all the dependencies that were giving me problems but I still couldn't solve the problem. The error is as follows:</p>
<pre><code>Java HotSpot(TM) 64-Bit Server VM warning: Options -Xverify:none and -noverify were deprecated in JDK 13 and will likely be removed in a future release.
SLF4J: No SLF4J providers were found.
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.
SLF4J: Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.
SLF4J: Ignoring binding found at [jar:file:/C:/Users/Pablo/.m2/repository/org/apache/logging/log4j/log4j-slf4j-impl/2.18.0/log4j-slf4j-impl-2.18.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.
ERROR [2023-01-27 11:54:41] [ org.springframework.boot.diagnostics.LoggingFailureAnalysisReporter report 40]  

***************************
APPLICATION FAILED TO START
***************************

Description:

An attempt was made to call a method that does not exist. The attempt was made from the following location:

    org.springframework.boot.logging.log4j2.Log4J2LoggingSystem.initialize(Log4J2LoggingSystem.java:242)

The following method did not exist:

    'void org.apache.logging.log4j.util.PropertiesUtil.addPropertySource(org.apache.logging.log4j.util.PropertySource)'

The calling method's class, org.springframework.boot.logging.log4j2.Log4J2LoggingSystem, was loaded from the following location:

    jar:file:/C:/Users/Pablo/.m2/repository/org/springframework/boot/spring-boot/3.0.2/spring-boot-3.0.2.jar!/org/springframework/boot/logging/log4j2/Log4J2LoggingSystem.class

The called method's class, org.apache.logging.log4j.util.PropertiesUtil, is available from the following locations:

    jar:file:/C:/Users/Pablo/.m2/repository/org/apache/logging/log4j/log4j-api/2.18.0/log4j-api-2.18.0.jar!/org/apache/logging/log4j/util/PropertiesUtil.class

The called method's class hierarchy was loaded from the following locations:

    org.apache.logging.log4j.util.PropertiesUtil: file:/C:/Users/Pablo/.m2/repository/org/apache/logging/log4j/log4j-api/2.18.0/log4j-api-2.18.0.jar


Action:

Correct the classpath of your application so that it contains compatible versions of the classes org.springframework.boot.logging.log4j2.Log4J2LoggingSystem and org.apache.logging.log4j.util.PropertiesUtil


Process finished with exit code 0

</code></pre>
<p>And the service dependencies are:</p>
<pre><code> --- maven-dependency-plugin:2.8:tree (default-cli) @ core ---
[INFO] es._3xs.adp:core:jar:1.0-SNAPSHOT                                                   
[INFO] +- es._3xs.adp:library:jar:1.0-SNAPSHOT:compile                                     
[INFO] |  +- org.springframework.boot:spring-boot-configuration-processor:jar:3.0.2:compile
[INFO] |  +- org.springframework:spring-websocket:jar:6.0.4:compile                        
[INFO] |  |  \- org.springframework:spring-context:jar:6.0.4:compile                       
[INFO] |  +- org.springframework.retry:spring-retry:jar:2.0.0:compile
[INFO] |  +- com.opencsv:opencsv:jar:5.5.2:compile
[INFO] |  |  +- org.apache.commons:commons-lang3:jar:3.12.0:compile
[INFO] |  |  +- org.apache.commons:commons-text:jar:1.9:compile
[INFO] |  |  +- commons-beanutils:commons-beanutils:jar:1.9.4:compile
[INFO] |  |  |  +- commons-logging:commons-logging:jar:1.2:compile
[INFO] |  |  |  \- commons-collections:commons-collections:jar:3.2.2:compile
[INFO] |  |  \- org.apache.commons:commons-collections4:jar:4.4:compile
[INFO] |  \- org.apache.httpcomponents:httpclient:jar:4.5.14:compile
[INFO] |     \- commons-codec:commons-codec:jar:1.15:compile
[INFO] +- org.springframework.data:spring-data-redis:jar:3.0.1:compile
[INFO] |  +- org.springframework.data:spring-data-keyvalue:jar:3.0.1:compile
[INFO] |  |  \- org.springframework.data:spring-data-commons:jar:3.0.1:compile
[INFO] |  +- org.springframework:spring-tx:jar:6.0.4:compile
[INFO] |  +- org.springframework:spring-oxm:jar:6.0.4:compile
[INFO] |  +- org.springframework:spring-aop:jar:6.0.4:compile
[INFO] |  +- org.springframework:spring-context-support:jar:6.0.4:compile
[INFO] |  \- org.slf4j:slf4j-api:jar:2.0.6:compile
[INFO] +- redis.clients:jedis:jar:3.7.0:compile
[INFO] |  \- org.apache.commons:commons-pool2:jar:2.11.1:compile
[INFO] +- org.springframework.boot:spring-boot-starter-websocket:jar:3.0.2:compile
[INFO] |  \- org.springframework:spring-messaging:jar:6.0.4:compile
[INFO] +- commons-io:commons-io:jar:2.6:compile
[INFO] +- org.springframework.boot:spring-boot-starter-mail:jar:3.0.2:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter:jar:3.0.2:compile
[INFO] |  |  +- jakarta.annotation:jakarta.annotation-api:jar:2.1.1:compile
[INFO] |  |  \- org.yaml:snakeyaml:jar:1.33:compile
[INFO] |  \- org.eclipse.angus:jakarta.mail:jar:1.0.0:compile
[INFO] |     \- org.eclipse.angus:angus-activation:jar:1.0.0:runtime
[INFO] +- uk.org.webcompere:system-stubs-junit4:jar:1.2.0:test
[INFO] |  \- uk.org.webcompere:system-stubs-core:jar:1.2.0:test
[INFO] +- com.h2database:h2:jar:1.4.200:compile
[INFO] +- org.apache.httpcomponents.client5:httpclient5:jar:5.2.1:compile
[INFO] |  +- org.apache.httpcomponents.core5:httpcore5:jar:5.1.5:compile
[INFO] |  \- org.apache.httpcomponents.core5:httpcore5-h2:jar:5.1.5:compile
[INFO] +- org.apache.httpcomponents:httpcore:jar:4.4.13:compile
[INFO] +- org.springframework.boot:spring-boot-starter-thymeleaf:jar:3.0.2:compile
[INFO] |  \- org.thymeleaf:thymeleaf-spring6:jar:3.1.1.RELEASE:compile
[INFO] |     \- org.thymeleaf:thymeleaf:jar:3.1.1.RELEASE:compile
[INFO] |        +- org.attoparser:attoparser:jar:2.0.6.RELEASE:compile
[INFO] |        \- org.unbescape:unbescape:jar:1.1.6.RELEASE:compile
[INFO] +- org.springframework.boot:spring-boot-starter-data-rest:jar:3.0.2:compile
[INFO] |  \- org.springframework.data:spring-data-rest-webmvc:jar:4.0.1:compile
[INFO] |     \- org.springframework.data:spring-data-rest-core:jar:4.0.1:compile
[INFO] |        +- org.springframework.hateoas:spring-hateoas:jar:2.0.1:compile
[INFO] |        +- org.springframework.plugin:spring-plugin-core:jar:3.0.0:compile
[INFO] |        \- org.atteo:evo-inflector:jar:1.3:compile
[INFO] +- org.thymeleaf.extras:thymeleaf-extras-springsecurity5:jar:3.0.4.RELEASE:compile
[INFO] +- org.springframework.boot:spring-boot-devtools:jar:3.0.2:compile
[INFO] |  +- org.springframework.boot:spring-boot:jar:3.0.2:compile
[INFO] |  \- org.springframework.boot:spring-boot-autoconfigure:jar:3.0.2:compile
[INFO] +- org.springframework.ldap:spring-ldap-core:jar:2.3.6.RELEASE:compile
[INFO] |  +- org.springframework:spring-beans:jar:6.0.4:compile
[INFO] |  \- org.springframework:spring-core:jar:6.0.4:compile
[INFO] |     \- org.springframework:spring-jcl:jar:6.0.4:compile
[INFO] +- com.github.wvengen:proguard-maven-plugin:jar:2.6.0:compile
[INFO] |  +- org.apache.ant:ant:jar:1.10.12:compile
[INFO] |  |  \- org.apache.ant:ant-launcher:jar:1.10.12:compile
[INFO] |  +- org.apache.maven:maven-archiver:jar:2.4:compile
[INFO] |  |  +- org.apache.maven:maven-artifact:jar:2.0:compile
[INFO] |  |  +- org.apache.maven:maven-model:jar:2.0:compile
[INFO] |  |  +- org.apache.maven:maven-project:jar:2.0:compile
[INFO] |  |  |  +- org.apache.maven:maven-profile:jar:2.0:compile
[INFO] |  |  |  +- org.apache.maven:maven-artifact-manager:jar:2.0:compile
[INFO] |  |  |  |  +- org.apache.maven:maven-repository-metadata:jar:2.0:compile
[INFO] |  |  |  |  \- org.apache.maven.wagon:wagon-provider-api:jar:1.0-alpha-5:compile
[INFO] |  |  |  \- org.codehaus.plexus:plexus-container-default:jar:1.0-alpha-8:compile
[INFO] |  |  |     \- classworlds:classworlds:jar:1.1-alpha-2:compile
[INFO] |  |  +- org.codehaus.plexus:plexus-archiver:jar:1.0-alpha-11:compile
[INFO] |  |  |  +- org.codehaus.plexus:plexus-component-api:jar:1.0-alpha-15:compile
[INFO] |  |  |  \- org.codehaus.plexus:plexus-io:jar:1.0-alpha-3:compile
[INFO] |  |  +- org.codehaus.plexus:plexus-utils:jar:1.4.9:compile
[INFO] |  |  \- org.codehaus.plexus:plexus-interpolation:jar:1.6:compile
[INFO] |  \- org.apache.maven:maven-plugin-api:jar:3.8.6:compile
[INFO] |     +- org.eclipse.sisu:org.eclipse.sisu.plexus:jar:0.3.5:compile
[INFO] |     |  +- javax.annotation:javax.annotation-api:jar:1.2:compile
[INFO] |     |  +- org.eclipse.sisu:org.eclipse.sisu.inject:jar:0.3.5:compile
[INFO] |     |  \- org.codehaus.plexus:plexus-component-annotations:jar:1.5.5:compile
[INFO] |     \- org.codehaus.plexus:plexus-classworlds:jar:2.6.0:compile
[INFO] +- org.projectlombok:lombok:jar:1.18.22:compile
[INFO] +- javax.validation:validation-api:jar:2.0.1.Final:compile
[INFO] +- org.springframework.cloud:spring-cloud-starter-oauth2:jar:2.2.5.RELEASE:compile
[INFO] |  +- org.springframework.cloud:spring-cloud-starter-security:jar:2.2.5.RELEASE:compile
[INFO] |  |  \- org.springframework.cloud:spring-cloud-security:jar:2.2.5.RELEASE:compile
[INFO] |  |     \- org.springframework.boot:spring-boot-starter-security:jar:3.0.2:compile
[INFO] |  +- org.springframework.security.oauth.boot:spring-security-oauth2-autoconfigure:jar:2.1.2.RELEASE:compile
[INFO] |  |  +- org.springframework.security.oauth:spring-security-oauth2:jar:2.3.4.RELEASE:compile
[INFO] |  |  |  +- org.springframework.security:spring-security-core:jar:6.0.1:compile
[INFO] |  |  |  +- org.springframework.security:spring-security-config:jar:6.0.1:compile
[INFO] |  |  |  +- org.springframework.security:spring-security-web:jar:6.0.1:compile
[INFO] |  |  |  \- org.codehaus.jackson:jackson-mapper-asl:jar:1.9.13:compile
[INFO] |  |  |     \- org.codehaus.jackson:jackson-core-asl:jar:1.9.13:compile
[INFO] |  |  \- org.springframework.security:spring-security-jwt:jar:1.0.9.RELEASE:compile
[INFO] |  |     \- org.bouncycastle:bcpkix-jdk15on:jar:1.56:compile
[INFO] |  |        \- org.bouncycastle:bcprov-jdk15on:jar:1.56:compile
[INFO] |  \- javax.activation:javax.activation-api:jar:1.2.0:compile
[INFO] +- org.glassfish.jaxb:jaxb-runtime:jar:2.3.2:compile
[INFO] |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:4.0.0:compile
[INFO] |  +- org.glassfish.jaxb:txw2:jar:4.0.1:compile
[INFO] |  +- com.sun.istack:istack-commons-runtime:jar:4.1.1:compile
[INFO] |  +- org.jvnet.staxex:stax-ex:jar:2.1.0:compile
[INFO] |  +- com.sun.xml.fastinfoset:FastInfoset:jar:2.1.0:compile
[INFO] |  \- jakarta.activation:jakarta.activation-api:jar:2.1.1:compile
[INFO] +- com.sun.xml.bind:jaxb-core:jar:3.0.2:compile
[INFO] |  \- com.sun.activation:jakarta.activation:jar:2.0.1:compile
[INFO] +- com.sun.xml.bind:jaxb-impl:jar:2.3.0:compile
[INFO] +- javax.xml.bind:jaxb-api:jar:2.4.0-b180830.0359:compile
[INFO] +- com.fasterxml.jackson.dataformat:jackson-dataformat-xml:jar:2.13.0:compile
[INFO] |  +- com.fasterxml.jackson.core:jackson-core:jar:2.14.1:compile
[INFO] |  +- com.fasterxml.jackson.core:jackson-annotations:jar:2.14.1:compile
[INFO] |  +- com.fasterxml.jackson.core:jackson-databind:jar:2.14.1:compile
[INFO] |  +- org.codehaus.woodstox:stax2-api:jar:4.2.1:compile
[INFO] |  \- com.fasterxml.woodstox:woodstox-core:jar:6.2.6:compile
[INFO] +- net.sourceforge.jtds:jtds:jar:1.3.1:compile
[INFO] +- org.springframework.boot:spring-boot-starter-data-jpa:jar:3.0.2:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter-aop:jar:3.0.2:compile
[INFO] |  |  \- org.aspectj:aspectjweaver:jar:1.9.19:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter-jdbc:jar:3.0.2:compile
[INFO] |  |  +- com.zaxxer:HikariCP:jar:5.0.1:compile
[INFO] |  |  \- org.springframework:spring-jdbc:jar:6.0.4:compile
[INFO] |  +- org.hibernate.orm:hibernate-core:jar:6.1.6.Final:compile
[INFO] |  |  +- jakarta.persistence:jakarta.persistence-api:jar:3.1.0:compile
[INFO] |  |  +- jakarta.transaction:jakarta.transaction-api:jar:2.0.1:compile
[INFO] |  |  +- org.jboss.logging:jboss-logging:jar:3.5.0.Final:runtime
[INFO] |  |  +- org.hibernate.common:hibernate-commons-annotations:jar:6.0.2.Final:runtime
[INFO] |  |  +- org.jboss:jandex:jar:2.4.2.Final:runtime
[INFO] |  |  +- com.fasterxml:classmate:jar:1.5.1:runtime
[INFO] |  |  +- net.bytebuddy:byte-buddy:jar:1.12.22:runtime
[INFO] |  |  +- jakarta.inject:jakarta.inject-api:jar:2.0.0:runtime
[INFO] |  |  \- org.antlr:antlr4-runtime:jar:4.10.1:runtime
[INFO] |  +- org.springframework.data:spring-data-jpa:jar:3.0.1:compile
[INFO] |  |  \- org.springframework:spring-orm:jar:6.0.4:compile
[INFO] |  \- org.springframework:spring-aspects:jar:6.0.4:compile
[INFO] +- org.springframework.boot:spring-boot-starter-web:jar:3.0.2:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter-json:jar:3.0.2:compile
[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.14.1:compile
[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.14.1:compile
[INFO] |  |  \- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.14.1:compile
[INFO] |  +- org.springframework:spring-web:jar:6.0.4:compile
[INFO] |  \- org.springframework:spring-webmvc:jar:6.0.4:compile
[INFO] |     \- org.springframework:spring-expression:jar:6.0.4:compile
[INFO] +- org.apache.logging.log4j:log4j-core:jar:2.18.0:compile
[INFO] +- org.apache.logging.log4j:log4j-api:jar:2.18.0:compile
[INFO] +- org.apache.logging.log4j:log4j-jul:jar:2.18.0:compile
[INFO] +- org.apache.logging.log4j:log4j-slf4j-impl:jar:2.18.0:compile
[INFO] +- org.springframework.boot:spring-boot-starter-log4j2:jar:2.6.3:compile
[INFO] |  \- org.slf4j:jul-to-slf4j:jar:2.0.6:compile
[INFO] +- org.springframework.boot:spring-boot-starter-jetty:jar:3.0.2:compile
[INFO] |  +- jakarta.servlet:jakarta.servlet-api:jar:6.0.0:compile
[INFO] |  +- jakarta.websocket:jakarta.websocket-api:jar:2.1.0:compile
[INFO] |  +- jakarta.websocket:jakarta.websocket-client-api:jar:2.1.0:compile
[INFO] |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.5:compile
[INFO] |  +- org.eclipse.jetty:jetty-servlets:jar:11.0.13:compile
[INFO] |  |  +- org.eclipse.jetty:jetty-http:jar:11.0.13:compile
[INFO] |  |  +- org.eclipse.jetty:jetty-util:jar:11.0.13:compile
[INFO] |  |  \- org.eclipse.jetty:jetty-io:jar:11.0.13:compile
[INFO] |  +- org.eclipse.jetty:jetty-webapp:jar:11.0.13:compile
[INFO] |  |  +- org.eclipse.jetty:jetty-servlet:jar:11.0.13:compile
[INFO] |  |  |  \- org.eclipse.jetty:jetty-security:jar:11.0.13:compile
[INFO] |  |  |     \- org.eclipse.jetty:jetty-server:jar:11.0.13:compile
[INFO] |  |  \- org.eclipse.jetty:jetty-xml:jar:11.0.13:compile
[INFO] |  +- org.eclipse.jetty.websocket:websocket-jakarta-server:jar:11.0.13:compile
[INFO] |  |  +- org.eclipse.jetty.websocket:websocket-jakarta-client:jar:11.0.13:compile
[INFO] |  |  |  +- org.eclipse.jetty.websocket:websocket-jakarta-common:jar:11.0.13:compile
[INFO] |  |  |  +- org.eclipse.jetty.websocket:websocket-core-client:jar:11.0.13:compile
[INFO] |  |  |  \- org.eclipse.jetty:jetty-client:jar:11.0.13:compile
[INFO] |  |  |     \- org.eclipse.jetty:jetty-alpn-client:jar:11.0.13:compile
[INFO] |  |  +- org.eclipse.jetty.websocket:websocket-servlet:jar:11.0.13:compile
[INFO] |  |  |  \- org.eclipse.jetty.websocket:websocket-core-server:jar:11.0.13:compile
[INFO] |  |  \- org.eclipse.jetty:jetty-annotations:jar:11.0.13:compile
[INFO] |  |     +- org.eclipse.jetty:jetty-plus:jar:11.0.13:compile
[INFO] |  |     |  \- org.eclipse.jetty:jetty-jndi:jar:11.0.13:compile
[INFO] |  |     +- org.ow2.asm:asm:jar:9.4:compile
[INFO] |  |     \- org.ow2.asm:asm-commons:jar:9.4:compile
[INFO] |  |        \- org.ow2.asm:asm-tree:jar:9.4:compile
[INFO] |  \- org.eclipse.jetty.websocket:websocket-jetty-server:jar:11.0.13:compile
[INFO] |     +- org.eclipse.jetty.websocket:websocket-jetty-api:jar:11.0.13:compile
[INFO] |     \- org.eclipse.jetty.websocket:websocket-jetty-common:jar:11.0.13:compile
[INFO] |        \- org.eclipse.jetty.websocket:websocket-core-common:jar:11.0.13:compile
[INFO] +- org.springframework.boot:spring-boot-starter-actuator:jar:3.0.2:compile
[INFO] |  +- org.springframework.boot:spring-boot-actuator-autoconfigure:jar:3.0.2:compile
[INFO] |  |  \- org.springframework.boot:spring-boot-actuator:jar:3.0.2:compile
[INFO] |  \- io.micrometer:micrometer-observation:jar:1.10.3:compile
[INFO] |     \- io.micrometer:micrometer-commons:jar:1.10.3:compile
[INFO] +- org.springframework.cloud:spring-cloud-starter-netflix-eureka-client:jar:3.1.0:compile
[INFO] |  +- org.springframework.cloud:spring-cloud-starter:jar:3.1.0:compile
[INFO] |  |  +- org.springframework.cloud:spring-cloud-context:jar:3.1.0:compile
[INFO] |  |  |  \- org.springframework.security:spring-security-crypto:jar:6.0.1:compile
[INFO] |  |  +- org.springframework.cloud:spring-cloud-commons:jar:3.1.0:compile
[INFO] |  |  \- org.springframework.security:spring-security-rsa:jar:1.0.10.RELEASE:compile
[INFO] |  +- org.springframework.cloud:spring-cloud-netflix-eureka-client:jar:3.1.0:compile
[INFO] |  +- com.netflix.eureka:eureka-client:jar:1.10.17:compile
[INFO] |  |  +- com.netflix.netflix-commons:netflix-eventbus:jar:0.3.0:compile
[INFO] |  |  |  +- com.netflix.netflix-commons:netflix-infix:jar:0.3.0:runtime
[INFO] |  |  |  |  +- commons-jxpath:commons-jxpath:jar:1.3:runtime
[INFO] |  |  |  |  +- joda-time:joda-time:jar:2.3:runtime
[INFO] |  |  |  |  +- org.antlr:antlr-runtime:jar:3.4:runtime
[INFO] |  |  |  |  |  +- org.antlr:stringtemplate:jar:3.2.1:runtime
[INFO] |  |  |  |  |  \- antlr:antlr:jar:2.7.7:runtime
[INFO] |  |  |  |  \- com.google.code.gson:gson:jar:2.9.1:runtime
[INFO] |  |  |  \- org.apache.commons:commons-math:jar:2.2:runtime
[INFO] |  |  +- com.thoughtworks.xstream:xstream:jar:1.4.18:compile
[INFO] |  |  |  \- io.github.x-stream:mxparser:jar:1.2.2:compile
[INFO] |  |  |     \- xmlpull:xmlpull:jar:1.1.3.1:compile
[INFO] |  |  +- javax.ws.rs:jsr311-api:jar:1.1.1:compile
[INFO] |  |  +- com.netflix.servo:servo-core:jar:0.12.21:compile
[INFO] |  |  |  \- com.google.guava:guava:jar:19.0:compile
[INFO] |  |  +- commons-configuration:commons-configuration:jar:1.10:compile
[INFO] |  |  |  \- commons-lang:commons-lang:jar:2.6:compile
[INFO] |  |  +- com.google.inject:guice:jar:4.1.0:compile
[INFO] |  |  |  \- javax.inject:javax.inject:jar:1:compile
[INFO] |  |  \- org.codehaus.jettison:jettison:jar:1.4.0:runtime
[INFO] |  +- com.netflix.eureka:eureka-core:jar:1.10.17:compile
[INFO] |  \- org.springframework.cloud:spring-cloud-starter-loadbalancer:jar:3.1.0:compile
[INFO] |     +- org.springframework.cloud:spring-cloud-loadbalancer:jar:3.1.0:compile
[INFO] |     |  +- io.projectreactor:reactor-core:jar:3.5.2:compile
[INFO] |     |  |  \- org.reactivestreams:reactive-streams:jar:1.0.4:compile
[INFO] |     |  \- io.projectreactor.addons:reactor-extra:jar:3.5.0:compile
[INFO] |     +- org.springframework.boot:spring-boot-starter-cache:jar:3.0.2:compile
[INFO] |     \- com.stoyanr:evictor:jar:1.0.0:compile
[INFO] +- org.springframework.boot:spring-boot-starter-test:jar:3.0.2:test
[INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:3.0.2:test
[INFO] |  +- com.jayway.jsonpath:json-path:jar:2.7.0:compile
[INFO] |  |  \- net.minidev:json-smart:jar:2.4.8:compile
[INFO] |  |     \- net.minidev:accessors-smart:jar:2.4.8:compile
[INFO] |  +- org.assertj:assertj-core:jar:3.23.1:test
[INFO] |  +- org.hamcrest:hamcrest:jar:2.2:test
[INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.9.2:test
[INFO] |  |  +- org.junit.jupiter:junit-jupiter-api:jar:5.9.2:test
[INFO] |  |  |  +- org.opentest4j:opentest4j:jar:1.2.0:test
[INFO] |  |  |  +- org.junit.platform:junit-platform-commons:jar:1.9.2:test
[INFO] |  |  |  \- org.apiguardian:apiguardian-api:jar:1.1.2:test
[INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.9.2:test
[INFO] |  |  \- org.junit.jupiter:junit-jupiter-engine:jar:5.9.2:test
[INFO] |  |     \- org.junit.platform:junit-platform-engine:jar:1.9.2:test
[INFO] |  +- org.mockito:mockito-core:jar:4.8.1:test
[INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.12.22:test
[INFO] |  |  \- org.objenesis:objenesis:jar:3.2:test
[INFO] |  +- org.mockito:mockito-junit-jupiter:jar:4.8.1:test
[INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.1:test
[INFO] |  |  \- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test
[INFO] |  +- org.springframework:spring-test:jar:6.0.4:test
[INFO] |  \- org.xmlunit:xmlunit-core:jar:2.9.1:test
[INFO] +- org.springframework.boot:spring-boot-test:jar:3.0.2:compile
[INFO] +- junit:junit:jar:4.13.1:test
[INFO] |  \- org.hamcrest:hamcrest-core:jar:2.2:test
[INFO] +- io.micrometer:micrometer-core:jar:1.8.1:compile
[INFO] |  +- org.hdrhistogram:HdrHistogram:jar:2.1.12:compile
[INFO] |  \- org.latencyutils:LatencyUtils:jar:2.0.3:runtime
[INFO] \- io.micrometer:micrometer-registry-prometheus:jar:1.8.0:compile
[INFO]    \- io.prometheus:simpleclient_common:jar:0.16.0:compile
[INFO]       \- io.prometheus:simpleclient:jar:0.16.0:compile
[INFO]          +- io.prometheus:simpleclient_tracer_otel:jar:0.16.0:compile
[INFO]          |  \- io.prometheus:simpleclient_tracer_common:jar:0.16.0:compile
[INFO]          \- io.prometheus:simpleclient_tracer_otel_agent:jar:0.16.0:compile
[INFO]
</code></pre>
<p>Does anyone know which versions of the dependencies are compatible with each other?</p>
",
tags:"<java><spring><spring-boot><maven><log4j>",
score:8,
creationDate:2023-01-27 12:45:07,
creationDate:2023-02-09 00:43:36,
score:10,
acceptedResponderReputation:72254,
acceptedResponder:551406,
QuestionerReputation:608,
Questioner:7576519}
{title:"How to write unit test for SecurityConfig for spring security",
id:"https://stackoverflow.com/questions/75340149",
body:"<p>I have a class for spring security, validating token from the user. I got the code from Auth0 website and modified <code>antMatcher</code> part for my configuration. Here is the code:</p>
<pre><code>@EnableWebSecurity
public class SecurityConfig {

    @Value(&quot;${auth0.audience}&quot;)
    private String audience;

    @Value(&quot;${spring.security.oauth2.resourceserver.jwt.issuer-uri}&quot;)
    private String issuer;

    @Bean
    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        /*
        This is where we configure the security required for our endpoints and setup our app to serve as
        an OAuth2 Resource Server, using JWT validation.
        */
        http
            .csrf().disable()
            .authorizeRequests()
            .antMatchers(HttpMethod.GET, &quot;/data/actuator/**&quot;).permitAll()
            .antMatchers(HttpMethod.PUT, &quot;/data/**&quot;).hasAuthority(&quot;SCOPE_data:write&quot;)
            .anyRequest().authenticated()
            .and().cors()
            .and().oauth2ResourceServer().jwt();
        return http.build();
    }

    @Bean
    JwtDecoder jwtDecoder() {
        /*
        By default, Spring Security does not validate the &quot;aud&quot; claim of the token, to ensure that this token is
        indeed intended for our app. Adding our own validator is easy to do:
        */
        NimbusJwtDecoder jwtDecoder = (NimbusJwtDecoder)
                JwtDecoders.fromOidcIssuerLocation(issuer);
        OAuth2TokenValidator&lt;Jwt&gt; audienceValidator =
                new com.nuance.pindata.health.importer.security.AudienceValidator(audience);
        OAuth2TokenValidator&lt;Jwt&gt; withIssuer = JwtValidators.createDefaultWithIssuer(issuer);
        OAuth2TokenValidator&lt;Jwt&gt; withAudience = new DelegatingOAuth2TokenValidator&lt;&gt;(withIssuer, audienceValidator);
        jwtDecoder.setJwtValidator(withAudience);
        return jwtDecoder;
    }
}
</code></pre>
<p>I am now trying to write unit test, but there is no good way to test it. I can practically test changing method/path, but it is not straight forward how to write this unit test, and it can be done through integration (automation) tests.</p>
<p>From <a href=""https://stackoverflow.com/questions/43663688/spring-security-httpsecurity-configuration-testing"">Spring Security HttpSecurity Configuration Testing</a>, he suggests not writing unit test for such security config as well. What is the right approach here? If I should write unit test, how can I achieve this?</p>
",
tags:"<java><spring-boot><unit-testing><spring-security><auth0>",
score:6,
creationDate:2023-02-03 19:20:26,
creationDate:2023-02-03 20:31:22,
score:10,
acceptedResponderReputation:12564,
acceptedResponder:619830,
QuestionerReputation:732,
Questioner:7259705}
{title:"What is the standard way to package/release a Java 17 application?",
id:"https://stackoverflow.com/questions/75211213",
body:"<p>I have a publicly available Java 8 desktop application complete with MSI installer that I'd like to update to Java 17.</p>
<p>The current user experience goes like this:</p>
<ol>
<li>User downloads MSI installer and runs it</li>
<li>MSI installer checks for compatible Java 8 VM, if not present prompts the user to install one from <a href=""http://java.com"" rel=""noreferrer"">http://java.com</a>.</li>
<li>User launches <code>application.exe</code> which is a shim that basically runs <code>java jar application.jar</code>.</li>
</ol>
<p>What I'm struggling to understand is what the user is expected to install in a Java 9+ world. If I send the user to for example: <a href=""https://www.oracle.com/java/technologies/downloads/"" rel=""noreferrer"">https://www.oracle.com/java/technologies/downloads/</a> they are greeted with downloading the Java Development Kit which is a confusing thing to install for a user (&quot;Is this right? I don't want to develop stuff??&quot;).</p>
<p>In addition when you land on <a href=""http://java.com"" rel=""noreferrer"">http://java.com</a> it says &quot;if you were asked to download java, it's most likely this&quot;, which implies that if you release applications you should either use Java 8 (and forget the JavaFX disaster that is OpenJDK pre version 11, and just use Orcale Java)...</p>
<p>I was under the impression that after Java 9, the promise of Jigsaw was to build a package that contains a native runtime and jar, all neatly bundled together so that the days of the end user having to install a JVM were over. However searching online, I see no support for this is Gradle or IntelliJ (or Eclipse for the matter) so this seems kind of like a dead pipedream?</p>
<p>If I want to ship a Java 17 application, is the user expected to install the JDK? If not, how am I supposed to package and ship my application?</p>
",
tags:"<java><release><java-platform-module-system>",
score:8,
creationDate:2023-01-23 14:54:28,
creationDate:2023-01-23 15:13:06,
score:10,
acceptedResponderReputation:102795,
acceptedResponder:768644,
QuestionerReputation:5931,
Questioner:2498188}
{title:"IntelliJ IDEA + JDK 21 issue with java.util.concurrent package - TimeUnit class not available",
id:"https://stackoverflow.com/questions/77551293",
body:"<p>I have an issue when I am trying to use TimeUnit class from java.util.concurrent. It happens with <strong>Oracle JDK 21.0.1</strong> (configurations are below) + <strong>IntelliJ IDEA 2023.1.5</strong> (Community Edition) - <em>the latest update at the current moment (UPDATE: As I thought in the beginning since I've run update - look a solution below).</em></p>
<p>Configuration on my computer (get by <em>java -version</em> in console):</p>
<blockquote>
<p>java version &quot;21.0.1&quot; 2023-10-17 LTS</p>
</blockquote>
<blockquote>
<p>Java(TM) SE Runtime Environment (build 21.0.1+12-LTS-29)</p>
</blockquote>
<blockquote>
<p>Java HotSpot(TM) 64-Bit Server VM (build 21.0.1+12-LTS-29, mixed mode, sharing)</p>
</blockquote>
<p>And I've checked that I set up JDK 21 in IntelliJ Project Structure menu including Project and Modules sections.</p>
<p>On the screenshot below you can see a basic class created for test purposes. Some concurrent package classes are imported fine, but not <code>TimeUnit</code> class for some reason.</p>
<p><a href=""https://i.sstatic.net/PCU1D.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/PCU1D.png"" alt=""The issue screenshot"" /></a></p>
<p>Meanwhile you can see on the screenshot that app works despite the issue when I run it.</p>
<p>When I am using java 17 in IDE configurations, I don't see the issue.</p>
<p><strong>Could you please help to understand why this issue happens and how to fix it?</strong></p>
<p>One more thing. When I go to &quot;About IntelliJ IDEA&quot; menu, I see the next configuration:</p>
<blockquote>
<p>Runtime version: 17.0.7+10-b829.16 aarch64 VM: OpenJDK 64-Bit Server
VM by JetBrains s.r.o.</p>
</blockquote>
<p>I am not sure why it says version 17, <strong>could it be a reason of the issue?</strong></p>
",
tags:"<java><intellij-idea><java.util.concurrent><java-21>",
score:16,
creationDate:2023-11-26 10:34:56,
creationDate:2023-11-26 10:34:56,
score:10,
acceptedResponderReputation:483,
acceptedResponder:15639126,
QuestionerReputation:483,
Questioner:15639126}
{title:"How to capture the body of a request that was stubbed with Wiremock",
id:"https://stackoverflow.com/questions/75143658",
body:"<p>Is there a way to capture the body of a post request that was stubbed with wiremock? I'm looking for something similar to Mockito's <code>ArgumentCaptor</code>.</p>
<p>I have the following stub:</p>
<pre><code>stubFor(post(urlPathEqualTo(getUploadEndpoint())).willReturn(().withStatus(HttpStatus.OK.value())));
</code></pre>
<p>I want to be able to see how the actual request was performed, get its body and assert it.</p>
<p>I have tried by using <code>.withRequestBody(equalToXml(...))</code> in the stub, since the body is the String representation of an XML. This does not work for me, because <code>equalToXml</code> is too strict, not allowing free text without surrounding tags for example.</p>
",
tags:"<java><spring-boot><mocking><wiremock><stubbing>",
score:7,
creationDate:2023-01-17 08:29:23,
creationDate:2023-01-17 10:05:02,
score:10,
acceptedResponderReputation:223,
acceptedResponder:16765942,
QuestionerReputation:223,
Questioner:16765942}
{title:"Getting `RollupError: Expression expected` when building NPM package",
id:"https://stackoverflow.com/questions/77855365",
body:"<p>After that I finished the preparation of my environment to build my first NPM package for React JS with ROLLUP bundler I got <code>RollupError: Expression expected</code> as shown in below</p>
<h3>Error output</h3>
<pre><code>&gt; rollup -c --environment NODE_ENV:development

development mode bundle

src/index.js → dist/index.js...
[!] RollupError: Expression expected
src/horizon-card/index.js (15:8)
13:     dataList.forEach((service)=&gt;{
14:       serviceList.push(
15:         &lt;li key={index}
            ^
</code></pre>
<p>I tried to fixe it by using curly braces &quot;<em>{}</em>&quot; but it seems that the problem is occured due to using angle brackets &quot;<em>&lt;</em>&quot; inside <code>.push</code> method</p>
<h3>rollup.config.js</h3>
<pre><code>import terser from &quot;@rollup/plugin-terser&quot;;

const devMode = (process.env.NODE_ENV === 'development');
console.log(`${ devMode ? 'development' : 'production' } mode bundle`);


export default [
  {
    input: 'src/index.js',
    output: {
      file: &quot;dist/index.js&quot;,
      format: 'es',
      sourcemap: devMode ? 'inline' : false,
      plugins: [
        terser({
          ecma: 2020,
          mangle: { toplevel: true },
          compress: {
            module: true,
            toplevel: true,
            unsafe_arrows: true,
            drop_console: !devMode,
            drop_debugger: !devMode
          },
          output: { quote_style: 1 }
        })
      ]
    }
  }
]
</code></pre>
<p>I want to build my NPM package for ReactJS by using ROLLUP bundler, but my package use <strong>HTML</strong> tags inside <code>push</code> array's method.</p>
",
tags:"<javascript><reactjs><rollupjs>",
score:6,
creationDate:2024-01-21 15:04:13,
creationDate:2024-02-20 02:55:33,
score:10,
acceptedResponderReputation:689,
acceptedResponder:681207,
QuestionerReputation:77,
Questioner:19498786}
{title:"Error parsing time with two decimal digits in Java 17, but succeeds in Java 8",
id:"https://stackoverflow.com/questions/77908521",
body:"<p>The following code snippet runs without error in Java 8.  However, when I run the same code in Java 17 it fails.</p>
<pre class=""lang-java prettyprint-override""><code>import java.time.OffsetDateTime;
import java.time.format.DateTimeFormatter;

public class Main2 {
    public static void main(String[] args) {
DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd'T'HH[:mm[:ss[.SSS]]]X&quot;);
        OffsetDateTime offSetDateTime = OffsetDateTime.parse(&quot;2021-10-09T08:59:00.00Z&quot;, formatter);
        System.out.println(offSetDateTime);
    }
}
</code></pre>
<p>Output when run on Java 17:</p>
<pre class=""lang-none prettyprint-override""><code>Exception in thread &quot;main&quot; java.time.format.DateTimeParseException: Text '2021-10-09T08:59:00.00Z' could not be parsed at index 19
    at java.base/java.time.format.DateTimeFormatter.parseResolved0(DateTimeFormatter.java:2052)
    at java.base/java.time.format.DateTimeFormatter.parse(DateTimeFormatter.java:1954)
    at java.base/java.time.OffsetDateTime.parse(OffsetDateTime.java:404)
    at Main2.main(Main2.java:9)
</code></pre>
<p>However, if I run the same code against Java 8 it gives the following result:</p>
<pre class=""lang-none prettyprint-override""><code>2021-10-09T08:59Z
</code></pre>
<p>If I change the test data from <code>&quot;2021-10-09T08:59:00.00Z&quot;</code> to <code>&quot;2021-10-09T08:59:00.000Z&quot;</code>, it works in Java 17.  Any idea what changes in Java 17 has causes it it fail?</p>
",
tags:"<java><java-8><java-time><java-17>",
score:10,
creationDate:2024-01-30 18:05:28,
creationDate:2024-01-30 19:54:19,
score:10,
acceptedResponderReputation:270770,
acceptedResponder:5133585,
QuestionerReputation:937,
Questioner:14820140}
{title:"Using Angular Signals with HostBinding to update style?",
id:"https://stackoverflow.com/questions/78054768",
body:"<p>In a <code>app-test</code> component I have the following:</p>
<pre><code>  @Input( { transform: booleanAttribute})
  reverse: boolean = false;

  @HostBinding('style.flex-direction')
  direction: string = this.reverse ? 'column-reverse' : 'column';

</code></pre>
<p>And so if the designer applies the <code>reverse</code> attribute to <code>app-test</code> like this:</p>
<pre><code>&lt;app-test reverse&gt;&lt;/app-test&gt;
</code></pre>
<p>Then Angular should set <code>style=&quot;flex-direction: column-reverse&quot;</code> on the <code>app-test</code> element.</p>
<p>And I'm wondering how to use Angular signals so that when <code>reverse</code> is set to true, direction will be set to <code>column-reverse</code>.  Thoughts?</p>
",
tags:"<javascript><angular><typescript><angular-signals>",
score:14,
creationDate:2024-02-25 03:41:59,
creationDate:2024-02-25 13:29:52,
score:10,
acceptedResponderReputation:54539,
acceptedResponder:884123,
QuestionerReputation:46890,
Questioner:1684269}
{title:"Access supabase database from edge function as admin",
id:"https://stackoverflow.com/questions/75425131",
body:"<p>I'm coming from Firebase Function... Where I can use the Admin Library to access database from the Function bypassing all security rules? On supabase I didn't yet find a way to do that, the documentation is very scarce. Now I'm using this code to access the database from function as the user who requested the function:</p>
<pre class=""lang-js prettyprint-override""><code>const supabaseClient = createClient(
      Deno.env.get(&quot;SUPABASE_URL&quot;) ?? &quot;&quot;,
      Deno.env.get(&quot;SUPABASE_ANON_KEY&quot;) ?? &quot;&quot;,
      { global: { headers: { Authorization: req.headers.get(&quot;Authorization&quot;)! } } }
    );
</code></pre>
<p>But for one of my function, I have to access bypassing all policies, as the function was &quot;admin&quot;, and when I remove de third params line in this code (Which was the only vague explanation how to do that I found) I get the error:</p>
<blockquote>
<p>AuthApiError: invalid claim: missing sub claim at ...</p>
</blockquote>
<p>I also tried change the <code>SUPABASE_ANON_KEY</code> to <code>SUPABASE_SERVICE_ROLE_KEY</code>, same error.</p>
",
tags:"<javascript><firebase><supabase><supabase-database><edge-function>",
score:9,
creationDate:2023-02-12 05:44:41,
creationDate:2023-02-12 06:02:14,
score:10,
acceptedResponderReputation:679,
acceptedResponder:21196122,
QuestionerReputation:300,
Questioner:10654916}
{title:"Record patterns in java without instanceof nor switch",
id:"https://stackoverflow.com/questions/77157787",
body:"<p>Java 21 <a href=""https://openjdk.org/jeps/440"" rel=""nofollow noreferrer"">record patterns</a> promises the introduction of destructuring to the Java language. However, it seems to be tightly coupled to pattern matching that can only be used as part of <code>instanceof</code> comparison or in <code>switch</code> statements/expressions.</p>
<p>Consider the following record.</p>
<pre class=""lang-java prettyprint-override""><code>public record Point(int x, int y) {}
</code></pre>
<p>Is there a way to destructure an object of that particular type without using <code>instanceof</code> or <code>switch</code>? The following attempts do destructure <code>point</code>. But the code makes little sense as neither <code>instanceof</code> nor <code>switch</code> are unnecessary if we assume null-safety.</p>
<pre class=""lang-java prettyprint-override""><code>Point point = new Point(0, 0);

// destructuring with instanceof
if (point instanceof Point(int x, int y)) {
    System.out.printf(&quot;Point at (%d,%d)&quot;, x, y);
}

// destructuring with switch
switch (point) {
    case Point(int x, int y) -&gt; System.out.printf(&quot;Point at (%d,%d)&quot;, x, y);
}
</code></pre>
",
tags:"<java><pattern-matching><java-21><record-patterns>",
score:6,
creationDate:2023-09-22 12:53:11,
creationDate:2023-09-22 16:15:37,
score:10,
acceptedResponderReputation:1541,
acceptedResponder:10118965,
QuestionerReputation:1957,
Questioner:3402449}
{title:"Hibernate randomly throws error: Cannot coerce value `[]` [java.util.ArrayList] as Long",
id:"https://stackoverflow.com/questions/75556114",
body:"<p>I'm encountering unstable errors when using a parameter of type List with my repository methods. The issue seems to be related to the interoperability between Kotlin lists and Java. When I run my unit test, it fails randomly, and I suspect this has something to do with the MutableList returned by listOf() in Kotlin. More information can be found in this StackOverflow post: <a href=""https://stackoverflow.com/questions/52580173/listof-returns-mutablelist"">listOf() returns MutableList</a>.</p>
<p>Here's an example of my unit test and repository method:</p>
<pre class=""lang-kotlin prettyprint-override""><code>            @Test
            fun `should return recipes with the specified author, locale and categories`() {
                println(&quot;AuthorID: &quot; + author.id)

                recipeRepo.findRecipesBy(
                    locale = LanguageSelection.ENGLISH,
                    authorIds = arrayListOf(44),
                )
                // it throws before reaching asserts
            }

</code></pre>
<p>Repository:</p>
<pre class=""lang-kotlin prettyprint-override""><code>interface RecipeRepository : JpaRepository&lt;Recipe, Long&gt; {

    @Query(&quot;SELECT r FROM Recipe r WHERE &quot;
            + &quot;(:authorIds is null or r.author.id in (:authorIds)) &quot;
            + &quot;and (:recipeIds is null or r.id in (:recipeIds)) &quot;
            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;
            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;
            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;
            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;
            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;
            + &quot;and (:categoryIds is null or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;
    )

    fun findRecipesBy(
        @Param(&quot;authorIds&quot;) authorIds: ArrayList&lt;Long&gt;? = null,
        @Param(&quot;recipeIds&quot;) recipeIds: ArrayList&lt;Long&gt;? = null,
        @Param(&quot;minPrice&quot;) minPrice: Double? = null,
        @Param(&quot;maxPrice&quot;) maxPrice: Double? = null,
        @Param(&quot;beforeDate&quot;) beforeDate: Date? = null,
        @Param(&quot;afterDate&quot;) afterDate: Date? = null,
        @Param(&quot;minLikeCount&quot;) minLikeCount: Int? = null,
        @Param(&quot;categoryIds&quot;) categoryIds: ArrayList&lt;Long&gt;? = null,
        sort: Sort = Sort.by(Sort.Direction.ASC, &quot;createdAt&quot;),
    ): List&lt;Recipe&gt;

}
</code></pre>
<p>Error:</p>
<pre><code>
Parameter value [[44]] did not match expected type [BasicSqmPathSource(id : Long) ]
org.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [[44]] did not match expected type [BasicSqmPathSource(id : Long) ]
    at app//org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371)
    at app//org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:235)
    at app//org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)
    at app//org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)
    at app//org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)
    at app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)
    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
    at app//org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:134)
    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
    at app//org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)
    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
    at app//org.springframework.data.repository.core.support.MethodInvocationValidator.invoke(MethodInvocationValidator.java:94)
    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)
    at app//org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)
    at app/jdk.proxy3/jdk.proxy3.$Proxy189.findRecipesBy(Unknown Source)
    at app//com.fittastetic.fittastetic_backend.shared.recipe.repository.RecipeRepository$DefaultImpls.findRecipesBy$default(RecipeRepository.kt:38)
    ...
Caused by: org.hibernate.type.descriptor.java.CoercionException: Cannot coerce value `[44]` [java.util.ArrayList] as Long
    at app//org.hibernate.type.descriptor.java.LongJavaType.coerce(LongJavaType.java:155)
    at app//org.hibernate.type.descriptor.java.LongJavaType.coerce(LongJavaType.java:24)
    at app//org.hibernate.query.internal.QueryParameterBindingImpl.coerce(QueryParameterBindingImpl.java:144)
    at app//org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:111)
    ... 141 more

</code></pre>
",
tags:"<java><spring-boot><hibernate><kotlin><spring-data-jpa>",
score:7,
creationDate:2023-02-24 11:37:46,
creationDate:2023-02-26 14:54:35,
score:10,
acceptedResponderReputation:6053,
acceptedResponder:3426309,
QuestionerReputation:530,
Questioner:12043263}
{title:"npm run build is failing due to typescript or lodash uncompatibility",
id:"https://stackoverflow.com/questions/78682996",
body:"<p>typescript version: 4.5.2 <br/>
lodash version: 4.17.21</p>
<pre><code>npm run build
tsc &amp;&amp; react-scripts build


node_modules/@types/lodash/common/object.d.ts:1026:46 - error TS1005: '?' expected.
1026         : K extends `${infer N extends number}` ? T[N] &lt;br/&gt;
                                                  ~
node_modules/@types/lodash/common/object.d.ts:1031:46 - error TS1005: '?' expected.
1031         : K extends `${infer N extends number}` ? T[N] &lt;br/&gt;
                                                  ~
node_modules/@types/lodash/common/object.d.ts:1041:46 - error TS1005: '?' expected.
1041         : K extends `${infer N extends number}` &lt;br/&gt;
                                                  ~


Found 3 errors.
</code></pre>
",
tags:"<javascript><reactjs><typescript><npm><lodash>",
score:9,
creationDate:2024-06-28 14:19:35,
creationDate:2024-06-28 16:42:52,
score:10,
acceptedResponderReputation:146,
acceptedResponder:8410834,
QuestionerReputation:528,
Questioner:10455685}
{title:"File breakage when copying with gulp.dest",
id:"https://stackoverflow.com/questions/78310558",
body:"<p>In <strong>image.mjs</strong> and <strong>copy.mjs</strong> files I use <code>gulp.dest</code> But it breaks the files when copying, that is copying is done in the correct path, but the files end up becoming large in size and no longer workable</p>
<p>In the case of images it doesn't happen with <strong>.svg</strong> files, but it does with <strong>.png</strong> files</p>
<p>I use woff and woff2 format fonts</p>
<p>I use this versions of packeges:</p>
<pre><code>&quot;browser-sync&quot;: &quot;^3.0.2&quot;,
&quot;del&quot;: &quot;^7.1.0&quot;,
&quot;gulp&quot;: &quot;^5.0.0&quot;,
&quot;gulp-autoprefixer&quot;: &quot;^9.0.0&quot;,
&quot;gulp-clean-css&quot;: &quot;^4.3.0&quot;,
&quot;gulp-cli&quot;: &quot;^3.0.0&quot;,
&quot;gulp-prettier&quot;: &quot;^6.0.0&quot;,
&quot;gulp-pug&quot;: &quot;^5.0.0&quot;,
&quot;gulp-rename&quot;: &quot;^2.0.0&quot;,
&quot;gulp-replace&quot;: &quot;^1.1.4&quot;,
&quot;gulp-sass&quot;: &quot;^5.1.0&quot;,
&quot;path&quot;: &quot;^0.12.7&quot;,
&quot;pug&quot;: &quot;^3.0.2&quot;,
&quot;sass&quot;: &quot;^1.72.0&quot;
</code></pre>
<p>This my gulpfile.mjs:</p>
<pre><code>import gulp from &quot;gulp&quot;;

import path from &quot;./gulp/config/path.mjs&quot;;
import plugins from &quot;./gulp/config/plugins.mjs&quot;;

global.app = {
  path: path,
  gulp: gulp,
  plugins: plugins,
};

import copy from &quot;./gulp/tasks/copy.mjs&quot;;
import reset from &quot;./gulp/tasks/reset.mjs&quot;;
import pug from &quot;./gulp/tasks/pug.mjs&quot;;
import server from &quot;./gulp/tasks/server.mjs&quot;;
import scss from &quot;./gulp/tasks/scss.mjs&quot;;
import image from &quot;./gulp/tasks/image.mjs&quot;;
import js from &quot;./gulp/tasks/js.mjs&quot;;
import format from &quot;./gulp/tasks/format.mjs&quot;;

gulp.task(&quot;format&quot;, format);

function watcher() {
  gulp.watch(path.watch.fonts, copy);
  gulp.watch(path.watch.pug, pug);
  gulp.watch(path.watch.scss, scss);
  gulp.watch(path.watch.img, image);
  gulp.watch(path.watch.js, js);
}

const mainTasks = gulp.parallel(copy, pug, scss, image, js);

const dev = gulp.series(reset, mainTasks, gulp.parallel(watcher, server));

gulp.task(&quot;default&quot;, dev);
</code></pre>
<p>This my image.mjs file:</p>
<pre><code>const image = () =&gt; {
  return app.gulp
    .src(app.path.src.img)
    .pipe(app.gulp.dest(app.path.build.img))
    .pipe(app.plugins.browsersync.stream());
};

export default image;
</code></pre>
<p>And this my copy.mjs file:</p>
<pre><code>const copy = () =&gt; {
  return app.gulp
    .src(app.path.src.fonts)
    .pipe(app.gulp.dest(app.path.build.fonts));
};

export default copy;
</code></pre>
<p>I tried using the <strong>gulp-copy</strong> plugin instead of <code>gulp.dest</code>, but it didn't work for some reason</p>
<p>I found a similar <a href=""https://github.com/gulpjs/gulp/issues/1933"" rel=""noreferrer"">problem</a>, but the solution from there didn't work for me</p>
",
tags:"<javascript><image><fonts><gulp>",
score:7,
creationDate:2024-04-11 13:09:38,
creationDate:2024-04-18 08:31:27,
score:10,
acceptedResponderReputation:116,
acceptedResponder:6840023,
QuestionerReputation:73,
Questioner:23440096}
{title:"Reduce callback nesting in cypress",
id:"https://stackoverflow.com/questions/76262086",
body:"<p>I've read that in Cypress I should not use <code>await</code> and that it is not needed because you can remove nesting through chaining. Here I have a <code>cy.fixure</code> nested in <code>cy.origin</code> nested in <code>cy.session</code>, is there a way to flatten this?</p>
<pre class=""lang-js prettyprint-override""><code>  cy.session([], () =&gt; {
    cy.visit(&quot;&quot;)
    cy.origin(&quot;https://my-address.com&quot;, () =&gt; {
      cy.fixture(&quot;user&quot;).then((user) =&gt; {
        cy.get(&quot;#username&quot;).type(user.username)
        cy.get(&quot;#password&quot;).type(user.password)
      })

      cy.get(&quot;button[type='submit']&quot;).click()
      cy.url().should(&quot;equal&quot;, &quot;/login-success&quot;)
    })
  })
</code></pre>
<p><strong>Edit</strong><br/>
This is not a question regarding regular javascript, it's <a href=""https://www.cypress.io/"" rel=""noreferrer"">Cypress</a> specific and normal async / await won't work here.</p>
",
tags:"<javascript><cypress><cypress-origin>",
score:6,
creationDate:2023-05-16 10:41:05,
creationDate:2023-05-16 11:23:39,
score:10,
acceptedResponderReputation:161,
acceptedResponder:21434102,
QuestionerReputation:614,
Questioner:4230361}
{title:"How to use relative path 'fetch' in NextJs App Router?",
id:"https://stackoverflow.com/questions/76995053",
body:"<p>I'm trying to fetch data using <code>fetch(&quot;/api/status&quot;)</code>, but it only finds URL when I use the absolute path: <code>fetch(&quot;http://localhost:3000/api/status&quot;)</code> .
Without using your path saved in a variable.</p>
",
tags:"<javascript><reactjs><next.js><app-router>",
score:9,
creationDate:2023-08-28 17:55:24,
creationDate:2023-08-29 00:29:47,
score:10,
acceptedResponderReputation:4116,
acceptedResponder:1924653,
QuestionerReputation:317,
Questioner:14276718}
{title:"How do I handle custom types in Hibernate 6?",
id:"https://stackoverflow.com/questions/76418374",
body:"<p><strong>Issue Summary</strong></p>
<p>I have a custom type that I use in a project with Spring Boot 2/Hibernate 5. I am attempting to migrate this project to Spring Boot 3/Hibernate 6 and I cannot seem to get this custom type to work. This type is a wrapper around a UUID, and should be treated as a UUID when reading/writing from/to a database.</p>
<p><strong>Existing Code</strong></p>
<p>My <code>TypedId</code> class allows for distinguishing different UUIDs based on the entity they are associated with. It's a relatively simple class:</p>
<pre><code>data class TypedId&lt;T&gt;(val uuid: UUID = UUID.randomUUID()) : Serializable, Comparable&lt;TypedId&lt;T&gt;&gt; {
  constructor(id: String) : this(UUID.fromString(id))

  override fun compareTo(other: TypedId&lt;T&gt;): Int = this.uuid.compareTo(other.uuid)

  override fun toString(): String = uuid.toString()
}
</code></pre>
<p>This is configured in a base DatabaseRecord abstract class that all my JPA Entities extend:</p>
<pre><code>@MappedSuperclass
@TypeDef(defaultForType = TypedId::class, typeClass = TypedIdJpaType::class)
abstract class DatabaseRecord&lt;T&gt; : Persistable&lt;TypedId&lt;T&gt;&gt; {
    @Id var uid: TypedId&lt;T&gt; = TypedId()
    @Transient private var innerIsNew: Boolean = true
    override fun getId(): TypedId&lt;T&gt; = uid

    override fun isNew(): Boolean = innerIsNew

    private fun handleIsNew() {
        innerIsNew = false
    }

    @PrePersist
    open fun onPrePersist() {
        handleIsNew()
    }

    @PostLoad
    open fun onPostLoad() {
        handleIsNew()
    }
}
</code></pre>
<p>The important part of the above code is the <code>@TypeDef</code>. That points to the JPA Type class that configures the entire type definition. Here is the relevant code pulled in by that annotation:</p>
<pre><code>class TypedIdJpaType :
    AbstractSingleColumnStandardBasicType&lt;TypedId&lt;*&gt;&gt;(
        PostgresUUIDSqlTypeDescriptor.INSTANCE, TypedIdDescriptor.INSTANCE) {
  override fun getName(): String = TypedId::class.java.simpleName
  override fun registerUnderJavaType(): Boolean = true
}

class TypedIdDescriptor : AbstractTypeDescriptor&lt;TypedId&lt;*&gt;&gt;(TypedId::class.java) {
  companion object {
    val INSTANCE = TypedIdDescriptor()
  }
  override fun fromString(string: String): TypedId&lt;*&gt; = TypedId&lt;Any&gt;(string)

  override fun &lt;X : Any&gt; wrap(value: X?, options: WrapperOptions): TypedId&lt;*&gt;? =
      value?.let { nonNullValue -&gt;
        when (nonNullValue) {
          is ByteArray -&gt;
              TypedId(UUIDTypeDescriptor.ToBytesTransformer.INSTANCE.parse(nonNullValue))
          is String -&gt;
              TypedId&lt;Any&gt;(UUIDTypeDescriptor.ToStringTransformer.INSTANCE.parse(nonNullValue))
          is UUID -&gt; TypedId&lt;Any&gt;(nonNullValue)
          else -&gt; throw unknownWrap(nonNullValue::class.java)
        }
      }

  override fun &lt;X : Any&gt; unwrap(value: TypedId&lt;*&gt;, type: Class&lt;X&gt;, options: WrapperOptions): X =
      UUIDTypeDescriptor.INSTANCE.unwrap(value.uuid, type, options)
}

</code></pre>
<p>Lastly, here is my sample entity that I have created for very basic test cases involving all of this code:</p>
<pre><code>interface CountryId

@Entity
@Table(name = &quot;countries&quot;)
class Country(var name: String = &quot;&quot;) : DatabaseRecord&lt;CountryId&gt;()
</code></pre>
<p><strong>The Core Problem</strong></p>
<p>With Hibernate 6, <code>@TypeDef</code>, <code>TypeDescriptor</code>, etc are all removed. This means the entire mechanism for converting the <code>TypedId</code> no longer works. I've been trying to identify an alternate solution.</p>
<p><strong>The Question</strong></p>
<p>I've tried a <code>Converter</code>. I've tried implementing <code>AbstractStandardBasicType</code>. I'm just very lost right now.</p>
<p>I've been reading over the new Hibernate 6 user guide, but nothing I've gleaned from there has helped yet.</p>
<p><strong>Additional Details</strong></p>
<p>After posting this question, I realized the error message should be useful. This happens when I try to use a Spring <code>JpaRepository</code> to save (aka insert) the above entity:</p>
<pre><code>could not execute statement [ERROR: column &quot;uid&quot; is of type uuid but expression is of type bytea
  Hint: You will need to rewrite or cast the expression.
</code></pre>
",
tags:"<java><spring><hibernate><kotlin>",
score:9,
creationDate:2023-06-06 20:51:09,
creationDate:2023-06-09 17:05:40,
score:10,
acceptedResponderReputation:6253,
acceptedResponder:2223059,
QuestionerReputation:6253,
Questioner:2223059}
{title:"How many platform threads are used to schedule virtual threads",
id:"https://stackoverflow.com/questions/77704322",
body:"<p>If I create an executor service of virtual threads</p>
<pre><code>Executors.newVirtualThreadPerTaskExecutor()
</code></pre>
<p>I understand that each tasks is run over a virtual thread. These virtual threads are scheduled (hopefully interleaved) over platform threads.</p>
<p>How many platform threads are used here? I don't see any other API to specify the number of threads I want. I am running it on Macbook M1 Pro with Java 21.</p>
",
tags:"<java><virtual-threads>",
score:6,
creationDate:2023-12-22 14:52:22,
creationDate:2023-12-22 16:13:34,
score:10,
acceptedResponderReputation:21435,
acceptedResponder:5646962,
QuestionerReputation:5706,
Questioner:1699956}
{title:"Next.js (app directory) - Access page metadata in Layout",
id:"https://stackoverflow.com/questions/75443992",
body:"<p>I am using the new <code>app</code> folder structure with Next.js 13 project, and I would like to display a subheader in the <code>RootLayout</code> containing the value of the Page title (I'm using metadata on each page to configure the head title).</p>
<p>Is there any way to directly access that value with SSR?</p>
<p>Example  layout.js:</p>
<pre><code>export default function RootLayout({ children) {
    const pageTitle = &quot;???&quot;; // How to get this value?
    return (
      &lt;html&gt;
        &lt;body&gt;
          &lt;HeaderComponent /&gt;
          &lt;div className=&quot;subheader&quot;&gt;
            &lt;h3&gt;{pageTitle}&lt;/h3&gt;        &lt;------ HERE
          &lt;/div&gt;
          &lt;div className=&quot;content&quot;&gt;{children}&lt;/div&gt;
          &lt;FooterComponent /&gt;
        &lt;/body&gt;
      &lt;/html&gt;
    )
);
</code></pre>
<p>Example page.js:</p>
<pre><code>export const metadata = {
    title: &quot;Login&quot;
};

export default function Login() {
    return (
        &lt;div&gt;Login form&lt;/div&gt;
    );
}
</code></pre>
",
tags:"<javascript><reactjs><next.js>",
score:9,
creationDate:2023-02-14 06:00:21,
creationDate:2023-02-14 07:27:04,
score:10,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:2691,
Questioner:1389597}
{title:"Java 17: warning ""switch expression does not cover all possible input values"" is not shown if there is no return",
id:"https://stackoverflow.com/questions/75396340",
body:"<p>I'm developing with Java 17 in IntelliJ IDEA 2022.2.</p>
<p>In some cases <code>'switch' expression does not cover all possible input values</code> is shown, but in some not. I'd like to figure out why.</p>
<p>Let's assume that <code>entityType</code> is an <em>enum</em> with 3 values and I'm adding 4th one <code>TYPE_D</code>. So  I expect to see <code>'switch' expression does not cover all possible input values</code> errors where I use this enum in <code>switch</code>.</p>
<p>When it is shown:</p>
<pre class=""lang-java prettyprint-override""><code>public Map&lt;String, String&gt; getRecordDetails() {
    return switch (entityType) {
        case TYPE_A -&gt; Map.of(&quot;A&quot;,&quot;A&quot;);
        case TYPE_B -&gt; Map.of(&quot;B&quot;,&quot;B&quot;);
        case TYPE_C -&gt; Map.of(&quot;C&quot;,&quot;C&quot;);
    };
}
</code></pre>
<p>When it's not shown:</p>
<pre class=""lang-java prettyprint-override""><code>public String getRecordDetails() {
    StringBuilder stringBuilder = new StringBuilder();
    switch (entityType) {
        case TYPE_A -&gt; stringBuilder.append(&quot;A&quot;);
        case TYPE_B -&gt; stringBuilder.append(&quot;B&quot;);
        case TYPE_C -&gt; stringBuilder.append(&quot;C&quot;);
    };
    return stringBuilder.toString(); 
}
</code></pre>
<p>I see it is related when I do return of <code>switch</code> case, but why it is not shown when I have switch case inside of function's code?</p>
",
tags:"<java><switch-statement><switch-expression>",
score:8,
creationDate:2023-02-09 09:05:18,
creationDate:2023-02-09 09:25:56,
score:10,
acceptedResponderReputation:270770,
acceptedResponder:5133585,
QuestionerReputation:4154,
Questioner:548601}
{title:"Java 21 structured concurrency, need predictable subtask exception ordering",
id:"https://stackoverflow.com/questions/78073182",
body:"<p>I'm rather new to parallel code, and I tried to convert some code based on executors to structured concurrency, but I lost an important property that I must somehow keep.</p>
<p>Given the following code using structured concurrency with Java 21 preview:</p>
<pre><code>try (var scope = new StructuredTaskScope.ShutdownOnFailure()) {
    Subtask&lt;Data1&gt; d1Subtask = scope.fork(() -&gt; getData1(input));
    Subtask&lt;Data2&gt; d2Subtask = scope.fork(() -&gt; getData2(input));

    scope.join().throwIfFailed(); // [1]

    var data1 = d1Subtask.get(); // [2]
    var data2 = d2Subtask.get();

    return new Response(data1, data2);
}
</code></pre>
<p>In <code>[1]</code> an eventual first exception out of the two subtasks is thrown, and I don't want that. I need to run both tasks in parallel but I need the result of <code>d1Subtask</code> first in case it fails. In other words:</p>
<ul>
<li>if <code>d1Subtask</code> fails, I need to throw its exception (<code>d2Subtask</code> might be running, be successful or failed and none of it matters, exceptions from <code>d1Subtask</code> make the second task irrelevant);</li>
<li>if <code>d1Subtask</code> succeeds and <code>d2Subtask</code> fail, I need the exception from <code>d2Subtask</code>;</li>
<li>if both succeed, combine the results of both.</li>
</ul>
<p>If I change it to <code>scope.join();</code> then <code>[2]</code> can fail if <code>d1Subtask</code> is not done. There is <code>d1Subtask.state()</code> but waiting for it to leave the <code>State.UNAVAILABLE</code> state seems against the idea of structured concurrency.</p>
<p>This can be achieved with Executors and pure <code>StructuredTaskScope</code>, but that means potentially running <code>d2Subtask</code> to completion even when the scope could be shut down and that task aborted.</p>
<p>Given that, is possible to modify the code above to wait for the result of <code>d1Subtask</code> in a clean, readable way? I imagined that something like <code>scope.join(d1Subtask)</code> or <code>d1Subtask.join()</code> would be the way of doing it, or maybe a different policy, if that API existed.</p>
<hr />
<p>Edit: clearer explanation of the desired logic with each possible outcome.</p>
",
tags:"<java><parallel-processing><java-21><project-loom><structured-concurrency>",
score:7,
creationDate:2024-02-28 09:06:37,
creationDate:2024-02-29 10:55:49,
score:11,
acceptedResponderReputation:298103,
acceptedResponder:2711488,
QuestionerReputation:3402,
Questioner:455417}
{title:"optional chaining in javascript causing error in eslint",
id:"https://stackoverflow.com/questions/75659053",
body:"<p>i tried to use optional chaining in javascript but my eslint rules causing error .</p>
<p><strong>Error : Unsafe usage of optional chaining. If it short-circuits with 'undefined' the evaluation will throw TypeError  no-unsafe-optional-chaining</strong></p>
<pre><code>const { homeAddress, officeAddress} = Employee?.addresses;
</code></pre>
<p><strong>Error : Unsafe arithmetic operation on optional chaining. It can result in NaN
no-unsafe-optional-chaining</strong></p>
<pre><code>const AddressesCount = homeAddress?.length + officeAddress?.length 

</code></pre>
<p>how can I fix this issue ? I do not want to violate the rule</p>
",
tags:"<javascript><arrays><eslint><eslintrc><optional-chaining>",
score:9,
creationDate:2023-03-07 07:27:18,
creationDate:2023-03-07 07:35:23,
score:11,
acceptedResponderReputation:738,
acceptedResponder:10104786,
QuestionerReputation:347,
Questioner:12883042}
{title:"org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection Selenium ChromeDriver and Chrome v111",
id:"https://stackoverflow.com/questions/75718422",
body:"<p>I tried to invoke the website using Selenium and Chrome browser v111.</p>
<p>The browser is opening but the website is not invoking.
It is working properly but after updating chrome &quot;Version 111.0.5563.65 (Official Build) (64-bit)&quot; I'm getting this problem:</p>
<pre><code>org.openqa.selenium.remote.http.ConnectionFailedException: Unable to establish websocket connection
</code></pre>
<p>I tried,
Eclipse IDE for Enterprise Java Developers (includes Incubating components)
Version: 2020-12 (4.18.0)
Build id: 20201210-1552.</p>
<p>This is the code:</p>
<pre><code> package com.testng.library_Files;

 import org.openqa.selenium.WebDriver;
 import org.openqa.selenium.chrome.ChromeDriver;
 import org.openqa.selenium.chrome.ChromeOptions;
 import org.testng.annotations.Test;

 public class one {
     WebDriver driver=null;

     @Test(priority = 1)
     public void DoSetup()
     {
         //System.setProperty(&quot;webdriver.chrome.driver&quot;,&quot;./src/main/java/drivers/chromedriver.exe&quot;);
         ChromeOptions options= new ChromeOptions(); 
         options.setHeadless(true);
         //driver= new ChromeDriver(options);
         driver= new ChromeDriver();
     }

     @Test(priority = 2)
     public void LaunchURL()
     {
         driver.get(&quot;https://www.google.com&quot;);
     }
 }
</code></pre>
<p>Please help me to solve this issue.</p>
",
tags:"<java><google-chrome><selenium-webdriver><selenium-chromedriver><selenium-java>",
score:9,
creationDate:2023-03-13 05:51:57,
creationDate:2023-03-13 12:44:17,
score:11,
acceptedResponderReputation:213,
acceptedResponder:21386874,
QuestionerReputation:213,
Questioner:21386874}
{title:"How to bridge OpenTelemetry (opentelemetry-java-instrumentation) and Micrometer",
id:"https://stackoverflow.com/questions/78420982",
body:"<p><strong>My set-up:</strong></p>
<ol>
<li>Spring boot app based on version <code>3.1.3</code></li>
<li>Added dependency <code>spring-boot-starter-actuator</code></li>
<li>Added custom metric <code>MyHealthMetricsExportConfiguration</code> according to the <a href=""https://docs.spring.io/spring-boot/docs/current/reference/htmlsingle/#howto.actuator.map-health-indicators-to-metrics"" rel=""noreferrer"">documentation</a> (shown below)</li>
<li>Under <code>/actuator/metrics</code> I can see <code>health</code> metric</li>
<li>I've downloaded the latest <a href=""https://github.com/open-telemetry/opentelemetry-java-instrumentation"" rel=""noreferrer"">otel java agent from github</a></li>
<li>I've added the config in intellij &quot;vm options&quot;:</li>
</ol>
<blockquote>
<p>-javaagent:./opentelemetry-javaagent.jar <br />
-Dotel.metrics.exporter=otlp</p>
</blockquote>
<ol>
<li>I've run otel collector with <code>receiver</code> set to <code>otlp</code></li>
</ol>
<p><strong>The question</strong></p>
<p>I don't know how to make otel agent 'to see' and export spring metrics like f.e. 'MyHealthMetricsExportConfiguration'. On <a href=""https://grafana.com/blog/2022/05/04/how-to-capture-spring-boot-metrics-with-the-opentelemetry-java-instrumentation-agent/"" rel=""noreferrer"">that</a> blog it should be as simple as:</p>
<pre class=""lang-java prettyprint-override""><code>  // Unregister the OpenTelemetryMeterRegistry from Metrics.globalRegistry and make it available
  // as a Spring bean instead.
  @Bean
  @ConditionalOnClass(name = &quot;io.opentelemetry.javaagent.OpenTelemetryAgent&quot;)
  public MeterRegistry otelRegistry() {
    Optional&lt;MeterRegistry&gt; otelRegistry = Metrics.globalRegistry.getRegistries().stream()
        .filter(r -&gt; r.getClass().getName().contains(&quot;OpenTelemetryMeterRegistry&quot;))
        .findAny();
    otelRegistry.ifPresent(Metrics.globalRegistry::remove);
    return otelRegistry.orElse(null);
  }
</code></pre>
<p>But that doesn't work for me. First of all durig bean creation <code>Metrics.globalRegistry.getRegistries()</code> is empty. Second of all, no <code>health</code> metric is available in otel collector. What can I do to make this agent send my custom metric to collector ?</p>
<hr />
<pre class=""lang-java prettyprint-override""><code>@Configuration(proxyBeanMethods = false)
public class MyHealthMetricsExportConfiguration {

    public MyHealthMetricsExportConfiguration(MeterRegistry registry, HealthEndpoint healthEndpoint) {
        // This example presumes common tags (such as the app) are applied elsewhere
        Gauge.builder(&quot;health&quot;, healthEndpoint, this::getStatusCode).strongReference(true).register(registry);
    }

    private int getStatusCode(HealthEndpoint health) {
        Status status = health.health().getStatus();
        if (Status.UP.equals(status)) {
            return 3;
        }
        if (Status.OUT_OF_SERVICE.equals(status)) {
            return 2;
        }
        if (Status.DOWN.equals(status)) {
            return 1;
        }
        return 0;
    }

}
</code></pre>
",
tags:"<java><spring><spring-boot><open-telemetry-java>",
score:6,
creationDate:2024-05-02 18:07:45,
creationDate:2024-05-10 20:32:29,
score:11,
acceptedResponderReputation:4615,
acceptedResponder:2816631,
QuestionerReputation:966,
Questioner:3529850}
{title:"Why ngModel doesn't works on the last version of Angular 17?",
id:"https://stackoverflow.com/questions/78267281",
body:"<p>I am trying to make a form in my angular app, but when i want to implement ngModel on my form :</p>
<pre><code>    &lt;form (ngSubmit)=&quot;onSignUp()&quot; #signupForm=&quot;ngForm&quot;&gt;
        &lt;h1&gt;Connexion&lt;/h1&gt;
        &lt;input type=&quot;email&quot; name=&quot;mail&quot; [(ngModel)]=&quot;userLogin.email&quot; placeholder=&quot;Email&quot; /&gt;
        &lt;input type=&quot;password&quot; name=&quot;mdp&quot; [(ngModel)]=&quot;userLogin.password&quot; placeholder=&quot;Password&quot; /&gt;
        &lt;a href=&quot;#&quot;&gt;Mot de passe oublie ?&lt;/a&gt;
        &lt;button type=&quot;submit&quot;&gt;Se Connecter&lt;/button&gt;
    &lt;/form&gt;
</code></pre>
<p>I have this error :</p>
<p><strong>NG8002: Can't bind to 'ngModel' since it isn't a known property of 'input'. [plugin angular-compiler]</strong></p>
<p>I can't import FormsModule in the app.module.ts because this file doesn't exists on Angular 17, i only have an app.config.ts file.</p>
<p>Can someone please explain me how to do?</p>
",
tags:"<javascript><html><angular><typescript><angular-ngmodel>",
score:6,
creationDate:2024-04-03 11:26:33,
creationDate:2024-04-03 11:28:06,
score:11,
acceptedResponderReputation:56054,
acceptedResponder:5924562,
QuestionerReputation:75,
Questioner:18523063}
{title:"Android Studio error: ""6 issues were found when checking AAR metadata"",
id:"https://stackoverflow.com/questions/75122196",
body:"<p>This is a Gradle error which I get when running the empty &quot;hello world&quot; (building from Empty Activity template) without any added code,
Here is the error:</p>
<pre><code>FAILURE: Build failed with an exception.

* What went wrong:
Execution failed for task ':app:checkDebugAarMetadata'.
&gt; A failure occurred while executing com.android.build.gradle.internal.tasks.CheckAarMetadataWorkAction
   &gt; 6 issues were found when checking AAR metadata:
 

  1.  Dependency 'androidx.appcompat:appcompat-resources:1.6.0' requires libraries and applications that
      depend on it to compile against version 33 or later of the
      Android APIs.

      :app is currently compiled against android-32.

      Also, the maximum recommended compile SDK version for Android Gradle
      plugin 7.2.0 is 32.

      Recommended action: Update this project's version of the Android Gradle
      plugin to one that supports 33, then update this project to use
      compileSdkVerion of at least 33.

      Note that updating a library or application's compileSdkVersion (which
      allows newer APIs to be used) can be done separately from updating
      targetSdkVersion (which opts the app in to new runtime behavior) and
      minSdkVersion (which determines which devices the app can be installed
      on).

  2.  Dependency 'androidx.appcompat:appcompat:1.6.0' requires libraries and applications that
      depend on it to compile against version 33 or later of the
      Android APIs.

      :app is currently compiled against android-32.

      Also, the maximum recommended compile SDK version for Android Gradle
      plugin 7.2.0 is 32.

      Recommended action: Update this project's version of the Android Gradle
      plugin to one that supports 33, then update this project to use
      compileSdkVerion of at least 33.

      Note that updating a library or application's compileSdkVersion (which
      allows newer APIs to be used) can be done separately from updating
      targetSdkVersion (which opts the app in to new runtime behavior) and
      minSdkVersion (which determines which devices the app can be installed
      on).
</code></pre>
<p>I will stop the error messages after these two as I suspect fixing one will fix all six.</p>
<p>Below is my <code>build.gradle (:app)</code></p>
<pre><code>plugins {
    id 'com.android.application'
}

android {
    compileSdk 32

    defaultConfig {
        applicationId &quot;com.enetapplications.empty&quot;
        minSdk 28
        targetSdk 32
        versionCode 1
        versionName &quot;1.0&quot;

        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
}

dependencies {

    implementation 'androidx.appcompat:appcompat:1.6.0'
    implementation 'com.google.android.material:material:1.7.0'
    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'
    testImplementation 'junit:junit:4.13.2'
    androidTestImplementation 'androidx.test.ext:junit:1.1.5'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'
}
</code></pre>
<p>This error first occurred while building an app and I was only working with the xml and was ready to begin the java - then for testing I opened a blank &quot;empty&quot; project and received this exact same error thus seems something to do with how Android Studio is being configured.</p>
",
tags:"<java><android><xml><android-studio><gradle>",
score:7,
creationDate:2023-01-15 00:25:56,
creationDate:2023-01-15 00:46:03,
score:11,
acceptedResponderReputation:1674,
acceptedResponder:12805923,
QuestionerReputation:511,
Questioner:9877665}
{title:"'is' does not exist in type 'ConditionBuilder<StringSchema<string, AnyObject, undefined, """">>' for Yup (ReactJs)",
id:"https://stackoverflow.com/questions/76474047",
body:"<p>I'm having difficulty updating some old ReactJs code written in version 16 to 18, along with the Yup package also being updated (0.26.6 -&gt; 1.2.0), as it seems some of the syntax rules for this were changed and I'm getting strange errors I'm having trouble diagnosing and fixing.</p>
<pre><code>import helpers from '../../../Shared/validationHelpers';

const { domainName } = helpers.regEx;

export default Yup.object({
    enabled: Yup.boolean(),
    hostname: Yup.string().when('enabled', {
        is: true,
        then: Yup.string()
            .matches(domainName, 'Please provide a fully qualified domain name')
            .required('You must provide a hostname'),
        otherwise: Yup.string().notRequired(),
    }),
});
</code></pre>
<p>Helpers is just a file with a bunch of regex definitions, and domainName is regex for setting a domain name.</p>
<p>The error occurs on &quot;is: true&quot;:</p>
<pre><code>No overload matches this call.
  Overload 1 of 4, '(keys: string | string[], builder: ConditionBuilder&lt;StringSchema&lt;string, AnyObject, undefined, &quot;&quot;&gt;&gt;): StringSchema&lt;string, AnyObject, undefined, &quot;&quot;&gt;', gave the following error.
    Argument of type '{ is: boolean; then: Yup.StringSchema&lt;string, Yup.AnyObject, undefined, &quot;&quot;&gt;; otherwise: Yup.StringSchema&lt;string, Yup.AnyObject, undefined, &quot;&quot;&gt;; }' is not assignable to parameter of type 'ConditionBuilder&lt;StringSchema&lt;string, AnyObject, undefined, &quot;&quot;&gt;&gt;'.
      Object literal may only specify known properties, and 'is' does not exist in type 'ConditionBuilder&lt;StringSchema&lt;string, AnyObject, undefined, &quot;&quot;&gt;&gt;'.
</code></pre>
<p>Any help is much appreciated.</p>
",
tags:"<javascript><reactjs><yup>",
score:7,
creationDate:2023-06-14 13:18:35,
creationDate:2023-08-24 15:35:26,
score:11,
acceptedResponderReputation:126,
acceptedResponder:17681430,
QuestionerReputation:183,
Questioner:20286214}
{title:"What's the Raku equivalent of the super keyword as used in JavaScript and Python?",
id:"https://stackoverflow.com/questions/76624477",
body:"<p>Whenever you extend a class in JavaScript or Python, the derived class must use the <code>super</code> keyword in order to set attributes and/or invoke methods and constructor in the base class. For example:</p>
<pre class=""lang-js prettyprint-override""><code>class Rectangle {
    constructor(length, width) {
        this.name = &quot;Rectangle&quot;;
        this.length = length;
        this.width = width;
    }

    shoutArea() {
        console.log(
            `I AM A ${this.name.toUpperCase()} AND MY AREA IS ${this.length * this.width}`
        );
    }
    
    rectHello() {
        return &quot;Rectanglish: hello&quot;;
    }
}

class Square extends Rectangle {
    constructor(length) {
        super(length, length);
        this.name = &quot;Square&quot;
    }
    
    squaHello() {
        const h = super.rectHello();
        return &quot;Squarish:&quot; + h.split(':')[1];
    }
}

const rect = new Rectangle(6, 4);
rect.shoutArea(); //=&gt; I AM A RECTANGLE AND MY AREA IS 24

const squa = new Square(5);
squa.shoutArea(); //=&gt; I AM A SQUARE AND MY AREA IS 25

console.log(squa.squaHello()); //=&gt; Squarish: hello
</code></pre>
",
tags:"<javascript><python><oop><inheritance><raku>",
score:11,
creationDate:2023-07-05 22:43:52,
creationDate:2023-07-06 02:13:59,
score:11,
acceptedResponderReputation:32404,
acceptedResponder:1077672,
QuestionerReputation:3076,
Questioner:10824322}
{title:"Problem of Java String intern method when using StringBuilder with append method creating a String",
id:"https://stackoverflow.com/questions/77242671",
body:"<pre><code>    public static void main(String[] args) {
        String a = new StringBuilder(&quot;Jav&quot;).toString();
        a.intern();
        String c = &quot;Jav&quot;;
        System.out.println(a == c);  //false
    }
</code></pre>
<pre><code>    public static void main(String[] args) {
        String a = new StringBuilder(&quot;Ja&quot;).append(&quot;v&quot;).toString();
        a.intern();
        String c = &quot;Jav&quot;;
        System.out.println(a == c);  //true
    }
</code></pre>
<p><a href=""https://i.sstatic.net/g6pD2.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/g6pD2.png"" alt=""enter image description here"" /></a></p>
<p>I do not understand why first one would print out false, but the second one print out true. I think those should print out true because after calling the intern method, the reference of a would be written into the string pool and c will point to the reference of a. Can someone explain the difference? Thanks!</p>
<p>My JDK Version: OpenJDK 17.0.7</p>
<p>Btw I also get the same result when using StringBuffer.</p>
",
tags:"<java><string>",
score:7,
creationDate:2023-10-06 07:46:14,
creationDate:2023-10-06 07:56:20,
score:11,
acceptedResponderReputation:16338,
acceptedResponder:10871900,
QuestionerReputation:81,
Questioner:22693948}
{title:"Java 8 to Java 17 ThreadLocal issue",
id:"https://stackoverflow.com/questions/76911618",
body:"<p>I have code that works well in Java 8, but it doesn't work when I migrate it to Java 17. It involves ThreadLocal and CompletableFuture.runAsync.</p>
<p>Here are the classes:</p>
<pre><code>public class UriParameterHandler {
}

public class DateRangeEntity {
    public String getCurrentDate(){
        DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;yyyy/MM/dd HH:mm:ss&quot;);
        LocalDateTime now = LocalDateTime.now();
        return dtf.format(now);
    }
}

public class SessionHandler {

    private static ThreadLocal&lt;SessionHandler&gt; instance = new InheritableThreadLocal&lt;&gt;();
    private UriParameterHandler uriParameterHandler;
    private DateRangeEntity dateRangeEntity;

    private SessionHandler() {
        instance.set(this);
    }

    public static void initialize() {
        SessionHandler handler = new SessionHandler();
        handler.uriParameterHandler = new UriParameterHandler();
    }

    public static UriParameterHandler getUriParameterHandler() {
        return instance.get().uriParameterHandler;
    }

    public static void setUriParameterHandler(UriParameterHandler uriParameterHandler) {
        instance.get().uriParameterHandler = uriParameterHandler;
    }

    public static DateRangeEntity getDateRangeEntity() {
        return instance.get().dateRangeEntity;
    }

    public static void setDateRangeEntity(DateRangeEntity dateRangeEntity) {
        instance.get().dateRangeEntity = dateRangeEntity;
    }
}

public class LocalThread implements Runnable{
    @Override
    public void run() {
        if(SessionHandler.getDateRangeEntity()!=null){
            System.out.println(&quot;not null&quot;);
        }else{
            System.out.println(&quot;is null&quot;);
        }
    }
}

public class SessionHandlerMain {

    public static void main(String[] args) {
        threadLocalDemo();
    }

    private static void threadLocalDemo(){
        SessionHandler.initialize();
        SessionHandler.setDateRangeEntity(new DateRangeEntity());

        //works in java8 but not in java17
        CompletableFuture.runAsync(()-&gt;{
            if(SessionHandler.getDateRangeEntity()!=null){
                System.out.println(&quot;not null&quot;);
            }else{
                System.out.println(&quot;is null&quot;);
            }

        }).exceptionally(e-&gt;{
            e.printStackTrace();
            return null;
        });

        /*
        LocalThread localThread = new LocalThread();
        localThread.run();
         */
    }
}
</code></pre>
<p>In the <code>threadLocalDemo()</code> in <code>SessionHandlerMain</code>, I first set new <code>DateRangeEntity</code> object for the <code>SessionHandler</code> and then in a <code>runAsync()</code> method, I call the <code>getDateRangeEntity()</code> to check if the object is not null. This works in Java 8 and prints &quot;not null&quot;, but when I migrated to Java 17, this now throws this exception:</p>
<pre class=""lang-none prettyprint-override""><code>java.util.concurrent.CompletionException: java.lang.NullPointerException: Cannot read field dateRangeEntity because the return value of java.lang.ThreadLocal.get() is null
        at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(CompletableFuture.java:315)
        at java.base/java.util.concurrent.CompletableFuture.completeThrowable(CompletableFuture.java:320)
        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.run(CompletableFuture.java:1807)
        at java.base/java.util.concurrent.CompletableFuture$AsyncRun.exec(CompletableFuture.java:1796)
        at java.base/java.util.concurrent.ForkJoinTask.doExec(ForkJoinTask.java:373)
        at java.base/java.util.concurrent.ForkJoinPool$WorkQueue.topLevelExec(ForkJoinPool.java:1182)
        at java.base/java.util.concurrent.ForkJoinPool.scan(ForkJoinPool.java:1655)
        at java.base/java.util.concurrent.ForkJoinPool.runWorker(ForkJoinPool.java:1622)
        at java.base/java.util.concurrent.ForkJoinWorkerThread.run(ForkJoinWorkerThread.java:165)
Caused by: java.lang.NullPointerException: Cannot read field dateRangeEntity because the return value of java.lang.ThreadLocal.get() is null
</code></pre>
<p>However if I move the logic of the <code>runAsync()</code> method in a class that extends <code>Runnable</code> then this works in Java 17.</p>
<p>Can someone please provide me some insight of why is this behavior different in Java 17 and if there is any other workaround for it?</p>
",
tags:"<java><multithreading><completable-future><java-17><thread-local>",
score:6,
creationDate:2023-08-16 08:04:06,
creationDate:2023-08-16 12:53:49,
score:11,
acceptedResponderReputation:71899,
acceptedResponder:8922,
QuestionerReputation:83,
Questioner:22397881}
{title:"Building Spring Boot 3.1.5 image using paketobuildpacks via maven plugin is not working",
id:"https://stackoverflow.com/questions/77376239",
body:"<p>I'm using Spring Boot <code>3.1.5</code>, Java <code>21</code> and maven <code>3.9.5</code>. I've got the following error when running <code>mvn spring-boot:build-image</code></p>
<pre><code>[INFO]  &gt; Pulling builder image 'docker.io/paketobuildpacks/builder:base' 100%
[INFO]  &gt; Pulled builder image 'paketobuildpacks/builder@sha256:17ea21162ba8c7717d3ead3ee3836a368aced7f02f2e59658e52029bd6d149e7'
[INFO]  &gt; Pulling run image 'docker.io/paketobuildpacks/run:base-cnb' 100%
[INFO]  &gt; Pulled run image 'paketobuildpacks/run@sha256:1af9935d8987fd52b2266d288200c9482d1dd5529860bbf5bc2d248de1cb1a38'
[INFO]  &gt; Executing lifecycle version v0.16.5
[INFO]  &gt; Using build cache volume 'pack-cache-8847f704ad41.build'
[INFO] 
[INFO]  &gt; Running creator
[INFO]     [creator]     ===&gt; ANALYZING
[INFO]     [creator]     Image with name &quot;docker.io/library/elevate-insights:0.0.1-SNAPSHOT&quot; not found
[INFO]     [creator]     ===&gt; DETECTING
[INFO]     [creator]     6 of 26 buildpacks participating
[INFO]     [creator]     paketo-buildpacks/ca-certificates   3.6.3
[INFO]     [creator]     paketo-buildpacks/bellsoft-liberica 10.2.6
[INFO]     [creator]     paketo-buildpacks/syft              1.32.1
[INFO]     [creator]     paketo-buildpacks/executable-jar    6.7.4
[INFO]     [creator]     paketo-buildpacks/dist-zip          5.6.4
[INFO]     [creator]     paketo-buildpacks/spring-boot       5.26.1
[INFO]     [creator]     ===&gt; RESTORING
[INFO]     [creator]     ===&gt; BUILDING
[INFO]     [creator]     
[INFO]     [creator]     Paketo Buildpack for CA Certificates 3.6.3
[INFO]     [creator]       https://github.com/paketo-buildpacks/ca-certificates
[INFO]     [creator]       Launch Helper: Contributing to layer
[INFO]     [creator]         Creating /layers/paketo-buildpacks_ca-certificates/helper/exec.d/ca-certificates-helper
[INFO]     [creator]     
[INFO]     [creator]     Paketo Buildpack for BellSoft Liberica 10.2.6
[INFO]     [creator]       https://github.com/paketo-buildpacks/bellsoft-liberica
[INFO]     [creator]       Build Configuration:
[INFO]     [creator]         $BP_JVM_JLINK_ARGS           --no-man-pages --no-header-files --strip-debug --compress=1  configure custom link arguments (--output must be omitted)
[INFO]     [creator]         $BP_JVM_JLINK_ENABLED        false                                                        enables running jlink tool to generate custom JRE
[INFO]     [creator]         $BP_JVM_TYPE                 JRE                                                          the JVM type - JDK or JRE
[INFO]     [creator]         $BP_JVM_VERSION              21                                                           the Java version
[INFO]     [creator]       Launch Configuration:
[INFO]     [creator]         $BPL_DEBUG_ENABLED           false                                                        enables Java remote debugging support
[INFO]     [creator]         $BPL_DEBUG_PORT              8000                                                         configure the remote debugging port
[INFO]     [creator]         $BPL_DEBUG_SUSPEND           false                                                        configure whether to suspend execution until a debugger has attached
[INFO]     [creator]         $BPL_HEAP_DUMP_PATH                                                                       write heap dumps on error to this path
[INFO]     [creator]         $BPL_JAVA_NMT_ENABLED        true                                                         enables Java Native Memory Tracking (NMT)
[INFO]     [creator]         $BPL_JAVA_NMT_LEVEL          summary                                                      configure level of NMT, summary or detail
[INFO]     [creator]         $BPL_JFR_ARGS                                                                             configure custom Java Flight Recording (JFR) arguments
[INFO]     [creator]         $BPL_JFR_ENABLED             false                                                        enables Java Flight Recording (JFR)
[INFO]     [creator]         $BPL_JMX_ENABLED             false                                                        enables Java Management Extensions (JMX)
[INFO]     [creator]         $BPL_JMX_PORT                5000                                                         configure the JMX port
[INFO]     [creator]         $BPL_JVM_HEAD_ROOM           0                                                            the headroom in memory calculation
[INFO]     [creator]         $BPL_JVM_LOADED_CLASS_COUNT  35% of classes                                               the number of loaded classes in memory calculation
[INFO]     [creator]         $BPL_JVM_THREAD_COUNT        250                                                          the number of threads in memory calculation
[INFO]     [creator]         $JAVA_TOOL_OPTIONS                                                                        the JVM launch flags
[INFO]     [creator]         Using Java version 21 from BP_JVM_VERSION
[INFO]     [creator]       No valid JRE available, providing matching JDK instead. Using a JDK at runtime has security implications.
[INFO]     [creator]     unable to invoke layer creator
[INFO]     [creator]     unable to get dependency 
[INFO]     [creator]     unable to download 
[INFO]     [creator]     unable to request 
[INFO]     [creator]     Get &quot;&quot;: unsupported protocol scheme &quot;&quot;
[INFO]     [creator]        : Contributing to layer
[INFO]     [creator]       Warning: Dependency has no SHA256. Skipping cache.
[INFO]     [creator]         Downloading from 
[INFO]     [creator]     ERROR: failed to build: exit status 1
[INFO] ------------------------------------------------------------------------
[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  8.278 s
[INFO] Finished at: 2023-10-27T18:49:36+01:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.springframework.boot:spring-boot-maven-plugin:3.1.5:build-image (default-cli) on project elevate-insights: Execution default-cli of goal org.springframework.boot:spring-boot-maven-plugin:3.1.5:build-image failed: Builder lifecycle 'creator' failed with status code 51 -&gt; [Help 1]

</code></pre>
<p>Here's a snippet of my pom file:</p>
<pre><code>    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;3.1.5&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;

// omitted 

    &lt;properties&gt;
        &lt;java.version&gt;21&lt;/java.version&gt;
    &lt;/properties&gt;

// omitted

            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;excludes&gt;
                        &lt;exclude&gt;
                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
                        &lt;/exclude&gt;
                    &lt;/excludes&gt;
                    &lt;image&gt;
                        &lt;env&gt;
                            &lt;BP_JVM_VERSION&gt;21&lt;/BP_JVM_VERSION&gt;
                        &lt;/env&gt;
                    &lt;/image&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
</code></pre>
<p><strong>N.B.: tried with Java 17 with no joy either</strong></p>
",
tags:"<spring-boot><spring-boot-maven-plugin><buildpack><java-21>",
score:6,
creationDate:2023-10-27 18:04:13,
creationDate:2023-10-28 14:15:11,
score:11,
acceptedResponderReputation:15006,
acceptedResponder:1585136,
QuestionerReputation:3363,
Questioner:7066647}
{title:"SonarQube ""Do not define components during render"" with MUI/TS but can't send component as prop",
id:"https://stackoverflow.com/questions/75414021",
body:"<p>I am getting the following error during sonarqube scan:</p>
<blockquote>
<p>Do not define components during render. React will see a new component type on every render and destroy the entire subtree’s DOM nodes and state. Instead, move this component definition out of the parent component “SectionTab” and pass data as props. If you want to allow component creation in props, set allowAsProps option to true.</p>
</blockquote>
<p><a href=""https://i.sstatic.net/plXE6.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/plXE6.png"" alt=""enter image description here"" /></a></p>
<p>I understand that it says that I should send the component as a prop from the parent, but I don't want to send the icon everytime that I want to use this component, is there another way to get this fixed?</p>
<pre class=""lang-tsx prettyprint-override""><code>import Select from &quot;@mui/material/Select&quot;;
import { FontAwesomeIcon } from &quot;@fortawesome/react-fontawesome&quot;;
import { faAngleDown } from &quot;@fortawesome/pro-solid-svg-icons/faAngleDown&quot;;

const AngleIcon = ({ props }: { props: any }) =&gt; {
  return (
    &lt;FontAwesomeIcon
      {...props}
      sx={{ marginRight: &quot;10px&quot; }}
      icon={faAngleDown}
      size=&quot;xs&quot;
    /&gt;
  );
};

const SectionTab = () =&gt; {
  return (
    &lt;Select
      id=&quot;course_type&quot;
      readOnly={true}
      IconComponent={(props) =&gt; &lt;AngleIcon props={props} /&gt;}
      variant=&quot;standard&quot;
      defaultValue=&quot;cr&quot;
      disableUnderline
    /&gt;
  );
};

export default SectionTab;
</code></pre>
",
tags:"<javascript><reactjs><react-hooks><sonarqube><react-typescript>",
score:6,
creationDate:2023-02-10 16:57:25,
creationDate:2023-02-10 17:08:09,
score:11,
acceptedResponderReputation:191916,
acceptedResponder:5157454,
QuestionerReputation:1919,
Questioner:9296982}
{title:"Is there a way to use react-redux dispatch inside the loader function of react-router-dom?",
id:"https://stackoverflow.com/questions/75383036",
body:"<p>I am using <code>react-router-dom@6.8.1</code> along with <code>redux-toolkit</code>. I have a typical scenario where I'm making a backend call to fetch data (this is happening inside a loader function offered by RRD).</p>
<p>Once I fetch the data, I need to update the redux state inside the loader function. (This way, I can avoid another <code>useEffect</code> inside my function component). Here is a code snippet to give you a better understanding.</p>
<pre><code>const router = createBrowserRouter([
  {
    path: &quot;/&quot;,
    errorElement: &lt;Error /&gt;,
    children: [
      {
        index: true,
        element: &lt;Home /&gt;,
        loader: async () =&gt; {
          try {
            const response = await axios({
              method: &quot;get&quot;,
              url: &quot;some URL here&quot;,
            });
            // State update should happen here using dispatch. **********
            return response;
          } catch (e: any) {
            throw json(
              { message: &quot;Error occured while fetching data&quot; },
              { status: e.status }
            );
          }
        },
      },
    ],
  },
]);
</code></pre>
<p>Since we cannot use <code>useDispatch</code> outside of the React function components or custom hooks, I am wondering if there is any way to achieve this.
I am glad to provide any more details like package.json etc, upon requirement.</p>
",
tags:"<javascript><reactjs><react-redux><react-router-dom>",
score:14,
creationDate:2023-02-08 08:27:49,
creationDate:2023-02-08 10:21:07,
score:11,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:335,
Questioner:13670175}
{title:"electron-store returns ""Property 'set' / 'get' does not exist on type"",
id:"https://stackoverflow.com/questions/78429953",
body:"<p>I'm using <code>electron-store</code> for a demo electron project. In my <code>main.ts</code> process, I'm attempting to initialize the store and retrieve a simple settings object. It looks like this:</p>
<pre><code>// main.ts
import Store, { Schema } from 'electron-store';

type settingsType = {
  settings: {
    environment: 'development' | 'test' | 'prod',
    refreshInterval: number,
  }
}

const schema: Schema&lt;settingsType&gt; = {
  settings: {
    type: 'object',
    properties: {
      environment: {
        type: 'string',
        enum: ['development', 'test', 'prod'],
        default: 'development',
      },
      refreshInterval: {
        type: 'number',
        minimum: 10000, // ten seconds
        maximum: 600000, // ten min
        default: 60000, // one min
      }
    },
    default: {},
    required: ['environment', 'refreshInterval'],
  }
}

const store = new Store&lt;settingsType&gt;({schema});

// ERROR: TS2339: Property 'get' does not exist on type 'ElectronStore&lt;settingsType&gt;'.
let settingsStore: settingsType = store.get('settings');
</code></pre>
<p>I think I'm defining everything as expected, but I'm still getting a <code>TS</code> error from the <code>store.get</code> call. What am I missing?</p>
",
tags:"<javascript><typescript><electron>",
score:9,
creationDate:2024-05-04 18:09:13,
creationDate:2024-05-09 05:22:27,
score:11,
acceptedResponderReputation:126,
acceptedResponder:23517413,
QuestionerReputation:10422,
Questioner:1721969}
{title:"Thread.currentThread().getName() returns empty string """" for Virtual Threads created via Executors.newVirtualThreadPerTaskExecutor()",
id:"https://stackoverflow.com/questions/76180420",
body:"<p>I am working with Java 19. I have tried to use newly introduced virtual threads as follows:</p>
<pre class=""lang-java prettyprint-override""><code>public static void main(String[] args)  {

    System.out.println(&quot;Started with virutal threads&quot;);
    try (ExecutorService virtualService = Executors.newVirtualThreadPerTaskExecutor()) {
        virtualService.submit(() -&gt; System.out.println(&quot;[&quot; + Thread.currentThread().getName() + &quot;] virtual task 1&quot;));
        virtualService.submit(() -&gt; System.out.println(&quot;[&quot; + Thread.currentThread().getName() + &quot;] virtual task 2&quot;));
    }
    System.out.println(&quot;Finished&quot;);
}
</code></pre>
<p>The output of this program is:</p>
<pre><code>Started with virutal threads
[] virtual task 2
[] virtual task 1
Finished
</code></pre>
<p>Why Thread.currentThread().getName() does not have any name?</p>
<p>Followup question: How to identify virtual threads between eachother? (how to recognize them) So the output would look like</p>
<pre><code>[thread-1] virtual task 2
[thread-0] virtual task 1
</code></pre>
",
tags:"<java><multithreading><java-19><virtual-threads>",
score:17,
creationDate:2023-05-05 08:51:06,
creationDate:2023-05-05 15:25:50,
score:11,
acceptedResponderReputation:338171,
acceptedResponder:642706,
QuestionerReputation:2806,
Questioner:2695990}
{title:"WebDriverManager setup failing to download chromedriver 116",
id:"https://stackoverflow.com/questions/76932496",
body:"<p>Here is the code to replicate the issue. This was working fine till chromedriver 114 but it broke as soon as chrome browser got upgraded to 116.</p>
<pre><code>import org.openqa.selenium.WebDriver;
import org.openqa.selenium.chrome.ChromeDriver;
import io.github.bonigarcia.wdm.WebDriverManager;

public class ChromeTest {
public static void main(String args[]) {
    WebDriverManager.chromedriver().setup();
    WebDriver driver  = new ChromeDriver();
    driver.get(&quot;https://www.google.com/&quot;);
    String title = driver.getTitle();
    System.out.println(title);
    driver.quit();
  }
}
</code></pre>
<p>The error shows that the Library is unable access the version file for 116</p>
",
tags:"<selenium-webdriver><automation><selenium-chromedriver><webdrivermanager-java>",
score:11,
creationDate:2023-08-18 20:49:17,
creationDate:2023-08-20 13:46:58,
score:11,
acceptedResponderReputation:126,
acceptedResponder:22418737,
QuestionerReputation:262,
Questioner:6251262}
{title:"Giving HTML form to FormData through event.target is throwing Argument of type 'EventTarget' is not assignable to parameter of type 'HTMLFormElement'",
id:"https://stackoverflow.com/questions/75285468",
body:"<p>I'm trying to get the values from a <code>form</code> into <code>FormData</code>:</p>
<pre><code>  const handleSubmit = (e: FormEvent&lt;HTMLFormElement&gt;) =&gt; {
    e.preventDefault();
    const formData = new FormData(e.target as HTMLFormElement);
    const value = formData.get('origin') ? 'open' : 'on';
    updateResizingOptionsQuery.mutate({ value });
  };
</code></pre>
<p>Since React sends <code>SynteticEvents</code>, the interface of <code>e.target</code> does not fit the <code>FormData</code> constructor. In the example, I'm casting the type which is not ideal. What would be a better version of that code?</p>
<p>Without casting this lint error is thrown:</p>
<blockquote>
<p>Argument of type 'EventTarget' is not assignable to parameter of type 'HTMLFormElement'.
Type 'EventTarget' is missing the following properties from type 'HTMLFormElement': acceptCharset, action, autocomplete, elements, and 297 more.</p>
</blockquote>
",
tags:"<javascript><reactjs><typescript>",
score:7,
creationDate:2023-01-30 13:59:31,
creationDate:2023-01-30 22:12:24,
score:11,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:9672,
Questioner:7717583}
{title:"""Error in native callback"" using ffi-napi in electron and electron-builder",
id:"https://stackoverflow.com/questions/75668307",
body:"<p>I have a simple electron app, trying to use <code>ffi-napi</code> to call a dll file, but I'm getting an &quot;Error in native callback&quot; when running the electron build. Here is my setup:</p>
<p><strong>package.json</strong></p>
<pre><code>{
  &quot;name&quot;: &quot;electron-test&quot;,
  &quot;version&quot;: &quot;1.0.0&quot;,
  &quot;description&quot;: &quot;&quot;,
  &quot;main&quot;: &quot;main.js&quot;,
  &quot;scripts&quot;: {
    &quot;start&quot;: &quot;electron .&quot;,
    &quot;postinstall&quot;: &quot;electron-builder install-app-deps&quot;,
    &quot;dist&quot;: &quot;electron-builder&quot;
  },
  &quot;author&quot;: &quot;&quot;,
  &quot;license&quot;: &quot;ISC&quot;,
  &quot;devDependencies&quot;: {
    &quot;electron&quot;: &quot;^23.1.2&quot;,
    &quot;electron-builder&quot;: &quot;^23.6.0&quot;
  },
  &quot;dependencies&quot;: {
    &quot;ffi-napi&quot;: &quot;^4.0.3&quot;
  },
  &quot;build&quot;: {
    &quot;appId&quot;: &quot;electron-test&quot;,
    &quot;win&quot;: {
      &quot;target&quot;: &quot;portable&quot;
    },
    &quot;asar&quot;: false
  }
}
</code></pre>
<p><strong>main.js</strong></p>
<pre><code>const { app, BrowserWindow } = require('electron')
const ffi = require('ffi-napi');

const createWindow = () =&gt; {
    const win = new BrowserWindow({
        width: 800,
        height: 600,
    })

    win.loadFile('index.html')
}

app.whenReady().then(() =&gt; {
    createWindow()
})
</code></pre>
<p>and <strong>index.html</strong></p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html&gt;

&lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot; /&gt;
    &lt;!-- https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP --&gt;
    &lt;meta http-equiv=&quot;Content-Security-Policy&quot; content=&quot;default-src 'self'; script-src 'self'&quot; /&gt;
    &lt;meta http-equiv=&quot;X-Content-Security-Policy&quot; content=&quot;default-src 'self'; script-src 'self'&quot; /&gt;
    &lt;title&gt;Hello from Electron renderer!&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
    &lt;h1&gt;Hello from Electron renderer!&lt;/h1&gt;
    &lt;p&gt;👋&lt;/p&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
<p>I ran these in order:</p>
<ol>
<li><code>npm i</code> which installs the modules and runs build script on the <code>ffi-napi</code> package</li>
<li><code>npm run start</code></li>
</ol>
<p>And received this error:</p>
<pre><code>App threw an error during load
Error: Error in native callback
    at process.func [as dlopen] (node:electron/js2c/asar_bundle:2:1822)
    at Module._extensions..node (node:internal/modules/cjs/loader:1259:18)
    at Object.func [as .node] (node:electron/js2c/asar_bundle:2:1822)
    at Module.load (node:internal/modules/cjs/loader:1044:32)
    at Module._load (node:internal/modules/cjs/loader:885:12)
    at f._load (node:electron/js2c/asar_bundle:2:13330)
    at Module.require (node:internal/modules/cjs/loader:1068:19)
    at require (node:internal/modules/cjs/helpers:103:18)
    at load (C:\workspace\temp\node_modules\node-gyp-build\node-gyp-build.js:22:10)
    at Object.&lt;anonymous&gt; (C:\workspace\temp\node_modules\ref-napi\lib\ref.js:8:53)
</code></pre>
<p>I'm not sure how to solve this, any help will be appreciated. Thanks.</p>
",
tags:"<javascript><node.js><electron><ffi>",
score:7,
creationDate:2023-03-08 00:02:29,
creationDate:2023-04-10 16:08:33,
score:11,
acceptedResponderReputation:1678,
acceptedResponder:2992810,
QuestionerReputation:257,
Questioner:432556}
{title:"""Migrations"" hit an invalid opcode while deploying",
id:"https://stackoverflow.com/questions/76377136",
body:"<p>I have suddenly started getting '&quot;Migrations&quot; hit an invalid opcode while deploying' error when I do 'truffle deploy' command.</p>
<p>My migrations file has not changed so I'm not sure why I am suddenly getting this error. Everyone who's posted for the same error just suggests downloading latest versions of ganache/truffle but I have updated my truffle and ganache to the most up to date versions and still getting the error.</p>
<h1>This is the full error:
⠋ Fetching solc version list from solc-bin. Attempt #1
Starting migrations...</h1>
<blockquote>
<p>Network name:    'development'
Network id:      5777
Block gas limit: 6721975 (0x6691b7)</p>
</blockquote>
<h1>1_initial_migration.js</h1>
<h2>⠙ Fetching solc version list from solc-bin. Attempt #1
Deploying 'Migrations'</h2>
<p>*** Deployment Failed ***st from solc-bin. Attempt #1</p>
<p>&quot;Migrations&quot; hit an invalid opcode while deploying. Try:</p>
<ul>
<li>Verifying that your constructor params satisfy all assert conditions.</li>
<li>Verifying your constructor code doesn't access an array out of bounds.</li>
<li>Adding reason strings to your assert statements.</li>
</ul>
<p>Exiting: Review successful transactions manually by checking the transaction hashes above on Etherscan.</p>
<p>Error:  *** Deployment Failed ***</p>
<p>&quot;Migrations&quot; hit an invalid opcode while deploying. Try:</p>
<ul>
<li>Verifying that your constructor params satisfy all assert conditions.</li>
<li>Verifying your constructor code doesn't access an array out of bounds.</li>
<li>Adding reason strings to your assert statements.</li>
</ul>
<pre><code>at /usr/local/lib/node_modules/truffle/build/webpack:/packages/deployer/src/deployment.js:330:1
</code></pre>
<p>Truffle v5.9.2 (core: 5.9.2)
Node v18.7.0</p>
<p>Migrations.sol</p>
<pre><code>// SPDX-License-Identifier: MIT
pragma solidity ^0.8.9;

contract Migrations {
    address public owner;
    uint256 public lastCompletedMigration;

    constructor() {
        owner = msg.sender;
    }

    modifier restricted() {
        require(msg.sender == owner, &quot;Restricted to contract owner&quot;);
        _;
    }

    function setCompleted(uint256 completed) public restricted {
        lastCompletedMigration = completed;
    }

    function upgrade(address new_address) public restricted {
        Migrations upgraded = Migrations(new_address);
        upgraded.setCompleted(lastCompletedMigration);
    }
}
</code></pre>
<p>1_initial_migration.js</p>
<pre><code>const Migrations = artifacts.require(&quot;Migrations&quot;);

module.exports = function(deployer) {
    deployer.deploy(Migrations);
};
</code></pre>
",
tags:"<javascript><ethereum><solidity><truffle><ganache>",
score:7,
creationDate:2023-05-31 20:43:22,
creationDate:2023-05-31 21:45:33,
score:12,
acceptedResponderReputation:136,
acceptedResponder:21996474,
QuestionerReputation:111,
Questioner:5556847}
{title:"JS structuredClone: not truly deep copy?",
id:"https://stackoverflow.com/questions/78710886",
body:"<p>Today, while investigating a bug in our app, I witnessed a very surprising behavior in JavaScript's <code>structuredClone</code>.</p>
<p>This method promises to create a deep clone of a given value. This was previously achieved using the <code>JSON.parse(JSON.stringify(value))</code> technique, and on paper <code>structuredClone</code> appears to be a superset per se of this technique, yielding the same result, while also supporting things like Dates and circular references.</p>
<p>However, today I learned that if you use <code>structuredClone</code> to clone an object containing reference type variables pointing to the same reference, these references will be kept, as opposed to creating new values with different references.</p>
<p>Here is a toy example to demonstrate this behavior:</p>
<pre class=""lang-js prettyprint-override""><code>const someSharedArray = ['foo', 'bar']

const myObj = {
  field1: someSharedArray,
  field2: someSharedArray,
  field3: someSharedArray,
}

const myObjCloned = structuredClone(myObj)

console.log(myObjCloned)
/**
{
    &quot;field1&quot;: [&quot;foo&quot;, &quot;bar&quot;],
    &quot;field2&quot;: [&quot;foo&quot;, &quot;bar&quot;],
    &quot;field3&quot;: [&quot;foo&quot;, &quot;bar&quot;],
}
**/

myObjCloned.field2[1] = 'baz'

// At this point:
// Expected: only `field2`'s value should change, because `myObjCloned` was deeply cloned.
// Actual: all fields' values change, because they all still point to `someSharedArray`

console.log(myObjCloned)
/**
{
    &quot;field1&quot;: [&quot;foo&quot;, &quot;baz&quot;],
    &quot;field2&quot;: [&quot;foo&quot;, &quot;baz&quot;],
    &quot;field3&quot;: [&quot;foo&quot;, &quot;baz&quot;],
}
**/
</code></pre>
<p>This is a very surprising behavior of <code>structuredClone</code>, because:</p>
<ol>
<li>It claims to perform deep cloning</li>
<li>This behavior doesn't happen when using <code>JSON.parse(JSON.stringify(value))</code></li>
</ol>
",
tags:"<javascript><json><structured-clone>",
score:7,
creationDate:2024-07-05 10:14:36,
creationDate:2024-07-05 14:26:45,
score:12,
acceptedResponderReputation:349946,
acceptedResponder:5459839,
QuestionerReputation:10569,
Questioner:2884291}
{title:"Compare equality of two Uint8Array",
id:"https://stackoverflow.com/questions/76127214",
body:"<p>I am comparing two <code>Uint8Array</code> using CRC32 to ensure the accuracy of the data being decompressed. However, I am facing the issue of not having an API like <code>Uint8Array.equal()</code> to compare the arrays. Although there is <code>Buffer.compare()</code> available in Node.js, it is not supported in the browser, which I am also working on.</p>
<p>I have created a basic implementation, but I am unsure if there is a more straightforward approach or if I have overlooked any built-in comparison APIs.</p>
<pre><code>function isEqual(arr1: Uint8Array, arr2: Uint8Array): boolean {
    if (arr1.length !== arr2.length) {
        return false
    }

    return arr1.every((value, index) =&gt; value === arr2[index])
}
</code></pre>
",
tags:"<javascript><typescript><uint8array>",
score:10,
creationDate:2023-04-28 07:31:01,
creationDate:2023-06-03 05:05:06,
score:12,
acceptedResponderReputation:60507,
acceptedResponder:3155639,
QuestionerReputation:1714,
Questioner:4396730}
{title:"Cannot find MessageMatcherDelegatingAuthorizationManager class while trying to configure websocket security in Spring Boot 3",
id:"https://stackoverflow.com/questions/75768422",
body:"<p>I am trying to configure websocket security with Spring Boot 3, while using <code>spring-boot-starter-parent:3.0.4</code>, going by the <code>@EnableWebSocketSecurity</code> <a href=""https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/socket/EnableWebSocketSecurity.html"" rel=""noreferrer"">docs</a> which say that I should use the class <code>MessageMatcherDelegatingAuthorizationManager</code>, but I can't seem to import it, it is not where it should be according to its <a href=""https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/messaging/access/intercept/MessageMatcherDelegatingAuthorizationManager.html"" rel=""noreferrer"">docs</a>.</p>
<p>Am I missing some dependencies or what is happening here?</p>
<p>Here is my pom.xml, maybe it helps.</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;
    &lt;parent&gt;
        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;
        &lt;version&gt;3.0.4&lt;/version&gt;
        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;
    &lt;/parent&gt;
    ... omitted project data ...
    &lt;properties&gt;
        &lt;java.version&gt;17&lt;/java.version&gt;
    &lt;/properties&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;
            &lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;
            &lt;version&gt;0.11.5&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;
            &lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;
            &lt;version&gt;0.11.5&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;
            &lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;
            &lt;version&gt;0.11.5&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-configuration-processor&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;optional&gt;true&lt;/optional&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;
            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;
            &lt;version&gt;1.6.15&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;
            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;
                &lt;configuration&gt;
                    &lt;excludes&gt;
                        &lt;exclude&gt;
                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
                        &lt;/exclude&gt;
                    &lt;/excludes&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

&lt;/project&gt;

</code></pre>
<p>I tried finding which dependency should bring it into the project, but as far as I see, it should come with <code>spring-boot-starter-security</code>.</p>
",
tags:"<java><spring><spring-boot><spring-security><spring-websocket>",
score:11,
creationDate:2023-03-17 13:54:22,
creationDate:2023-03-17 20:03:34,
score:12,
acceptedResponderReputation:231,
acceptedResponder:16438909,
QuestionerReputation:231,
Questioner:16438909}
{title:"Is there a way to prevent a root layout component from being shown in some nested route in the app folder of Next.js?",
id:"https://stackoverflow.com/questions/75970151",
body:"<p>Is there a way to prevent <code>rootlayout</code> from being wrapped around <code>dashboardlayout</code>? Next.js <code>v13</code> doc:</p>
<p><a href=""https://i.sstatic.net/M0G1W.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/M0G1W.png"" alt=""enter image description here"" /></a></p>
<p>My file structure:</p>
<p><a href=""https://i.sstatic.net/nVsUX.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/nVsUX.png"" alt=""enter image description here"" /></a></p>
<p>I could use <a href=""https://beta.nextjs.org/docs/routing/defining-routes#route-groups"" rel=""noreferrer"">route groups</a>; however, doing so would disable the wrapping in my <code>contact</code>, <code>pricing</code> routes. Is there a way to prevent this from happening? I would like the home navbar across the contact and pricing page but don't want the home page navbar in my dashboard.</p>
<p>I tried using route groups; however, it disabled wrapping in my pricing and contact routes.</p>
<p><code>navbar.tsx</code></p>
<pre><code>&quot;use client&quot;;

import { useEffect, useState } from &quot;react&quot;;
import { Disclosure } from &quot;@headlessui/react&quot;;


function joinClassName(...classes: string[]) {
  return classes.filter(Boolean).join(&quot; &quot;);
}


export default function Navbar() {
  const [navbar, setNavbar] = useState(false);

  const changeBackground = () =&gt; {
    if (window.scrollY &gt;= 64) {
      setNavbar(true);
    } else {
      setNavbar(false);
    }
  };

  useEffect(() =&gt; {
    changeBackground();
    window.addEventListener(&quot;scroll&quot;, changeBackground);
  });

  return (
    &lt;Disclosure as=&quot;nav&quot;&gt;
      {({ open, close }) =&gt; (
        &lt;&gt;
          &lt;div
            className={joinClassName(
              navbar || open ? &quot;dark:bg-black bg-white&quot; : &quot;bg-transparent&quot;,
              &quot; fixed top-0 left-0 right-0 z-50 &quot;
            )}
          &gt;&lt;/div&gt;
        &lt;/&gt;
      )}
    &lt;/Disclosure&gt;
  );
}

</code></pre>
",
tags:"<javascript><reactjs><next.js>",
score:9,
creationDate:2023-04-09 11:09:25,
creationDate:2023-04-09 16:56:44,
score:12,
acceptedResponderReputation:299,
acceptedResponder:14841373,
QuestionerReputation:299,
Questioner:14841373}
{title:"ESLint: 'globalThis' is not defined",
id:"https://stackoverflow.com/questions/77617186",
body:"<p>There are similar questions with this same error message, but every one I found is a runtime error. For me, <code>globalThis</code> <em>does</em> exist at runtime, but ESLint reports that it does not. How do I tell ESLint that <code>globalThis</code> exists?</p>
<p><strong>Note</strong>: I created this to answer it myself. I thought it should be documented outside of an obscure github issue.</p>
",
tags:"<javascript><jsdom>",
score:8,
creationDate:2023-12-07 01:29:15,
creationDate:2023-12-07 01:29:15,
score:12,
acceptedResponderReputation:67300,
acceptedResponder:61624,
QuestionerReputation:67300,
Questioner:61624}
{title:"Scroll to element after turbo stream is rendered",
id:"https://stackoverflow.com/questions/77928948",
body:"<p>I made this stimulus controller just so I can get more insight into what events fire and when, this is the connect portion of the controller:</p>
<pre><code>connect() {
    console.log(&quot;controller connected&quot;);
    // Turbo Drive Events
    document.addEventListener('turbo:click', () =&gt; {
      console.log('turbo:click fired');
    });

    document.addEventListener('turbo:before-visit', () =&gt; {
      console.log('turbo:before-visit fired');
    });

    document.addEventListener('turbo:visit', () =&gt; {
      console.log('turbo:visit fired');
    });

    document.addEventListener('turbo:visit-start', () =&gt; {
      console.log('turbo:visit-start fired');
    });

    document.addEventListener('turbo:visit-received', () =&gt; {
      console.log('turbo:visit-received fired');
    });

    document.addEventListener('turbo:before-cache', () =&gt; {
      console.log('turbo:before-cache fired');
    });

    document.addEventListener('turbo:before-render', () =&gt; {
      console.log('turbo:before-render fired');
    });

    document.addEventListener('turbo:render', () =&gt; {
      console.log('turbo:render fired');
    });

    document.addEventListener('turbo:load', () =&gt; {
      console.log('turbo:load fired');
    });

    document.addEventListener('turbo:visit-ended', () =&gt; {
      console.log('turbo:visit-ended fired');
    });

    document.addEventListener('turbo:frame-load', () =&gt; {
      console.log('turbo:frame-load fired');
    });

    // Turbo Stream Events
    document.addEventListener('turbo:before-stream-render', () =&gt; {
      console.log('turbo:before-stream-render fired');
    });

    document.addEventListener('turbo:after-stream-render', () =&gt; {
      console.log('turbo:after-stream-render fired');
    });

    // Turbo Frame Events
    // Note: 'turbo:frame-load' is already listed under Turbo Drive Events

    // Turbo Form Events
    document.addEventListener('turbo:submit-start', () =&gt; {
      console.log('turbo:submit-start fired');
    });

    document.addEventListener('turbo:submit-end', () =&gt; {
      console.log('turbo:submit-end fired');
    });
  }
</code></pre>
<p>I have some form on the page (not including it because it seems irrelevant to the question but I can if I need to), with which I'm deliberately not sending the right information to the back-end so the code ends up in a certain branch condition in my rails controller, this is that bit:</p>
<pre><code>respond_to do |format|
  format.turbo_stream do
    render turbo_stream: turbo_stream.update('message-space', partial: 'shared/form_errors', locals: { message: @errors })
  end
  format.html { render :edit, status: :unprocessable_entity }
end
</code></pre>
<p>I get these 3 in my console logged after I submit the form and I can see the errors on the page:</p>
<pre><code>turbo:submit-start fired
turbo:submit-end fired
turbo:before-stream-render fired
</code></pre>
<p>In other words, it tells me that form submit started/ended and something new is about to be rendered. Which aligns with the description on the :</p>
<p><a href=""https://turbo.hotwired.dev/reference/events"" rel=""noreferrer"">https://turbo.hotwired.dev/reference/events</a></p>
<p>I am using rails <strong>7.1.2</strong> and @hotwired/stimulus <strong>3.2.2</strong></p>
<p>My use case for other events is after a turbo stream updates the content of the errors on the page, I want to scroll the user up to the error content because the submit button is at the bottom of the page and the errors are shown on the top of the page.</p>
<p>I can probably do some unholy things with javascript events and whatnot to get the above behavior, but I am just curious how this works.</p>
<p>My question is why aren't the other events firing? or maybe my understanding of this is not yet up to par.</p>
",
tags:"<javascript><ruby-on-rails><ruby-on-rails-7><stimulusjs>",
score:6,
creationDate:2024-02-02 17:44:08,
creationDate:2024-02-02 19:20:40,
score:12,
acceptedResponderReputation:29719,
acceptedResponder:207090,
QuestionerReputation:22948,
Questioner:169277}
{title:"Babel and Jest configuration: SyntaxError: Cannot use import statement outside a module",
id:"https://stackoverflow.com/questions/75562251",
body:"<p>I'm working on a Ruby on Rails 7 app with a few JS web components written using lit element. I'm trying to add Jest to the project so we can unit test our web components.</p>
<p>Not using Typescript, just vanilla JS. I'm running node v18.12.1, npm v9.2.0.</p>
<p>I followed the initial Jest getting started steps from their site:</p>
<pre><code>npm install --save-dev jest
</code></pre>
<p>Then added <code>&quot;scripts&quot;: { &quot;test&quot;: &quot;jest&quot; }</code> to <code>package.json</code>.</p>
<p>I created a simple test to try it out and it passed without error.</p>
<p>However, once I added a test for one of my custom web components that imports lit (<code>import {LitElement} from 'lit';</code>), I got the following error:</p>
<pre><code>Jest encountered an unexpected token

    Jest failed to parse a file. This happens e.g. when your code or its dependencies use non-standard JavaScript syntax, or when Jest is not configured to support such syntax.

    Out of the box Jest supports Babel, which will be used to transform your files into valid JS based on your Babel configuration.

    By default &quot;node_modules&quot; folder is ignored by transformers.

    Here's what you can do:
     • If you are trying to use ECMAScript Modules, see https://jestjs.io/docs/ecmascript-modules for how to enable it.
     • If you are trying to use TypeScript, see https://jestjs.io/docs/getting-started#using-typescript
     • To have some of your &quot;node_modules&quot; files transformed, you can specify a custom &quot;transformIgnorePatterns&quot; in your config.
     • If you need a custom transformation specify a &quot;transform&quot; option in your config.
     • If you simply want to mock your non-JS modules (e.g. binary assets) you can stub them out with the &quot;moduleNameMapper&quot; config option.

    You'll find more details and examples of these config options in the docs:
    https://jestjs.io/docs/configuration
    For information about custom transformations, see:
    https://jestjs.io/docs/code-transformation

    Details:

    /home/app/service/app/javascript/test/utils/validators.test.js:1
    ({&quot;Object.&lt;anonymous&gt;&quot;:function(module,exports,require,__dirname,__filename,jest){import { IsNumber } from '../../utils/validators.js';
                                                                                      ^^^^^^

    SyntaxError: Cannot use import statement outside a module

      at Runtime.createScriptFromCode (node_modules/jest-runtime/build/index.js:1495:14)
</code></pre>
<p>Reading the error (and checking here and with Dr Google) it sounded like using Babel was the way to go. So, I went to the Babel installation page for jest and followed their instructions:</p>
<pre><code>npm install --save-dev babel-jest
</code></pre>
<p>Then added to <code>package.json</code>:</p>
<pre><code>  &quot;jest&quot;: {
    &quot;transform&quot;: {
      &quot;^.+\\.[t|j]sx?$&quot;: &quot;babel-jest&quot;
    }
  },
}
</code></pre>
<p>Then installed babel preset env:</p>
<pre><code>npm install @babel/preset-env --save-dev

</code></pre>
<p>And add <code>babel.config.json</code>:</p>
<pre><code>{
  &quot;presets&quot;: [&quot;@babel/preset-env&quot;]
}
</code></pre>
<p>I continue to get the same error.</p>
<p>My <code>package.json</code>:</p>
<pre><code>{
  &quot;scripts&quot;: {
    &quot;test&quot;: &quot;jest&quot;
  },
  &quot;jest&quot;: {
    &quot;transform&quot;: {
      &quot;^.+\\.[t|j]sx?$&quot;: &quot;babel-jest&quot;
    }
  },
  &quot;devDependencies&quot;: {
    &quot;@babel/preset-env&quot;: &quot;^7.20.2&quot;,
    &quot;babel-jest&quot;: &quot;^29.4.3&quot;,
    &quot;jest&quot;: &quot;^29.4.3&quot;,
    &quot;lit&quot;: &quot;^2.6.1&quot;
  }
}
</code></pre>
<p>My <code>babel.config.json</code>:</p>
<pre><code>{
  &quot;presets&quot;: [&quot;@babel/preset-env&quot;]
}
</code></pre>
<p>Failing test:</p>
<pre><code>import {SomeFunction} from '/a-valid-path/my-custom.js';

describe('some tests', () =&gt; {
  test('a test', () =&gt; {
    expect(SomeFunction(some-value)).toBe(true);
  });
});
</code></pre>
<p>There are other posts on this issue here on stack overflow. The solutions provided all seem to indicate I need to add some <code>transform</code> and <code>transformIgnorePatterns</code> settings to my jest configuration in package.json (or jest.config.js for those with a separate jest config file) in order to get the transpilation right.</p>
<p>For example <a href=""https://stackoverflow.com/questions/61781271/jest-wont-transform-the-module-syntaxerror-cannot-use-import-statement-outsi"">here</a> the recommended solution was:</p>
<pre><code>&quot;transform&quot;: {
      &quot;node_modules/variables/.+\\.(j|t)sx?$&quot;: &quot;ts-jest&quot; //I swapped in 'babel-jest' here
    },
    &quot;transformIgnorePatterns&quot;: [
      &quot;node_modules/(?!variables/.*)&quot;
    ]

</code></pre>
<p>And <a href=""https://stackoverflow.com/questions/62200568/syntaxerror-cannot-use-import-statement-outside-a-module-when-writing-test-wi"">here</a> it was</p>
<pre><code>  transform: {
    &quot;^.+\\.(js|ts)$&quot;: &quot;ts-jest&quot;,
  },
  transformIgnorePatterns: [
    &quot;node_modules/(?!lit-html)&quot;,
  ],
</code></pre>
<p><a href=""https://stackoverflow.com/questions/72924285/why-does-jest-keep-giving-me-error-syntaxerror-cannot-use-import-statement-out"">Here</a> the solution was to add <code>&quot;type&quot;: &quot;module&quot;</code> to package.json.</p>
<p>None of these or other solutions I've found here or on other sites have worked. I keep getting the same error.</p>
<p>Does anyone out there know what I'm missing?</p>
",
tags:"<javascript><jestjs><babel-jest>",
score:6,
creationDate:2023-02-24 23:23:11,
creationDate:2023-02-27 14:27:25,
score:12,
acceptedResponderReputation:181,
acceptedResponder:21283170,
QuestionerReputation:181,
Questioner:21283170}
{title:"Next.js app folder: is there some ""entry point""? A direct replacement for _app.tsx and _document.js?",
id:"https://stackoverflow.com/questions/75951134",
body:"<p>Previously I had a custom <code>_app.tsx</code> that did some bootstrapping for my application:
<code>useEffect(() =&gt; void defineCustomElements(), []);</code> It loaded custom elements/web components and made sure they can be hydrated.</p>
<p>Where should I put this effect now with the app router that 1. doesn't have a &quot;global&quot; <code>_app.tsx</code> and secondly is &quot;server component first&quot;?</p>
",
tags:"<javascript><reactjs><typescript><next.js>",
score:12,
creationDate:2023-04-06 15:16:44,
creationDate:2023-04-08 04:53:50,
score:12,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:8716,
Questioner:5243272}
{title:"Cucumber configuration error in IntelliJ: Please annotate a glue class with some context configuration",
id:"https://stackoverflow.com/questions/74990179",
body:"<p>So I recently started working on Cucumber and have been facing this issue.</p>
<p>This is the hierarchy of my module <a href=""https://i.sstatic.net/Lb5O7.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/Lb5O7.png"" alt=""enter image description here"" /></a></p>
<p>As you can see this is submodule in my Spring Boot application (AcceptanceTests), so there are no main methods in it.</p>
<p>This is my <code>CucumberSpringContextConfiguration</code> class</p>
<pre class=""lang-java prettyprint-override""><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)
@CucumberContextConfiguration
public class CucumberSpringContextConfiguration {
}
</code></pre>
<p>This is my <code>CucumberIntegrationTest</code> class</p>
<pre class=""lang-java prettyprint-override""><code>@RunWith(Cucumber.class)
@CucumberOptions(
  features = &quot;src\test\resources\feature&quot;,       
  plugin = {&quot;pretty&quot;, &quot;html:target\\cucumber&quot;}, 
  glue = &quot;com.#####.########.cucumberspringboot.cucumberglue&quot;
)
public class CucumberIntegrationTest {}
</code></pre>
<p>I tried running this code with a main class (src/main/java),the code compiled successfully. But since that is not my requirement I removed it and now I am getting below error -</p>
<pre class=""lang-none prettyprint-override""><code>SEVERE: Exception while executing pickle
java.util.concurrent.ExecutionException:
io.cucumber.core.backend.CucumberBackendException: Please annotate a
glue class with some context configuration.

  For example:

     @CucumberContextConfiguration    
     @SpringBootTest(classes = TestConfig.class)    
     public class CucumberSpringConfiguration { } 

  Or: 
  
     @CucumberContextConfiguration
     @ContextConfiguration( ... )   
     public class CucumberSpringConfiguration { }   
  
  at java.util.concurrent.FutureTask.report(FutureTask.java:122)
  at java.util.concurrent.FutureTask.get(FutureTask.java:192)
  at io.cucumber.core.runtime.Runtime.run(Runtime.java:93)
  at io.cucumber.core.cli.Main.run(Main.java:92) 
  at io.cucumber.core.cli.Main.main(Main.java:34) 
Caused by: io.cucumber.core.backend.CucumberBackendException: 
  Please annotate a glue class with some context configuration.
</code></pre>
<p>Please suggest how to achieve this without using main class.</p>
",
tags:"<spring><gradle><cucumber><cucumber-java>",
score:7,
creationDate:2023-01-03 07:27:12,
creationDate:2023-01-03 09:16:33,
score:12,
acceptedResponderReputation:12019,
acceptedResponder:3945473,
QuestionerReputation:143,
Questioner:16917942}
{title:"Eclipse IDE 2024-03 crashes under Ubuntu, causing hr_err_pid.log",
id:"https://stackoverflow.com/questions/78355080",
body:"<p>I have two classes, &quot;PeerMessage&quot; and &quot;PeerMessageOps&quot; (this is just an example). PeerMessageOps contains constant values that PeerMessage class accesses to. But I don't know why, every time I do the &quot;PeerMessageOps.thing&quot; from PeerMessage class, Eclipse stops running and exits leaving an <code>hr_err_pid.log</code> archive in personal folder (I don't understand anything in there). This started happening after I incorporated new source archives to an already existing project. This also happen with any of the previous archives that I was already using. If i don't access to one class from another this problem doesn't happen and everything runs normally.</p>
<p><code>hr_err_pid.log</code> (<a href=""https://i.sstatic.net/wLmLp.png"" rel=""noreferrer"">screenshot</a>):</p>
<pre><code>A fatal error has been detected by the Java Runtime Environment:
#
#  SIGSEGV (0xb) at pc=0x00007884fd3b61f8, pid=3363, tid=3364
#
# JRE version: OpenJDK Runtime Environment Temurin-17.0.9+9 (17.0.9+9) (build 17.0.9+9)
# Java VM: OpenJDK 64-Bit Server VM Temurin-17.0.9+9 (17.0.9+9, mixed mode, tiered, compressed oops, compressed class ptrs, g1 gc, linux-amd64)
# Problematic frame:
# C  [libwebkit2gtk-4.0.so.37+0xdb61f8]
#
# Core dump will be written. Default location: Core dumps may be processed with &quot;/usr/share/apport/apport -p%p -s%s -c%c -d%d -P%P -u%u -g%g -- %E&quot; (or dumping to /home/mpatari/core.3363)
#
# If you would like to submit a bug report, please visit:
#   https://github.com/adoptium/adoptium-support/issues
# The crash happened outside the Java Virtual Machine in native code.
# See problematic frame for where to report the bug.
#

---------------  S U M M A R Y ------------

Command Line: -Dosgi.requiredJavaVersion=17 -Dosgi.instance.area.default=@user.home/eclipse-workspace -Dosgi.dataAreaRequiresExplicitInit=true -Dorg.eclipse.swt.graphics.Resource.reportNonDisposed=true -Xms256m -Xmx2048m -XX:+UseG1GC -XX:+UseStringDeduplication --add-modules=ALL-SYSTEM -Declipse.p2.max.threads=10 -Doomph.update.url=https://download.eclipse.org/oomph/updates/milestone/latest -Doomph.redirection.index.redirection=index:/-&gt;https://raw.githubusercontent.com/eclipse-oomph/oomph/master/setups/ --add-opens=java.base/java.lang=ALL-UNNAMED -Dorg.eclipse.swt.browser.DefaultType=mozilla /home/mpatari/eclipse/jee-2023-092/eclipse//plugins/org.eclipse.equinox.launcher_1.6.500.v20230717-2134.jar -os linux -ws gtk -arch x86_64 -showsplash /home/mpatari/.p2/pool/plugins/org.eclipse.epp.package.common_4.29.0.20230907-1200/splash.bmp -launcher /home/mpatari/eclipse/jee-2023-092/eclipse/eclipse -name Eclipse --launcher.library /home/mpatari/.p2/pool/plugins/org.eclipse.equinox.launcher.gtk.linux.x86_64_1.2.700.v20221108-1024/eclipse_11801.so -startup /home/mpatari/eclipse/jee-2023-092/eclipse//plugins/org.eclipse.equinox.launcher_1.6.500.v20230717-2134.jar --launcher.appendVmargs -exitdata 2 -product org.eclipse.epp.package.jee.product -vm /home/mpatari/.p2/pool/plugins/org.eclipse.justj.openjdk.hotspot.jre.full.linux.x86_64_17.0.9.v20231028-0858/jre/bin/java -vmargs -Dosgi.requiredJavaVersion=17 -Dosgi.instance.area.default=@user.home/eclipse-workspace -Dosgi.dataAreaRequiresExplicitInit=true -Dorg.eclipse.swt.graphics.Resource.reportNonDisposed=true -Dsun.java.command=Eclipse -Xms256m -Xmx2048m -XX:+UseG1GC -XX:+UseStringDeduplication --add-modules=ALL-SYSTEM -Declipse.p2.max.threads=10 -Doomph.update.url=https://download.eclipse.org/oomph/updates/milestone/latest -Doomph.redirection.index.redirection=index:/-&gt;https://raw.githubusercontent.com/eclipse-oomph/oomph/master/setups/ --add-opens=java.base/java.lang=ALL-UNNAMED -Dorg.eclipse.swt.browser.DefaultType=mozilla -jar /home/mpatari/eclipse/jee-2023-092/eclipse//plugins/org.eclipse.equinox.launcher_1.6.500.v20230717-2134.jar

Host: 12th Gen Intel(R) Core(TM) i3-12100, 8 cores, 7G, Ubuntu 22.04.2 LTS
Time: Thu Apr 18 12:46:35 2024 IST elapsed time: 678.075570 seconds (0d 0h 11m 18s)
</code></pre>
<p>I've tried reinstalling Eclipse and create a new workspace to import previous project and problem is still there. I'm running Eclipse from Ubuntu and project is in Java. I also checked Eclipse is updated to the last version. Would be very thankful for a response.</p>
",
tags:"<java><linux><eclipse><ubuntu>",
score:7,
creationDate:2024-04-19 16:28:07,
creationDate:2024-04-20 05:09:03,
score:12,
acceptedResponderReputation:1974,
acceptedResponder:843943,
QuestionerReputation:85,
Questioner:21090350}
{title:"next/font works everywhere except one specific component",
id:"https://stackoverflow.com/questions/75422265",
body:"<h1>next/font</h1>
<h2>Uses Next.js with TypeScript and Tailwind CSS</h2>
<p>This is my first time using the new <code>next/font</code> package. I followed Next.js' tutorial, and it was easy to set up. I'm using both Inter and a custom local typeface called App Takeoff. To actually use both of these typefaces, I'm using Tailwind CSS, where Inter is connected to <code>font-sans</code> and App Takeoff is connected to <code>font-display</code>.</p>
<h2>Everything works except in one spot</h2>
<p>I have done plenty of testing between files, and for some reason both typefaces work everywhere except my <code>Modal</code> component. (See <strong>Helpful Update</strong> at the bottom for why it doesn't work in the <code>Modal</code> component.)</p>
<h3>Example</h3>
<p><strong>index.tsx</strong></p>
<p><a href=""https://i.sstatic.net/8MyTU.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/8MyTU.png"" alt=""Inter and App Takeoff typefaces working correctly"" /></a></p>
<p><strong>modal.tsx via index.tsx</strong></p>
<p><a href=""https://i.sstatic.net/YrMVA.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/YrMVA.png"" alt=""Inter and App Takeoff typefaces not working"" /></a></p>
<p>As you can see, the typefaces work just fine when they aren't inside the modal, but as soon as they're in the modal they don't work.</p>
<h2>Here's some relevant code:</h2>
<pre><code>// app.tsx

import '@/styles/globals.css'
import type { AppProps } from 'next/app'

import { Inter } from 'next/font/google'
const inter = Inter({
  subsets: ['latin'],
  variable: '--font-inter'
})

import localFont from 'next/font/local'
const appTakeoff = localFont({
  src: [
    {
      path: '../fonts/app-takeoff/regular.otf',
      weight: '400',
      style: 'normal'
    },
    {
      path: '../fonts/app-takeoff/regular.eot',
      weight: '400',
      style: 'normal'
    },
    {
      path: '../fonts/app-takeoff/regular.woff2',
      weight: '400',
      style: 'normal'
    },
    {
      path: '../fonts/app-takeoff/regular.woff',
      weight: '400',
      style: 'normal'
    },
    {
      path: '../fonts/app-takeoff/regular.ttf',
      weight: '400',
      style: 'normal'
    }
  ],
  variable: '--font-app-takeoff'
})

const App = ({ Component, pageProps }: AppProps) =&gt; {
  return (
    &lt;div className={`${inter.variable} font-sans ${appTakeoff.variable}`}&gt;
      &lt;Component {...pageProps} /&gt;
    &lt;/div&gt;
  )
}

export default App
</code></pre>
<pre><code>// modal.tsx

import type { FunctionComponent } from 'react'
import type { Modal as ModalProps } from '@/typings/components'
import React, { useState } from 'react'
import { Fragment } from 'react'
import { Transition, Dialog } from '@headlessui/react'

const Modal: FunctionComponent&lt;ModalProps&gt; = ({ trigger, place = 'bottom', className, addClass, children }) =&gt; {

  const [isOpen, setIsOpen] = useState(false),
        openModal = () =&gt; setIsOpen(true),
        closeModal = () =&gt; setIsOpen(false)

  const Trigger = () =&gt; React.cloneElement(trigger, { onClick: openModal })

  const enterFrom = place === 'center'
    ? '-translate-y-[calc(50%-12rem)]'
    : 'translate-y-full sm:-translate-y-[calc(50%-12rem)]'

  const mainPosition = place === 'center'
    ? '-translate-y-1/2'
    : 'translate-y-0 sm:-translate-y-1/2'

  const leaveTo = place === 'center'
    ? '-translate-y-[calc(50%+8rem)]'
    : 'translate-y-full sm:-translate-y-[calc(50%+8rem)]'

  return (
    &lt;&gt;
    
      &lt;Trigger /&gt;

      &lt;Dialog open={isOpen} onClose={closeModal} className='z-50'&gt;

        {/* Backdrop */}
        &lt;div className='fixed inset-0 bg-zinc-200/50 dark:bg-zinc-900/50 backdrop-blur-sm cursor-pointer' aria-hidden='true' /&gt;

        &lt;Dialog.Panel
          className={`
            ${className || `
              fixed left-1/2
              ${
                place === 'center'
                ? 'top-1/2 rounded-2xl'
                : 'bottom-0 sm:bottom-auto sm:top-1/2 rounded-t-2xl xs:rounded-b-2xl'
              }
              bg-zinc-50 dark:bg-zinc-900
              w-min
              -translate-x-1/2
              overflow-hidden
              px-2 xs:px-6
              shadow-3xl shadow-primary-400/10
            `}
            ${addClass || ''}
          `}
        &gt;
          {children}
              
        &lt;/Dialog.Panel&gt;

        &lt;button
          onClick={closeModal}
          className='
            fixed top-4 right-4
            bg-primary-600 hover:bg-primary-400
            rounded-full
            h-7 w-7 desktop:hover:w-20
            overflow-x-hidden
            transition-[background-color_width] duration-300 ease-in-out
            group/button
          '
          aria-role='button'
        &gt;
          Close
        &lt;/button&gt;

      &lt;/Dialog&gt;

    &lt;/&gt;
  )
}

export default Modal
</code></pre>
<p>I hope this information helps. Let me know if there's anything else that would be helpful to know.</p>
<h2>Helpful Update</h2>
<p>Thank you <strong>Jonathan Wieben</strong> for explanation of why this isn't working (<a href=""https://stackoverflow.com/a/75495776/14802731"">See Explanation</a>). The issue simply has to do with the scope of the applied styles, and Headless UI's usage of the React <code>Portal</code> component. If anyone has some ideas of how I can either change where the <code>Portal</code> is rendered or change the scope of the styles, that would be super helpful. <strong>Jonathan Wieben</strong> pointed out a way to do this, however—from my testing—it doesn't work with Tailwind CSS.</p>
",
tags:"<javascript><css><next.js><fonts><tailwind-css>",
score:11,
creationDate:2023-02-11 18:10:20,
creationDate:2023-02-18 19:13:07,
score:12,
acceptedResponderReputation:671,
acceptedResponder:7879109,
QuestionerReputation:721,
Questioner:14802731}
{title:"Utilizing Logging MDC with Virtual Threads",
id:"https://stackoverflow.com/questions/77937111",
body:"<p>In a typical servlet environment, each request gets its own thread. Adding logging MDC to generate a unique request ID to the request can be achieved with a simple servlet filter.</p>
<pre><code>public void doFilter(ServletRequest request, ServletResponse response, FilterChain chain) throws IOException, ServletException {
    try {
        String requestId = UUID.randomUUID().toString();
        HttpServletResponse httpServletResponse = (HttpServletResponse)response;
        httpServletResponse.setHeader(&quot;requestId&quot;, requestId);
        MDC.put(&quot;requestId&quot;, requestId);
        chain.doFilter(request, response);
    } finally {
        MDC.remove(&quot;requestId&quot;);
    }
}
</code></pre>
<p>Logging configuration.</p>
<pre><code>&lt;Pattern&gt;%d %-5level %X{requestId} [%t] %C{10}:%L %m%n&lt;/Pattern&gt;
</code></pre>
<p>Sample logging.</p>
<pre><code>2024-02-04 10:29:55,160 INFO  99cd4d64-5d7c-4577-a5d3-cb8d48d1dfd5 [http-nio-8080-exec-6] c.s.q.UserController:65 Deleteing user 'test'
2024-02-04 10:29:55,260 INFO  99cd4d64-5d7c-4577-a5d3-cb8d48d1dfd5 [http-nio-8080-exec-6] c.s.q.UserController:70 Successfully deleted user 'test'
</code></pre>
<p>With Virtual Threads in Java 21+, I'm under the impression a thread can automatically suspended a request while it's waiting on any IO and the thread can begin working on other requests. In this scenario it seems like the logging MDC can &quot;bleed&quot; into other request logs as the thread begins serving other requests. How can I work around this so I can continue to have a unique value added to each request's logging statements?</p>
",
tags:"<java><servlets><virtual-threads>",
score:12,
creationDate:2024-02-04 18:36:51,
creationDate:2024-02-05 04:47:52,
score:12,
acceptedResponderReputation:2313,
acceptedResponder:2366397,
QuestionerReputation:186,
Questioner:4696034}
{title:"Thread::startVirtualThread as Threadfactory",
id:"https://stackoverflow.com/questions/79117207",
body:"<p>Why does this code lead to a <code>java.lang.IllegalThreadStateException</code>?</p>
<pre class=""lang-java prettyprint-override""><code>newSingleThreadScheduledExecutor(Thread::startVirtualThread).scheduleWithFixedDelay(
   () -&gt; System.out.println(&quot;Hello, World!&quot;),
   0,
   1,
   TimeUnit.SECONDS
);
</code></pre>
<p>The JavaDoc for <code>java.util.concurrent.ThreadFactory</code> explicitly states:</p>
<blockquote>
<p>An object that creates new threads on demand.</p>
</blockquote>
<p>... and <code>Thread::startVirtualThread</code> is a <code>Function&lt;Runnable, Thread&gt;</code> (object) that should do this. Right?</p>
<p>I figure that the intended way is probably <code>Thread.ofVirtual().factory()</code> but I'm still clueless on why the other function doesn't work.</p>
",
tags:"<java><multithreading><virtual-threads><java-23>",
score:10,
creationDate:2024-10-23 09:08:04,
creationDate:2024-10-23 10:19:32,
score:12,
acceptedResponderReputation:111142,
acceptedResponder:2670892,
QuestionerReputation:807,
Questioner:18197654}
{title:"Get path in dynamic route in Next JS when Server Component?",
id:"https://stackoverflow.com/questions/77173839",
body:"<p>I need to get the path in a dynamic route in Next JS. This is easy to do in a client component.</p>
<p>In src/app/[id]/page.tsx</p>
<pre><code>&quot;use client&quot;;
import { usePathname } from &quot;next/navigation&quot;;

export default function Page() {
    const pathname = usePathname();
</code></pre>
<p>However you can't use <code>usePathname</code> in a Server Component. How do you get the url in a React Server Component in Next JS 13?</p>
",
tags:"<javascript><reactjs><typescript><next.js>",
score:6,
creationDate:2023-09-25 15:06:05,
creationDate:2023-09-25 17:26:27,
score:12,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:23533,
Questioner:467875}
{title:"How to hide constructor on a Java record that offers a public static factory method?",
id:"https://stackoverflow.com/questions/76843519",
body:"<p>I have this simple <a href=""https://openjdk.org/jeps/395"" rel=""noreferrer"">record</a> in Java:</p>
<pre><code>public record DatePair( LocalDate start , LocalDate end , long days ) {}
</code></pre>
<p>I want all three properties (<code>start</code>, <code>end</code>, &amp; <code>days</code>) to be available publicly for reading, but I want the third property (<code>days</code>) to be automatically calculated rather than passed-in during instantiation.</p>
<p>So I add a static factory method:</p>
<pre class=""lang-java prettyprint-override""><code>public record DatePair( LocalDate start , LocalDate end , long days )
{
    public static DatePair of ( LocalDate start , LocalDate end )
    {
        return new DatePair ( start , end , ChronoUnit.DAYS.between ( start , end ) ) ;
    }
}
</code></pre>
<p>I want <em>only</em> this static factory method to be used for instantiation. I want to hide the constructor. Therefore, I explicitly write the implicit constructor, and mark it <code>private</code>.</p>
<pre class=""lang-java prettyprint-override""><code>public record DatePair( LocalDate start , LocalDate end , long days )
{
    private DatePair ( LocalDate start , LocalDate end , long days )  // &lt;---- ERROR: Canonical constructor access level cannot be more restrictive than the record access level ('public')
    {
        this.start = start;
        this.end = end;
        this.days = days;
    }

    public static DatePair of ( LocalDate start , LocalDate end )
    {
        return new DatePair ( start , end , ChronoUnit.DAYS.between ( start , end ) ) ;
    }
}
</code></pre>
<p>But marking that contractor as <code>private</code> causes a compiler error:</p>
<blockquote>
<p>java: invalid canonical constructor in record DatePair (attempting to assign stronger access privileges; was public)</p>
</blockquote>
<p>👉🏼 How to hide the implicit constructor of a record if the compiler forbids marking it as <code>private</code>?</p>
",
tags:"<java><constructor><factory><java-record><static-factory>",
score:18,
creationDate:2023-08-05 21:02:04,
creationDate:2023-08-05 21:43:48,
score:12,
acceptedResponderReputation:102795,
acceptedResponder:768644,
QuestionerReputation:338171,
Questioner:642706}
{title:"Sending Push Notifications to Safari from Java",
id:"https://stackoverflow.com/questions/75547851",
body:"<p>I am trying to get the Web Push API to work with my app and Safari on iOS. I can register fine in Safari ... But, when trying to send my request to the endpoint I receive a 403 with reason: BadJwtToken.
I've verified the token being sent in the Authentication header is valid. Also, the code I am using to send the Push request works perfectly on Chrome &amp; Edge.
Has anyone else experienced this behaviour? Excerpt from the log below showing outgoing request and response. Any suggestions would be greatly appreciated.</p>
<pre><code>2023-02-23 16:32:05.882 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;POST /QKmekz9T3h2DpblQXdmVpVJPWtR145PdK-WYRMt4zldrXBOGsnqLluGtB9PFehMfoTXASt2-8pTmnRzUB0P0XMMDgX-tWdgIvL1YptpQdI_pVB3EEsnbR0LUStq97BUMIrMG_yVI6eUYJVigQtVgq0Fcl0D8k7tt9U8WEBbLmFc HTTP/1.1[\r][\n]&quot;
2023-02-23 16:32:05.882 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Authorization: WebPush eyJ0eXAiOiJKV1QiLCJhbGciOiJFUzI1NiJ9.eyJhdWQiOiJodHRwczovL3dlYi5wdXNoLmFwcGxlLmNvbSIsImV4cCI6MTY3NzIxMzEyNSwic3ViIjoibWFpbHRvOiA8aW5mb0BtZHNnbG9iYWwuY29tPiJ9.7P42kj123WHHWk0AaRiFiIb1nTx1GaeaY3xmDWJbD3tlNQn_Rxw-jZPZOzxb1YeN7y2qWO9qoSIAg22_SwZuOQ[\r][\n]&quot;
2023-02-23 16:32:05.882 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Content-Encoding: aesgcm[\r][\n]&quot;
2023-02-23 16:32:05.882 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Encryption: salt=ski4AOi0Xc5HCo2zvuzDfg[\r][\n]&quot;
2023-02-23 16:32:05.882 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;TTL: 2419200[\r][\n]&quot;
2023-02-23 16:32:05.882 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Crypto-Key: dh=BGLGnvvc-_jNZuHicms4eBijG7flOSUXHAte5GF2GtEQ1viZoL_NlzakYJBGMJrHHEbuxr76mPh8mAF0fZ2KFCo=;p256ecdsa=BKjlmDj7I5JkC3I2clsddfl7rklur8OIIx8_EKvDfpdrebwKRebZChSCIqKp64nkkyq4IWpUlVoDQ2CKK4axUjo[\r][\n]&quot;
2023-02-23 16:32:05.882 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Content-Type: application/octet-stream[\r][\n]&quot;
2023-02-23 16:32:05.882 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Content-Length: 202[\r][\n]&quot;
2023-02-23 16:32:05.882 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Host: web.push.apple.com[\r][\n]&quot;
2023-02-23 16:32:05.882 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;Connection: Keep-Alive[\r][\n]&quot;
2023-02-23 16:32:05.882 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;User-Agent: Apache-HttpAsyncClient/4.1.4 (Java/1.8.0_362)[\r][\n]&quot;
2023-02-23 16:32:05.882 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;[\r][\n]&quot;
2023-02-23 16:32:05.882 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &gt;&gt; &quot;[0xffffffc6][0x8]1_[0xfffffff1][0xffffffaa][0x8]1m[0xfffffff3][0xffffffd9]0:[0xffffffd8][0x1d]2Y[0xffffff9c][0xffffffae][0x8][0xfffffffe]gVs[0xffffffec][0xffffffcd]~[0x15][0xffffff8e][0xc][0xfffffff7][0xffffff83][0x12]B[0xffffffcc]y[0xffffffd8][0xffffff8d]}C{mCL[0xffffffee]0Z[0xffffffc3][0xffffff9a])20[0xffffffc8]G[0xffffffdb]&lt;t[0x6]a[0xffffff84]q[0x0][0xffffffc8][0xffffffa0][0xffffffe3][0xffffff95][0xffffff82][0xffffffdf]3'[0xffffffeb][0xffffffbf][0xffffffa7]H$\1[0xffffffaf]E[0xffffffb4]0[0xffffffbe][0xb]3[0xffffffdf]W[0x5],[0xffffffed][0xffffffeb]dR[0xffffffd6][0xffffffc5]Mk[0xffffffc7][0xffffffbe][0x18]%[0xffffffd5]A[0xffffffec]~f[0xffffffd5][0xfffffff3](u[0xffffffc4]J{kKG[0xffffff8f]7NaZ&lt;1:F@[0xf][0xffffff97][0xffffffca].K[0xffffffea][0xffffffb1][0xfffffffd][0xfffffff6][0xffffff9d][0xffffffc9][0x7][0xffffff86]r[0xffffff95]S[0xfffffff4][0xffffffba]3[0xffffffe7][0xfffffff8][0xffffffd0];[0xffffffce][0xffffffd1][0xffffffce][0xffffffe7][0xffffffd1][0xffffffa2][0xffffffa0][0xffffffba]Z[0xffffff80][0xffffffa6][0x2]X[0xffffff9c][0xffffff91][0xffffffda][0xffffff98][0x12][0xffffffda]z[0xffffffe0]q7[0xffffffa9]F[0x0][0xffffffe7]3R[0xffffff9d]M\v:xU[0xffffffa4][0xffffffa6][0xffffffdf];na[0x1c][0xffffffe1]&gt;[0xffffff82](2[0xffffffcf]-![0xffffff83][0xffffffd7][0xffffffc9]&quot;
2023-02-23 16:32:05.883 DEBUG 17412 --- [/O dispatcher 1] o.a.h.i.nio.client.InternalIODispatch    : http-outgoing-0 [ACTIVE] Request ready
2023-02-23 16:32:05.883 DEBUG 17412 --- [/O dispatcher 1] h.i.n.c.ManagedNHttpClientConnectionImpl : http-outgoing-0 10.154.0.20:56270&lt;-&gt;17.188.172.94:443[ACTIVE][r:w][ACTIVE][r][NOT_HANDSHAKING][0][0][0]: Event cleared [w]
2023-02-23 16:32:05.975 DEBUG 17412 --- [/O dispatcher 1] h.i.n.c.ManagedNHttpClientConnectionImpl : http-outgoing-0 10.154.0.20:56270&lt;-&gt;17.188.172.94:443[ACTIVE][r:r][ACTIVE][r][NOT_HANDSHAKING][0][0][0]: 158 bytes read
2023-02-23 16:32:05.975 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &lt;&lt; &quot;HTTP/1.1 403 Forbidden[\r][\n]&quot;
2023-02-23 16:32:05.975 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &lt;&lt; &quot;content-type: text/plain; charset=UTF-8[\r][\n]&quot;
2023-02-23 16:32:05.975 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &lt;&lt; &quot;content-length: 24[\r][\n]&quot;
2023-02-23 16:32:05.975 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &lt;&lt; &quot;apns-id: 3253F680-762D-BC6F-9218-CB0F250A9142[\r][\n]&quot;
2023-02-23 16:32:05.975 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &lt;&lt; &quot;[\r][\n]&quot;
2023-02-23 16:32:05.975 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.wire                     : http-outgoing-0 &lt;&lt; &quot;{&quot;reason&quot;:&quot;BadJwtToken&quot;}&quot;
2023-02-23 16:32:05.978 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.headers                  : http-outgoing-0 &lt;&lt; HTTP/1.1 403 Forbidden
2023-02-23 16:32:05.978 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.headers                  : http-outgoing-0 &lt;&lt; content-type: text/plain; charset=UTF-8
2023-02-23 16:32:05.978 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.headers                  : http-outgoing-0 &lt;&lt; content-length: 24
2023-02-23 16:32:05.978 DEBUG 17412 --- [/O dispatcher 1] org.apache.http.headers                  : http-outgoing-0 &lt;&lt; apns-id: 3253F680-762D-BC6F-9218-CB0F250A9142
2023-02-23 16:32:05.978 DEBUG 17412 --- [/O dispatcher 1] o.a.h.i.nio.client.InternalIODispatch    : http-outgoing-0 [ACTIVE(24)] Response received
</code></pre>
<p>I've tried pretty much everything I can think of at this stage</p>
",
tags:"<java><push-notification><safari><web-push><safari-push-notifications>",
score:6,
creationDate:2023-02-23 16:48:14,
creationDate:2023-02-24 09:45:12,
score:12,
acceptedResponderReputation:3013,
acceptedResponder:1842599,
QuestionerReputation:63,
Questioner:13278272}
{title:"Need Help : Caused by: java.lang.NullPointerException: Cannot invoke ""String.contains(java.lang.CharSequence)"" because ""variable"" is null",
id:"https://stackoverflow.com/questions/75745969",
body:"<p>I am trying to upgrade my SpringBoot Version from 2.1.1 to 2.7.x ( 2.7.5){Java Version - 17}, When I try to Run my application , I am getting the following error message</p>
<blockquote>
<p>Caused by: java.lang.NullPointerException: Cannot invoke &quot;String.contains(java.lang.CharSequence)&quot; because &quot;variable&quot; is null
at org.springframework.data.jpa.repository.query.QueryUtils.createCountQueryFor(QueryUtils.java:607)
at org.springframework.data.jpa.repository.query.DefaultQueryEnhancer.createCountQueryFor(DefaultQueryEnhancer.java:49)
at org.springframework.data.jpa.repository.query.StringQuery.deriveCountQuery(StringQuery.java:119)
at org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.(AbstractStringBasedJpaQuery.java:72)
at org.springframework.data.jpa.repository.query.NativeJpaQuery.(NativeJpaQuery.java:53)
at org.springframework.data.jpa.repository.query.JpaQueryFactory.fromMethodWithQueryString(JpaQueryFactory.java:51)
at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$DeclaredQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:169)
at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$CreateIfNotFoundQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:253)
at org.springframework.data.jpa.repository.query.JpaQueryLookupStrategy$AbstractQueryLookupStrategy.resolveQuery(JpaQueryLookupStrategy.java:93)
at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.lookupQuery(QueryExecutorMethodInterceptor.java:103)
... 60 common frames omitted</p>
</blockquote>
<p>Here are my dependencies:</p>
<pre><code>
implementation 'org.springframework.boot:spring-boot:2.7.5'

    implementation('org.springframework.boot:spring-boot-starter-data-jpa')
    implementation('org.springframework.boot:spring-boot-starter-actuator')
    implementation('org.springframework.boot:spring-boot-starter-web')
    implementation('org.springframework.boot:spring-boot-starter-parent:2.7.5')

    implementation('org.springframework:spring-jdbc')
    implementation('org.springframework:spring-orm')
    implementation('org.springframework:spring-core')
    implementation('org.springframework:spring-beans')
    implementation('org.springframework:spring-webmvc')
    implementation('org.springframework:spring-web')
    implementation('org.springframework:spring-context')
    testImplementation 'org.springframework:spring-test:5.3.25'
    compileOnly group: 'javax.servlet', name: 'servlet-api', version: '2.5'
    runtime(&quot;org.springframework.boot:spring-boot-properties-migrator&quot;)
    compileOnly group: 'javax.servlet', name: 'javax.servlet-api', version: '4.0.1'
    implementation group: 'org.apache.tomcat.embed', name: 'tomcat-embed-core', version: '9.0.56'
    implementation group: 'org.hibernate', name: 'hibernate-core', version: '5.6.5.Final'
    implementation 'org.springframework.cloud:spring-cloud-context:3.1.0'
    implementation group: 'org.springframework.security', name: 'spring-security-core', version: '5.6.9'
    implementation group: 'javax.xml.bind', name: 'jaxb-api', version: '2.3.1'
    implementation group: 'org.hibernate', name: 'hibernate-entitymanager', version: '5.4.0.Final'
    implementation group: 'org.hibernate.javax.persistence', name: 'hibernate-jpa-2.1-api', version: '1.0.2.Final'
    implementation(&quot;net.bytebuddy:byte-buddy:1.14.0&quot;)
    compileOnly 'org.projectlombok:lombok:1.18.26'
    annotationProcessor 'org.projectlombok:lombok:1.18.26'
</code></pre>
<p>Looking for a fix for this. This block is throwing an error:</p>
<pre><code>@Modifying
    @Transactional
    @Query(value = &quot;INSERT INTO W (CREATED_DATE, PRODUCT_CODE, TENANT_ID, UPDATED_DATE, UUID, STORE_ID) SELECT TO_TIMESTAMP(:createdDate, :format), :productCode, :tenantId, TO_TIMESTAMP(:updatedDate, :format), :uuid, :storeId FROM W WHERE ROWNUM &lt;= 1 AND NOT EXISTS (select * from W w2 WHERE UUID = :uuid  AND PRODUCT_CODE =:productCode)&quot; ,nativeQuery = true)
    int insertIntoW(@Param(&quot;format&quot;) String format, @Param(&quot;createdDate&quot;)String createdDate, @Param(&quot;productCode&quot;)String productCode, @Param(&quot;tenantId&quot;)String tenantId, @Param(&quot;updatedDate&quot;) String updatedDate, @Param(&quot;uuid&quot;)String uuid, @Param(&quot;storeId&quot;) String storeId);

</code></pre>
",
tags:"<spring-boot><spring-data-jpa><nullpointerexception><jpa-2.1><java-17>",
score:8,
creationDate:2023-03-15 14:17:28,
creationDate:2023-03-23 13:22:57,
score:12,
acceptedResponderReputation:360,
acceptedResponder:6899343,
QuestionerReputation:83,
Questioner:21318219}
{title:"Why wont my images load in my React Vite project?",
id:"https://stackoverflow.com/questions/77138313",
body:"<p><strong>Public Folder&gt;&gt;</strong>
leaves.jpg</p>
<p><strong>App.jsx:</strong></p>
<pre><code>function App() {
return (
&lt;img src=&quot;./public/leaves.jpg&quot; alt &quot;img&quot; /&gt;
)
}
</code></pre>
<p>The image is showing up on my image-preview extension which usually indicated the path is correct, I'm not sure what I'm doing wrong. It doesn't return an error when I try to use this method. I also tried importing the image like: <code>import leaves from './public/leaves.jpg'</code> and plugging it in like: <code>&lt;img src={leaves} alt &quot;img&quot; /&gt;</code>, but it was throwing an error that the file couldn't be found.</p>
<p>Any help would be appreciated, thank you.</p>
",
tags:"<javascript><reactjs><vite>",
score:6,
creationDate:2023-09-19 22:34:39,
creationDate:2023-09-19 22:40:33,
score:12,
acceptedResponderReputation:22817,
acceptedResponder:1073758,
QuestionerReputation:233,
Questioner:19544951}
{title:"TypeError: res.getHeader is not a function in NextJS API",
id:"https://stackoverflow.com/questions/76319880",
body:"<p>I am trying to create a web application with NextJS 13 with TypeScript, Next Auth v4, Prisma (with a SQLite database for development) and OpenAI.</p>
<p>The console displays an error whenever I access to the API endpoint with the following message:</p>
<blockquote>
<p>error - TypeError: res.getHeader is not a function</p>
<p>at setCookie (webpack-internal:///(sc_server)/./node_modules/next-auth/next/utils.js:11:49)</p>
</blockquote>
<p>I have detected that the code fails whenever it tries to assign the session variable with <code>getServerSession()</code> at this line:</p>
<pre class=""lang-js prettyprint-override""><code>export async function GET(
    req: NextApiRequest, 
    res: NextApiResponse
) {
    const session = await getServerSession(req, res, authOptions) // &lt;-- here it fails
    const sessionErrors = checkSessionErrors(session, req.url);
    if (sessionErrors) return sessionErrors;

    // rest of the code
}
</code></pre>
<p>I have been researching over the internet and I found some issues related to a Webpack middleware. But I am not using any middleware.</p>
<p>I have tried also replacing the code to look like this:</p>
<pre class=""lang-js prettyprint-override""><code>export async function GET(req: NextRequest) {
    const session = await getServerSession() // not sure how to fill this now
    const sessionErrors = checkSessionErrors(session, req.url);
    if (sessionErrors) return sessionErrors;

    // rest of the code
    // return stuff with NextResponse.json()
}
</code></pre>
<p>Not sure how to proceed now, any suggested actions on this?</p>
",
tags:"<javascript><node.js><next.js><prisma><next-auth>",
score:6,
creationDate:2023-05-24 03:14:44,
creationDate:2023-05-24 08:39:22,
score:12,
acceptedResponderReputation:136,
acceptedResponder:3564552,
QuestionerReputation:3466,
Questioner:6421288}
{title:"How to import custom google fonts in NextJS 13? Link tags not working",
id:"https://stackoverflow.com/questions/76362978",
body:"<p>I am trying to use <em>Google Fonts</em> on a <strong>Nextjs</strong> project with the newest <strong>version 13</strong> and I can't import Google Fonts (i.e. Poppins) correctly.</p>
<p>In the past I just added the link tags to the <code>_document.js</code> or <code>_app.js</code> file and that was it.</p>
<p>I am trying it this way without success:</p>
<pre><code>  &lt;Head&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.googleapis.com&quot; /&gt;
    &lt;link rel=&quot;preconnect&quot; href=&quot;https://fonts.gstatic.com&quot; crossorigin /&gt;
    &lt;link href=&quot;https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&amp;display=swap&quot; rel=&quot;stylesheet&quot;&gt;&lt;/link&gt;
  &lt;/Head&gt;
</code></pre>
<p>In the past, an alternative was to import the Google fonts on the global CSS stylesheet with @import but this method doesn't work either:</p>
<pre><code>@import url(&quot;https://fonts.googleapis.com/css?family=Poppins:300,400,700&quot;);
</code></pre>
<p>Please let me know how can I do it on Next version 13 and up</p>
",
tags:"<javascript><reactjs><next.js><google-fonts>",
score:6,
creationDate:2023-05-30 08:32:05,
creationDate:2023-05-30 09:06:27,
score:12,
acceptedResponderReputation:583,
acceptedResponder:14260530,
QuestionerReputation:888,
Questioner:6739197}
{title:"Flyway unrecognised migration name format when run in docker",
id:"https://stackoverflow.com/questions/77228513",
body:"<p>When run from the IDE the migrations are fine</p>
<p>Output:</p>
<pre><code>INFO: Successfully applied 1 migration to schema `db`, now at version v1
</code></pre>
<p>But when I run the application from a container then
Output:</p>
<pre><code>example  | Exception in thread &quot;main&quot; 
example  | org.flywaydb.core.api.FlywayException: Invalid SQL filenames found:
example  | Unrecognised migration name format: V1__Example.sql
</code></pre>
<p>I have tried different Java versions. Going into the container itself and looking at the migration file, it looked ok.  Maybe I can get some ideas from here?</p>
<p>Example code to reproduce the problem:</p>
<p>Applikation.kt</p>
<pre><code>package com.example
import com.mysql.cj.jdbc.MysqlDataSource
import com.typesafe.config.ConfigFactory
import io.ktor.server.application.*
import io.ktor.server.engine.*
import io.ktor.server.netty.*
import org.flywaydb.core.Flyway

fun main() {
    embeddedServer(Netty, port = 8080, host = &quot;0.0.0.0&quot;, module = Application::module)
        .start(wait = true)
}

fun Application.module() {
    val conf = ConfigFactory.load()
    val mysqlDataSource = MysqlDataSource()
    mysqlDataSource.setURL(conf.getString(&quot;database.url&quot;))

    Flyway.configure().dataSource(
        mysqlDataSource
    )
        .validateMigrationNaming(true)
        .load()
        .migrate()
}
</code></pre>
<p>Dockerfile</p>
<pre><code>FROM gradle:7-jdk11 AS build
COPY --chown=gradle:gradle . /home/gradle/src
WORKDIR /home/gradle/src
RUN gradle buildFatJar --no-daemon

FROM eclipse-temurin:11-jdk
EXPOSE 8080:8080
RUN mkdir /app
COPY --from=build /home/gradle/src/build/libs/*.jar /app/x.jar
ENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app/x.jar&quot;]
</code></pre>
<p>docker-compose.yml</p>
<pre><code>version: '3.5'
services:
  db:
    image: mysql:8.0
    container_name: db
    restart: always
    command: --default-authentication-plugin=caching_sha2_password
    environment:
      MYSQL_DATABASE: ${MYSQL_DB}
      MYSQL_USER: ${MYSQL_USER}
      MYSQL_PASSWORD: ${MYSQL_PASSWORD}
      MYSQL_ROOT_PASSWORD: ${MYSQL_ROOT_PASSWORD}
    ports:
      - ${MYSQL_PORT}:${MYSQL_PORT}
    expose:
      - ${MYSQL_PORT}
    healthcheck:
      test: mysqladmin ping -h 127.0.0.1 -u $$MYSQL_USER --password=$$MYSQL_PASSWORD
      interval: 5s
      timeout: 5s
      retries: 55
  api:
    image:  example:test
    container_name: example
    ports:
      - '8080:8080'
    expose:
      - '8080'
    env_file: .env
    depends_on:
      db:
        condition: service_healthy
</code></pre>
<p>dependencies</p>
<pre><code>dependencies {
    implementation(&quot;io.ktor:ktor-server-core-jvm&quot;)
    implementation(&quot;io.ktor:ktor-server-netty-jvm&quot;)
    implementation(&quot;org.flywaydb:flyway-core:9.20.0&quot;)
    implementation(&quot;org.flywaydb:flyway-mysql:9.20.0&quot;)
    implementation(&quot;mysql:mysql-connector-java:8.0.33&quot;)
}
</code></pre>
<p>You can see the full code in <a href=""https://github.com/Skarpton/flyway-docker-problem"" rel=""noreferrer"">https://github.com/Skarpton/flyway-docker-problem</a></p>
<h1>Update:</h1>
<p>It looks like in docker the program cannot find any ResourceTypeProvider. This means that there are no prefixes configured.</p>
<p>Code:</p>
<pre><code>fun Application.module() {
    val conf = ConfigFactory.load()
    val mysqlDataSource = MysqlDataSource()
    mysqlDataSource.setURL(conf.getString(&quot;database.url&quot;))

    val load = Flyway.configure().dataSource(
        mysqlDataSource
    )
        .validateMigrationNaming(true)
        .load()
    print(load.configuration.pluginRegister.getPlugins(ResourceTypeProvider::class.java)). //this is the interesting line
    load.migrate()

}
</code></pre>
<p>Outputs in ide:</p>
<p>[org.flywaydb.core.internal.resource.CoreResourceTypeProvider@2381b1e8]</p>
<p>In docker:</p>
<p>[]</p>
",
tags:"<java><docker><kotlin><flyway><ktor>",
score:7,
creationDate:2023-10-04 09:49:03,
creationDate:2023-10-05 12:28:58,
score:12,
acceptedResponderReputation:201,
acceptedResponder:11465945,
QuestionerReputation:201,
Questioner:11465945}
{title:"Getting around the deprecation of java.net.URL",
id:"https://stackoverflow.com/questions/75908405",
body:"<p>I'm migrating my code to Java 20.</p>
<p>In this release, the <a href=""https://download.java.net/java/early_access/jdk20/docs/api/java.base/java/net/URL.html#constructor-deprecation"" rel=""noreferrer"">java.net.URL#URL(java.lang.String)</a> got deprecated. Unfortunately, I have a class where I found no replacement for the old URL constructor.</p>
<pre><code>package com.github.bottomlessarchive.loa.url.service.encoder;

import io.mola.galimatias.GalimatiasParseException;
import org.springframework.stereotype.Service;

import java.net.MalformedURLException;
import java.net.URI;
import java.net.URISyntaxException;
import java.net.URL;
import java.util.Optional;

/**
 * This service is responsible for encoding existing {@link URL} instances to valid
 * &lt;a href=&quot;https://en.wikipedia.org/wiki/Internationalized_Resource_Identifier&quot;&gt;resource identifiers&lt;/a&gt;.
 */
@Service
public class UrlEncoder {

    /**
     * Encodes the provided URL to a valid
     * &lt;a href=&quot;https://en.wikipedia.org/wiki/Internationalized_Resource_Identifier&quot;&gt;resource identifier&lt;/a&gt; and return
     * the new identifier as a URL.
     *
     * @param link the url to encode
     * @return the encoded url
     */
    public Optional&lt;URL&gt; encode(final String link) {
        try {
            final URL url = new URL(link);

            // We need to further validate the URL because the java.net.URL's validation is inadequate.
            validateUrl(url);

            return Optional.of(encodeUrl(url));
        } catch (GalimatiasParseException | MalformedURLException | URISyntaxException e) {
            return Optional.empty();
        }
    }

    private void validateUrl(final URL url) throws URISyntaxException {
        // This will trigger an URISyntaxException. It is needed because the constructor of java.net.URL doesn't always validate the
        // passed url correctly.
        new URI(url.getProtocol(), url.getUserInfo(), url.getHost(), url.getPort(), url.getPath(), url.getQuery(), url.getRef());
    }

    private URL encodeUrl(final URL url) throws GalimatiasParseException, MalformedURLException {
        return io.mola.galimatias.URL.parse(url.toString()).toJavaURL();
    }
}
</code></pre>
<p>Luckily, I have tests for the class as well:</p>
<pre><code>package com.github.bottomlessarchive.loa.url.service.encoder;

import org.junit.jupiter.params.ParameterizedTest;
import org.junit.jupiter.params.provider.CsvSource;

import java.net.MalformedURLException;
import java.net.URL;
import java.util.Optional;

import static org.assertj.core.api.Assertions.assertThat;

class UrlEncoderTest {

    private final UrlEncoder underTest = new UrlEncoder();

    @ParameterizedTest
    @CsvSource(
            value = {
                    &quot;http://www.example.com/?test=Hello world,http://www.example.com/?test=Hello%20world&quot;,
                    &quot;http://www.example.com/?test=ŐÚőúŰÜűü,http://www.example.com/?test=%C5%90%C3%9A%C5%91%C3%BA%C5%B0%C3%9C%C5%B1%C3%BC&quot;,
                    &quot;http://www.example.com/?test=random word £500 bank $,&quot;
                            + &quot;http://www.example.com/?test=random%20word%20%C2%A3500%20bank%20$&quot;,
                    &quot;http://www.aquincum.hu/wp-content/uploads/2015/06/Aquincumi-F%C3%BCzetek_14_2008.pdf,&quot;
                            + &quot;http://www.aquincum.hu/wp-content/uploads/2015/06/Aquincumi-F%C3%BCzetek_14_2008.pdf&quot;,
                    &quot;http://www.aquincum.hu/wp-content/uploads/2015/06/Aquincumi-F%C3%BCzetek_14 _2008.pdf,&quot;
                            + &quot;http://www.aquincum.hu/wp-content/uploads/2015/06/Aquincumi-F%C3%BCzetek_14%20_2008.pdf&quot;
            }
    )
    void testEncodeWhenUsingValidUrls(final String urlToEncode, final String expected) throws MalformedURLException {
        final Optional&lt;URL&gt; result = underTest.encode(urlToEncode);

        assertThat(result)
                .contains(new URL(expected));
    }

    @ParameterizedTest
    @CsvSource(
            value = {
                    &quot;http://промкаталог.рф/PublicDocuments/05-0211-00.pdf&quot;
            }
    )
    void testEncodeWhenUsingInvalidUrls(final String urlToEncode) {
        final Optional&lt;URL&gt; result = underTest.encode(urlToEncode);

        assertThat(result)
                .isEmpty();
    }
}
</code></pre>
<p>The only dependency it uses is the <a href=""https://mvnrepository.com/artifact/io.mola.galimatias/galimatias/0.2.1"" rel=""noreferrer"">galamatias</a> URL library.</p>
<p>Does anyone have any ideas on how could I remove the <code>new URL(link)</code> code fragment while keeping the functionality the same?</p>
<p>I tried various things, like using <code>java.net.URI#create</code> but it did not produce the exact result as the previous solution. For example, URLs that contain non-encoded characters like a space in <code>http://www.example.com/?test=Hello world</code> resulted in an IllegalArgumentException. This was parsed by the URL class without giving an error (and my data contains a lot of these). Also, links that failed the URL conversion like <code>http://промкаталог.рф/PublicDocuments/05-0211-00.pdf</code> are converted to URI successfully with URI.create.</p>
",
tags:"<java>",
score:12,
creationDate:2023-04-01 19:29:24,
creationDate:2023-04-03 19:21:47,
score:12,
acceptedResponderReputation:22461,
acceptedResponder:664577,
QuestionerReputation:4150,
Questioner:1420715}
{title:"What is the difference between 'bigint' (lowercase) and 'BigInt'?",
id:"https://stackoverflow.com/questions/76477290",
body:"<p>So I am trying to update some typescript code that uses external library for big numbers to BigInt (ES2020) and linter is complaining a lot.
I don't really understand what is going on here.</p>
<p><a href=""https://i.sstatic.net/VnQSK.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/VnQSK.png"" alt=""enter image description here"" /></a></p>
<p>It looks like there are two different types - 'bigint' and 'BigInt' and this two are not compatible with each other.</p>
<p>when I change <code>partialValue</code> type to 'bigint' the error disappears. Does this mean I should use 'bigint' instead of 'BigInt'? It is 'BigInt' in the documentation. Thats pretty confusing I must say.</p>
",
tags:"<javascript><typescript><bigint><ecmascript-2020>",
score:6,
creationDate:2023-06-14 20:25:05,
creationDate:2023-06-14 20:37:16,
score:12,
acceptedResponderReputation:1261,
acceptedResponder:11249828,
QuestionerReputation:89,
Questioner:18883345}
{title:"Java 21 guarded pattern exhaustiveness",
id:"https://stackoverflow.com/questions/77189424",
body:"<p>I started to play with the new <a href=""https://en.wikipedia.org/wiki/Java_version_history#Java_21"" rel=""noreferrer"">Java 21</a> feature - <a href=""https://openjdk.org/jeps/441"" rel=""noreferrer"">pattern matching</a>.</p>
<pre class=""lang-java prettyprint-override""><code>public class Main {

  public static void main(String[] args) {

    RecordB recordB = new RecordB(true);

    switch(recordB) {
      case RecordB b when b.bool() -&gt; System.out.println(&quot;It's true&quot;);
      case RecordB b when !b.bool() -&gt; System.out.println(&quot;It's false&quot;);
    }

  }

  record RecordB(boolean bool) { }
}
</code></pre>
<p>When compiling the code above, the compiler yields information that <code>the switch statement does not cover all possible input values</code></p>
<p>This is not necessarily true from my perspective. So here is my question: does any guarded pattern always make the switch expression non-exhaustive for the compiler or I am missing something here?</p>
",
tags:"<java><pattern-matching><java-21>",
score:10,
creationDate:2023-09-27 16:46:57,
creationDate:2023-09-27 17:48:36,
score:12,
acceptedResponderReputation:14958,
acceptedResponder:5640649,
QuestionerReputation:331,
Questioner:7927921}
{title:"Maven project fails to resolve JavaFX dependencies",
id:"https://stackoverflow.com/questions/78542808",
body:"<p>I would need some advice on how to troubleshoot this issue I'm having with my project, so there's not going to be a minimal reproducible code example, as it's not about the code itself.</p>
<p>Maven and Java are properly setup and working on all machines and OSes. Project was initially created with IntelliJ on Linux and working on any Linux machine without issues. However, trying to run <code>mvn clean install</code> on Windows or macOS on the project will always result in the following error:</p>
<blockquote>
<p>[ERROR] Failed to execute goal on project RNGame: Could not resolve
dependencies for project com.ceebee:RNGame:jar:1.0-SNAPSHOT: The
following artifacts could not be resolved:
org.openjfx:javafx-controls:jar:${javafx.platform}:21.0.3 (absent),
org.openjfx:javafx-graphics:jar:${javafx.platform}:21.0.3 (absent),
org.openjfx:javafx-base:jar:${javafx.platform}:21.0.3 (absent),
org.openjfx:javafx-fxml:jar:${javafx.platform}:21.0.3 (absent),
org.openjfx:javafx-media:jar:${javafx.platform}:21.0.3 (absent): Could
not find artifact
org.openjfx:javafx-controls:jar:${javafx.platform}:21.0.3 in central
(<a href=""https://repo.maven.apache.org/maven2"" rel=""noreferrer"">https://repo.maven.apache.org/maven2</a>)</p>
</blockquote>
<p>This is my current <a href=""https://pastebin.com/vGrij9Ln"" rel=""noreferrer"">pom.xml</a>:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;
         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;
         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;
    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;

    &lt;groupId&gt;com.ceebee&lt;/groupId&gt;
    &lt;artifactId&gt;RNGame&lt;/artifactId&gt;
    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;
    &lt;name&gt;RNGame&lt;/name&gt;

    &lt;properties&gt;
        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;
        &lt;junit.version&gt;5.8.2&lt;/junit.version&gt;
    &lt;/properties&gt;

    &lt;dependencies&gt;
        &lt;!-- https://mvnrepository.com/artifact/org.openjfx/javafx --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;
            &lt;artifactId&gt;javafx&lt;/artifactId&gt;
            &lt;version&gt;21.0.3&lt;/version&gt;
            &lt;type&gt;pom&lt;/type&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;
            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;
            &lt;version&gt;21.0.3&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;
            &lt;artifactId&gt;javafx-fxml&lt;/artifactId&gt;
            &lt;version&gt;21.0.3&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;
            &lt;artifactId&gt;javafx-media&lt;/artifactId&gt;
            &lt;version&gt;21.0.3&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;
            &lt;artifactId&gt;junit-jupiter-api&lt;/artifactId&gt;
            &lt;version&gt;${junit.version}&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;
            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;
            &lt;version&gt;${junit.version}&lt;/version&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
                &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
                &lt;artifactId&gt;lombok&lt;/artifactId&gt;
                &lt;version&gt;1.18.32&lt;/version&gt;
                &lt;scope&gt;provided&lt;/scope&gt;
            &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.fasterxml.jackson.core&lt;/groupId&gt;
            &lt;artifactId&gt;jackson-databind&lt;/artifactId&gt;
            &lt;version&gt;2.17.0&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;

    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.10.1&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;source&gt;20&lt;/source&gt;
                    &lt;target&gt;20&lt;/target&gt;
                    &lt;annotationProcessorPaths&gt;
                        &lt;path&gt;
                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
                            &lt;version&gt;1.18.32&lt;/version&gt;
                        &lt;/path&gt;
                    &lt;/annotationProcessorPaths&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;
                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;0.0.8&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;
                        &lt;id&gt;default-cli&lt;/id&gt;
                        &lt;configuration&gt;
                            &lt;mainClass&gt;com.ceebee.rngame/com.ceebee.rngame.RNGame&lt;/mainClass&gt;
                            &lt;launcher&gt;RNGame.sh&lt;/launcher&gt;
                            &lt;jlinkZipName&gt;RNGame&lt;/jlinkZipName&gt;
                            &lt;jlinkImageName&gt;RNGame&lt;/jlinkImageName&gt;
                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;
                            &lt;stripJavaDebugAttributes&gt;true&lt;/stripJavaDebugAttributes&gt;
                            &lt;noManPages&gt;true&lt;/noManPages&gt;
                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;
                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
            &lt;plugin&gt;
                &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;
                &lt;version&gt;3.3.0&lt;/version&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;id&gt;copy-external-resources&lt;/id&gt;
                        &lt;phase&gt;generate-sources&lt;/phase&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;copy-resources&lt;/goal&gt;
                        &lt;/goals&gt;
                        &lt;configuration&gt;
                            &lt;outputDirectory&gt;${basedir}/target/res&lt;/outputDirectory&gt;
                            &lt;resources&gt;
                                &lt;resource&gt;
                                    &lt;directory&gt;res&lt;/directory&gt;
                                &lt;/resource&gt;
                            &lt;/resources&gt;
                        &lt;/configuration&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>
<p>I'm on both macOS 13.4.1 and Windows 10. Here is the output of <code>mvn --version</code> for mac including all necessary info:</p>
<blockquote>
<p>Apache Maven 3.9.7 (8b094c9513efc1b9ce2d952b3b9c8eaedaf8cbf0) Maven
home: /usr/local/Cellar/maven/3.9.7/libexec Java version: 21.0.3,
vendor: Homebrew, runtime:
/usr/local/Cellar/openjdk/21.0.3/libexec/openjdk.jdk/Contents/Home
Default locale: en_GB, platform encoding: UTF-8 OS name: &quot;mac os x&quot;,
version: &quot;13.4.1&quot;, arch: &quot;x86_64&quot;, family: &quot;mac&quot;</p>
</blockquote>
<p>Maven version on Linux is 3.9.6. I haven't found much info on this particular issue online. My environments are set up all the same way on every machine. The project can be build just fine on any other Linux machine, but not Windows/macOS. The related <strong>JavaFX artifacts are being downloaded and are present in the .m2 directory</strong>, yet Maven can't seem to resolve them. There are no specific Maven settings in place. The hint about <code>{javafx.platform}</code> doesn't help me much, as specifying this property as e.g. <code>&lt;classifier&gt;mac&lt;/classifier&gt;</code> doesn't help.</p>
<p>All setups are fresh on Windows/macOS with proper environment variables and java and mvn commands being recognised on the command line/terminal. Any pointers on how to go on about this issue would be appreciated.</p>
",
tags:"<java><maven><javafx>",
score:12,
creationDate:2024-05-28 08:20:49,
creationDate:2024-05-28 13:30:37,
score:13,
acceptedResponderReputation:146,
acceptedResponder:25290734,
QuestionerReputation:461,
Questioner:7647658}
{title:"Does a client layout make everything client? If so, how to add client interactivities to it while keeping it a server component?",
id:"https://stackoverflow.com/questions/75801266",
body:"<p>I'm trying to understand how to handle modals opening/closing with server components. Previously, with client components, I would just lift the state up to my <code>Layout</code>:</p>
<pre class=""lang-js prettyprint-override""><code>export default function Layout({ children }) {

const [showPopup, setShowPopup] = useState(true)

return (
&lt;&gt;
  &lt;Popup showPopup={showPopup} setShowPopup={setShowPopup} /&gt;
  &lt;div&gt;{children}&lt;/div&gt;
&lt;/&gt;
)
</code></pre>
<p>And then show/hide my popup according to this state. However, with server components, I can't do that anymore. To make it work, I would need to <code>&quot;use client&quot;</code> at the top to make it a client component, but then the whole app would be a client component (because that's my root layout).</p>
<p>I want the root layout to be a server component to allow the app to leverage infrastructure toward better performance and overall user experience.</p>
<p>So how do you handle showing or hiding a modal without relying on useState and client components ? This case is so common that I'm probably missing something obvious, but I can't find the answer.</p>
",
tags:"<javascript><reactjs><next.js>",
score:8,
creationDate:2023-03-21 12:32:39,
creationDate:2023-03-21 13:39:47,
score:13,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:474,
Questioner:1396254}
{title:"How to enable Object.groupBy() in TypeScript and Node.js",
id:"https://stackoverflow.com/questions/77663053",
body:"<p>I am running on Node.js v18.17.1 and TypeScript v5.</p>
<p>I heard about the new JavaScript method <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/groupBy"" rel=""nofollow noreferrer""><code>Object.groupBy()</code></a>.</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"" data-babel-preset-react=""false"" data-babel-preset-ts=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const inventory = [
  { name: ""asparagus"", type: ""vegetables"", quantity: 5 },
  { name: ""bananas"", type: ""fruit"", quantity: 0 },
  { name: ""goat"", type: ""meat"", quantity: 23 },
  { name: ""cherries"", type: ""fruit"", quantity: 5 },
  { name: ""fish"", type: ""meat"", quantity: 22 },
];

const result = Object.groupBy(inventory, ({ type }) =&gt; type);
console.log(result)</code></pre>
</div>
</div>
</p>
<p>When I write in my code <code>Object.groupBy()</code>, I get the following TypeScript error:</p>
<pre><code>Property 'groupBy' does not exist on type 'ObjectConstructor'.ts(2339)
</code></pre>
<p>I have the following TypeScript configuration:</p>
<pre class=""lang-json prettyprint-override""><code> &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;es5&quot;,
    &quot;lib&quot;: [&quot;dom&quot;, &quot;dom.iterable&quot;, &quot;esnext&quot;],
    // ... etc
</code></pre>
<p>How can I enable <code>Object.groupBy()</code> so that I can use it in my code?</p>
",
tags:"<javascript><node.js><typescript>",
score:25,
creationDate:2023-12-14 21:01:34,
creationDate:2023-12-27 21:44:45,
score:13,
acceptedResponderReputation:5903,
acceptedResponder:508797,
QuestionerReputation:3596,
Questioner:18387350}
{title:"Do javax.net.ssl.* VM arguments need to be migrated to jakarta.net.ssl.*?",
id:"https://stackoverflow.com/questions/76255670",
body:"<p>Quarkus 3 has introduced Jakarta EE 10 that need to replace all the <code>javax.*</code> package with <code>jakarta.*</code> package.</p>
<p>In our application, we set these system properties at startup:</p>
<pre><code>-Djavax.net.ssl.trustStore=...
-Djavax.net.ssl.trustStorePassword=...
</code></pre>
<p>Do we need to change it in <code>jakarta.net.ssl....</code>?</p>
",
tags:"<java><truststore><jakarta-migration>",
score:8,
creationDate:2023-05-15 15:31:05,
creationDate:2023-05-15 17:34:51,
score:13,
acceptedResponderReputation:338171,
acceptedResponder:642706,
QuestionerReputation:91,
Questioner:15005055}
{title:"Vite add assets path prefix / change assets path in compiled files",
id:"https://stackoverflow.com/questions/75486304",
body:"<p>Could you tell me please, how to change how vite assets path is built, but only for compiled files?
I mean, for example, I have file index.html like:</p>
<pre class=""lang-html prettyprint-override""><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;
  &lt;head&gt;
    &lt;meta charset=&quot;UTF-8&quot;&gt;
    &lt;link rel=&quot;icon&quot; href=&quot;/favicon.ico&quot;&gt;
    &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
    &lt;title&gt;Vite App&lt;/title&gt;
  &lt;/head&gt;
  &lt;body&gt;
    &lt;script type=&quot;module&quot; src=&quot;/src/main.js&quot;&gt;&lt;/script&gt;
  &lt;/body&gt;
&lt;/html&gt;
</code></pre>
<p>and here I have script with src=&quot;/src/main.js&quot;</p>
<p>When I compile it, I get src=&quot;/assets/index-c371877d.js&quot;</p>
<p>I am making ESP32 webserver, and because of some internal moments I need to put compiled files in another folder, on SD card.</p>
<p>I can change output directory using vite.config.js, here I have:</p>
<pre class=""lang-js prettyprint-override""><code>export default defineConfig({
  plugins: [vue(), vueJsx()],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url))
    }
  },
  build: {
    outDir: &quot;../../SD/modules/test&quot;, // test is project name
  },
})

</code></pre>
<p>But the problem is, that compiled files have same relative path, while I need to have modules/%moduleName%/%relative path%<br/>
So instead of src=&quot;/assets/index-c371877d.js&quot; I need src=&quot;module/test/assets/index-c371877d.js&quot;</p>
<p>I tried to change vite assetsDir:</p>
<pre class=""lang-js prettyprint-override""><code>export default defineConfig({
  plugins: [vue(), vueJsx()],
  resolve: {
    alias: {
      '@': fileURLToPath(new URL('./src', import.meta.url))
    }
  },
  build: {
    outDir: &quot;../../SD/modules/test&quot;,
    assetsDir: &quot;modules/test&quot;
})
</code></pre>
<p>Now it adds modules/test before path, but compiled files are put into outDir + assetsDir directory, what I don't want.</p>
<p>Tell me please, how could I just prepend necessary path data without changing real assets directory? Thank you in advance.</p>
",
tags:"<javascript><path><vite>",
score:7,
creationDate:2023-02-17 15:35:53,
creationDate:2023-02-17 18:22:12,
score:13,
acceptedResponderReputation:377,
acceptedResponder:18219093,
QuestionerReputation:377,
Questioner:18219093}
{title:"How do I setup a multi page app using vite?",
id:"https://stackoverflow.com/questions/77498366",
body:"<p>I am trying to setup a vite project that has multiple entry points.</p>
<p><a href=""https://stackblitz.com/edit/vitejs-vite-swtkdv"" rel=""noreferrer"">https://stackblitz.com/edit/vitejs-vite-swtkdv</a></p>
<p>It is a pretty basic setup taken straight from the vite website that uses vanilla flavour. Only things which I have updated are the following:</p>
<ul>
<li>add vite.config.js file with configuration for multiple entry points (check the attached stackblitz link)</li>
<li>add new files: login/index.html; login/login.js (check the attached stackblitz link)</li>
</ul>
<p>What I expect to happen is everytime I enter <code>url</code>/login, it should load the page <code>./login/index.html</code>. However in reality it keeps on loading the <code>./index.html</code>.</p>
",
tags:"<javascript><html><config><vite><multi-page-application>",
score:9,
creationDate:2023-11-16 22:28:42,
creationDate:2023-11-16 23:16:34,
score:13,
acceptedResponderReputation:1772,
acceptedResponder:9504633,
QuestionerReputation:137,
Questioner:11924762}
{title:"Argument of type 'Uint8Array' is not assignable to parameter of type 'number[]'",
id:"https://stackoverflow.com/questions/75961365",
body:"<p>Based on <a href=""https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/exportKey"" rel=""noreferrer"">crypto.subtle.exportKey(&quot;spki&quot;, cryptoKey)</a> I want to convert the returned <code>ArrayBuffer</code> into a string so I can turn it into a base64 string. Based on the documentation I tried</p>
<pre><code>const bufferAsString = String.fromCharCode.apply(null, new Uint8Array(buffer));
</code></pre>
<p>but TypeScript tells me</p>
<blockquote>
<p>TS2345: Argument of type 'Uint8Array' is not assignable to parameter of type 'number[]'.</p>
</blockquote>
<p>How can I fix the type errors?</p>
",
tags:"<javascript><typescript>",
score:7,
creationDate:2023-04-07 19:18:02,
creationDate:2023-04-07 19:24:55,
score:13,
acceptedResponderReputation:191916,
acceptedResponder:5157454,
QuestionerReputation:893,
Questioner:19698303}
{title:"WARN StatusConsoleListener The use of package scanning to locate plugins is deprecated and will be removed in a future release",
id:"https://stackoverflow.com/questions/76292921",
body:"<p>I use <code>log4j2.xml</code> to write my logs into a local file in my Maven project. I've installed the last dependencies for present day <code>&lt;version&gt;2.20.0&lt;/version&gt;)</code> in pom.xml.
My <code>log4j2.xml</code> is:</p>
<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;
&lt;Configuration status=&quot;warn&quot; name=&quot;MyApp&quot; packages=&quot;&quot;&gt;
    &lt;Appenders&gt;
        &lt;RollingFile name=&quot;RollingFile&quot; fileName=&quot;logs/app.log&quot; filePattern=&quot;logs/app-%d{MM-dd-yyyy}.log.gz&quot;&gt;
            &lt;TimeFilter start=&quot;01:00:00&quot; end=&quot;07:00:00&quot; onMatch=&quot;ACCEPT&quot; onMismatch=&quot;DENY&quot;/&gt;

            &lt;PatternLayout&gt;
                &lt;pattern&gt;%d %p %c{1.} [%t] %m%n&lt;/pattern&gt;
            &lt;/PatternLayout&gt;
            &lt;TimeBasedTriggeringPolicy /&gt;
        &lt;/RollingFile&gt;
    &lt;/Appenders&gt;
    &lt;Loggers&gt;
        &lt;Root level=&quot;error&quot;&gt;
            &lt;AppenderRef ref=&quot;RollingFile&quot;/&gt;
        &lt;/Root&gt;
    &lt;/Loggers&gt;
&lt;/Configuration&gt;
</code></pre>
<p>My dependencies in pom.xml:</p>
<pre><code>    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
      &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;
      &lt;version&gt;2.20.0&lt;/version&gt;
    &lt;/dependency&gt;
    &lt;!-- https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core --&gt;
    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
      &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;
      &lt;version&gt;2.20.0&lt;/version&gt;
    &lt;/dependency&gt;

    &lt;dependency&gt;
      &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
      &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;
      &lt;version&gt;2.20.0&lt;/version&gt;
    &lt;/dependency&gt;
</code></pre>
<p>When I start my main method logs successfully be written in a file, but I get the message in IntelliJ IDEA console:</p>
<blockquote>
<p>WARN StatusConsoleListener The use of package scanning to locate
plugins is deprecated and will be removed in a future release</p>
</blockquote>
<p>How can I resolve the problem?  just want to stop appearing the message in console.</p>
",
tags:"<java><xml><logging><console><log4j2>",
score:9,
creationDate:2023-05-19 23:16:29,
creationDate:2023-05-20 23:54:04,
score:13,
acceptedResponderReputation:25664,
acceptedResponder:721855,
QuestionerReputation:155,
Questioner:10091319}
{title:"How to prevent Next.js from instantiating a singleton class/object multiple times?",
id:"https://stackoverflow.com/questions/75272877",
body:"<p>I have an analytics utility like this:</p>
<pre><code>class Analytics {
    data: Record&lt;string, IData&gt;;

    constructor() {
        this.data = {};
    }
    setPaths(identifier: string) {
        if (!this.data[identifier])
            this.data[identifier] = {
                generic: getGenericInit(),
                session: getSessionInit(),
                paths: {
                    geoCollectionPath: '',
                    sessionCollectionPath: '',
                    eventsCollectionPath: ''
                }
            };
        this.data[identifier].paths = {
            geoCollectionPath: getGeoPath(identifier),
            sessionCollectionPath: getSessionPath(identifier),
            eventsCollectionPath: getEventPath(identifier)
        };
    }
    getAll() {
        return this.data;
    }
}

const analytics = new Analytics();
export default analytics;
</code></pre>
<p>And I import it into 2 api folders: <code>e1.ts</code> and <code>e2.ts</code>.</p>
<p><code>e1.ts</code>:</p>
<pre><code>import { NextApiHandler } from 'next';
import analytics from '@/firebase/v2/analytics';

const handler: NextApiHandler = (req, res) =&gt; {
    analytics.setPaths('abc');
    return res.status(201).end();
};
export default handler;

</code></pre>
<p>and <code>e2.ts</code>:</p>
<pre><code>import { NextApiHandler } from 'next';
import analytics from '@/firebase/v2/analytics';

const handler: NextApiHandler = (req, res) =&gt; {
    return res.status(200).json(analytics.getAll());
};
export default handler;
</code></pre>
<p>Now even when I add the data by hitting <code>/api/e1</code> since the import instantiates a fresh class in <code>e2</code>, I fail to retrieve the data from <code>/api/e2</code>. How can I achieve my use case for this?</p>
<p>I also tried using <code>static</code> instance but that doesn't work as well. Can someone help me in finding a solution to this?</p>
",
tags:"<javascript><reactjs><typescript><next.js>",
score:8,
creationDate:2023-01-29 05:54:39,
creationDate:2023-01-29 09:48:07,
score:13,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:4921,
Questioner:8176451}
{title:"Spring Boot 3.4.0 lets integration tests with JPA/Hibernate fail",
id:"https://stackoverflow.com/questions/79228209",
body:"<p>We have updated from Spring Boot 3.3.6 to version 3.4.0. Now our integrationtests (Annotation <code>@SpringBootTest</code>) with Hibernate/JPA interactions (we're using spring-data-jpa) in it fail suddenly.</p>
<pre><code>@Test
void retrieveAllFahrzeugbewegungenByMuster() throws Exception {
    // Given
    var musterEntity = MusterMetadatenGenerator.createDefaultMuster();
    var musterEntitySaved = musterMetadatenRepository.saveAndFlush(musterEntity); // crashes here
...
}
</code></pre>
<p>The creation of the @Entity in <code>createDefaultMuster()</code> is essentially this here:</p>
<pre><code>static &lt;E extends BaseEntity&gt; E createDefaultValues(
      @NotNull final E source,
      @NotNull final LocalDate datumAb,
      @NotNull final LocalDate datumBis
) {
    final Instant now = Instant.now();

    source.setId(UUID.randomUUID());
    source.setDatumAb(datumAb);
    source.setDatumBis(datumBis);
    source.setBearbeitetAm(now);
    source.setErstelltAm(now);

    return source;
}
</code></pre>
<p>The @Entity itself looks as below:</p>
<pre><code>@Data
@NoArgsConstructor
@AllArgsConstructor
@MappedSuperclass
public class BaseEntity {

  @Id
  @GeneratedValue(strategy = GenerationType.AUTO)
  @Column(updatable = false, nullable = false)
  protected UUID id;
...
</code></pre>
<p>The exception is:</p>
<blockquote>
<p>org.springframework.orm.ObjectOptimisticLockingFailureException: Row
was updated or deleted by another transaction (or unsaved-value
mapping was incorrect):
[de.muster.jpa.entity.MusterMetadaten#40add996-a1f9-43f7-a157-cf5692e5ea65]
Caused by: org.hibernate.StaleObjectStateException: Row was updated or
deleted by another transaction (or unsaved-value mapping was
incorrect):
[de.muster.jpa.entity.MusterMetadaten#40add996-a1f9-43f7-a157-cf5692e5ea65]</p>
</blockquote>
<p>With Spring Boot 3.4.0 comes Hibernate 6.6.x, before it was Hibernate 6.5.x. Is there maybe a breaking change?</p>
",
tags:"<java><spring-boot><hibernate><spring-data-jpa>",
score:11,
creationDate:2024-11-26 20:43:45,
creationDate:2024-11-27 08:15:43,
score:13,
acceptedResponderReputation:669,
acceptedResponder:1391762,
QuestionerReputation:818,
Questioner:5841551}
{title:"Spring Boot 3 with Spring Security Intercepts exceptions I don't want it to",
id:"https://stackoverflow.com/questions/75271958",
body:"<p>I'm building an API using Spring Boot 3.0.2 with Spring Security, I've built out the security filter chain and it's working fine as far as blocking unauthenticated requests. But I have a <code>RestController</code> class that accepts <code>application/json</code>, and if I don't supply the content type header correctly I want the 415 status code returned. Which gets returned fine without Spring Security in the way. But with Spring Security it seems it's being intercepted and returning a 403 instead.</p>
<p><code>WebSecurityConfig</code>:</p>
<pre class=""lang-java prettyprint-override""><code>@Bean
public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    return http
               .cors().and()
               .csrf().disable()
               .authorizeHttpRequests(auth -&gt; auth
                   .requestMatchers(&quot;/auth**&quot;).permitAll()
                   .anyRequest().authenticated())
               .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
               .addFilterBefore(jwtAuthFilter, UsernamePasswordAuthenticationFilter.class)
               .userDetailsService(jpaUserDetailsService)
               .build();
}
</code></pre>
<p>Auth Filter:</p>
<pre class=""lang-java prettyprint-override""><code>@Component
@RequiredArgsConstructor
public class JwtAuthFilter extends OncePerRequestFilter {
    private final JwtUtils jwtUtils;

    @Override
    protected void doFilterInternal(HttpServletRequest request, HttpServletResponse response, FilterChain filterChain) throws ServletException, IOException {
        String jwtToken = request.getHeader(AUTHENTICATION_HEADER);

        if (jwtToken != null &amp;&amp; jwtToken.startsWith(&quot;Bearer &quot;)) {
            jwtToken = jwtToken.split(&quot; &quot;)[1];
            if (jwtUtils.isValidToken(jwtToken)) {
                UserDetails userDetails = new UserSecurity(jwtUtils.extractUser(jwtToken));
                UsernamePasswordAuthenticationToken auth = new UsernamePasswordAuthenticationToken(userDetails,
                        null, userDetails.getAuthorities());
                auth.setDetails(new WebAuthenticationDetailsSource().buildDetails(request));
                SecurityContextHolder.getContext().setAuthentication(auth);
            }
        }

        filterChain.doFilter(request, response);
    }
}
</code></pre>
<p>Rest Controller:</p>
<pre><code>@RestController
@RequestMapping(value = &quot;auth&quot;, consumes = MediaType.APPLICATION_JSON_VALUE, produces = MediaType.APPLICATION_JSON_VALUE)
public class AuthController {
    @GetMapping
    public Object test() {
        Map&lt;String, String&gt; test = new HashMap&lt;&gt;();
        test.put(&quot;key&quot;, &quot;val&quot;);

        return test;
    }
}
</code></pre>
<p>Is there a way to only return the 403 exception if it actually is an unauthenticated error? Not for every single exception?</p>
",
tags:"<java><spring><spring-boot><spring-security>",
score:6,
creationDate:2023-01-29 00:52:50,
creationDate:2023-01-30 10:02:56,
score:13,
acceptedResponderReputation:16969,
acceptedResponder:5277820,
QuestionerReputation:311,
Questioner:4236181}
{title:"Is there a way to use Zod to validate that a number has up to 2 decimal digits?",
id:"https://stackoverflow.com/questions/75285218",
body:"<p>I have an object with a numeric property. I'd like to make sure that the number has only up to 2 decimal digit.</p>
<p>e.g:
<code>1 // good 1.1 // good 1.11 // good 1.111 //bad</code></p>
<p>Is there way to do that?</p>
<p>Looked at Zod's documentation and searched the web. Found that i could have done it easily if my property was a string. Not sure about number.</p>
",
tags:"<javascript><typescript><zod>",
score:8,
creationDate:2023-01-30 13:37:40,
creationDate:2023-01-31 00:33:21,
score:13,
acceptedResponderReputation:23685,
acceptedResponder:2071697,
QuestionerReputation:83,
Questioner:21111012}
{title:"Cannot read properties of undefined (reading 'parseUnits') - Hardhat js",
id:"https://stackoverflow.com/questions/76536790",
body:"<p>When trying to use <code>ethers.utils.parseUnits(&quot;1&quot;, &quot;ether&quot;)</code> in a test function an error is thrown <code>TypeError: Cannot read properties of undefined (reading 'parseUnits')</code>.</p>
<pre><code>const { deployments, ethers, getNamedAccounts } = require(&quot;hardhat&quot;)
const { assert, expect } = require(&quot;chai&quot;)
describe(&quot;FundMe&quot;, async function () {
    let fundMe
    let deployer
    const sendValue = ethers.utils.parseUnits(&quot;1&quot;, &quot;ether&quot;)
})
</code></pre>
<p>I have tried using parseEther as well with the same result. In the <a href=""https://docs.ethers.org/v5/api/utils/display-logic/#utils-parseUnits"" rel=""noreferrer"">documentation specification for ethers.utils.parseUnits</a> it says to use just that. Is there another function that I am missing? Could my ethers config be incorrect?</p>
",
tags:"<javascript><solidity><chai><ethers.js><hardhat>",
score:7,
creationDate:2023-06-23 02:41:38,
creationDate:2023-06-23 02:49:35,
score:13,
acceptedResponderReputation:301,
acceptedResponder:11716389,
QuestionerReputation:301,
Questioner:11716389}
{title:"How to include Angular Material in Angular 17?",
id:"https://stackoverflow.com/questions/77538726",
body:"<p>Angular Material's documentation says:</p>
<pre><code>import { MatSlideToggleModule } from '@angular/material/slide-toggle';

@NgModule ({
  imports: [
    MatSlideToggleModule,
  ]
})
class AppModule {}
</code></pre>
<p>But Angular 17 doesn't create app.module file by default. Is there any way to do that without app.module?</p>
",
tags:"<javascript><angular><typescript>",
score:8,
creationDate:2023-11-23 17:25:38,
creationDate:2023-11-23 19:03:38,
score:13,
acceptedResponderReputation:501,
acceptedResponder:16415933,
QuestionerReputation:85,
Questioner:22973119}
{title:"Dynamically register Spring Beans based on properties",
id:"https://stackoverflow.com/questions/75046275",
body:"<p>I'm using the latest Spring Boot version and trying to dynamically create n number of beans based upon what is defined in the <code>application.yaml</code> file. I would then like to inject these beans into other classes based upon the bean name.</p>
<p>The code below is a much simplified example of what I am trying to achieve. The auto configuration would normally be part of a spring boot starter library so the number of beans needed to be registered is unknown.</p>
<pre><code>@Slf4j
@Value
public class BeanClass {

    private final String name;

    public void logName() {
        log.info(&quot;Name: {}&quot;, name);
    }

}
</code></pre>
<pre><code>@Component
@RequiredArgsConstructor
public class ServiceClass {

    private final BeanClass fooBean;
    private final BeanClass barBean;

    public void log() {
        fooBean.logName();
        barBean.logName();
    }

}
</code></pre>
<pre><code>@Value
@ConfigurationProperties
public class BeanProperties {

    private final List&lt;String&gt; beans;

}
</code></pre>
<pre><code>@Configuration
public class AutoConfiguration {

    // Obviously not correct
    @Bean
    public List&lt;BeanClass&gt; beans(final BeanProperties beanProperties) {
        return beanProperties.getBeans().stream()
                .map(BeanClass::new)
                .collect(Collectors.toList());
    }

}
</code></pre>
<pre><code>@EnableConfigurationProperties(BeanProperties.class)
@SpringBootApplication
public class DemoApplication {

    public static void main(String[] args) {
        final ConfigurableApplicationContext context = SpringApplication.run(DemoApplication.class, args);
        final ServiceClass service = context.getBean(ServiceClass.class);
        service.log();
    }

}
</code></pre>
<pre><code>beansToMake:
  - fooBean
  - barBean
</code></pre>
<p>I've tried multiple suggestions on google but nothing works and seems outdated. I'm hoping a new feature of Spring makes this straight forward.</p>
",
tags:"<java><spring><spring-boot>",
score:9,
creationDate:2023-01-08 08:00:13,
creationDate:2023-01-08 09:12:45,
score:13,
acceptedResponderReputation:5095,
acceptedResponder:10231374,
QuestionerReputation:347,
Questioner:1795075}
{title:"Deprecated .csrf() and .requiresChannel() methods after Spring Boot v3 migration",
id:"https://stackoverflow.com/questions/76993442",
body:"<p>I tried to migrate an older project to the newest version of Spring Boot a.k.a 3.1.2, as we speak. However, the .csrf() and .requiresChannel() methods of the below piece of code no longer work because of deprecations.</p>
<p>I can't find the methods that have replaced them. Can you help?</p>
<pre><code>@Configuration
@EnableWebSecurity
public class ApplicationSecurityConfig {

    private final ApplicationUserService applicationUserService;

    private final BCryptPasswordEncoder bCryptPasswordEncoder;

    public ApplicationSecurityConfig(
            ApplicationUserService applicationUserService,
            BCryptPasswordEncoder bCryptPasswordEncoder) {
        this.applicationUserService = applicationUserService;
        this.bCryptPasswordEncoder = bCryptPasswordEncoder;
    }

    @Bean
    protected SecurityFilterChain filterChain(HttpSecurity http) throws Exception {
        http
                .csrf().disable()
                .requiresChannel()
                    .antMatchers(&quot;/actuator/**&quot;)
                    .requiresInsecure()
                .and()
                .authorizeRequests()
                    .antMatchers(
                            &quot;/api/v*/registration/**&quot;,
                            &quot;/register*&quot;,
                            &quot;/login&quot;,
                            &quot;/actuator/**&quot;).permitAll()
                    .anyRequest()
                    .authenticated()
                    .and()
                .formLogin()
                    .loginPage(&quot;/login&quot;)
                    .usernameParameter(&quot;email&quot;)
                    .permitAll()
                    .defaultSuccessUrl(&quot;/&quot;,true)
                    .failureUrl(&quot;/login-error&quot;)
                .and()
                .logout()
                    .logoutUrl(&quot;/logout&quot;)
                    .clearAuthentication(true)
                    .invalidateHttpSession(true)
                    .deleteCookies(&quot;JSESSIONID&quot;,&quot;Idea-2e8e7cee&quot;)
                    .logoutSuccessUrl(&quot;/login&quot;);

        return http.build();
    }

    @Bean
    public AuthenticationManager authenticationManager(
            AuthenticationConfiguration authenticationConfiguration) throws Exception {
        return authenticationConfiguration.getAuthenticationManager();
    }

    @Bean
    public DaoAuthenticationProvider daoAuthenticationProvider() {
        DaoAuthenticationProvider provider =
                new DaoAuthenticationProvider();
        provider.setPasswordEncoder(bCryptPasswordEncoder);
        provider.setUserDetailsService(applicationUserService);
        return provider;
    }
}
</code></pre>
",
tags:"<java><spring><spring-boot>",
score:7,
creationDate:2023-08-28 13:53:57,
creationDate:2023-08-28 14:04:30,
score:13,
acceptedResponderReputation:4896,
acceptedResponder:18364656,
QuestionerReputation:464,
Questioner:14923466}
{title:"Whatsapp-web js doesn't fire ready event",
id:"https://stackoverflow.com/questions/76974079",
body:"<p>Whatsapp-web js doesn’t fire ready event and other only fire Qr event. I alos scan and authenticate the whatsapp correctly. but not working ready event.</p>
<pre><code>const { Client } = require('whatsapp-web.js');
var qrcode = require('qrcode-terminal');
const client = new Client();

client.on('qr', (qr) =&gt; {
qrcode.generate(qr, { small: true });
console.log('QR RECEIVED');
});

client.on('ready', () =&gt; {
console.log('Client is ready!');
});

client.initialize();
</code></pre>
",
tags:"<javascript><node.js><whatsapp>",
score:7,
creationDate:2023-08-25 03:23:16,
creationDate:2023-08-25 03:23:16,
score:13,
acceptedResponderReputation:496,
acceptedResponder:14459763,
QuestionerReputation:496,
Questioner:14459763}
{title:"gradle build not finding executable at expected location",
id:"https://stackoverflow.com/questions/77353676",
body:"<p>I am new to gradle. I am getting an warning message when using gradle build:</p>
<pre><code>gradle build
Path for java installation '/usr/lib/jvm/openjdk-11' (Common Linux Locations) does not contain a java executable

BUILD SUCCESSFUL in 399ms
3 actionable tasks: 3 up-to-date
</code></pre>
<p>The build is successful, but is this an issue I should fix?</p>
<p>Some info:</p>
<ol>
<li><p>usr/lib/jvm/openjdk-11 only contains a src.zip file, nothing else</p>
</li>
<li><p>'which java' returns /usr/bin/java</p>
</li>
<li><p>namei /usr/bin/java returns</p>
</li>
</ol>
<pre><code>f: /usr/bin/java
 d /
 d usr
 d bin
 l java -&gt; /etc/alternatives/java
   d /
   d etc
   d alternatives
   l java -&gt; /usr/lib/jvm/java-11-openjdk-amd64/bin/java
     d /
     d usr
     d lib
     d jvm
     d java-11-openjdk-amd64
     d bin
     - java
</code></pre>
<ol start=""4"">
<li><p>echo $JAVA_HOME returns nothing</p>
</li>
<li><p>echo $PATH returns <code> /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin:/snap/bin:/opt/gradle/gradle-8.4/bin</code></p>
</li>
<li><p>java -version returns <code>openjdk version &quot;11.0.20.1&quot; 2023-08-24 OpenJDK Runtime Environment (build 11.0.20.1+1-post-Ubuntu-0ubuntu122.04) OpenJDK 64-Bit Server VM (build 11.0.20.1+1-post-Ubuntu-0ubuntu122.04, mixed mode, sharing)</code></p>
</li>
<li><p>ChatGPT has given me a few erroneous solutions that just lead to the build failing so I won't mention those</p>
</li>
</ol>
",
tags:"<java><linux><gradle><build.gradle>",
score:6,
creationDate:2023-10-24 15:59:40,
creationDate:2024-01-11 11:39:34,
score:14,
acceptedResponderReputation:285,
acceptedResponder:14371011,
QuestionerReputation:163,
Questioner:12035343}
{title:"Flutter application on Android `private final java.lang.String java.io.File.path`",
id:"https://stackoverflow.com/questions/76230485",
body:"<p>I was facing some issue, with my flutter app. And after upgrading the <code>Gradle</code> version I started facing this issue. And i couldn't find anything close to this, after googling. But later I solved it from a different issue. SO I decided to create a issue for someone who's looking up this same issue.</p>
<p>Bcz I had no idea what to try. I was almost lost.</p>
<pre><code>Unable to make field private final java.lang.String java.io.File.path accessible: module java.base does not &quot;opens java.io&quot; to unnamed module @36297cd9
</code></pre>
",
tags:"<java><android><flutter><gradle>",
score:8,
creationDate:2023-05-11 18:04:30,
creationDate:2023-05-11 18:13:45,
score:14,
acceptedResponderReputation:708,
acceptedResponder:17198705,
QuestionerReputation:708,
Questioner:17198705}
{title:"mysql-connector-j vs mysql-connector-java maven dependency differences",
id:"https://stackoverflow.com/questions/76305054",
body:"<p>What is difference between these two Maven dependencies for connecting to MySQL DB:</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-java&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
<p>and</p>
<pre><code>&lt;dependency&gt;
    &lt;groupId&gt;com.mysql&lt;/groupId&gt;
    &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;
&lt;/dependency&gt;
</code></pre>
",
tags:"<java><maven><mysql-connector>",
score:14,
creationDate:2023-05-22 10:04:36,
creationDate:2023-05-28 12:17:39,
score:14,
acceptedResponderReputation:10877,
acceptedResponder:1919006,
QuestionerReputation:3027,
Questioner:5515287}
{title:"React Native Blob fetch throws error: Failed to construct 'Response': The status provided (0) is outside the range [200, 599]",
id:"https://stackoverflow.com/questions/76754693",
body:"<p>I am trying to convert an image to blob for uploading it to aws s3 storage.I need to connvert image to blob after selecting the image with expo-image-picker the convert to blob using fetch but it is causing the following error.</p>
<p><strong>ERROR  RangeError: Failed to construct 'Response': The status provided (0) is outside the range [200, 599]., js engine: hermes</strong></p>
<p>This is my current situation :</p>
<pre><code>import { Button, StyleSheet, Text, View } from 'react-native';
import * as ImagePicker from 'expo-image-picker'
export default function App() {
  const PickImage = async()=&gt;{
    let result = await ImagePicker.launchImageLibraryAsync({
      quality:1,
      mediaTypes:ImagePicker.MediaTypeOptions.Images,
    })
    if(!result.canceled){
      let response = await fetch(result.assets[0].uri);
      let blob = await response.blob();
      
      //code to upload image
    }
  }
  return (
    &lt;View style={styles.container}&gt;
      &lt;Button onPress={PickImage} title='TEST'/&gt;
    &lt;/View&gt;
  );
}

const styles = StyleSheet.create({
  container: {
    flex: 1,
    backgroundColor: '#fff',
    alignItems: 'center',
    justifyContent: 'center',
  },
});

</code></pre>
<p>the fetch ststement is causing error.
<code>let response = await fetch(result.assets[0].uri);</code></p>
<p><a href=""https://i.sstatic.net/tV9HR.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/tV9HR.png"" alt=""expo error"" /></a></p>
<p>I tried to build it in expo snack and it is working fine. I am not getting any errors.but it is crashing on my local setup.</p>
",
tags:"<javascript><reactjs><react-native><expo><aws-amplify>",
score:10,
creationDate:2023-07-24 12:51:10,
creationDate:2023-07-25 10:46:14,
score:14,
acceptedResponderReputation:2688,
acceptedResponder:7040601,
QuestionerReputation:133,
Questioner:19103064}
{title:"Supabase - Upsert & multiple onConflict constraints",
id:"https://stackoverflow.com/questions/75247517",
body:"<p>I cannot figure out how to proceed with an Upsert &amp; &quot;multiple&quot; onConflict constraints. I want to push a data batch in a Supabase table.</p>
<p>My data array would be structured as follows:</p>
<pre><code>items = [
    { date: &quot;2023-01-26&quot;, url: &quot;https://wwww.hello.com&quot;}, 
    { date: &quot;2023-01-26&quot;, url: &quot;https://wwww.goodbye.com&quot;}, 
    ...]
</code></pre>
<p>I would like to use the Upsert method to push this new batch in my Supabase table, unless if it already exists. To check if it already exists, I would like to use the date, and the url as onConflict criteria, if I understood well.</p>
<p>When I'm running this method</p>
<pre><code>const { error } = await supabase
        .from('items')
        .upsert(items, { onConflict: ['date','url'] })
        .select();
</code></pre>
<p>I'm having the following error:</p>
<pre><code>{
  code: '42P10',
  details: null,
  hint: null,
  message: 'there is no unique or exclusion constraint matching the ON CONFLICT specification'
}
</code></pre>
<p>What am I missing? Where am I wrong?</p>
",
tags:"<javascript><upsert><supabase>",
score:8,
creationDate:2023-01-26 14:31:07,
creationDate:2023-01-26 15:33:23,
score:14,
acceptedResponderReputation:6939,
acceptedResponder:2188186,
QuestionerReputation:1741,
Questioner:2118825}
{title:"import ""type"" and ""different variable"" in one single line",
id:"https://stackoverflow.com/questions/75407523",
body:"<p>I am new to Typescript. Currently I am trying to use TypeScript in an electron app(just practice TypeScript).</p>
<p>In my app I need to import a &quot;type&quot; and a &quot;variable/class&quot; in to my app from electron package, but currently I am doing it this way:</p>
<pre><code>import { dialog } from 'electron';
import type { BrowserWindowConstructorOptions } from 'electron';
</code></pre>
<p><strong>Is there a way I can make it one line while still clearly show what I am importing(a &quot;type&quot; or a &quot;variable/class&quot;)?</strong></p>
<p>I know that I can do something like this:</p>
<pre><code>import { dialog ,BrowserWindowConstructorOptions } from 'electron';
</code></pre>
<p>but with above code, it's not clear what I am importing, it's hard to tell if the &quot;dialog&quot; I am importing is a type or a variable.</p>
",
tags:"<javascript><typescript><import><electron>",
score:6,
creationDate:2023-02-10 06:13:26,
creationDate:2023-02-10 10:21:24,
score:14,
acceptedResponderReputation:642,
acceptedResponder:2922986,
QuestionerReputation:437,
Questioner:14152753}
{title:"How do I properly set up firebase cloud messaging for web (FCM) Using HTML, Vanilla Javascript, and Node Js",
id:"https://stackoverflow.com/questions/76666758",
body:"<p>I want to set up Firebase cloud messaging for my website. My website runs on HTML and vanilla Javascript and Nodejs for the backend. I have read the docs and still find it difficult. Also, most of the answers on stack overflow are outdated on the Firebase version.</p>
<h6>This is what I do not understand:</h6>
<h3>Client side</h3>
<ul>
<li>How do I get the Firebase config?</li>
<li>What is firebase-messaging-sw.js and where do I put it?</li>
<li>How do I get user permission?</li>
<li>How do I get the FCM Token?</li>
<li>How do I set up the <code>messaging.onMessage()</code> function?</li>
<li>How do I receive background messages?</li>
</ul>
<h3>Server Side</h3>
<ul>
<li>Where do I put the Firebase config settings?</li>
<li>How do I send a message?</li>
</ul>
",
tags:"<javascript><node.js><firebase><firebase-cloud-messaging><service-worker>",
score:9,
creationDate:2023-07-12 02:17:26,
creationDate:2023-07-12 02:20:54,
score:14,
acceptedResponderReputation:432,
acceptedResponder:13537620,
QuestionerReputation:432,
Questioner:13537620}
{title:"Gradle Build Fails with ""Unsupported class file major version 65"" After Updating to Java 17",
id:"https://stackoverflow.com/questions/79069781",
body:"<p>I’m working on a Flutter project and recently updated to Java 17. Since the update, my build fails with the following error when trying to run assembleDebug:</p>
<p>FAILURE: Build failed with an exception.</p>
<ul>
<li>What went wrong:
Could not open cp_settings generic class cache for settings file '.../android/settings.gradle'.</li>
</ul>
<blockquote>
<p>BUG! exception in phase 'semantic analysis' in source unit '<em>BuildScript</em>' Unsupported class file major version 65</p>
</blockquote>
<p>It seems to be related to Gradle and Java compatibility. I’ve already tried updating the gradle-wrapper.properties to a Gradle version that supports Java 17, but the error persists. Here's what I’ve done so far:</p>
<p>Updated gradle-wrapper.properties to use Gradle version 7.3.3:</p>
<p>distributionUrl=https://services.gradle.org/distributions/gradle-7.3.3-bin.zip
Ensured Java 17 is installed and set as the default JAVA_HOME on my system.</p>
<p>Flutter doctor output confirms that Flutter is using Java 17.</p>
<p>Despite these steps, the build continues to fail. Here's the full error output:</p>
<blockquote>
<p>BUG! exception in phase 'semantic analysis' in source unit '<em>BuildScript</em>' Unsupported class file major version 65</p>
</blockquote>
<p>Steps I’ve Tried:
Updating Gradle to 7.3.3 in gradle-wrapper.properties.
Running flutter clean and rebuilding the project.
Ensuring JAVA_HOME is pointing to the correct Java 17 installation.
Environment:
Flutter version: (specific version)
Java version: 17
Gradle version: 7.3.3 (set in gradle-wrapper.properties)</p>
<p>This is my build.gradle code</p>
<pre><code>compileOptions {
    sourceCompatibility JavaVersion.VERSION_17
    targetCompatibility JavaVersion.VERSION_17
}

kotlinOptions {
    jvmTarget = '17'
}    
</code></pre>
<p>P.S. All of this started when i updated Android Studio to the Ladybug version</p>
",
tags:"<java><android><flutter><gradle>",
score:10,
creationDate:2024-10-09 10:30:53,
creationDate:2024-10-14 08:50:52,
score:14,
acceptedResponderReputation:259,
acceptedResponder:13866511,
QuestionerReputation:259,
Questioner:13866511}
{title:"Google Maps AdvancedMarker hover listener function not working",
id:"https://stackoverflow.com/questions/76860379",
body:"<p>I have created a function that places an array of pins on a map. I have already added a click function to all markers that re-centers the map on the new location and zooms to the appropriate. This part works without issue.</p>
<p>The mouseover event listener above it will not work &amp; I can't figure out why. Is there something I'm overlooking?</p>
<pre><code>function setMarker(loc,pos){
    pos = { lat: pos['lat'], lng: pos['lng'] }; 
    let marker = new AdvancedMarkerElement({
        map: map,
        position: pos,
        title: loc
    });

    google.maps.event.addListener(marker, 'mouseover', function() {
        console.log('Marker has been moused over.');
    });

    google.maps.event.addListener(marker, 'click', function() {
        map.panTo({ lat: jp[loc]['lat'], lng: jp[loc]['lng']} );
        animZoom(jp[loc]['zoom']);
        $location = loc;
    });
}
</code></pre>
",
tags:"<javascript><google-maps><google-maps-api-3><google-maps-advanced-marker-element>",
score:10,
creationDate:2023-08-08 14:10:03,
creationDate:2023-08-12 21:54:06,
score:14,
acceptedResponderReputation:363,
acceptedResponder:17153641,
QuestionerReputation:363,
Questioner:17153641}
{title:"java 21 preview unnamed symbol for try-with-resource",
id:"https://stackoverflow.com/questions/77256384",
body:"<p>I'm reading the java 21 new future <a href=""https://openjdk.org/jeps/443"" rel=""noreferrer"">java21 unnamed</a> ,and I trying to the use unnamed in try-with-resource,But i get the Error: LinkageError occurred while loading main class the Resoen is java.lang.ClassFormatError: Illegal field name &quot;&quot; in class,Is it because this function has not been developed yet or is it a preview, so it is unstable? Or is there something wrong with my usage?</p>
<pre class=""lang-java prettyprint-override""><code> try (var _ = new FileInputStream(&quot;/Users/task/Desktop/ttt&quot;)) {

    } catch (IOException e) {
      throw new RuntimeException(e);
    }
</code></pre>
<p>Please tell me the relevant information. Thank you.</p>
",
tags:"<java>",
score:8,
creationDate:2023-10-09 05:14:17,
creationDate:2023-10-09 05:33:46,
score:14,
acceptedResponderReputation:270770,
acceptedResponder:5133585,
QuestionerReputation:101,
Questioner:17610547}
{title:"TypeError: Cannot assign to read only property 'performance' of object '[object global]'",
id:"https://stackoverflow.com/questions/77694957",
body:"<h3>Error:</h3>
<p>This error was only popping up for me when running CI for jest. I could not catch it locally in any way. Error text:</p>
<pre><code>FAIL src/utils/message.test.ts
  ● Test suite failed to run

    TypeError: Cannot assign to read only property 'performance' of object '[object global]'

       5 |
       6 | jest
    &gt;  7 |   .useFakeTimers({ legacyFakeTimers: false })
         |    ^
       8 |   .setSystemTime(new Date(fakeTime));
       9 |
      10 | jest.mock('src/constants/env', () =&gt; {

      at hijackMethod (../node_modules/@sinonjs/fake-timers/src/fake-timers-src.js:946:32)
      at Object.install (../node_modules/@sinonjs/fake-timers/src/fake-timers-src.js:1733:17)
      at Object.&lt;anonymous&gt; (src/utils/message.test.ts:7:4)
</code></pre>
",
tags:"<javascript><node.js><typescript><jestjs><usefaketimers>",
score:11,
creationDate:2023-12-20 23:17:15,
creationDate:2023-12-20 23:17:15,
score:14,
acceptedResponderReputation:1175,
acceptedResponder:14274230,
QuestionerReputation:1175,
Questioner:14274230}
{title:"How to fix Next.js 14.1 prerendering Error",
id:"https://stackoverflow.com/questions/77914354",
body:"<p>I recently upgraded my Next.js 14.01 to 14.1 and I got this error while doing the build in my app how can I fix this error?</p>
<p>it says :</p>
<pre><code>Error occurred prerendering page &quot;/collections&quot;. Read more: https://nextjs.org/docs/messages/prerender-error
 ⨯ useSearchParams() should be wrapped in a suspense boundary at page &quot;/contactus&quot;. Read more: https://nextjs.org/docs/messages/missing-suspense-with-csr-bailout
Error occurred prerendering page &quot;/contactus&quot;. Read more: https://nextjs.org/docs/messages/prerender-error
 ⨯ useSearchParams() should be wrapped in a suspense boundary at page &quot;/login&quot;. Read more: https://nextjs.org/docs/messages/missing-suspense-with-csr-bailout
Error occurred prerendering page &quot;/login&quot;. Read more: https://nextjs.org/docs/messages/prerender-error
 ⨯ useSearchParams() should be wrapped in a suspense boundary at page &quot;/orders&quot;. Read more: https://nextjs.org/docs/messages/missing-suspense-with-csr-bailout
Error occurred prerendering page &quot;/orders&quot;. Read more: https://nextjs.org/docs/messages/prerender-error
 ⨯ useSearchParams() should be wrapped in a suspense boundary at page &quot;/register&quot;. Read more: https://nextjs.org/docs/messages/missing-suspense-with-csr-bailout
Error occurred prerendering page &quot;/register&quot;. Read more: https://nextjs.org/docs/messages/prerender-error

 ✓ Generating static pages (21/21) 
&gt; Export encountered errors on following paths:
    /_not-found
    /admin/add-products/page: /admin/add-products
    /admin/manage-orders/page: /admin/manage-orders
    /admin/manage-products/page: /admin/manage-products
    /admin/page: /admin
    /cart/page: /cart
    /checkout/page: /checkout
    /collections/page: /collections
    /contactus/page: /contactus
    /login/page: /login
    /orders/page: /orders
    /register/page: /register
Error: Command &quot;npm run build&quot; exited with 1
</code></pre>
<p><a href=""https://i.sstatic.net/IjAom.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/IjAom.png"" alt=""enter image description here"" /></a></p>
<p>Please help me to fix this error.</p>
",
tags:"<javascript><reactjs><typescript><next.js>",
score:10,
creationDate:2024-01-31 15:04:29,
creationDate:2024-01-31 15:40:24,
score:15,
acceptedResponderReputation:4728,
acceptedResponder:18079514,
QuestionerReputation:886,
Questioner:10506370}
{title:"Cannot resolve method 'setReadTimeout' in 'HttpComponentsClientHttpRequestFactory'",
id:"https://stackoverflow.com/questions/78272689",
body:"<p>I have to migrate this Spring Boot code to latest version. After Spring 6+ <code>setReadTimeout</code> is deprecated.</p>
<pre><code>HttpComponentsClientHttpRequestFactory factory = new 
HttpComponentsClientHttpRequestFactory();
factory.setReadTimeout(20);
factory.setConnectTimeout(20);
factory.setConnectionRequestTimeout(20);
return new RestTemplate(factory);
</code></pre>
<p>According to the JavaDoc: <a href=""https://www.javadoc.io/static/org.springframework/spring-web/6.0.8/org/springframework/http/client/HttpComponentsClientHttpRequestFactory.html#setReadTimeout(int)"" rel=""noreferrer"">https://www.javadoc.io/static/org.springframework/spring-web/6.0.8/org/springframework/http/client/HttpComponentsClientHttpRequestFactory.html#setReadTimeout(int)</a></p>
<p>I have to use <code>setSoTimeout</code> but I can't find this method. What should the proper way to migrate this code?</p>
",
tags:"<java><spring><spring-boot>",
score:10,
creationDate:2024-04-04 08:44:35,
creationDate:2024-04-06 19:15:01,
score:15,
acceptedResponderReputation:4911,
acceptedResponder:10435528,
QuestionerReputation:1648,
Questioner:1103606}
{title:"Override Antd global font",
id:"https://stackoverflow.com/questions/75082931",
body:"<p>I wouldl like to override the <code>Antd 5.1.2</code> global font but can't find any documentation on how to do so.</p>
<p>I've added <code>Mulish</code> to my app using the <code>@fontsource/mulish</code> dependency. I then import it like so:</p>
<pre><code>import &quot;@fontsource/mulish&quot;;
</code></pre>
<p>I've then tried enabling the font</p>
<pre><code>
@font-face {
    font-family: &quot;Mulish&quot; !important;
}

:root{
     font-family: &quot;Mulish&quot;, serif !important;
}

body{
    font-family: &quot;Mulish&quot;, serif !important;
}
</code></pre>
<p>but these get overridden by antd.</p>
<p><a href=""https://i.sstatic.net/4i2iv.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/4i2iv.png"" alt=""antd styling"" /></a></p>
<p>What is the correct method of overridding the global antd font?</p>
",
tags:"<javascript><css><antd>",
score:8,
creationDate:2023-01-11 12:17:47,
creationDate:2023-01-18 09:07:46,
score:15,
acceptedResponderReputation:102207,
acceptedResponder:6463558,
QuestionerReputation:4333,
Questioner:2934534}
{title:"Why is Next.js middleware running multiple times?",
id:"https://stackoverflow.com/questions/76164152",
body:"<p>I created a fresh <a href=""https://nextjs.org/docs/getting-started"" rel=""nofollow noreferrer"">Next.js</a> using <code>npx create-next-app@latest --typescript</code>. After installation (the version being <code>13.3.4</code>), without changing any files, I added a new <code>middleware.ts</code> file inside the <code>src</code> folder, and I only put this block of code:</p>
<pre><code>import type { NextRequest } from &quot;next/server&quot;;
import { NextResponse } from &quot;next/server&quot;;

export function middleware(request: NextRequest) {
  console.log(&quot;request&quot;, JSON.stringify(request));
  return NextResponse.next();
}
</code></pre>
<p>The console log is hit multiple times. I think it should be once, right? Is there any configuration I need to do for this fresh  Next.js installation?</p>
<p>Note: I am going to do some cookie logic here in the <a href=""https://nextjs.org/docs/advanced-features/middleware"" rel=""nofollow noreferrer"">middleware</a> for authentication. Screenshot:</p>
<p><a href=""https://i.sstatic.net/EVSEM.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/EVSEM.png"" alt=""enter image description here"" /></a></p>
",
tags:"<javascript><reactjs><next.js>",
score:6,
creationDate:2023-05-03 13:02:01,
creationDate:2023-05-03 14:30:18,
score:15,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:11981,
Questioner:351564}
{title:"Unable to resolve signature of class decorator when called as an expression at @Injectable Angular",
id:"https://stackoverflow.com/questions/76110226",
body:"<p>Full Error Message <br />
Unable to resolve signature of class decorator when called as an expression. Argument of type 'ClassDecoratorContext' is not assignable to parameter of type 'string | symbol | undefined'.</p>
<p>I created a book Module under App Module. Inside that Module I created Service File for Work. When I create a file I got this Error..?</p>
<p>This is My Service File</p>
<pre><code>import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http'

@Injectable({
  providedIn:&quot;root&quot;
})
export class BookService {

  constructor(private _http: HttpClient){ }
}

</code></pre>
<p><a href=""https://i.sstatic.net/4R4qZ.png"" rel=""noreferrer"">File Structure</a></p>
<p>This is My book.module.ts</p>
<pre><code>import { NgModule } from '@angular/core';
import { CommonModule } from '@angular/common';

import { BookRoutingModule } from './book-routing.module';
import { HomeComponent } from './home/home.component';
import { bookReducer } from './store/reducer/book.reducer';
import { StoreModule } from '@ngrx/store';


@NgModule({
  declarations: [
    HomeComponent
  ],
  imports: [
    CommonModule,
    BookRoutingModule,
    StoreModule.forFeature('bookReducer',bookReducer)
  ]
})
export class BookModule { }

</code></pre>
",
tags:"<javascript><html><angular><typescript><ngrx>",
score:6,
creationDate:2023-04-26 11:33:29,
creationDate:2023-05-10 16:03:13,
score:15,
acceptedResponderReputation:176,
acceptedResponder:9570323,
QuestionerReputation:63,
Questioner:9490418}
{title:"Fail to run Vitest test with an error: ""Vitest caught 1 unhandled error during the test run"",
id:"https://stackoverflow.com/questions/76071613",
body:"<p>I have a function which I try to test using Vitest.</p>
<p>This is my function (I test the exported one):</p>
<pre><code>import os from 'node:os';

import { AI_COMMIT_IGNORED_FILES } from '../constants/ai-commit';
import { asyncExec } from './os';

/**
 * The function returns array of files paths that are in staged mode
 * @returns array of files paths in staged mode
 */
const getStagedFiles = async () =&gt; {
    const gitCommand = 'git diff --name-only --cached --relative .';
    const { stdout: filesOutput, stderr } = await asyncExec(gitCommand);

    if (stderr) {
        throw new Error(stderr);
    }

    const filesList = filesOutput.split(os.EOL).filter(Boolean);

    return filesList;
};


/**
 * The function returns the &quot;git diff&quot; command output for relevant staged files in the commit
 * @returns &quot;git diff&quot; output as a string
 */
export const getStagedFilesDiff = async () =&gt; {
    const stagedFiles = await getStagedFiles();
    const filteredFiles = stagedFiles.filter((file) =&gt; !AI_COMMIT_IGNORED_FILES.includes(file));

    const gitCommand = `git diff --staged -- ${filteredFiles.join(' ')}`;
    const { stdout: diffOutput, stderr } = await asyncExec(gitCommand);

    if (stderr) {
        throw new Error(stderr);
    }

    return diffOutput;
};
</code></pre>
<p>And this is the <code>asyncExec</code> function:</p>
<pre><code>import { exec } from 'node:child_process';
import util from 'node:util';

export const asyncExec = util.promisify(exec);
</code></pre>
<p>I wrote the following test:</p>
<pre><code>import { describe, it, expect, vi } from 'vitest';

import { asyncExec } from '@/utils/os';
import { getStagedFilesDiff } from '@/utils/git-info';

vi.mock('@/utils/os');

describe('[utils/git-info]', () =&gt; {
    describe('getStagedFilesDiff()', () =&gt; {
        it('should throw an error when &quot;asyncExec&quot; throws', () =&gt; {
            vi.mocked(asyncExec).mockRejectedValueOnce(undefined);

            expect(() =&gt; getStagedFilesDiff()).toThrowError();
        });
    });
});
</code></pre>
<p>But then I got the error:</p>
<pre><code>
Vitest caught 1 unhandled error during the test run.
This might cause false positive tests. Resolve unhandled errors to make sure your tests are not affected.


This error originated in &quot;tests/utils/git-info.spec.ts&quot; test file. It doesn't mean the error was thrown inside the file itself, but while it was running.
⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯
 ELIFECYCLE  Test failed. See above for more details.
</code></pre>
<p>I have followed this: <a href=""https://vitest.dev/api/expect.html#tothrowerror"" rel=""noreferrer"">https://vitest.dev/api/expect.html#tothrowerror</a></p>
<p>So I don't understand why doesn't it work..?</p>
<hr />
<p>I have also tried:</p>
<pre><code>        it('should throw an error when &quot;asyncExec&quot; throws', async () =&gt; {
            vi.mocked(asyncExec).mockRejectedValueOnce(undefined);

            await expect(() =&gt; getStagedFilesDiff()).rejects.toThrowError(undefined);
        });
</code></pre>
<p>the error is:</p>
<pre><code>AssertionError: expected [Function] to throw an error
</code></pre>
<hr />
<p>Then I wrapped the <code>getStagedFilesDiff</code> function with <code>try {} catch {}</code> as follows:</p>
<pre><code>export const getStagedFilesDiff = async () =&gt; {
    try {
        const stagedFiles = await getStagedFiles();
        const filteredFiles = stagedFiles.filter((file) =&gt; !AI_COMMIT_IGNORED_FILES.includes(file));

        if (filteredFiles.length === 0) {
            return null;
        }

        const gitCommand = `git diff --staged -- ${filteredFiles.join(' ')}`;
        const { stdout: diffOutput, stderr } = await asyncExec(gitCommand);

        if (stderr) {
            throw new Error(`Failed to get &quot;git diff&quot; output of staged files with error:\n${stderr}`);
        }

        return diffOutput;
    } catch {
        throw new Error();
    }
};
</code></pre>
<p>Then the test completed successfully.</p>
",
tags:"<javascript><typescript><testing><vitest>",
score:14,
creationDate:2023-04-21 09:05:38,
creationDate:2023-04-25 12:23:22,
score:15,
acceptedResponderReputation:1814,
acceptedResponder:9105207,
QuestionerReputation:1814,
Questioner:9105207}
{title:"Migrating to Hibernate 6 @Type annotation not working for boolean",
id:"https://stackoverflow.com/questions/75996531",
body:"<p>I upgraded spring boot to 3.x which in turn upgrades Hibernate from 5 to 6 and spring 6.</p>
<p>In previous versions we were using <code>@Type</code> annotation which converts db column from String (Y or N) to java boolean value.</p>
<pre class=""lang-java prettyprint-override""><code>    @Column(name = &quot;IS_SPECIAL&quot;)
    @Type(type = &quot;yes_no&quot;)
    private Boolean isSpecial;
</code></pre>
<p>The problem I am now facing is that there's a syntax error that reads:</p>
<blockquote>
<p>Cannot resolve method 'type'</p>
</blockquote>
<p>The annotation doesn't accept a string value either.</p>
<p>I have already checked <a href=""https://stackoverflow.com/questions/74966830/hibernate-6-type-annotation"">this question</a> and it's not helping.</p>
",
tags:"<java><spring-boot><hibernate><spring-data><hibernate-6.x>",
score:7,
creationDate:2023-04-12 14:16:15,
creationDate:2023-04-12 14:25:58,
score:15,
acceptedResponderReputation:3480,
acceptedResponder:8283737,
QuestionerReputation:3480,
Questioner:8283737}
{title:"LocalDateTime add millisecond",
id:"https://stackoverflow.com/questions/75866488",
body:"<p>I want to increase the millisecond value with LocalDateTime. I used plusNanos because I didn't have plusmillisecond.
I wonder if this is the right way.
I'm using JDK 1.8.
I also want to know if there is a plus millisecond function in later versions.</p>
<pre><code>DateTimeFormatter f = DateTimeFormatter.ofPattern(&quot;yyyy-MM-dd HH:mm:ss.SSS&quot;);
LocalDateTime ldt = LocalDateTime.parse(&quot;2022-01-01 00:00:00.123&quot;,f);
        
System.out.println(ldt.format(f));
        
ldt = ldt.plusNanos(1000000);
        
System.out.println(ldt.format(f));
</code></pre>
<pre><code>2022-01-01 00:00:00.123
2022-01-01 00:00:00.124
</code></pre>
",
tags:"<java><java-time><milliseconds>",
score:6,
creationDate:2023-03-28 12:50:42,
creationDate:2023-03-28 12:58:28,
score:15,
acceptedResponderReputation:3422,
acceptedResponder:5645656,
QuestionerReputation:63,
Questioner:21173249}
{title:"Using the new type() for UUIDGenerator instead of strategy?",
id:"https://stackoverflow.com/questions/76723290",
body:"<p>According to the <a href=""https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/annotations/GenericGenerator.html"" rel=""noreferrer"">documentation</a>, the following usage is deprecated:</p>
<pre><code>@GenericGenerator(
            name = &quot;UUID&quot;,
            strategy = &quot;org.hibernate.id.UUIDGenerator&quot;
    )
</code></pre>
<p>One shall use the new <a href=""https://docs.jboss.org/hibernate/orm/6.0/javadocs/org/hibernate/annotations/GenericGenerator.html#type()"" rel=""noreferrer""><code>type()</code></a>! But how can I transform my above statement to do the same with the <code>type()</code>? Just providing the hibernate UUIDGenerator doesn't work.</p>
",
tags:"<java><hibernate><jpa><uuid><uuidgenerator>",
score:10,
creationDate:2023-07-19 16:12:35,
creationDate:2023-07-19 18:32:04,
score:15,
acceptedResponderReputation:6799,
acceptedResponder:14852784,
QuestionerReputation:6799,
Questioner:14852784}
{title:"Accept general HTML element props in TypeScript Astro component",
id:"https://stackoverflow.com/questions/75371121",
body:"<p>Using Astro with TypeScript, I'm creating a reusable UI component. The component is just a wrapper for the <code>&lt;a&gt;</code> HTML tag. The problem is I would have to define the interface <code>Props</code> with all the general HTML properties for <code>&lt;a&gt;</code> element by myself (<code>href</code>, <code>target</code>, <code>title</code>, etc.)</p>
<p>Is there a way to avoid this in Astro by extending a certain interface?</p>
<pre><code>---
export interface Props {} // I don't want to define `href`, `target`, etc. by myself here

const props = Astro.props;
---

&lt;a {...props}&gt;
  &lt;slot /&gt;
&lt;/a&gt;
</code></pre>
<p>For reference, this is done in React using types such as  <code>React.HTMLAttributes&lt;HTMLAnchorElement&gt;</code></p>
",
tags:"<javascript><typescript><astrojs>",
score:6,
creationDate:2023-02-07 09:14:12,
creationDate:2023-02-08 04:50:55,
score:15,
acceptedResponderReputation:1342,
acceptedResponder:6909829,
QuestionerReputation:560,
Questioner:4377746}
{title:"Caused by: java.lang.ClassNotFoundException: org.apache.hc.client5.http.classic.HttpClient",
id:"https://stackoverflow.com/questions/76772549",
body:"<p>To address the same issue as here <a href=""https://stackoverflow.com/questions/29447382/resttemplate-patch-request"">RestTemplate PATCH request</a> in my spring-boot 3 application</p>
<pre><code>org.springframework.web.client.ResourceAccessException: I/O error on PATCH request for &quot;http://localhost:8080/people/1&quot;:Invalid HTTP method: PATCH; nested exception is java.net.ProtocolException: Invalid HTTP method: PATCH
</code></pre>
<p>I do things similar as in accepted response:</p>
<pre><code>@Configuration
class TestRestTemplateConfig {

    @Bean
    fun testRestTemplate(restTemplateBuilder: RestTemplateBuilder): TestRestTemplate {
        val testRestTemplate = TestRestTemplate(restTemplateBuilder, null, null, null)
        testRestTemplate.restTemplate.requestFactory = HttpComponentsClientHttpRequestFactory()
        return testRestTemplate
    }
}
</code></pre>
<p>Also I have dependency:</p>
<pre><code>implementation(&quot;org.apache.httpcomponents:httpclient:4.5.14&quot;)
</code></pre>
<p>But when I start test I see an error:</p>
<pre><code>Caused by: java.lang.ClassNotFoundException: org.apache.hc.client5.http.classic.HttpClient
</code></pre>
<p>But If I try to find this class in my IDE I am able to do it:</p>
<p><a href=""https://i.sstatic.net/PJXSo.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/PJXSo.png"" alt=""enter image description here"" /></a></p>
<p>I tried to execute command <code>gradle clean</code> but no luck. I am confused.</p>
",
tags:"<java><spring-boot><kotlin><resttemplate><spring-boot-3>",
score:6,
creationDate:2023-07-26 14:51:14,
creationDate:2023-07-26 16:12:02,
score:15,
acceptedResponderReputation:37034,
acceptedResponder:2674303,
QuestionerReputation:37034,
Questioner:2674303}
{title:"Chip inside a Material Textfield with multilines",
id:"https://stackoverflow.com/questions/75598135",
body:"<p>So i was using this TagsInput as shared in the link for codesandbox</p>
<p><a href=""https://codesandbox.io/s/material-ui-input-with-chips-0s2j4?from-embed=&amp;file=/src/TagsInput.js"" rel=""noreferrer"">https://codesandbox.io/s/material-ui-input-with-chips-0s2j4?from-embed=&amp;file=/src/TagsInput.js</a></p>
<p>The issue im facing is if there are alot of chips then the chips go out of the text field</p>
<p>What im trying to do is to find a way where i can have like a multiline Textfield so that if chips are too many they go to next line like they do in Autocomplete.</p>
<pre><code>export default function TagsInput({ ...props }) {
  const classes = useStyles();
  const { selectedTags, placeholder, tags, ...other } = props;
  const [inputValue, setInputValue] = React.useState(&quot;&quot;);
  const [selectedItem, setSelectedItem] = React.useState([]);
  useEffect(() =&gt; {
    setSelectedItem(tags);
  }, [tags]);
  useEffect(() =&gt; {
    selectedTags(selectedItem);
  }, [selectedItem, selectedTags]);

  function handleKeyDown(event) {
    if (event.key === &quot;Enter&quot;) {
      const newSelectedItem = [...selectedItem];
      const duplicatedValues = newSelectedItem.indexOf(
        event.target.value.trim()
      );

      if (duplicatedValues !== -1) {
        setInputValue(&quot;&quot;);
        return;
      }
      if (!event.target.value.replace(/\s/g, &quot;&quot;).length) return;

      newSelectedItem.push(event.target.value.trim());
      setSelectedItem(newSelectedItem);
      setInputValue(&quot;&quot;);
    }
    if (
      selectedItem.length &amp;&amp;
      !inputValue.length &amp;&amp;
      event.key === &quot;Backspace&quot;
    ) {
      setSelectedItem(selectedItem.slice(0, selectedItem.length - 1));
    }
  }
  function handleChange(item) {
    let newSelectedItem = [...selectedItem];
    if (newSelectedItem.indexOf(item) === -1) {
      newSelectedItem = [...newSelectedItem, item];
    }
    setInputValue(&quot;&quot;);
    setSelectedItem(newSelectedItem);
  }

  const handleDelete = item =&gt; () =&gt; {
    const newSelectedItem = [...selectedItem];
    newSelectedItem.splice(newSelectedItem.indexOf(item), 1);
    setSelectedItem(newSelectedItem);
  };

  function handleInputChange(event) {
    setInputValue(event.target.value);
  }
  return (
    &lt;React.Fragment&gt;
      &lt;Downshift
        id=&quot;downshift-multiple&quot;
        inputValue={inputValue}
        onChange={handleChange}
        selectedItem={selectedItem}
      &gt;
        {({ getInputProps }) =&gt; {
          const { onBlur, onChange, onFocus, ...inputProps } = getInputProps({
            onKeyDown: handleKeyDown,
            placeholder
          });
          return (
            &lt;div&gt;
              &lt;TextField
                InputProps={{
                  startAdornment: selectedItem.map(item =&gt; (
                    &lt;Chip
                      key={item}
                      tabIndex={-1}
                      label={item}
                      className={classes.chip}
                      onDelete={handleDelete(item)}
                    /&gt;
                  )),
                  onBlur,
                  onChange: event =&gt; {
                    handleInputChange(event);
                    onChange(event);
                  },
                  onFocus
                }}
                {...other}
                {...inputProps}
              /&gt;
            &lt;/div&gt;
          );
        }}
      &lt;/Downshift&gt;
    &lt;/React.Fragment&gt;
  );
}
TagsInput.defaultProps = {
  tags: []
};
TagsInput.propTypes = {
  selectedTags: PropTypes.func.isRequired,
  tags: PropTypes.arrayOf(PropTypes.string)
};
</code></pre>
",
tags:"<javascript><reactjs><material-ui>",
score:9,
creationDate:2023-02-28 23:00:53,
creationDate:2023-03-01 06:35:09,
score:15,
acceptedResponderReputation:1793,
acceptedResponder:12502237,
QuestionerReputation:242,
Questioner:8316079}
{title:"How to save contact details from a website to an android or iphone using HTML button with JS or PHP integration?",
id:"https://stackoverflow.com/questions/75189762",
body:"<p>I'm trying to implement a functionality in a website so a user can save the contact details from a website to their phone (android/iPhone) by clicking on an HTML button.</p>
<p><strong>This is what I tried so far</strong></p>
<pre><code>&lt;!DOCTYPE html&gt;
&lt;html lang=&quot;en&quot;&gt;

&lt;head&gt;
  &lt;meta charset=&quot;UTF-8&quot;&gt;
  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;
  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;
  &lt;title&gt;Document&lt;/title&gt;
&lt;/head&gt;

&lt;body&gt;
  &lt;button id=&quot;save-btn&quot;&gt;Save Contact&lt;/button&gt;


  &lt;script src=&quot;script.js&quot;&gt;&lt;/script&gt;
&lt;/body&gt;

&lt;/html&gt;
</code></pre>
<p><strong>JavaScript Code</strong></p>
<pre><code>var saveBtn = document.getElementById(&quot;save-btn&quot;);
saveBtn.addEventListener(&quot;click&quot;, function () {
  // Get the contact information from the website
  var contact = {
    name: &quot;John Doe&quot;,
    phone: &quot;111551144111&quot;,
    email: &quot;john@doe.com&quot;
  };
  // create a vcard file
  var vcard = &quot;BEGIN:VCARD\nVERSION:4.0\nFN:&quot; + contact.name + &quot;\nTEL;TYPE=work,voice:&quot; + contact.phone + &quot;\nEMAIL:&quot; + contact.email + &quot;\nEND:VCARD&quot;;
  var blob = new Blob([vcard], { type: &quot;text/vcard&quot; });
  var url = URL.createObjectURL(blob);
  saveBtn.href = url;
  saveBtn.download = contact.name + &quot;.vcf&quot;;
});
</code></pre>
<p>For testing purpose, I uploaded this on a webserver but nothing is happening.</p>
<p><a href=""https://cheery-taiyaki-477ee0.netlify.app"" rel=""noreferrer"">https://cheery-taiyaki-477ee0.netlify.app</a></p>
",
tags:"<javascript><php><android><ios><reactjs>",
score:9,
creationDate:2023-01-20 22:08:15,
creationDate:2023-01-20 22:24:59,
score:15,
acceptedResponderReputation:55417,
acceptedResponder:231316,
QuestionerReputation:169,
Questioner:4174508}
{title:"Are there any differences between Checked and Unchecked Exceptions at Runtime?",
id:"https://stackoverflow.com/questions/79353927",
body:"<p>Checked Exceptions are powerful because they allow you to force the use-site to deal with an exceptional case. If the use-site does not handle an exceptional case (or publically announce that they are not handling it), then the code will fail to compile.</p>
<p>However, that's compile time. What about Runtime?</p>
<p>Are there any meaningful differences between Checked and Unchecked Exceptions at Runtime?</p>
<p>The only thing I can think of is that Unchecked Exceptions extend <code>RuntimeException</code>, but I don't see any properties about <code>RuntimeException</code> that would allow it to be treated differently at RUNTIME.</p>
",
tags:"<java><runtime><checked-exceptions><unchecked-exception>",
score:9,
creationDate:2025-01-14 03:39:26,
creationDate:2025-01-14 03:47:14,
score:16,
acceptedResponderReputation:50010,
acceptedResponder:964243,
QuestionerReputation:1541,
Questioner:10118965}
{title:"Flutter unable to locate Java Runtime after updating Android Studio?",
id:"https://stackoverflow.com/questions/75148332",
body:"<p>I updated android studio to Electric El, but after updating, it is unable to find Java Runtime.</p>
<p>Flutter doctor gives this error and the code does not compile.</p>
<pre><code>maazaftab@maazs-MacBook-Pro edge-focus-mobile % flutter doctor                   
Doctor summary (to see all details, run flutter doctor -v):
The operation couldn’t be completed. Unable to locate a Java Runtime.
Please visit http://www.java.com for information on installing Java.
The operation couldn’t be completed. Unable to locate a Java Runtime.
Please visit http://www.java.com for information on installing Java.
[✓] Flutter (Channel beta, 3.7.0-1.2.pre, on macOS 13.0.1 22A400 darwin-arm64, locale en-PK)
[!] Android toolchain - develop for Android devices (Android SDK version 31.0.0)
    ✗ Could not determine java version
[✓] Xcode - develop for iOS and macOS (Xcode 14.1)
[✓] Chrome - develop for the web
[!] Android Studio (version 2022.1)
    ✗ Unable to find bundled Java version.
[✓] IntelliJ IDEA Community Edition (version 2022.3)
[✓] VS Code (version 1.62.3)
[✓] Connected device (2 available)
[✓] HTTP Host Availability

! Doctor found issues in 2 categories.

</code></pre>
",
tags:"<java><android><flutter><android-studio><jvm>",
score:7,
creationDate:2023-01-17 15:01:00,
creationDate:2023-01-17 15:01:00,
score:16,
acceptedResponderReputation:368,
acceptedResponder:2830945,
QuestionerReputation:368,
Questioner:2830945}
{title:"Error: (0 , react__WEBPACK_IMPORTED_MODULE_1__.useActionState) is not a function or its return value is not iterable",
id:"https://stackoverflow.com/questions/78445719",
body:"<p>I am following the example for <code>useActionState</code> <a href=""https://react.dev/reference/react/useActionState"" rel=""noreferrer"">found here</a>. I am using nextjs and typescript.</p>
<p><code>app/page.tsx</code>:</p>
<pre><code>&quot;use client&quot;;

import { useActionState } from &quot;react&quot;;
import { createUser } from &quot;../components/actions&quot;;

const initialState = {
  message: &quot;&quot;,
};

export default function App() {
  const [state, formAction] = useActionState(createUser, initialState);

  return (
    &lt;form action={formAction}&gt;
      &lt;label htmlFor=&quot;email&quot;&gt;Email&lt;/label&gt;
      &lt;input type=&quot;text&quot; id=&quot;email&quot; name=&quot;email&quot; required /&gt;
      {/* ... */}
      &lt;p aria-live=&quot;polite&quot; className=&quot;sr-only&quot;&gt;
        {state?.message}
      &lt;/p&gt;
      &lt;button&gt;Sign up&lt;/button&gt;
    &lt;/form&gt;
  );
}
</code></pre>
<p><code>../components/actions.ts</code>:</p>
<pre><code>'use server'
 
export default async function createUser(prevState: any, formData: FormData) {
  return {
    message: 'Please enter a valid email',
  }
}
</code></pre>
<p>When I run the example, I get:
<code>Error: (0 , react__WEBPACK_IMPORTED_MODULE_1__.useActionState) is not a function or its return value is not iterable</code></p>
<p>My package.json looks like:</p>
<pre><code>{
  &quot;scripts&quot;: {
    &quot;dev&quot;: &quot;next dev&quot;,
    &quot;build&quot;: &quot;next build&quot;,
    &quot;start&quot;: &quot;next start&quot;,
    &quot;lint&quot;: &quot;next lint&quot;,
    &quot;db:migrate&quot;: &quot;TS_NODE_COMPILER_OPTIONS='{ \&quot;module\&quot;: \&quot;commonjs\&quot; }' knex migrate:latest&quot;,
    &quot;db:migrate:undo&quot;: &quot;TS_NODE_COMPILER_OPTIONS='{ \&quot;module\&quot;: \&quot;commonjs\&quot; }' knex migrate:down&quot;,
    &quot;db:migrate:make&quot;: &quot;TS_NODE_COMPILER_OPTIONS='{ \&quot;module\&quot;: \&quot;commonjs\&quot; }' knex migrate:make&quot;
  },
  &quot;dependencies&quot;: {
    &quot;react&quot;: &quot;canary&quot;,
    &quot;react-dom&quot;: &quot;canary&quot;,
    &quot;react-scripts&quot;: &quot;^5.0.0&quot;
  },
  &quot;main&quot;: &quot;/index.js&quot;,
  &quot;devDependencies&quot;: {}
}

</code></pre>
<p>My <code>tsconfig.json</code>:</p>
<pre><code>{
  &quot;compilerOptions&quot;: {
    &quot;target&quot;: &quot;es2015&quot;,
    &quot;lib&quot;: [&quot;dom&quot;, &quot;dom.iterable&quot;, &quot;esnext&quot;],
    &quot;allowJs&quot;: true,
    &quot;skipLibCheck&quot;: true,
    &quot;strict&quot;: true,
    &quot;noEmit&quot;: true,
    &quot;esModuleInterop&quot;: true,
    &quot;module&quot;: &quot;esnext&quot;,
    &quot;moduleResolution&quot;: &quot;Node&quot;,
    &quot;resolveJsonModule&quot;: true,
    &quot;isolatedModules&quot;: true,
    &quot;jsx&quot;: &quot;preserve&quot;,
    &quot;incremental&quot;: true,
    &quot;plugins&quot;: [
      {
        &quot;name&quot;: &quot;next&quot;
      }
    ],
    &quot;paths&quot;: {
      &quot;@/*&quot;: [&quot;./*&quot;]
    }
  },
  &quot;include&quot;: [&quot;next-env.d.ts&quot;, &quot;**/*.ts&quot;, &quot;**/*.tsx&quot;, &quot;.next/types/**/*.ts&quot;],
  &quot;exclude&quot;: [&quot;node_modules&quot;]
}
</code></pre>
",
tags:"<javascript><reactjs><node.js><typescript><next.js>",
score:14,
creationDate:2024-05-08 01:35:55,
creationDate:2024-05-08 03:31:43,
score:16,
acceptedResponderReputation:13560,
acceptedResponder:258174,
QuestionerReputation:197,
Questioner:22904714}
{title:"Parsing error: was not found by the project service, but I've ignored these files",
id:"https://stackoverflow.com/questions/78873311",
body:"<p>My project structure</p>
<ul>
<li>dist (compiled code by ts)
<ul>
<li>lib
<ul>
<li>lib.d.ts</li>
<li>lib.js</li>
</ul>
</li>
<li>index.d.ts</li>
<li>index.js</li>
</ul>
</li>
<li>src (source code)
<ul>
<li>lib
<ul>
<li>lib.ts</li>
</ul>
</li>
<li>index.ts</li>
</ul>
</li>
<li>eslint.config.mjs</li>
<li>packages.json</li>
<li>tsconfig.json</li>
<li>yarn.lock</li>
</ul>
<p>My tsconfig.json</p>
<pre><code>{
    &quot;compilerOptions&quot;: {
        &quot;target&quot;: &quot;ES2022&quot;,
        &quot;module&quot;: &quot;commonjs&quot;,
        &quot;outDir&quot;: &quot;./dist&quot;,
        &quot;rootDir&quot;: &quot;./&quot;,
        &quot;strict&quot;: true,
        &quot;esModuleInterop&quot;: true,
        &quot;resolveJsonModule&quot;: true,
        &quot;skipLibCheck&quot;: true,
        &quot;forceConsistentCasingInFileNames&quot;: true,
        &quot;baseUrl&quot;: &quot;./src&quot;,
        &quot;declaration&quot;: true,
        &quot;allowJs&quot;: true
    },
    &quot;include&quot;: [
        &quot;src/**/*.ts&quot;,
    ],
    &quot;exclude&quot;: [
        &quot;eslint.config.mjs&quot;,
        &quot;dist/**&quot;
    ]
}
</code></pre>
<p>My eslint.config.mjs:</p>
<pre><code>// @ts-check

import eslint from '@eslint/js';
import tseslint from 'typescript-eslint';
import tsParser from '@typescript-eslint/parser'

import { dirname } from 'node:path';
import { fileURLToPath } from 'node:url';
    
const __dirname = dirname(fileURLToPath(import.meta.url));

export default tseslint.config(
  {
    files: [
      &quot;src/**/*.ts&quot;
    ],
    ignores: [
      'dist/**/*.ts',
      'dist/**',
      &quot;**/*.mjs&quot;,
      &quot;eslint.config.mjs&quot;,
      &quot;**/*.js&quot;
    ],
    rules: {
      &quot;@typescript-eslint/no-unnecessary-condition&quot;: &quot;error&quot;,
      &quot;@typescript-eslint/no-unnecessary-type-assertion&quot;: &quot;error&quot;,
    },
  },
  ...tseslint.configs.strictTypeChecked,
  ...tseslint.configs.recommendedTypeChecked,
  {
    languageOptions: {
      parserOptions: {
        project: &quot;./tsconfig.json&quot;,
        projectService: true,
        tsconfigRootDir: __dirname,
        projectFolderIgnoreList: [
          &quot;**dist**&quot;,
        ],
      },
    },
  },
);
</code></pre>
<p>I want tsc to put compiled outputs fo dist folder (I'm new to TypeScript so I don't know if this is the right way to a TS project).</p>
<p>I've ignored files under dist folder but I still got these errors:</p>
<pre><code>/Users/kainzhong/VSCode/eslintTmp/dist/src/index.d.ts
  0:0  error  Parsing error: /Users/kainzhong/VSCode/eslintTmp/dist/src/index.d.ts was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject

/Users/kainzhong/VSCode/eslintTmp/dist/src/index.js
  0:0  error  Parsing error: /Users/kainzhong/VSCode/eslintTmp/dist/src/index.js was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject

/Users/kainzhong/VSCode/eslintTmp/dist/src/lib/lib.d.ts
  0:0  error  Parsing error: /Users/kainzhong/VSCode/eslintTmp/dist/src/lib/lib.d.ts was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject

/Users/kainzhong/VSCode/eslintTmp/dist/src/lib/lib.js
  0:0  error  Parsing error: /Users/kainzhong/VSCode/eslintTmp/dist/src/lib/lib.js was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject

/Users/kainzhong/VSCode/eslintTmp/eslint.config.mjs
  0:0  error  Parsing error: /Users/kainzhong/VSCode/eslintTmp/eslint.config.mjs was not found by the project service. Consider either including it in the tsconfig.json or including it in allowDefaultProject
</code></pre>
<p>Haven't I already ignored these files? Why does eslint still complain about them?</p>
",
tags:"<javascript><typescript><eslint><typescript-eslint>",
score:7,
creationDate:2024-08-15 00:42:36,
creationDate:2024-08-15 05:19:50,
score:16,
acceptedResponderReputation:3420,
acceptedResponder:1830407,
QuestionerReputation:115,
Questioner:17657150}
{title:"MaxListenersExceededWarning when installing or creating Node.js projects on macOS",
id:"https://stackoverflow.com/questions/76943688",
body:"<p>I am getting the following warning message when I try to install or create Node.js projects on macOS (darwin):</p>
<p><code>(node:80101) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 close listeners added to [TLSSocket]. Use emitter.setMaxListeners() to increase limit</code></p>
<p>I have updated Node.js to the latest version (V20.5.1) after I was seeing the warning for too many times, and npm was already up to date (V9.8.1). I'm not using any third-party tools, and I simply use terminal.</p>
<p>The commands I get the warning after are:
<code>npm install ...</code>
and
<code>npx ...</code>.<br>
I get the warning message at least once after executing these commands (usually multiple times).</p>
<p>The projects I was working on didn't even have NodeJS files, both times I was busy on a react and next project (which I think is irrelevant, because I see the same warning when using NPM in terminal outside any projects).</p>
<p>I'd appreciate if anyone can help me with this.
So far I haven't noticed anything wrong in projects or installing process except the warning itself, but I don't understand why should the warning pop-up when I haven't made any changes to any configurations in NPM or node.</p>
<p>Tried installing packages with NPM and creating projects with NPX, which both resulted the same warning (sometimes multiple times before the completion of install or create process):</p>
<p><code>(node:80101) MaxListenersExceededWarning: Possible EventEmitter memory leak detected. 11 close listeners added to [TLSSocket]. Use emitter.setMaxListeners() to increase limit</code></p>
",
tags:"<javascript><node.js><npm><npm-install><npx>",
score:13,
creationDate:2023-08-21 08:43:01,
creationDate:2023-09-04 10:39:53,
score:16,
acceptedResponderReputation:291,
acceptedResponder:17560775,
QuestionerReputation:291,
Questioner:17560775}
{title:"Why would a ""No SLF4J"" provider found error occur when SLF4J is in Maven pom.xml file?",
id:"https://stackoverflow.com/questions/75162281",
body:"<p>I am currently getting the below errors when trying to run a Spring Java program.</p>
<pre><code>SLF4J: No SLF4J providers were found.
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.
SLF4J: Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.
SLF4J: Ignoring binding found at [jar:file:/C:/Users/user/.m2/repository/ch/qos/logback/logback-classic/1.2.11/logback-classic-1.2.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: Ignoring binding found at [jar:file:/C:/Users/user/.m2/repository/org/apache/logging/log4j/log4j-slf4j-impl/2.19.0/log4j-slf4j-impl-2.19.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]
SLF4J: See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.
</code></pre>
<p>Here is the section in the pom.xml file that has the SLF4J and Log4J dependencies.  This same section has worked in previous projects.</p>
<pre><code>&lt;dependency&gt;
            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;
            &lt;version&gt;2.0.5&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
            &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;
            &lt;version&gt;2.19.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;
            &lt;version&gt;2.19.0&lt;/version&gt;
        &lt;/dependency&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;
            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;
            &lt;version&gt;2.19.0&lt;/version&gt;
        &lt;/dependency&gt;
</code></pre>
<p>I don't have any components that are targeting  indings for slf4j-api version 1..x or earlier.  This error message seems to both say that I don't have SLF4J and that I have the wrong version.</p>
<p>If there are any thoughts on how to resolve this, I would appreciate it.  Thank you!</p>
<p>I have tried using different dependencies in the pom.xml file, but ultimately these have worked in a previous program.  I have also tried looking at dependencies that might also use SLF4J and excluding SLF4J from them, but I am still getting an error message.  I have tried solutions from other similar questions asked but keep getting the same error.</p>
",
tags:"<java><maven><log4j><pom.xml><slf4j>",
score:10,
creationDate:2023-01-18 16:25:18,
creationDate:2023-01-18 16:44:55,
score:16,
acceptedResponderReputation:72844,
acceptedResponder:1064245,
QuestionerReputation:304,
Questioner:13954773}
{title:"Java 17 vs Java 8 double representation",
id:"https://stackoverflow.com/questions/77365470",
body:"<p>What is the reason of the difference of the same values when doing average between 2 different JVM's (Java 8 and Java 17)?</p>
<p>Is that because the floating point? Or has something else changed between 2 versions?</p>
<p>Java 17</p>
<pre class=""lang-java prettyprint-override""><code>public class Main {
    public static void main(String[] args) {

        List&lt;Double&gt; amountList = List.of(27.19, 18.97, 6.44, 106.36);

        System.out.println(&quot;JAVA 17 result: &quot; + amountList.stream().mapToDouble(x -&gt; x).average().orElseThrow());

    }
}
</code></pre>
<p>result: 39.739999999999995</p>
<p>Java 8</p>
<pre class=""lang-java prettyprint-override""><code>public class Main {

    public static void main(String[] args) {

        List&lt;Double&gt; amountList = Arrays.asList(27.19, 18.97, 6.44, 106.36);

        System.out.println(&quot;JAVA 8 result: &quot; + amountList.stream().mapToDouble(x -&gt; x).average().orElse(0.0));
    }
}
</code></pre>
<p>result: 39.74000000000001</p>
",
tags:"<java><floating-point><jvm><precision>",
score:19,
creationDate:2023-10-26 08:47:57,
creationDate:2023-10-26 12:40:56,
score:16,
acceptedResponderReputation:298103,
acceptedResponder:2711488,
QuestionerReputation:359,
Questioner:12700084}
{title:"Java 21 virtual thread executor performing worse than executor with pooled OS threads?",
id:"https://stackoverflow.com/questions/78061049",
body:"<p>I have just upgraded our Spring Boot applications to Java 21. As a part of that, I have also done changes to use virtual threads. Both when serving API requests and when doing async operations internally using executors.</p>
<p>For one use-case, it seems like an Executor powered by virtual threads is performing worse than a <code>ForkJoinPool</code> powered by OS threads. This use-case is setting some MDC values and calling an external system <strong>through HTTP</strong>.</p>
<p>This is my pseudo-ish-code:</p>
<pre class=""lang-java prettyprint-override""><code>List&lt;...&gt; ... = executorService.submit(
                () -&gt; IntStream.rangeClosed(-from, to)
                        .mapToObj(i -&gt; ...)
                        .parallel()
                        .map(... -&gt; {
                            try {
                                service.setSomeThreadLocalString(...);
                                MDC.put(..., ...);
                                MDC.put(..., ...);

                                return service.call(...);
                            } finally {
                                service.removeSomeThreadLocalString(...);
                                MDC.remove(...);
                                MDC.remove(...);
                            }
                        })
                        .toList())
        .get();
</code></pre>
<p>Where ExecutorService is either:</p>
<ol>
<li><code>new ForkJoinPool(30)</code></li>
<li><code>Executors.newVirtualThreadPerTaskExecutor()</code></li>
</ol>
<p>It looks like option 1 is performing a lot better than 2. Sometimes it is 100% faster than option 2. I have done this test in a Java 21 environment. I am testing with 10 parallel executions. Where option 1 takes 800-1000ms normally, option 2 takes 1500-2000 ms.</p>
<p>If it makes any difference, have this property enabled in Spring Boot:</p>
<pre class=""lang-yaml prettyprint-override""><code>spring:
  threads:
    virtual:
      enabled: true
</code></pre>
<p>Any ideas why this is happening?</p>
",
tags:"<java><executorservice><java-21><virtual-threads>",
score:7,
creationDate:2024-02-26 12:51:59,
creationDate:2024-02-26 15:04:00,
score:16,
acceptedResponderReputation:298103,
acceptedResponder:2711488,
QuestionerReputation:171,
Questioner:5221017}
{title:"How to add schemas in Next.js 13 app router",
id:"https://stackoverflow.com/questions/76731962",
body:"<p><strong>tl;dr</strong></p>
<p>Next.js 13's <code>/app</code> router's <code>layout</code> and <code>page</code> routing changes how we add content to the <code>&lt;head&gt;</code>. How can I add a schema script to each page? Next.js will automatically compile <code>&lt;head&gt;</code> tags placed in any <code>layout</code> or <code>page</code> into a single <code>&lt;head&gt;</code>.</p>
<h1>The goal</h1>
<p>Just like in any website with great SEO, I want to include a schema script in the head of each page.</p>
<h2>The history</h2>
<p>Normally, this would be as easy as writing it in the <code>&lt;head&gt;</code> like so:</p>
<pre><code>&lt;!-- index.html --&gt;
&lt;head&gt;
  &lt;script type=&quot;application/ld+json&quot;&gt;
    {
      &quot;@context&quot;: &quot;https://schema.org&quot;,
      // ... the rest
    }
  &lt;/script&gt;
&lt;/head&gt;
</code></pre>
<p>Then, with the Next.js <code>/pages</code> directory it was a little different. It always felt weird to me to have to use the <code>dangerouslySetInnerHTML</code> attribute, but at least it worked.</p>
<pre><code>// index.tsx
import Head from 'next/head'
export default function Page() {
  return (
    &lt;Head&gt;
      &lt;script id=&quot;schema&quot; type=&quot;application/ld+json&quot; dangerouslySetInnerHTML={{__html: `
        {
          &quot;@context&quot;: &quot;https://schema.org&quot;,
          // ... the rest
        }
      `}} /&gt;
    &lt;/Head&gt;
  )
}
</code></pre>
<h2>The issue</h2>
<p>Now with the introduction of the <code>/app</code> router, we've got great, new, simplified ways to set metadata, without having to directly import the <code>&lt;head&gt;</code> through <code>next/head</code>. In fact, the <code>next/head</code> component shouldn't be used in the <code>/app</code> router.</p>
<p>So the question becomes...</p>
<h3>How do we access the <code>&lt;head&gt;</code> on a page-per-page basis?</h3>
<p>I was hoping the Next.js team would have already thought about this, and added schema to the new <code>metadata</code> variable, or even it's own variable, but they don't seem to have plans to do this as far as I can tell.</p>
<p>I tried adding a <code>&lt;head&gt;</code> to the <code>page</code> and unfortunately, it doesn't properly merge into the <code>&lt;head&gt;</code>. So far the only thing I can thing to do would be to add the schema to each <code>layout</code>, but what a hassle that would be to have an individual layout for each page.</p>
<p>Any ideas are welcome.</p>
",
tags:"<javascript><next.js><schema><next.js13><app-router>",
score:9,
creationDate:2023-07-20 16:36:44,
creationDate:2023-11-14 19:10:24,
score:16,
acceptedResponderReputation:721,
acceptedResponder:14802731,
QuestionerReputation:721,
Questioner:14802731}
{title:"How to import JavaScript files in NodeJS using file paths from project root? (instead of relative file paths)",
id:"https://stackoverflow.com/questions/75806206",
body:"<h2>Question:</h2>
<p>How to import JavaScript files in NodeJS using file paths from project root?  (instead of relative file paths)</p>
<p>In other words, my team is trying to transition from <strong>Syntax Style A</strong> to <strong>Syntax Style B</strong> (shown below):</p>
<p><strong>Syntax Style A</strong></p>
<pre class=""lang-js prettyprint-override""><code>const source = require('../../../../../../source.js');
</code></pre>
<p><strong>Syntax Style B</strong></p>
<pre class=""lang-js prettyprint-override""><code>const source = require('src/source.js'); // &quot;src&quot; is a direct subfolder of the project root
</code></pre>
<p>I have reviewed a lot of posts on this topic, and none of them can satisfy my project's requirements...</p>
<hr />
<h2>Project Requirements:</h2>
<ul>
<li><strong>Requirement #1</strong>: No external packages (such as Babel.js or Webpack), since disk space is limited. Also, we cannot install anything with &quot;npm install&quot;.</li>
<li><strong>Requirement #2</strong>: A JavaScript file should be able to import another JavaScript file using &quot;project root&quot; file paths, not relative file paths. (This will avoid long relative paths such as &quot;../../../../../../../script.js&quot;, which can become unmanageable.)</li>
<li><strong>Requirement #3</strong>: Right-clicking the imported class anywhere in the source code should bring up a context menu, with an option to &quot;Go to Declaration&quot; (which takes us to the imported file directly). Also, moving a JavaScript file to a different folder in the IDE should automatically update all references. We can use any IDE.</li>
<li><strong>Requirement #4</strong>: To have a consistent way of importing scripts, we will be using NodeJS's &quot;require&quot; keyword to import (instead of JavaScript's &quot;import&quot; keyword).</li>
</ul>
<hr />
<h2>Setup:</h2>
<p>Below is my setup.  Package.json was generated by WebStorm, and I haven't changed it.</p>
<p><a href=""https://i.sstatic.net/bkLq3.png"" rel=""noreferrer"">Screenshot_of_Project_Structure</a></p>
<pre><code>Project_Root
├─-─ src
│    └── a1
│       └── a2
│           └── a3
│               └── Worker.js
├──- subFolder1
│    └── SubWorker.js
├─ main.js
└─ package.json
</code></pre>
<hr />
<p>main.js</p>
<pre class=""lang-js prettyprint-override""><code>const Worker = require('./src/a1/a2/a3/Worker.js');
Worker.doWork();
</code></pre>
<p>Worker.js</p>
<pre class=""lang-js prettyprint-override""><code>// If I replace the following with Project Root path, such as:
//    const SubWorker = require('src/subFolder1/SubWorker.js');
// The script will fail with &quot;Error: Cannot find module './src/subFolder1/SubWorker.js'.&quot;

const SubWorker = require('../../../subFolder1/SubWorker.js');

module.exports =
class Worker { 

        static doWork() {
                console.log(&quot;doing work&quot;);
                SubWorker.doMoreWork();
        }
}
</code></pre>
<p>SubWorker.js</p>
<pre class=""lang-js prettyprint-override""><code>module.exports =
class SubWorker {

        static doMoreWork() {
                console.log(&quot;doing more work&quot;);
        }

};
</code></pre>
<hr />
<h2>Attempt #1: path.resolve</h2>
<p>I tried the &quot;path.resolve&quot; solution, as suggested by this post:</p>
<ul>
<li><p><a href=""https://stackoverflow.com/questions/38829118/nodejs-convert-relative-path-to-absolute"">NodeJS - convert relative path to absolute</a></p>
<ul>
<li>Program failed with: ⛔Error: Cannot find module './src/subFolder1/SubWorker.js'.</li>
<li>Error was reproducible in both WebStorm 2022.3.2 and VS Code 1.76.2</li>
</ul>
</li>
</ul>
<hr />
<h2>Attempt #2: app-module-path</h2>
<ul>
<li><a href=""https://stackoverflow.com/questions/51452743/importing-using-relative-paths-in-node-js-with-es-modules"">Importing using relative paths in Node.js with ES Modules</a>
<ul>
<li>Using <code>app-module-path</code> solves all three requirements, but the program will not run (which is an implied requirement): ⛔Error: Cannot find module 'src/subFolder1/SubWorker.js'</li>
<li>Error was reproducible in both WebStorm 2022.3.2 and VS Code 1.76.2</li>
</ul>
</li>
</ul>
<hr />
<h2>Attempt #3: dynamic import()</h2>
<ul>
<li><a href=""https://stackoverflow.com/questions/65040190/import-es6-modules-with-absolute-paths-in-nodejs-without-using-babel-webpack"">Import ES6 Modules with absolute paths in NodeJS without using Babel/Webpack</a>
<ul>
<li>The top answer introduced two approaches.</li>
<li>The first approach moves the relative paths into package.json, so Requirement #2 is still violated.</li>
<li>The second approach uses dynamic imports.  This approach failed the same way as Attempt #1 in WebStorm 2022.3.2 and VS Code 1.76.2.  My code is shown below:</li>
</ul>
</li>
</ul>
<p>Worker.js</p>
<pre class=""lang-js prettyprint-override""><code>const rootPath = 'src/subFolder1';
const SubWorker = require(`${rootPath}/SubWorker.js`);

</code></pre>
<hr />
<h2>Attempt #4: subpath imports</h2>
<ul>
<li><a href=""https://stackoverflow.com/questions/74050411/is-there-a-way-to-configure-node-js-to-use-absolute-paths-for-imports"">Is there a way to configure node.js to use absolute paths for imports?</a>
<ul>
<li>This post is using &quot;import&quot; instead of &quot;require' (violates Requirement #4)</li>
</ul>
</li>
</ul>
<hr />
<h2>Expected Outcome:</h2>
<p>Since NodeJs is one of the most important backend languages, I was expecting excellent IDE support for imports... Referencing a source file from Project Root should be a simple operation that is handled by the IDE (I shouldn't need to use Babel.js or Webpack).  Am I doing something wrong here?</p>
<p>I don't know what I am doing wrong, since I have already followed standard practices:</p>
<ul>
<li>I used latest versions of the most popular NodeJS IDEs (WebStorm 2022.3.2 and VS Code 1.76.2)</li>
<li>I used WebStorm's &quot;Create a new NodeJS project&quot; wizard to create the project</li>
<li>I used the latest NodeJS (v18.15.0). (on Windows 10, v21H2)</li>
</ul>
<p>Thanks!</p>
<hr />
<h2>Related Posts:</h2>
<p>The Stack Overflow posts below are relevant, but do not address the specific issue in this post. (Please kindly search by the title on Stack Overflow, since the spam filter limited the number of links in this post, thanks!)</p>
<ul>
<li>Title: NodeJS - Relative File Paths
<ul>
<li>Failed the same way as my Attempt #1 above</li>
</ul>
</li>
<li>Title: Project root based relative paths for NodeJS modules
<ul>
<li>Violated Requirement #4 (the desired solution should use &quot;require&quot; instead of &quot;import&quot;)</li>
</ul>
</li>
<li>Title: is it possible to get rid of the relative paths on imports?
<ul>
<li>The top answer uses Babel.js, which violates Requirement #1</li>
</ul>
</li>
<li>Title: How to import a JavaScript file to another JavaScript file
<ul>
<li>Does not address the question of relative path vs &quot;project root&quot; path</li>
</ul>
</li>
<li>Title: How to use absolute/dynamic paths in NodeJs
<ul>
<li>Violated Requirement #4 (the desired solution should use &quot;require&quot; instead of &quot;import&quot;)</li>
</ul>
</li>
<li>Title: how to use absolute paths instead of relative paths in React or Next.js?
<ul>
<li>We are not using React or Next.js here.</li>
</ul>
</li>
<li>Title: JavaScript Import file by absolute path
<ul>
<li>Violated Requirement #4 (the desired solution should use &quot;require&quot; instead of &quot;import&quot;)</li>
</ul>
</li>
<li>Title: javascript file with absolute file path
<ul>
<li>The script here was launched from the client-side web browser.  This post deals with nodeJS scripts that are launched from the server-side backend.</li>
</ul>
</li>
</ul>
<hr />
",
tags:"<javascript><node.js><webstorm><require><commonjs>",
score:17,
creationDate:2023-03-21 20:44:59,
creationDate:2023-03-22 22:50:37,
score:16,
acceptedResponderReputation:581,
acceptedResponder:2240935,
QuestionerReputation:603,
Questioner:21425739}
{title:"How to access router.asPath in a function that uses next/navigation in the Next.js app directory?",
id:"https://stackoverflow.com/questions/75915658",
body:"<pre><code>import { useRouter } from &quot;next/navigation&quot;;


const router = useRouter()

const refreshData = () =&gt; {
router.replace(router.asPath);
</code></pre>
<p>}</p>
<p>i tried using next/router but didn't worked</p>
",
tags:"<javascript><reactjs><next.js>",
score:13,
creationDate:2023-04-03 02:28:05,
creationDate:2023-04-03 15:44:03,
score:16,
acceptedResponderReputation:72825,
acceptedResponder:1214800,
QuestionerReputation:168,
Questioner:20733974}
{title:"Zod - Checking the number of digits on a number type",
id:"https://stackoverflow.com/questions/75531294",
body:"<p>I'm unable to figure out how to check for the number of digits in a number using Zod.</p>
<p>Since I'm converting my string value to a number, I'm unable to use min() or max() to check for the number of digits.</p>
<p>I've tried using lte() and gte() the following when building my schema:</p>
<pre><code>export const MySchema = z.object({
  type1: z.coerce.string(),
  type2: z.coerce.string(),
  type4: z.coerce.number().lte(5).gte(5),
  type5: z.coerce.number()
})
</code></pre>
<p>My goal is to limit <code>type4</code> to a fix length of 5 digits for validation. What could be an alternative solution? Maybe checking the string length before converting to a number?</p>
",
tags:"<javascript><typescript><zod>",
score:13,
creationDate:2023-02-22 10:22:16,
creationDate:2023-02-22 14:48:46,
score:16,
acceptedResponderReputation:9746,
acceptedResponder:10345775,
QuestionerReputation:406,
Questioner:11085537}
{title:"cannot access class com.apple.eawt.Application (in module java.desktop) because module java.desktop does not export com.apple.eawt to unnamed module",
id:"https://stackoverflow.com/questions/75920482",
body:"<p>I'm trying to execute a JAR file called <a href=""https://github.com/gessnerfl/fake-smtp-server"" rel=""noreferrer"">fakeSMPTServer</a> on MacOS Monterrey with OpenJDK with the command:</p>
<pre><code>java -jar fakeSMTP-2.0.jar
</code></pre>
<p>And I get the error:</p>
<pre><code>03 Apr 2023 10:04:51 ERROR com.nilhcem.fakesmtp.core.exception.UncaughtExceptionHandler - 
java.lang.IllegalAccessError: class com.nilhcem.fakesmtp.FakeSMTP$1 (in unnamed module @0x5db54e92) cannot access class com.apple.eawt.Application (in module java.desktop) because module java.desktop does not export com.apple.eawt to unnamed module @0x5db54e92
    at com.nilhcem.fakesmtp.FakeSMTP$1.run(FakeSMTP.java:80) ~[fakeSMTP-2.0.jar:na]
    at java.desktop/java.awt.event.InvocationEvent.dispatch(InvocationEvent.java:318) ~[na:na]
    at java.desktop/java.awt.EventQueue.dispatchEventImpl(EventQueue.java:773) ~[na:na]
    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:720) ~[na:na]
    at java.desktop/java.awt.EventQueue$4.run(EventQueue.java:714) ~[na:na]
    at java.base/java.security.AccessController.doPrivileged(AccessController.java:399) ~[na:na]
    at java.base/java.security.ProtectionDomain$JavaSecurityAccessImpl.doIntersectionPrivilege(ProtectionDomain.java:86) ~[na:na]
    at java.desktop/java.awt.EventQueue.dispatchEvent(EventQueue.java:742) ~[na:na]
    at java.desktop/java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:203) ~[na:na]
    at java.desktop/java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:124) ~[na:na]
    at java.desktop/java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:113) ~[na:na]
    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:109) ~[na:na]
    at java.desktop/java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:101) ~[na:na]
    at java.desktop/java.awt.EventDispatchThread.run(EventDispatchThread.java:90) ~[na:na]
</code></pre>
<p>The following is the output of java --version:</p>
<pre><code>openjdk 19.0.2 2023-01-17
OpenJDK Runtime Environment Homebrew (build 19.0.2)
OpenJDK 64-Bit Server VM Homebrew (build 19.0.2, mixed mode, sharing)
</code></pre>
",
tags:"<java><macos><jar>",
score:9,
creationDate:2023-04-03 14:18:39,
creationDate:2023-04-03 14:18:39,
score:16,
acceptedResponderReputation:7057,
acceptedResponder:543770,
QuestionerReputation:7057,
Questioner:543770}
{title:"Ambiguity in method references",
id:"https://stackoverflow.com/questions/78558677",
body:"<p>Consider the following snippet:</p>
<pre><code>public static void main(String[] args) {
        Function&lt;String, String&gt; function = String::toUpperCase;        //OK
//        Comparator&lt;String&gt; comparator = String::toUpperCase;          //Compilation error(makes sense, as String.toUpperCase(Locale locale) &amp; String.toUpperCase() are not compatible)
        fun(String::toUpperCase);                                       // java: reference to fun is ambiguous
    }

    public static void fun(Function&lt;String, String&gt; function) { // String apply(String obj)
        System.out.println(&quot;Function&quot;);
    }

    public static void fun(Comparator&lt;String&gt; comparator) {     // int compare(String s1, String s2)
        System.out.println(&quot;Comparator&quot;);
    }
</code></pre>
<p>I'm failing to understand the reason behind ambiguity error for method invocation <code>fun(String::toUpperCase)</code>.</p>
<p>As, both of the overloaded versions of <code>String::toUpperCase</code> themselves are not compatible with <code>int compare(String s1, String s2)</code> from the Comparator class, then how come the compiler complains about ambiguity in the first place?</p>
<p>Am I missing something here?</p>
",
tags:"<java><lambda><java-8><method-reference><ambiguity>",
score:12,
creationDate:2024-05-31 07:31:42,
creationDate:2024-05-31 08:06:39,
score:16,
acceptedResponderReputation:270770,
acceptedResponder:5133585,
QuestionerReputation:123,
Questioner:13475693}
{title:"JRE 23 runs much faster than previous versions",
id:"https://stackoverflow.com/questions/79250946",
body:"<p>I am trying the following code for performance checking. It is purely CPU-bound, doing lots of calculations on <code>double</code> types, single-threaded, and does not use any heap:</p>
<pre><code>public class PerfTestSampleJ {
    private static final int MEASURE_COUNT = 5;
    private static final int ITERATIONS = 100_000_000;

    public static void main(String[] args) {
        var minTime = Long.MAX_VALUE;
        for (int i = 1; i &lt;= MEASURE_COUNT; i++) {
            long start = System.nanoTime();
            double pi = calculatePi(ITERATIONS);
            long time = System.nanoTime() - start;
            System.out.printf(&quot;Iteration %2d took %8.3f ms%n&quot;, i, time / 1e6);
            if (time &lt; minTime) {
                minTime = time;
            }
            if (Math.abs(pi - Math.PI) &gt; 1e-14)
                throw new AssertionError(pi + &quot; (&quot; + (pi - Math.PI) + &quot;)&quot;);
        }
        System.out.printf(&quot;Minimum time taken: %8.3f ms%n&quot;, minTime / 1e6);
    }

    private static double calculatePi(int iterations) {
        double pi = 0.0;
        double numerator = 4.0;
        for (int i = 1; i &lt;= iterations; i++) {
            double n = i * 2.0;
            double denominator = n * (n + 1) * (n + 2);
            pi += numerator / denominator;
            numerator = -numerator;
        }
        return 3 + pi;
    }
}
</code></pre>
<p>Now, using the same compiled class file, compare the results when running under JRE 21 versus JRE 23:</p>
<pre><code>/usr/lib/jvm/jdk-21.0.5-oracle-x64/bin/java PerfTestSampleJ
Iteration  1 took  801.058 ms
Iteration  2 took  798.392 ms
Iteration  3 took  414.688 ms
Iteration  4 took  413.959 ms
Iteration  5 took  416.867 ms
Minimum time taken:  413.959 ms

/usr/lib/jvm/jdk-23.0.1-oracle-x64/bin/java PerfTestSampleJ
Iteration  1 took  193.654 ms
Iteration  2 took  186.790 ms
Iteration  3 took  102.963 ms
Iteration  4 took  103.226 ms
Iteration  5 took  102.869 ms
Minimum time taken:  102.869 ms
</code></pre>
<p>In each run, there is a warmup phase in the first 2 iterations, but iteration 3 onwards is about as fast as it ever gets.</p>
<p>What has changed in Java 23 to make this faster? When looking at release notes, all I can find about performance is improvements in the garbage collector. But we're not using the heap here, so the garbage collector improvement is irrelevant.</p>
<p>P.S. The above results are on Ubuntu Linux x64 using an i7 processor. I get the same results using Temurin versions. Also, I tried Oracle JRE 22 vs 23 on Windows x64 with similar results, showing the performance difference is between 22 and 23.</p>
",
tags:"<java><performance><java-23>",
score:10,
creationDate:2024-12-04 11:19:43,
creationDate:2024-12-05 00:45:34,
score:16,
acceptedResponderReputation:98284,
acceptedResponder:3448419,
QuestionerReputation:11062,
Questioner:13963086}
{title:"localStorage is not defined in next js",
id:"https://stackoverflow.com/questions/76070793",
body:"<p>I am using next.js for frontend. I want to get user from localStorage, but as next.js is a server-side rendring, I can't get localStorage. What should I do so I can get localStorage?</p>
<pre class=""lang-js prettyprint-override""><code>import { createSlice, createAsyncThunk } from &quot;@reduxjs/toolkit&quot;;
import authService from &quot;./authService&quot;;

const getUserfromLocalStorage = localStorage.getItem(&quot;user&quot;)
  ? JSON.parse(localStorage.getItem(&quot;user&quot;))
  : null;

const initialState = {
  user: getUserfromLocalStorage,
  isError: false,
  isLoading: false,
  isSuccess: false,
  message: &quot;&quot;,
};

export const login = createAsyncThunk('auth/login', async (user, thunkAPI) =&gt; {
  try {
    return await authService.login(user);
  } catch (error) {
    return thunkAPI.rejectWithValue(error);
  }
});

export const authSlice = createSlice({
  name: &quot;auth&quot;,
  initialState,
  reducers: {},
  extraReducers: (builder) =&gt; {
    builder
      .addCase(login.pending, (state) =&gt; {
        state.isLoading = true;
      })
      .addCase(login.fulfilled, (state, action) =&gt; {
        state.isLoading = true;
        state.isSuccess = false;
        state.user = action.payload;
      })
      .addCase(login.rejected, (state, action) =&gt; {
        state.isLoading = false;
        state.isError = true;
        state.isSuccess = false;
        state.user = null;
      });
  },
});

export default authSlice.reducer;
</code></pre>
<p><a href=""https://i.sstatic.net/GHHk8.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/GHHk8.png"" alt=""enter image description here"" /></a></p>
",
tags:"<javascript><reactjs><next.js><react-redux><local-storage>",
score:7,
creationDate:2023-04-21 07:16:10,
creationDate:2023-04-21 07:43:02,
score:17,
acceptedResponderReputation:1749,
acceptedResponder:11703509,
QuestionerReputation:123,
Questioner:1926700}
{title:"Query data cannot be undefined. Please make sure to return a value other than undefined from your query function",
id:"https://stackoverflow.com/questions/75163140",
body:"<p>I'm sending a request to a graphql endpoint using a useQuery hook, I work with react.js and next.js. This request is to show a list of projects on my website. When I check the network tab in the inspect tool in chrome browser, the request is ok, showing the response data without problem, but in the console, I got the next errors:</p>
<blockquote>
<p>Query data cannot be undefined. Please make sure to return a value other than undefined from your query function. Affected query key: [&quot;newProjects&quot;]</p>
</blockquote>
<blockquote>
<p>Error: undefined
at Object.onSuccess (query.mjs?b194:316:1)
at resolve (retryer.mjs?bd96:54:1)</p>
</blockquote>
<p>I created a hook to make the request and get the data in another component:</p>
<pre><code>import { useQuery } from &quot;@tanstack/react-query&quot;;
import { request, gql } from 'graphql-request'
import { endpointProjects } from &quot;../settings&quot;;

export function useAllProjects() {

  return useQuery(
    ['newProjects'],
    async () =&gt; {
      const data = await request(
        endpointProjects.newProjects,
        gql`
        query MyQuery {
            newProjects(orderBy: blockTimestamp, orderDirection: desc, first: 10, skip: 0) {
              id
              project
              name
              symbol
              uri
              blockNumber
              blockTimestamp
              transactionHash
            }
          }
      `,
      )
    }
  )
}
</code></pre>
<p>In another component, I just use the hook and show it in the console to see if I get the data:</p>
<pre><code>const {data} = useAllProjects()
console.log('projects list: ', data)
</code></pre>
",
tags:"<javascript><reactjs><next.js><graphql><react-query>",
score:16,
creationDate:2023-01-18 17:35:36,
creationDate:2023-01-18 19:38:13,
score:17,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:337,
Questioner:12533189}
{title:"Fatal error compiling: error: release version 17 not supported",
id:"https://stackoverflow.com/questions/75835961",
body:"<p>I'm using the Redhat ubi8/8.3-227 image to execute maven tasks in Jenkins.</p>
<pre><code>mvn -version
Apache Maven 3.9.0
Java version: 17.0.4

java -version
openjdk version &quot;17.0.4&quot; 2022-07-19 LTS
</code></pre>
<p>For some reason I get the following error while compiling the code:</p>
<pre><code>mvn clean install -Dcheckstyle.skip=true
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile: Fatal error compiling: error: Fatal error compiling: error: release version 17 not supported
</code></pre>
<p>pom.xml</p>
<pre><code>&lt;properties&gt;
  &lt;java.version&gt;17&lt;/java.version&gt;
  &lt;maven.compiler.source&gt;${java.version}&lt;/maven.compiler.source&gt;
  &lt;maven.compiler.target&gt;${java.version}&lt;/maven.compiler.target&gt;
  &lt;maven.compiler.release&gt;${java.version}&lt;/maven.compiler.release&gt;
  &lt;source.version&gt;${java.version}&lt;/source.version&gt;
  
  &lt;boat-maven-plugin.version&gt;0.16.1&lt;/boat-maven-plugin.version&gt;
  &lt;build-helper-maven-plugin.version&gt;3.3.0&lt;/build-helper-maven-plugin.version&gt;
  &lt;docker-maven-plugin.version&gt;0.40.2&lt;/docker-maven-plugin.version&gt;
  &lt;dockerfile-maven-plugin.version&gt;1.4.13&lt;/dockerfile-maven-plugin.version&gt;
  &lt;jacoco-maven-plugin.version&gt;0.8.8&lt;/jacoco-maven-plugin.version&gt;
  &lt;jgitflow-maven-plugin.version&gt;1.0-m5.1&lt;/jgitflow-maven-plugin.version&gt;
  &lt;flatten-maven-plugin.version&gt;1.2.7&lt;/flatten-maven-plugin.version&gt;
  &lt;maven-checkstyle-plugin.version&gt;3.1.2&lt;/maven-checkstyle-plugin.version&gt;
  &lt;maven-clean-plugin.version&gt;3.2.0&lt;/maven-clean-plugin.version&gt;
  &lt;maven-compiler-plugin.version&gt;3.10.1&lt;/maven-compiler-plugin.version&gt;
  &lt;maven-dependency-plugin.version&gt;3.3.0&lt;/maven-dependency-plugin.version&gt;
  &lt;maven-deploy-plugin.version&gt;3.0.0&lt;/maven-deploy-plugin.version&gt;
  &lt;maven-enforcer-plugin.version&gt;3.1.0&lt;/maven-enforcer-plugin.version&gt;
  &lt;maven-failsafe-plugin.version&gt;3.0.0-M7&lt;/maven-failsafe-plugin.version&gt;
  &lt;maven-install-plugin.version&gt;3.0.1&lt;/maven-install-plugin.version&gt;
  &lt;maven-jar-plugin.version&gt;3.2.2&lt;/maven-jar-plugin.version&gt;
  &lt;maven-release-plugin.version&gt;3.0.0-M6&lt;/maven-release-plugin.version&gt;
  &lt;maven-resources-plugin.version&gt;3.3.0&lt;/maven-resources-plugin.version&gt;
  &lt;maven-shade-plugin.version&gt;3.3.0&lt;/maven-shade-plugin.version&gt;
  &lt;maven-source-plugin.version&gt;3.2.1&lt;/maven-source-plugin.version&gt;
  &lt;maven-surefire-plugin.version&gt;3.0.0-M7&lt;/maven-surefire-plugin.version&gt;
  &lt;maven-site-plugin.version&gt;4.0.0-M3&lt;/maven-site-plugin.version&gt;
  &lt;openapi-generator-maven-plugin.version&gt;5.4.0&lt;/openapi-generator-maven-plugin.version&gt;
  &lt;spring-boot-maven-plugin.version&gt;2.6.8&lt;/spring-boot-maven-plugin.version&gt;
  &lt;sonar-maven-plugin.version&gt;3.9.1.2184&lt;/sonar-maven-plugin.version&gt;
  &lt;versions-maven-plugin.version&gt;2.11.0&lt;/versions-maven-plugin.version&gt;
&lt;/properties&gt;
&lt;build&gt;
  &lt;pluginManagement&gt;
    &lt;plugins&gt;
      &lt;plugin&gt;
        &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
        &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;
        &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;
      &lt;/plugin&gt;
    &lt;/plugins&gt;
  &lt;/pluginManagement&gt;
&lt;/build&gt;
</code></pre>
<p>I've already tried to enforce JAVA_HOME this way:</p>
<pre><code>withEnv([&quot;JAVA_HOME=/usr/lib/jvm/java-17-openjdk-17.0.4.0.8-2.el8_6.x86_64&quot;])
</code></pre>
<p>But the result didn't change.</p>
<p>Here the output of mvn clean verify:</p>
<pre><code>+ mvn -X -V clean verify -Dcheckstyle.skip=true 
Apache Maven 3.9.0 (9b58d2bad23a66be161c4664ef21ce219c2c8584)
Maven home: /opt/maven
Java version: 17.0.4, vendor: Red Hat, Inc., runtime: /usr/lib/jvm/java-17-openjdk-17.0.4.0.8-2.el8_6.x86_64
Default locale: en_US, platform encoding: ANSI_X3.4-1968
OS name: &quot;linux&quot;, version: &quot;3.10.0-1160.81.1.el7.x86_64&quot;, arch: &quot;amd64&quot;, family: &quot;unix&quot;
[INFO] Scanning for projects...
.
.
.

[INFO] BUILD FAILURE
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  4.854 s
[INFO] Finished at: 2023-03-26T15:12:11+02:00
[INFO] ------------------------------------------------------------------------
[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project async-support: Fatal error compiling: error: release version 17 not supported -&gt; [Help 1]
org.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project async-support: Fatal error compiling
    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:347)
    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:330)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:175)
    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:76)
    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:163)
    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:160)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)
    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:260)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:172)
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:100)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:821)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:270)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)
    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:568)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)
Caused by: org.apache.maven.plugin.MojoExecutionException: Fatal error compiling
    at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1220)
    at org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:198)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)
    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:342)
    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:330)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:175)
    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:76)
    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:163)
    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:160)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)
    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:260)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:172)
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:100)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:821)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:270)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)
    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:568)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)
Caused by: org.codehaus.plexus.compiler.CompilerException: error: release version 17 not supported
    at org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess (JavaxToolsCompiler.java:197)
    at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:182)
    at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1209)
    at org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:198)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)
    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:342)
    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:330)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:175)
    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:76)
    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:163)
    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:160)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)
    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:260)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:172)
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:100)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:821)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:270)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)
    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:568)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)
Caused by: java.lang.IllegalArgumentException: error: release version 17 not supported
    at com.sun.tools.javac.main.Arguments.reportDiag (Arguments.java:889)
    at com.sun.tools.javac.main.Arguments.handleReleaseOptions (Arguments.java:311)
    at com.sun.tools.javac.main.Arguments.processArgs (Arguments.java:350)
    at com.sun.tools.javac.main.Arguments.init (Arguments.java:246)
    at com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:191)
    at com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:119)
    at com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:68)
    at org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess (JavaxToolsCompiler.java:135)
    at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:182)
    at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1209)
    at org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:198)
    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)
    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:342)
    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:330)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:175)
    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:76)
    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:163)
    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)
    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:160)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)
    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)
    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)
    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:260)
    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:172)
    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:100)
    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:821)
    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:270)
    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)
    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)
    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)
    at java.lang.reflect.Method.invoke (Method.java:568)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)
    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)
    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)
    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)
[ERROR]
[ERROR]
[ERROR] For more information about the errors and possible solutions, please read the following articles:
[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoExecutionException
[ERROR]
[ERROR] After correcting the problems, you can resume the build with the command
[ERROR]   mvn &lt;args&gt; -rf :async-support
[DEBUG] Shutting down adapter factory; available factories [file-lock, rwlock-local, semaphore-local, noop]; available name mappers [discriminating, file-gav, file-hgav, gav, static]
[DEBUG] Shutting down 'file-lock' factory
[DEBUG] Shutting down 'rwlock-local' factory
[DEBUG] Shutting down 'semaphore-local' factory
[DEBUG] Shutting down 'noop' factory
</code></pre>
<p>I've recently updated the Java version, so the issue is most likely in the Maven/Java config rather than in the code.</p>
",
tags:"<java><maven><jenkins>",
score:9,
creationDate:2023-03-24 16:11:43,
creationDate:2023-09-07 13:12:24,
score:17,
acceptedResponderReputation:196,
acceptedResponder:13890849,
QuestionerReputation:149,
Questioner:17995588}
{title:"React router dom v6.10 redirect function isn't working (programmatically redirect)",
id:"https://stackoverflow.com/questions/76049065",
body:"<p>I've been using <code>redirect</code> method from <code>react-router-dom</code>, since v5, but now it's not working. I've tried <code>useNavigate</code> hook, but then I can't get params through <code>useParams</code> hook. It just doesn't make any redirection to the component defined in the routes. My app was created with <code>create-react-app</code>. Here's my configuration:</p>
<p>index.js</p>
<pre><code>import React from 'react';
import ReactDOM from 'react-dom/client';
import './index.css';
import App from './App';
import reportWebVitals from './reportWebVitals';
import { BrowserRouter } from 'react-router-dom';

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(
  &lt;React.StrictMode&gt;
    &lt;BrowserRouter&gt;
      &lt;App /&gt;
    &lt;/BrowserRouter&gt;
  &lt;/React.StrictMode&gt;
);
reportWebVitals();
</code></pre>
<p>App.js</p>
<pre><code>import './App.css';
import { Route, Routes } from 'react-router-dom';
import Person from './entities/person/Person';
import UpdatePerson from './entities/person/UpdatePerson';

function App() {
  return (
    &lt;Routes&gt;
      &lt;Route path='/' element={&lt;Person /&gt;} /&gt;
      &lt;Route path='/update/:id' element={&lt;UpdatePerson /&gt;} /&gt;
    &lt;/Routes&gt;

  );
}
</code></pre>
<p>Then in a component rendered inside PersonComponent, I have a button who calls the next function:</p>
<pre><code>const handleEdit = (id) =&gt; {
  console.log('Edit clicked, with ID: ', id);
  redirect(`/update/${id}`);
}
...
...
...
&lt;input
  type=&quot;button&quot;
  value=&quot;Edit&quot;
  onClick={() =&gt; handleEdit(person.idPerson)}
/&gt;
</code></pre>
<p>I have imported <code>import { redirect } from &quot;react-router-dom&quot;</code> inside the component who calls the previous function. And if I access directly to the route to update component, it works as expected, the only problem is the redirection. What am I missing? Because even in the docs they recommend to use <code>redirect</code> instead of <code>useNavigate</code> hook: <a href=""https://reactrouter.com/en/main/fetch/redirect"" rel=""noreferrer"">Redirect - React Router DOM docs</a></p>
<p>Or maybe I should use <code>useNavigate</code> hook, and there's other way to get URL params. Just don't tell me to use <code>useLocation</code> because in the docs they say that it returns raw data, and they can provide a better abstraction.</p>
<p>It works now, by using <code>useNavigate</code> instead of <code>redirect</code> function, for redirection, and <code>useParams</code> to get params in the next component, but I want to know if it's possible to use redirect, as it's the recommended option in the docs.</p>
",
tags:"<javascript><reactjs><react-router-dom>",
score:8,
creationDate:2023-04-18 21:11:00,
creationDate:2023-04-18 21:37:34,
score:17,
acceptedResponderReputation:202595,
acceptedResponder:8690857,
QuestionerReputation:629,
Questioner:6697859}
{title:"Receiving error while reqeusting notification permission on expo app",
id:"https://stackoverflow.com/questions/75544314",
body:"<p>I Have a simple code that asks for notifications permission that worked in the past, but suddently,It's giving me this error:</p>
<p>&quot;Error: Encountered an exception while calling native method: Exception occurred while executing exported method requestPermissionsAsync on module ExpoNotificationPermissionsModule: String resource ID #0xffffffff&quot;</p>
<p>Code:</p>
<pre><code>    if (isDevice) {
        const { status: existingStatus } = await Notifications.getPermissionsAsync();
        let finalStatus = existingStatus;
        if (existingStatus !== &quot;granted&quot;) {
            const { status } = await Notifications.requestPermissionsAsync();
            finalStatus = status;
        }
        if (finalStatus !== &quot;granted&quot;) {
            Alert.alert(&quot;Falha ao obter permissão para notificações push!&quot;, &quot;É necessário permitir o envio de notificações push para o aplicativo funcionar corretamente.&quot;);
            return &quot;&quot;;
        }
        token = (await Notifications.getExpoPushTokenAsync()).data;
    } else {
        alert(&quot;Para gerar o token de notificação você precisa estar em um dispositivo físico!&quot;);
    }
</code></pre>
",
tags:"<javascript><android><typescript><expo>",
score:11,
creationDate:2023-02-23 11:38:23,
creationDate:2023-04-28 07:59:58,
score:17,
acceptedResponderReputation:814,
acceptedResponder:4754175,
QuestionerReputation:590,
Questioner:12422391}
{title:"Definition for rule 'jsdoc/newline-after-description' was not found jsdoc/newline-after-description",
id:"https://stackoverflow.com/questions/76112563",
body:"<p>I got this error while linting the JS file I am using following configuration. I am doing linting as per WordPress Standards. and thus I have use some WordPress plugins.</p>
<pre><code>{
  &quot;extends&quot;: [
    &quot;plugin:@wordpress/eslint-plugin/recommended&quot;
  ],
  &quot;plugins&quot;: [
    &quot;jsdoc&quot;
  ],
  &quot;parserOptions&quot;: {
    &quot;ecmaVersion&quot;: 6,
    &quot;ecmaFeatures&quot;: {
      &quot;jsx&quot;: true,
      &quot;arrowFunctions&quot;: true,
      &quot;blockBindings&quot;: true,
      &quot;classes&quot;: true,
      &quot;defaultParams&quot;: true,
      &quot;modules&quot;: true
    },
    &quot;sourceType&quot;: &quot;module&quot;
  },
  &quot;globals&quot;: {
    &quot;wp&quot;: false,
    &quot;hm&quot;: false,
    &quot;_&quot;: false
  },
  &quot;env&quot;: {
    &quot;es6&quot;: true,
    &quot;browser&quot;: true,
    &quot;node&quot;: true,
    &quot;commonjs&quot;: true,
    &quot;jquery&quot;: true
  },
  &quot;rules&quot;: {
    &quot;camelcase&quot;: [1],
    &quot;space-in-parens&quot;: [1, &quot;always&quot;],
    &quot;no-trailing-spaces&quot;: [1],
    &quot;spaced-comment&quot;: [0],
    &quot;padded-blocks&quot;: [0],
    &quot;prefer-template&quot;: [0],
    &quot;max-len&quot;: [0],
    &quot;no-else-return&quot;: [0],
    &quot;func-names&quot;: [0],
    &quot;object-shorthand&quot;: [0],
    &quot;indent&quot;: [&quot;error&quot;, &quot;tab&quot;],
    &quot;space-before-function-paren&quot;: 0,
    &quot;no-tabs&quot;: 0,
    &quot;prefer-destructuring&quot;: 0,
    &quot;no-param-reassign&quot;: 0,
    &quot;curly&quot;: &quot;error&quot;,
    &quot;no-empty-function&quot;: &quot;error&quot;,
    &quot;no-global-assign&quot;: &quot;error&quot;,
    &quot;yoda&quot;: [ &quot;error&quot;, &quot;always&quot; ],
    &quot;no-undefined&quot;:&quot;error&quot;,
    &quot;comma-spacing&quot;: [&quot;error&quot;, { &quot;before&quot;: false, &quot;after&quot;: true }],
    &quot;lines-between-class-members&quot;: [&quot;error&quot;, &quot;always&quot;],
    &quot;arrow-spacing&quot;: &quot;error&quot;,
    &quot;jsdoc/check-alignment&quot;: 1,
    &quot;jsdoc/check-param-names&quot;: 1,
    &quot;jsdoc/check-tag-names&quot;: 1,
    &quot;jsdoc/check-types&quot;: 0,
    &quot;jsdoc/implements-on-classes&quot;: 1,
    &quot;jsdoc/newline-after-description&quot;: 1,
    &quot;jsdoc/no-undefined-types&quot;: 0,
    &quot;jsdoc/require-jsdoc&quot;: 1,
    &quot;jsdoc/require-param&quot;: 1,
    &quot;jsdoc/require-param-description&quot;: 1,
    &quot;jsdoc/require-param-name&quot;: 1,
    &quot;jsdoc/require-param-type&quot;: 1,
    &quot;jsdoc/require-returns&quot;: 1,
    &quot;jsdoc/require-returns-check&quot;: 1,
    &quot;jsdoc/require-returns-description&quot;: 1,
    &quot;jsdoc/require-returns-type&quot;: 1,
    &quot;jsdoc/valid-types&quot;: 1,
    &quot;no-mixed-spaces-and-tabs&quot;: &quot;off&quot;,
    &quot;require-jsdoc&quot;: [&quot;error&quot;, {
      &quot;require&quot;: {
        &quot;FunctionDeclaration&quot;: true,
        &quot;MethodDefinition&quot;: true,
        &quot;ClassDeclaration&quot;: true,
        &quot;ArrowFunctionExpression&quot;: true,
        &quot;FunctionExpression&quot;: true
      }
    }]
  },
  &quot;settings&quot;: {
    &quot;jsdoc&quot;: {
      &quot;tagNamePreference&quot; : {
        &quot;param&quot;: &quot;param&quot;,
        &quot;returns&quot;: &quot;return&quot;
      }
    }
  }
}
</code></pre>
<p>I got this configuration from the WordPress tutorials and stuck at the given error.</p>
<p>Error: Definition for rule 'jsdoc/newline-after-description' was not found  jsdoc/newline-after-description</p>
",
tags:"<javascript><wordpress><eslint><eslint-plugin-jsdoc>",
score:13,
creationDate:2023-04-26 15:28:25,
creationDate:2023-04-26 20:55:37,
score:17,
acceptedResponderReputation:17453,
acceptedResponder:1028230,
QuestionerReputation:141,
Questioner:16527387}
{title:"What is a ""this-escape"" warning, and how do I deal with it?",
id:"https://stackoverflow.com/questions/77191858",
body:"<p>I struggle to find resources on this, and yet, so many of my classes are running into this error when I compile my code on the latest Java (21).</p>
<p>Here is a code example.</p>
<pre class=""lang-java prettyprint-override""><code>public class ThisEscapeExample
{

        public Object o;

        public ThisEscapeExample()
        {

                this.overridableMethod();

        }

        public void overridableMethod()
        {

                this.o = new Object();

        }

}
</code></pre>
<p>And here is my compilation command.</p>
<pre class=""lang-none prettyprint-override""><code>javac -Xlint:all ThisEscapeExample.java
ThisEscapeExample.java:9: warning: [this-escape] possible 'this' escape before subclass is fully initialized
                this.overridableMethod();
                                      ^
1 warning
</code></pre>
",
tags:"<java><scope><warnings><compiler-warnings><this-pointer>",
score:9,
creationDate:2023-09-28 02:30:52,
creationDate:2023-09-28 02:30:52,
score:18,
acceptedResponderReputation:1541,
acceptedResponder:10118965,
QuestionerReputation:1541,
Questioner:10118965}
{title:"Why is JavaScript executing callbacks in a for-loop so fast the first time?",
id:"https://stackoverflow.com/questions/78792476",
body:"<p>The following code with <code>callback</code> argument runs faster in the first loop.</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const fn = (length, label, callback) =&gt; {
  console.time(label);
  for (let i = 0; i &lt; length; i++) {
    callback &amp;&amp; callback(i);
  }
  console.timeEnd(label);
};

const length = 100000000;
fn(length, ""1"", () =&gt; {})  // very few intervals
fn(length, ""2"", () =&gt; {})  // regular
fn(length, ""3"", () =&gt; {})  // regular</code></pre>
</div>
</div>
</p>
<p>and then I removed the third argument <code>callback</code>, and their execution times are very near:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>const fn = (length, label, callback) =&gt; {
  console.time(label);
  for (let i = 0; i &lt; length; i++) {
    callback &amp;&amp; callback(i);
  }
  console.timeEnd(label);
};

const length = 100000000;
fn(length, ""1"")  // regular
fn(length, ""2"")  // regular
fn(length, ""3"")  // regular</code></pre>
</div>
</div>
</p>
<p>Why?</p>
",
tags:"<javascript><for-loop><callback><v8>",
score:15,
creationDate:2024-07-25 09:18:37,
creationDate:2024-07-25 14:24:15,
score:18,
acceptedResponderReputation:40491,
acceptedResponder:6036428,
QuestionerReputation:153,
Questioner:21822320}
{title:"How can I change the border radius of a TextField in Material-UI React?",
id:"https://stackoverflow.com/questions/74995801",
body:"<p>Im trying to customize the border radius of a TextField in MUI, but nothing is working. This is how it looks:
<a href=""https://i.sstatic.net/CmESV.png"" rel=""noreferrer"">enter image description here</a></p>
<p>It comes with a borderRadius of 4px and Im trying to change it to 0px.</p>
<p>This is how my code Looks:</p>
<pre><code>&lt;TextField  
    id=&quot;time&quot;
    type=&quot;time&quot;
    inputProps={{
    step: 300, // 5 min
    style: {
      width: &quot;225px&quot;,
      border: &quot;1px solid #EAEAEA&quot;,
      borderRadius: &quot;0&quot;,
      padding: &quot;8px 0 8px 8px&quot;,
      fontFamily: &quot;Roboto&quot;,
      fontSize: &quot;14px&quot;,
    },
  }
}
        /&gt;
</code></pre>
<p>The rest of the styles are working. But for some reason, borderRadius is not.</p>
<p>I have also tried the sx property and style property, but neither is working.</p>
",
tags:"<javascript><reactjs><material-ui>",
score:10,
creationDate:2023-01-03 16:08:43,
creationDate:2023-01-03 16:11:58,
score:18,
acceptedResponderReputation:55613,
acceptedResponder:954940,
QuestionerReputation:135,
Questioner:18782436}
{title:"If I pass a server component to a client component via the children prop, will it be rendered on the client?",
id:"https://stackoverflow.com/questions/77015023",
body:"<p>In the NextJS docs, it says <a href=""https://nextjs.org/docs/app/building-your-application/rendering/client-components#using-client-components-in-nextjs"" rel=""noreferrer"">here</a> that all child components and modules imported into a client component are considered part of the client bundle. However the docs also say that you can interleave server/client components by passing a server component as children props to a client component in order render the server component on the server e.g.</p>
<pre class=""lang-js prettyprint-override""><code>&lt;ClientComponent&gt;
   &lt;ServerComponent/&gt;
&lt;/ClientComponent&gt;
</code></pre>
<p>I don't understand the difference between these statements or what the verdict exactly is, since these two parts seem to contradict each other. Am I misinterpeting some terminology? Are a client component's children part of the client bundle or are they rendered on the server?</p>
",
tags:"<javascript><reactjs><typescript><next.js><rendering>",
score:7,
creationDate:2023-08-31 10:32:39,
creationDate:2023-08-31 12:05:48,
score:18,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:679,
Questioner:4039432}
{title:"Convert Array to Map Typescript",
id:"https://stackoverflow.com/questions/75290595",
body:"<p>I'm trying to covert the following array to a Map:</p>
<pre><code>const arr = [
  { key: 'user1', value: { num: 0, letter: 'a' } },
  { key: 'user2', value: { num: 0, letter: 'b' } },
  { key: 'user3', value: { num: 0, letter: 'c' } },
];
</code></pre>
<p>What I have so far:</p>
<pre><code>const arr = [
  { key: 'user1', value: { num: 0, letter: 'a' } },
  { key: 'user2', value: { num: 0, letter: 'b' } },
  { key: 'user3', value: { num: 0, letter: 'c' } },
];
const b = arr.map(obj =&gt; [obj.key, obj.value]);
const map = new Map&lt;string, { num: number; letter: string }&gt;(b);

console.log(map.get('user1'));
</code></pre>
<p>Do you know if this is something achievable?</p>
<p><em>PS: You can find Typescript playground <a href=""https://www.typescriptlang.org/play?#code/MYewdgzgLgBAhgJwTAvDA2gKBj3BvGAawFMBPALhgHIBXCYhARioBoYA3OAGxuMoLA0AtpQAMbLsShQGlKnCowAvspbZcOAiQrU6DAEysO3XvxiCRMcTEnTZ1AEaKVStRs1EycvQgDMRzh4+GAFhMQkpGQQ5YGdVdRwAXQBuBJhQSFgHVHgkADohOAAHAAoQBwArVAA+DHKKvO02erzA3kSASlSNDOgYQqKcsGIAdxgAWWKAHmgEAEswAHM2UMsLBwZkm0j7WYXF5WqShy71dV6QSTyuEEWSgbzFqRLaeiYqDq6gA"" rel=""noreferrer"">here</a> and the error that I'm getting</em></p>
",
tags:"<javascript><arrays><typescript><dictionary>",
score:9,
creationDate:2023-01-30 21:58:12,
creationDate:2023-01-30 22:09:21,
score:19,
acceptedResponderReputation:58342,
acceptedResponder:25507,
QuestionerReputation:16206,
Questioner:5148197}
{title:"secretOrPrivateKey must be an asymmetric key when using RS256",
id:"https://stackoverflow.com/questions/75635389",
body:"<p>I'm using <code>jsonwebtoken</code> to generate a bearer token.<br>
Following the examples provided by the <a href=""https://www.npmjs.com/package/jsonwebtoken"" rel=""noreferrer"">documentation</a> my code looks like this</p>
<pre><code>var privateKey = fs.readFileSync('src\\private.key'); //returns Buffer
let token = jwt.sign(myJsonContent, privateKey, { algorithm: 'RS256' });
</code></pre>
<p>This code returns this error in console</p>
<blockquote>
<p>secretOrPrivateKey must be an asymmetric key when using RS256</p>
</blockquote>
<p>I've tried including the key in my <code>.env</code> file but the error is the same<br>
I've also tried to declare <code>privateKey</code>  as a <code>Buffer</code> but nothing changed.<br>
Any solutions?</p>
",
tags:"<javascript><node.js><jwt>",
score:20,
creationDate:2023-03-04 11:33:35,
creationDate:2023-03-10 11:57:05,
score:19,
acceptedResponderReputation:1017,
acceptedResponder:11374296,
QuestionerReputation:1017,
Questioner:11374296}
{title:"Upgrading to Spring Boot 3.2 with Spring Security 6.2.0: Name for argument of type [java.lang.String] not specified",
id:"https://stackoverflow.com/questions/77688279",
body:"<p>This question is very similar to the recent question, also for Spring Boot 3.2:
<a href=""https://stackoverflow.com/questions/77635974/error-name-for-argument-of-type-java-util-uuid-not-specified-and-parameter-n"">Error &quot;Name for argument of type [java.util.UUID] not specified, and parameter name information not found in class file either&quot;with spring 3.2 upgrade</a></p>
<p>However, I decided to ask a new question because the situation seems slightly different and none of the proposed solutions are working for me.  In my case, Spring Security is in play, and I'm not sure if that matters (EDIT: It doesn't).  I also wanted to add additional details about what I have tried.  If moderators deem this a duplicate question, my apologies.</p>
<p>what I have done:</p>
<ul>
<li>I have followed the directions on <a href=""https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x#parameter-name-retention"" rel=""noreferrer"">https://github.com/spring-projects/spring-framework/wiki/Upgrading-to-Spring-Framework-6.x#parameter-name-retention</a>:
<ul>
<li>I'm using Gradle (Groovy DSL) so I have added:</li>
</ul>
</li>
</ul>
<pre><code>tasks.withType(JavaCompile).configureEach {
    options.compilerArgs.add(&quot;-parameters&quot;)
}
</code></pre>
<ul>
<li>I'm using using IDEA so I have also done this:</li>
</ul>
<pre><code>In IntelliJ IDEA, open Settings and add -parameters to the following field.

    Build, Execution, Deployment → Compiler → Java Compiler → Additional command line parameters
</code></pre>
<ul>
<li>I get the error both from invoking tests from the command line (<code>./gradlew check</code>) as well as running the tests from IDEA.</li>
<li>I have removed all build directories and rebuilt everything.</li>
<li>I'm using JDK 17.</li>
<li>I have also tried upgrading to <code>jakarta.servlet:jakarta.servlet-api:6.1.0-M1</code> to no effect.</li>
</ul>
<p>Here's the error from tests that are annotated with <code>@SpringBootTest</code>.</p>
<pre><code>2023-12-19T14:05:38.461-08:00 ERROR 25349 --- [app] [o-auto-1-exec-1] o.a.c.c.C.[.[.[/].[dispatcherServlet]    : Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: java.lang.IllegalArgumentException: Name for argument of type [java.lang.String] not specified, and parameter name information not found in class file either.] with root cause

java.lang.IllegalArgumentException: Name for argument of type [java.lang.String] not specified, and parameter name information not found in class file either.
    at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.updateNamedValueInfo(AbstractNamedValueMethodArgumentResolver.java:183) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.getNamedValueInfo(AbstractNamedValueMethodArgumentResolver.java:160) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.web.method.annotation.AbstractNamedValueMethodArgumentResolver.resolveArgument(AbstractNamedValueMethodArgumentResolver.java:106) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:218) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:171) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:118) ~[spring-webmvc-6.1.1.jar:6.1.1]
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:917) ~[spring-webmvc-6.1.1.jar:6.1.1]
    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:829) ~[spring-webmvc-6.1.1.jar:6.1.1]
    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.1.1.jar:6.1.1]
    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1089) ~[spring-webmvc-6.1.1.jar:6.1.1]
    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:979) ~[spring-webmvc-6.1.1.jar:6.1.1]
    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014) ~[spring-webmvc-6.1.1.jar:6.1.1]
    at org.springframework.web.servlet.FrameworkServlet.doPut(FrameworkServlet.java:925) ~[spring-webmvc-6.1.1.jar:6.1.1]
    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:550) ~[jakarta.servlet-api-6.0.0.jar:6.0.0]
    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.1.1.jar:6.1.1]
    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:614) ~[jakarta.servlet-api-6.0.0.jar:6.0.0]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:205) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:51) ~[tomcat-embed-websocket-10.1.16.jar:10.1.16]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.invoke(FilterSecurityInterceptor.java:117) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.access.intercept.FilterSecurityInterceptor.doFilter(FilterSecurityInterceptor.java:83) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.authentication.www.BasicAuthenticationFilter.doFilterInternal(BasicAuthenticationFilter.java:213) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.web.filter.CorsFilter.doFilterInternal(CorsFilter.java:91) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:82) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilter(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.2.0.jar:6.2.0]
    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:352) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:268) ~[spring-web-6.1.1.jar:6.1.1]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.1.1.jar:6.1.1]
    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.1.1.jar:6.1.1]
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:174) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:149) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:167) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:90) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:482) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:115) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:93) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:74) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:340) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:391) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:63) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:896) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1744) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.16.jar:10.1.16]
    at java.base/java.lang.Thread.run(Thread.java:840) ~[na:na]
</code></pre>
<p><strong>UPDATE</strong>:</p>
<p>I've accepted @xda's answer because that's probably the best approach to take as adding compiler parameters are more of a work-around. But in my case, I have subprojects where some of them are using the Groovy plugin rather than the Java plugin and for those subprojects I discovered this is also helpful:</p>
<pre><code>tasks.withType(GroovyCompile).configureEach {
    groovyOptions.parameters = true
}
</code></pre>
<p>Also related, make sure compiler parameter configuration gets executed after subproject compiler plugins get applied.  In my case, I was trying to set compiler parameters globally across all subprojects in the top-level <code>build.gradle</code> file using a <code>subprojects {}</code> section, but I wasn't doing it correctly because subprojects were applying different plugins in their own <code>build.gradle</code> files.  The cart was getting put before the horse.</p>
",
tags:"<java><spring><spring-boot><gradle>",
score:7,
creationDate:2023-12-19 22:18:47,
creationDate:2023-12-20 11:41:58,
score:19,
acceptedResponderReputation:206,
acceptedResponder:23132364,
QuestionerReputation:493,
Questioner:3601868}
{title:"How to configure kapt to generate Java17 Java stubs in Android Gradle build file",
id:"https://stackoverflow.com/questions/75109742",
body:"<p>My current Android project is displaying the following build messages:-</p>
<pre><code>&gt; Task :shared:resource:kaptGenerateStubsProductionDebugKotlin
'compileProductionDebugJavaWithJavac' task (current target is 17) and 'kaptGenerateStubsProductionDebugKotlin' task (current target is 1.8) jvm target compatibility should be set to the same Java version.
By default will become an error since Gradle 8.0+! Read more: https://kotl.in/gradle/jvm/target-validation
Consider using JVM toolchain: https://kotl.in/gradle/jvm/toolchain
</code></pre>
<p>How do you configure kapt to generate stubs in a specific version of java?</p>
<p>I have tried...</p>
<pre><code>tasks.withType(org.jetbrains.kotlin.gradle.tasks.KaptGenerateStubs).configureEach {
    kotlinJavaToolchain.jdk.use(
            &quot;/usr/local/opt/openjdk@17/libexec/openjdk.jdk/Contents/Home&quot;,
            JavaVersion.VERSION_17
    )
}
</code></pre>
<p>and</p>
<pre><code>kapt {
    javacOptions {
        option(&quot;--target&quot;, 17)
    }
}
</code></pre>
<p>none of which made any difference</p>
<p>Is it possible to control the java version for stubs generated by kapt in an Android project?</p>
<p>Having enabled verbose logging in kapt3 I can now see I have configure target correctly</p>
<pre><code>Javac options: {--target=17, --source=17}
</code></pre>
<p>and in addition</p>
<pre><code>[INFO] All Javac options: {-Adagger.fastInit=enabled=-Adagger.fastInit=enabled, -Adagger.hilt.android.internal.disableAndroidSuperclassValidation=true=-Adagger.hilt.android.internal.disableAndroidSuperclassValidation=true, -Adagger.hilt.android.internal.projectType=LIBRARY=-Adagger.hilt.android.internal.projectType=LIBRARY, -ASomeKaptArgument=ArgumentValue=-ASomeKaptArgument=ArgumentValue, -Akapt.kotlin.generated=/Users/frank/github/mobile-android-practiceupdate/shared/resource/build/generated/source/kaptKotlin/productionDebug=-Akapt.kotlin.generated=/Users/frank/github/mobile-android-practiceupdate/shared/resource/build/generated/source/kaptKotlin/productionDebug, -Adagger.hilt.internal.useAggregatingRootProcessor=false=-Adagger.hilt.internal.useAggregatingRootProcessor=false, --target=17, --source=17, -proc:=only, accessInternalAPI=true,.....
</code></pre>
<p>however I still see the above build message</p>
<p>why is kapt ignoring my <code>javacOptions</code>?</p>
<p>To recreate this issue:-</p>
<p>Main project gradle</p>
<pre><code>plugins {
    id 'com.android.application' version '8.0.0-alpha11' apply false
    id 'com.android.library' version '8.0.0-alpha11' apply false
    id 'org.jetbrains.kotlin.android' version '1.8.0' apply false
    id 'com.google.dagger.hilt.android' version '2.44.2' apply false
}

task clean(type: Delete) {
    delete rootProject.buildDir
}
</code></pre>
<p>gradle wrapper</p>
<pre><code>#Tue Oct 25 07:38:32 BST 2022
distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-7.6-bin.zip
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
</code></pre>
<p>Gradle JDK</p>
<p><a href=""https://i.sstatic.net/sxcwH.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/sxcwH.png"" alt=""enter image description here"" /></a></p>
<p>then use kapt for say room or hilt in any app or sub module in your project with java version set to 17</p>
<pre><code>    plugins {
        id 'com.android.application'
        id 'org.jetbrains.kotlin.android'
        id 'dagger.hilt.android.plugin'
        id &quot;org.jetbrains.kotlin.kapt&quot;
    }
    
    android {
        kapt {
            javacOptions {
                option(&quot;--target&quot;, &quot;17&quot;)
            }
        }
        kotlinOptions {
            jvmTarget = '17'
            freeCompilerArgs += [
                    &quot;-Xcontext-receivers&quot;,
                    &quot;-opt-in=androidx.compose.material3.windowsizeclass.ExperimentalMaterial3WindowSizeClassApi&quot;,
                    &quot;-opt-in=kotlinx.coroutines.ObsoleteCoroutinesApi&quot;]
        }
        compileOptions {
            sourceCompatibility JavaVersion.VERSION_17
            targetCompatibility JavaVersion.VERSION_17
            coreLibraryDesugaringEnabled true
        }
        namespace 'com.my.app'
        compileSdk 33
        buildToolsVersion &quot;33.0.1&quot;
    
        defaultConfig {
            applicationId &quot;com.my.app&quot;
            minSdk 26
            targetSdk 33
            versionCode 3
            versionName &quot;3.0&quot;
    
            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;
            vectorDrawables {
                useSupportLibrary true
            }
        }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    flavorDimensions &quot;default&quot;
    productFlavors {
        development {
            dimension &quot;default&quot;
        }
        staging {
            dimension &quot;default&quot;
        }
        production {
            dimension &quot;default&quot;
        }
    }
     buildFeatures {
        compose true
    }
    composeOptions {
        kotlinCompilerExtensionVersion '1.4.0-dev-k1.8.0-33c0ad36f83'
    }
    packagingOptions {
        resources {
            excludes += '/META-INF/{AL2.0,LGPL2.1}'
        }
    }
}

dependencies {

    coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:2.0.0'

    implementation 'org.conscrypt:conscrypt-android:2.5.2'

    implementation 'com.google.dagger:hilt-android:2.44.2'
    kapt 'com.google.dagger:hilt-android-compiler:2.44.2'
    kapt 'androidx.hilt:hilt-compiler:1.0.0'

}
</code></pre>
<p>these are my gradle.properties</p>
<pre><code># Project-wide Gradle settings.
# IDE (e.g. Android Studio) users:
# Gradle settings configured through the IDE *will override*
# any settings specified in this file.
# For more details on how to configure your build environment visit
# http://www.gradle.org/docs/current/userguide/build_environment.html
# Specifies the JVM arguments used for the daemon process.
# The setting is particularly useful for tweaking memory settings.
org.gradle.jvmargs=-Xmx8192m -Dfile.encoding=UTF-8
# When configured, Gradle will run in incubating parallel mode.
# This option should only be used with decoupled projects. More details, visit
# http://www.gradle.org/docs/current/userguide/multi_project_builds.html#sec:decoupled_projects
# org.gradle.parallel=true
# AndroidX package structure to make it clearer which packages are bundled with the
# Android operating system, and which are packaged with your app's APK
# https://developer.android.com/topic/libraries/support-library/androidx-rn
android.useAndroidX=true
android.enableJetifier=true
# Kotlin code style for this project: &quot;official&quot; or &quot;obsolete&quot;:
kotlin.code.style=official
# Enables namespacing of each library's R class so that its R class includes only the
# resources declared in the library itself and none from the library's dependencies,
# thereby reducing the size of the R class for that library
android.nonTransitiveRClass=true
android.defaults.buildfeatures.buildconfig=true
kapt.verbose=true
# positive value will enable caching
# use the same value as the number of modules that use kapt
kapt.classloaders.cache.size=5

# disable for caching to work
kapt.include.compile.classpath=false
kapt.incremental.apt=false
</code></pre>
<p>the version of android studio is</p>
<pre><code>Android Studio Flamingo | 2022.2.1 Canary 11
Build #AI-222.4459.24.2221.9445173, built on December 30, 2022
Runtime version: 17.0.4.1+0-17.0.4.1b469.62-9127311 x86_64
VM: OpenJDK 64-Bit Server VM by JetBrains s.r.o.
macOS 12.6.1
GC: G1 Young Generation, G1 Old Generation
Memory: 4096M
Cores: 12
Metal Rendering is ON
Registry:
    external.system.auto.import.disabled=true
    ide.text.editor.with.preview.show.floating.toolbar=false
    gradle.version.catalogs.dynamic.support=true
    ide.images.show.chessboard=true

Non-Bundled Plugins:
    com.android.aas (3.5.1)
    com.jetbrains.kmm (0.5.1(222)-30)
</code></pre>
<p>I have created this bug <a href=""https://issuetracker.google.com/issues/265653154"" rel=""noreferrer"">report</a> with attached example android project</p>
<p><strong>UPDATE</strong></p>
<p>by adding this to my project level <code>build.gradle</code> file the messages disappeared:-</p>
<pre><code>subprojects {
    tasks.withType(org.jetbrains.kotlin.gradle.tasks.KotlinCompile) {
        kotlinOptions.jvmTarget = &quot;17&quot;
    }
}
</code></pre>
",
tags:"<java><android><gradle><kapt>",
score:15,
creationDate:2023-01-13 13:17:19,
creationDate:2023-01-18 11:20:07,
score:19,
acceptedResponderReputation:46460,
acceptedResponder:253468,
QuestionerReputation:5664,
Questioner:423199}
{title:"NextAuth: how to return custom errors without redirection",
id:"https://stackoverflow.com/questions/76750792",
body:"<p>I have been looking at implementing NextAuth with username and password credentials and I am not finding a way to return custom errors to the client side. It seems that I can only return a 200 ok or a redirection to an error page from the authorize method, where then you could add a custom error to a query string. However that is not a proper solution to my case as I need the client side to simply receive a custom error code or message from the sigIn call.</p>
<p>How do you return custom errors like</p>
<p>&quot;Invalid email address&quot;</p>
<p>&quot;Account blocked&quot;</p>
<p>&quot;Invalid password&quot;</p>
<p>Or any other customization required?</p>
<p>Thanks</p>
",
tags:"<javascript><node.js><reactjs><next.js><next-auth>",
score:7,
creationDate:2023-07-24 00:19:30,
creationDate:2023-07-25 10:22:04,
score:20,
acceptedResponderReputation:961,
acceptedResponder:2103608,
QuestionerReputation:961,
Questioner:2103608}
{title:"how to pass variable from frontmatter to script in Astro JS?",
id:"https://stackoverflow.com/questions/76714410",
body:"<p>How to pass variable from frontmatter to script in Astro js. Like this:</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-html lang-html prettyprint-override""><code>---
const title = ""this is title""
---

some content


&lt;script&gt;

const metatile = title

&lt;script&gt;</code></pre>
</div>
</div>
</p>
",
tags:"<javascript><astrojs>",
score:6,
creationDate:2023-07-18 15:31:20,
creationDate:2023-07-18 16:02:36,
score:20,
acceptedResponderReputation:2185,
acceptedResponder:14104186,
QuestionerReputation:141,
Questioner:8552849}
{title:"Implementing a loading spinner in sveltekit that is triggered during an action",
id:"https://stackoverflow.com/questions/76580769",
body:"<p>I have a simple form having email, password and confirmPassword. I use action to handle this. I want to implement a spinner that will be triggered for the following actions</p>
<ol>
<li>Checking if user is currently existing in the db</li>
<li>If no, then proceed for registration</li>
</ol>
<p><em>I am using pocketbase</em></p>
<p>Following is my action.</p>
<pre><code>import { superValidate } from 'sveltekit-superforms/server';
import { redirect } from '@sveltejs/kit';
import { fail } from '@sveltejs/kit';

import { loginSchema } from '$lib/schema/zodschema';
import { ClientResponseError } from 'pocketbase';

export const load = async () =&gt; {
    const form = await superValidate(loginSchema);
    return { form };
};

export const actions = {
    default: async ({ locals, request }) =&gt; {
        const form = await superValidate(request, loginSchema);


        try {

            const { email } = form.data
            const records = await locals.pb.collection('test').getFullList();
            const userRecords = records.filter(value =&gt; value.email === form.data.email);

            if (userRecords.length &gt; 0) {

                const existingUser = userRecords[0]

                if (existingUser &amp;&amp; existingUser.verified) {
                    return {

                        accountCreated: false,
                        message: 'The user records exists. Proceed to login instead',
                        isVerified: true,

                    }
                } else {


                    return {

                        accountCreated: false,
                        message: 'The user record exists. You have to verify to access',
                        isVerified: false,


                    }
                }
            } else {
                await locals.pb.collection('test').create(form.data);



                return {

                    accountCreated: true,
                    message: 'The user record is successfully created',
                    isVerified: false,
                }
            }



        } catch (error) {
            // Handle the error

            if (error instanceof ClientResponseError) {
                return {
                    error: error.message,
                    isLoading: false
                }
            }
        }
    }
};
</code></pre>
<p>In the above, I could set a boolean like</p>
<pre><code>let isLoading = true
</code></pre>
<p>Then set it to false at different stages. But the problem is how to access the isLoading status in the client (both initial and updated state).</p>
<p>I tried stores only to find out later that stores cannot be used to share the state between the client and server.</p>
<p>Is there an alternative approach to achieve this?</p>
<p>Thanks</p>
",
tags:"<javascript><svelte><sveltekit><pocketbase>",
score:6,
creationDate:2023-06-29 11:51:06,
creationDate:2023-07-06 13:33:06,
score:20,
acceptedResponderReputation:19902,
acceptedResponder:940098,
QuestionerReputation:1020,
Questioner:7065562}
{title:"IntelliJ Gradle build failure: Incompatible because component compatible with Java 17 and the consumer needed Java 11",
id:"https://stackoverflow.com/questions/75035852",
body:"<p>In IntelliJ, when I do a clean build on a new project downloaded from start.spring.io, it gives an error.</p>
<p><a href=""https://i.sstatic.net/zCcY4.png"" rel=""noreferrer"">Spring Configuration on start.spring.io</a></p>
<p>I have already installed Java 17 JDK (Amazon Corretto) downloaded directly from IntelliJ</p>
<p>In terminal, ran command: <code>./gradlew clean build</code></p>
<p>resulted in the following error:</p>
<pre><code>FAILURE: Build failed with an exception.

* What went wrong:
A problem occurred configuring root project 'learn-spring-framework'.
&gt; Could not resolve all files for configuration ':classpath'.
   &gt; Could not resolve org.springframework.boot:spring-boot-gradle-plugin:3.0.1.
     Required by:
         project : &gt; org.springframework.boot:org.springframework.boot.gradle.plugin:3.0.1
      &gt; No matching variant of org.springframework.boot:spring-boot-gradle-plugin:3.0.1 was found. The consumer was configured to find a runtime of a library compatible with Java 11, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '7.6' but:
          - Variant 'apiElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a library, packaged as a jar, and its dependencies declared externally:
              - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 11
              - Other compatible attribute:
                  - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')
          - Variant 'javadocElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a component, and its dependencies declared externally:
              - Incompatible because this component declares documentation and the consumer needed a library
              - Other compatible attributes:
                  - Doesn't say anything about its target Java version (required compatibility with Java 11)
                  - Doesn't say anything about its elements (required them packaged as a jar)
                  - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')
          - Variant 'mavenOptionalApiElements' capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.0.1 declares a library, packaged as a jar, and its dependencies declared externally:
              - Incompatible because this component declares an API of a component compatible with Java 17 and the consumer needed a runtime of a component compatible with Java 11
              - Other compatible attribute:
                  - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')
          - Variant 'mavenOptionalRuntimeElements' capability org.springframework.boot:spring-boot-gradle-plugin-maven-optional:3.0.1 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:
              - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 11
              - Other compatible attribute:
                  - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')
          - Variant 'runtimeElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:
              - Incompatible because this component declares a component compatible with Java 17 and the consumer needed a component compatible with Java 11
              - Other compatible attribute:
                  - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')
          - Variant 'sourcesElements' capability org.springframework.boot:spring-boot-gradle-plugin:3.0.1 declares a runtime of a component, and its dependencies declared externally:
              - Incompatible because this component declares documentation and the consumer needed a library
              - Other compatible attributes:
                  - Doesn't say anything about its target Java version (required compatibility with Java 11)
                  - Doesn't say anything about its elements (required them packaged as a jar)
                  - Doesn't say anything about org.gradle.plugin.api-version (required '7.6')

* Try:
&gt; Run with --stacktrace option to get the stack trace.
&gt; Run with --info or --debug option to get more log output.
&gt; Run with --scan to get full insights.

* Get more help at https://help.gradle.org

BUILD FAILED in 1s

</code></pre>
<p>Thanks in advance for the help</p>
<p>Tried:</p>
<ol>
<li>Make sure the Project is using Java 17 SDK under <code>File -&gt; Project Structure</code></li>
<li>Make sure the Gradle JVM is pointing to Java 17 SDK under <code>IntelliJ IDEA -&gt; Settings -&gt; Build, Execution, Deployment -&gt; Build Tools -&gt; Gradle</code></li>
<li>Tried to change <code>build.gradle</code> file for</li>
</ol>
<pre><code>sourceCompatibility = (11 or 17)
targetCompatibility = (11 or 17)

java {
  toolchain {
    languageVersion = JavaLanguageVersion.of( (11 or 17) )
  }
} 
</code></pre>
<p>Weirdly, the project just builds fine if I just click on the &quot;play&quot; button on IntelliJ</p>
",
tags:"<spring-boot><gradle><intellij-idea><java-17>",
score:9,
creationDate:2023-01-06 20:35:45,
creationDate:2023-01-07 13:33:26,
score:20,
acceptedResponderReputation:18899,
acceptedResponder:7237884,
QuestionerReputation:184,
Questioner:10136466}
{title:"Historic timezone offsets in newer JDK versions",
id:"https://stackoverflow.com/questions/75359690",
body:"<p>I found a weird java discrepancy while testing some timezones with the use of <code>ZonedDateTime</code>. I was trying to parse a date before 1970 and saw that the result changes between java versions. The offset for Netherlands in 1932 is <code>+00:19</code>. Does anyone know why this happens? I feel this might be related with the bundling of european timezones in the time zone database project (<a href=""https://github.com/eggert/tz"" rel=""noreferrer"">https://github.com/eggert/tz</a>), but i'm not sure. Is there a way to get the old behavior in java? Like with a setting?</p>
<pre class=""lang-java prettyprint-override""><code>
ZonedDateTime zdt = LocalDateTime.parse(&quot;1932-10-20T10:19:32.000&quot;).atZone(ZoneId.of(&quot;Europe/Amsterdam&quot;));
System.out.println(zdt);
    
DateTimeFormatter formatter = new DateTimeFormatterBuilder()
    .append(ISO_LOCAL_DATE)
    .appendLiteral('T')
    .appendValue(HOUR_OF_DAY, 2)
    .appendLiteral(':')
    .appendValue(MINUTE_OF_HOUR, 2)
    .optionalStart()
    .appendLiteral(':')
    .appendValue(SECOND_OF_MINUTE, 2)
    .optionalStart()
    .appendFraction(NANO_OF_SECOND, 3, 3, true)
    .appendOffset(&quot;+HH:MM&quot;, &quot;Z&quot;)
    .toFormatter();

System.out.println(formatter.format(zdt));

System.out.println(
    java.time.zone.ZoneRulesProvider
                  .getVersions(&quot;UTC&quot;)
                  .lastEntry()
                  .getKey()
);
</code></pre>
<p>Result in Temurin (java jdk) 11.0.16 (expected output), last line showing timezone database version:</p>
<pre><code>1932-10-20T10:19:32+00:19:32[Europe/Amsterdam]
1932-10-20T10:19:32.000+00:19
2022a
</code></pre>
<p>Result in Temurin 11.0.17:</p>
<pre><code>1932-10-20T10:19:32Z[Europe/Amsterdam]
1932-10-20T10:19:32.000Z
2022c
</code></pre>
<p><strong>Edit</strong>: Also an issue in JDK 17 starting from 17.0.5:</p>
<p>Temurin 17.0.4:</p>
<pre><code>1932-10-20T10:19:32+00:19:32[Europe/Amsterdam]
1932-10-20T10:19:32.000+00:19
2022a
</code></pre>
<p>Temurin 17.0.5:</p>
<pre><code>1932-10-20T10:19:32Z[Europe/Amsterdam]
1932-10-20T10:19:32.000Z
2022c
</code></pre>
",
tags:"<java><java-11><timezone-offset><tzdata>",
score:18,
creationDate:2023-02-06 09:48:55,
creationDate:2023-02-06 12:31:04,
score:20,
acceptedResponderReputation:1479,
acceptedResponder:1641860,
QuestionerReputation:183,
Questioner:21156710}
{title:"Data is not being updated (always getting the same result) after the project is deployed",
id:"https://stackoverflow.com/questions/76204353",
body:"<p>I created an api endpoint in my Next.js <code>v13.2</code> application that fetches data from a database.</p>
<pre><code>app/api/someData
</code></pre>
<p>This was working well until I deployed it on Vercel. I think the problem is that the route is being cached and, as a result, returns the same response every time. How do I stop this from occurring?</p>
<p>I am using the new <code>app</code> directory in Next.js that uses <a href=""https://nextjs.org/docs/app/building-your-application/routing/router-handlers"" rel=""noreferrer"">Route Handlers</a>.</p>
<p>Any help would be appreciated.</p>
",
tags:"<javascript><reactjs><caching><next.js><vercel>",
score:9,
creationDate:2023-05-08 21:06:20,
creationDate:2023-05-08 21:56:24,
score:20,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:665,
Questioner:12619115}
{title:"Tailwind 3.3.2 - module is not defined",
id:"https://stackoverflow.com/questions/76569879",
body:"<p>I am stuck on a tutorial which is incorporating Tailwind, which in this case is tailwind 3.3.2.</p>
<p>Per the tutorial, I am supposed to open a file called tailwind.config.js and paste the below code from <a href=""https://tailwindcss.com/docs/installation"" rel=""noreferrer"">https://tailwindcss.com/docs/installation</a>:</p>
<pre><code>/** @type {import('tailwindcss').Config} */
module.exports = {
  content: [&quot;./src/**/*.{html,js}&quot;],
  theme: {
    extend: {},
  },
  plugins: [],
}
</code></pre>
<p>I immediately get the red squiggly line under &quot;module&quot;, with an error that reads as follows:</p>
<p><a href=""https://i.sstatic.net/vOV8d.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/vOV8d.png"" alt=""enter image description here"" /></a></p>
<p>What did I do wrong? The tutorial did not encounter this error.</p>
",
tags:"<javascript><tailwind-css><es6-modules><commonjs>",
score:11,
creationDate:2023-06-28 03:37:32,
creationDate:2023-06-28 07:09:17,
score:20,
acceptedResponderReputation:23518,
acceptedResponder:19655631,
QuestionerReputation:3065,
Questioner:4262571}
{title:"How do we do ""named slots"" in in Svelte 5?",
id:"https://stackoverflow.com/questions/78664060",
body:"<h1>Svelte 5 Slots are Confusing</h1>
<p>Now, with Svelte 5 at pre-release, I feel I can express some confusion about slots in Svelte 5.  In Svelte 4, slot and names slots where done in the following way:</p>
<h3><code>ContactCard.svelte</code></h3>
<pre class=""lang-js prettyprint-override""><code>&lt;article class=&quot;contact-card&quot;&gt;
    &lt;h2&gt;
        &lt;slot name=&quot;name&quot;&gt;
            &lt;span class=&quot;missing&quot;&gt;Unknown name&lt;/span&gt;
        &lt;/slot&gt;
    &lt;/h2&gt;

    &lt;div class=&quot;address&quot;&gt;
        &lt;slot name=&quot;address&quot;&gt;
            &lt;span class=&quot;missing&quot;&gt;Unknown address&lt;/span&gt;
        &lt;/slot&gt;
    &lt;/div&gt;

    &lt;div class=&quot;email&quot;&gt;
        &lt;slot name=&quot;email&quot;&gt;
            &lt;span class=&quot;missing&quot;&gt;Unknown email&lt;/span&gt;
        &lt;/slot&gt;
    &lt;/div&gt;
&lt;/article&gt;

&lt;style&gt;...&lt;/style&gt;
</code></pre>
<h3><code>+page.svelte</code></h3>
<pre class=""lang-js prettyprint-override""><code>&lt;script&gt;
    import ContactCard from './ContactCard.svelte';
&lt;/script&gt;

&lt;ContactCard&gt;
    &lt;span slot=&quot;name&quot;&gt; P. Sherman &lt;/span&gt;

    &lt;span slot=&quot;address&quot;&gt;
        42 Wallaby Way&lt;br /&gt;
        Sydney
    &lt;/span&gt;
&lt;/ContactCard&gt;
</code></pre>
<p>Pretty easy and straight forward in my humble opinion.</p>
<h2>Svelte 5 <strong>Single Slot</strong> example</h2>
<h3><code>Component.svelte</code></h3>
<pre class=""lang-js prettyprint-override""><code>&lt;script&gt;
  let { children } = $props();
&lt;/script&gt;

&lt;div&gt;
  {@render children()}
&lt;/div&gt;
</code></pre>
<h3><code>+page.svelte</code></h3>
<pre class=""lang-js prettyprint-override""><code>&lt;script&gt;
  import { Component } from '$lib';
&lt;/script&gt;

&lt;Component&gt;
  ...content...
&lt;/Component&gt;
</code></pre>
<p>Also easy...</p>
<h2>My Question...</h2>
<p>How do we do &quot;named slots&quot; in this new paradigm</p>
",
tags:"<javascript><signals><svelte><sveltekit><svelte-5>",
score:10,
creationDate:2024-06-24 18:22:05,
creationDate:2024-06-24 20:04:02,
score:20,
acceptedResponderReputation:184296,
acceptedResponder:546730,
QuestionerReputation:1417,
Questioner:857030}
{title:"How to prevent date conversion to local time zone with DayJS",
id:"https://stackoverflow.com/questions/75324638",
body:"<p>I have a date string <code>const someDate = 2023-02-13T09:00:00.000-05:00</code></p>
<p>The problem is when I'm formatting it via DayJS.</p>
<p><code>dayjs(someDate).format('h:mm A')</code></p>
<p>It returns me string according to my local time zone, when I need to keep like I received.</p>
<p>Any way to disable converting time to local timezone in DayJS?</p>
",
tags:"<javascript><date><time><dayjs>",
score:11,
creationDate:2023-02-02 14:31:14,
creationDate:2023-02-02 14:39:47,
score:20,
acceptedResponderReputation:2368,
acceptedResponder:15113491,
QuestionerReputation:728,
Questioner:16633314}
{title:"Execution failed for task ':path_provider_android:compileDebugJavaWithJavac'",
id:"https://stackoverflow.com/questions/79160929",
body:"<p>I am having this problem with my android studio, so anytime I ran the actual default flutter project in android studio it runs. as soon as I add packages in the pubspec.yaml I get errors. I am trying to run a project, this project has been running so well for sometime now. all of a sudden when I come back to the project and run it I get this weird error. I asked ChatGPT and it said it was a jdk incompatibility problem. this is the error.</p>
<pre><code>
    Launching lib\main.dart on AOSP on IA Emulator in debug mode...
    Running Gradle task 'assembleDebug'...
    
    FAILURE: Build failed with an exception.
    
    * What went wrong:
    Execution failed for task ':path_provider_android:compileDebugJavaWithJavac'.
    &gt; Could not resolve all files for configuration ':path_provider_android:androidJdkImage'.
       &gt; Failed to transform core-for-system-modules.jar to match attributes {artifactType=_internal_android_jdk_image, org.gradle.libraryelements=jar, org.gradle.usage=java-runtime}.
          &gt; Execution failed for JdkImageTransform: C:\Users\Mr. Wolfe\AppData\Local\Android\sdk\platforms\android-34\core-for-system-modules.jar.
             &gt; Error while executing process C:\Program Files\Android\Android Studio\jbr\bin\jlink.exe with arguments {--module-path C:\Users\Mr. Wolfe\.gradle\caches\transforms-3\4a46fc89ed5f9adfe3afebf74eb8bfeb\transformed\output\temp\jmod --add-modules java.base --output C:\Users\Mr. Wolfe\.gradle\caches\transforms-3\4a46fc89ed5f9adfe3afebf74eb8bfeb\transformed\output\jdkImage --disable-plugin system-modules}
    
    * Try:
    &gt; Run with --stacktrace option to get the stack trace.
    &gt; Run with --info or --debug option to get more log output.
    &gt; Run with --scan to get full insights.
    &gt; Get more help at https://help.gradle.org.
    
    BUILD FAILED in 9s
    Error: Gradle task assembleDebug failed with exit code 1

</code></pre>
<p>this is what my app/build.gradile looks like;</p>
<pre><code>
    plugins {
        id &quot;com.android.application&quot;
        id &quot;kotlin-android&quot;
        // The Flutter Gradle Plugin must be applied after the Android and Kotlin Gradle plugins.
        id &quot;dev.flutter.flutter-gradle-plugin&quot;
    }
    
    android {
        namespace = &quot;com.example.new_flutter&quot;
        compileSdk = flutter.compileSdkVersion
        ndkVersion = flutter.ndkVersion
    
        compileOptions {
            sourceCompatibility = JavaVersion.VERSION_1_8
            targetCompatibility = JavaVersion.VERSION_1_8
        }
    
        kotlinOptions {
            jvmTarget = JavaVersion.VERSION_1_8
        }
    
        defaultConfig {
            // TODO: Specify your own unique Application ID (https://developer.android.com/studio/build/application-id.html).
            applicationId = &quot;com.example.new_flutter&quot;
            // You can update the following values to match your application needs.
            // For more information, see: https://flutter.dev/to/review-gradle-config.
            minSdk = flutter.minSdkVersion
            targetSdk = flutter.targetSdkVersion
    //        multiDexEnabled true
            versionCode = flutter.versionCode
            versionName = flutter.versionName
        }
    
        buildTypes {
            release {
                // TODO: Add your own signing config for the release build.
                // Signing with the debug keys for now, so `flutter run --release` works.
                signingConfig = signingConfigs.debug
            }
        }
    }
    
    flutter {
        source = &quot;../..&quot;
    }

</code></pre>
",
tags:"<java><flutter><dart><android-studio><gradle>",
score:6,
creationDate:2024-11-05 22:58:54,
creationDate:2024-11-11 06:18:22,
score:21,
acceptedResponderReputation:326,
acceptedResponder:14260911,
QuestionerReputation:792,
Questioner:13232607}
{title:"ts-node and ESM: unknown file extension '.ts'",
id:"https://stackoverflow.com/questions/76725253",
body:"<p>I'm having enormous trouble constructing a project using ts-node and ESM.  There are several other questions on this topic, but I've tried solutions from all of them and gotten nowhere.  It is very difficult to tell what information is out of date, with most answers involving adding additional options into the config which don't seem to make any difference in my case.</p>
<p>Here's the demo setup:</p>
<p>Node v20.4</p>
<p>Package.json has type: &quot;module&quot;</p>
<p>As the start script I'm currently using <code>npx ts-node-esm src/index.ts</code></p>
<p>ts-node and Typescript are both installed locally to the project</p>
<p>tsconfig.json as follows:</p>
<pre><code>{
    &quot;compilerOptions&quot;: {
      &quot;target&quot;: &quot;ESNext&quot;,
      &quot;baseUrl&quot;: &quot;.&quot;,
      &quot;esModuleInterop&quot;: true,
      &quot;moduleResolution&quot;: &quot;NodeNext&quot;,
      &quot;module&quot;: &quot;ESNext&quot;,
    },
    &quot;types&quot;: [&quot;node&quot;]
}
</code></pre>
<p>And our demo files - src/index.ts:</p>
<pre><code>import { sayHi } from &quot;src/helpers.js&quot;;
sayHi();
</code></pre>
<p>And src/helpers.ts:</p>
<pre><code>export function sayHi() { console.log('hi!') }
</code></pre>
<p>So far the error I am currently facing upon run is <code>Unknown file extension &quot;.ts&quot; for src\index.ts</code></p>
<p>(I have learned that 'tsx' is likely to just work, but if there is misconfiguration on my part going on here, I would like to understand what is going wrong.)</p>
<p>Aside from the actual problem at hand, I also wouldn't mind some broader advice.  Is this actually sensible?  Everything I have read suggests new projects should be using ESM as there is no particular advantage to CommonJs (providing you can make ESM work...).  Meanwhile the functionality of ts-node (or similar) seems pretty important for its role in achieving a quick development feedback loop.  Given these two facts, I'm surprised I'm having so much trouble setting this up.</p>
",
tags:"<javascript><node.js><typescript><ts-node>",
score:7,
creationDate:2023-07-19 21:17:23,
creationDate:2024-02-14 08:55:08,
score:21,
acceptedResponderReputation:54782,
acceptedResponder:451634,
QuestionerReputation:669,
Questioner:3896248}
{title:"Save UUID as String in Database with JPA/Hibernate",
id:"https://stackoverflow.com/questions/76212506",
body:"<p>normally I store my UUID´s to the database as String. In Spring Boot 2.x I used to decoreate the UUID with <code>@Type(type = &quot;org.hibernate.type.UUIDCharType&quot;)</code>. Somehow in Spring Boot 3.x it doesnt work anymore. It tells me <code>Cannot resolve method 'type'</code>.</p>
<p>I know there were some changes to jakarta but i dont know if this is a problem to me.</p>
<p>My Entity:</p>
<pre><code>import jakarta.persistence.*;
import lombok.AllArgsConstructor;
import lombok.Builder;
import lombok.Data;
import lombok.NoArgsConstructor;
import org.hibernate.annotations.Type;

import java.util.Set;
import java.util.UUID;

@Data
@Entity
@Table(name = &quot;werkstatt&quot;)
@AllArgsConstructor
@NoArgsConstructor
@Builder
public class WerkstattEntity {

    @Id
    @Column(columnDefinition = &quot;VARCHAR(255)&quot;)
    @Type(type = &quot;org.hibernate.type.UUIDCharType&quot;)
    private UUID id;
}
</code></pre>
<p>My gradle dep:</p>
<pre><code>dependencies {
    implementation 'org.springframework.boot:spring-boot-starter-actuator'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'
    implementation 'org.springframework.boot:spring-boot-starter-security'
    implementation 'org.springframework.boot:spring-boot-starter-web'
    implementation 'org.springframework.boot:spring-boot-starter-webflux'
    compileOnly 'org.projectlombok:lombok'
    developmentOnly 'org.springframework.boot:spring-boot-devtools'
    runtimeOnly 'org.mariadb.jdbc:mariadb-java-client'
    annotationProcessor 'org.projectlombok:lombok'
    testImplementation 'org.springframework.boot:spring-boot-starter-test'
    testImplementation 'io.projectreactor:reactor-test'
    testImplementation 'org.springframework.security:spring-security-test'
    

    // https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt-api
    implementation 'io.jsonwebtoken:jjwt-api:0.11.5'

    // https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt-impl
    runtimeOnly 'io.jsonwebtoken:jjwt-impl:0.11.5'

    // https://mvnrepository.com/artifact/io.jsonwebtoken/jjwt-jackson
    runtimeOnly 'io.jsonwebtoken:jjwt-jackson:0.11.5'

    implementation 'org.mapstruct:mapstruct:1.5.5.Final'

    annotationProcessor 'org.mapstruct:mapstruct-processor:1.5.5.Final'

}
</code></pre>
",
tags:"<java><database><spring-boot><hibernate><jpa>",
score:6,
creationDate:2023-05-09 18:41:20,
creationDate:2023-05-09 19:37:13,
score:21,
acceptedResponderReputation:4253,
acceptedResponder:2889760,
QuestionerReputation:105,
Questioner:8236968}
{title:"Fatal Exception: java.lang.SecurityException One of RECEIVER_EXPORTED or RECEIVER_NOT_EXPORTED (com.google.android.play:core",
id:"https://stackoverflow.com/questions/77371855",
body:"<p>I am getting a crash with my android apps. Which shows security exception with the targetSDKVersion 34.</p>
<p>How to resolve this. The error is showing as below (playcore library) <strong>com.google.android.play.core.listener.zzc.zzb (com.google.android.play:core@@1.10.3:3)</strong></p>
<p>Note: I am using the LocalBroadcastManager in my app. Is this issue raised because of this?</p>
<p>Code:</p>
<pre><code> LocalBroadcastManager.getInstance(this).registerReceiver(mMessageReceiver, filter)
</code></pre>
<p>Error:</p>
<pre><code>Fatal Exception: java.lang.SecurityException
pck: One of RECEIVER_EXPORTED or RECEIVER_NOT_EXPORTED should be specified when a receiver isn't being registered exclusively for system broadcasts
android.os.Parcel.createExceptionOrNull (Parcel.java:3057)

android.content.ContextWrapper.registerReceiver (ContextWrapper.java:755)
com.google.android.play.core.listener.zzc.zzb (com.google.android.play:core@@1.10.3:3)
com.google.android.play.core.listener.zzc.zzf (com.google.android.play:core@@1.10.3:4)
com.google.android.play.core.appupdate.zzf.registerListener (com.google.android.play:core@@1.10.3:1)
fragments.Summaryfragment.onCreate (Summaryfragment.java:144)
androidx.fragment.app.Fragment.performCreate (Fragment.java:2949)

androidx.appcompat.app.AppCompatActivity.onStart (AppCompatActivity.java:246)
ActionBarFragmentActivity.onStart (ActionBarFragmentActivity.java:358)
android.app.Instrumentation.callActivityOnStart (Instrumentation.java:1582)

com.android.internal.os.ZygoteInit.main (ZygoteInit.java:971)
</code></pre>
",
tags:"<java><android><localbroadcastmanager>",
score:19,
creationDate:2023-10-27 06:10:02,
creationDate:2023-10-27 06:36:12,
score:21,
acceptedResponderReputation:1970,
acceptedResponder:14037302,
QuestionerReputation:2644,
Questioner:8936551}
{title:"Getting ReferenceError: localStorage is not defined even after adding ""use client"",
id:"https://stackoverflow.com/questions/76300847",
body:"<p>I have a simple <code>app/components/organisms/Cookies.tsx</code> modal window component that I import into <code>app/page.tsx</code>. I have added the <code>'use client'</code> directive at the top of the component, but for some reason, I keep getting:</p>
<blockquote>
<p>ReferenceError: localStorage is not defined</p>
</blockquote>
<p><a href=""https://i.sstatic.net/9rWQi.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/9rWQi.png"" alt=""enter image description here"" /></a></p>
<p>Code of my <code>Cookies.tsx</code>:</p>
<pre><code>'use client';
import { useState } from 'react';

const Cookies = () =&gt; {
  const localStorageCookies = localStorage.getItem('cookies-accepted');
  const [cookiesAccepted, setCookiesStatus] = useState&lt;boolean&gt;(!!localStorageCookies);

  const acceptCookies = () =&gt; {
    localStorage.setItem('cookies-accepted', 'true');
    setCookiesStatus(true);
  }
  
  return (
    &lt;&gt;
      {!cookiesAccepted &amp;&amp; (
        &lt;section className=&quot;fixed max-w-md p-4 mx-auto bg-white border border-gray-200 left-12 bottom-16  rounded-2xl z-20&quot;&gt;
          &lt;h2 className=&quot;font-semibold text-gray-800 &quot;&gt;🍪 Cookie Notice&lt;/h2&gt;

          &lt;p className=&quot;mt-4 text-sm text-gray-600&quot;&gt;
            We use cookies to ensure that we give you the best experience on our
            website.{' '}
            &lt;a href=&quot;#&quot; className=&quot;text-blue-500 hover:underline&quot;&gt;
              Read cookies policies
            &lt;/a&gt;
            .{' '}
          &lt;/p&gt;

          &lt;div className=&quot;flex items-center justify-between mt-4 gap-x-4 shrink-0&quot;&gt;
            &lt;button className=&quot;text-xs text-gray-800 underline transition-colors duration-300 hover:text-gray-600 focus:outline-none&quot;&gt;
              Manage your preferences
            &lt;/button&gt;

            &lt;button
              className=&quot; text-xs bg-gray-900 font-medium rounded-lg hover:bg-gray-700 text-white px-4 py-2.5 duration-300 transition-colors focus:outline-none&quot;
              onClick={acceptCookies}
            &gt;
              Accept
            &lt;/button&gt;
          &lt;/div&gt;
        &lt;/section&gt;
      )}
    &lt;/&gt;
  );
};

export default Cookies;
</code></pre>
<p>What am I doing wrong? I tried to put <code>Cookies.tsx</code> outside of <code>app</code> folder but it didn't help.</p>
<p>I'm using version Next.js version <code>13.4.1</code>.</p>
",
tags:"<javascript><reactjs><next.js><server-side-rendering>",
score:16,
creationDate:2023-05-21 16:18:59,
creationDate:2023-05-21 20:18:30,
score:21,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:273,
Questioner:17287475}
{title:"How to send a JSON response from an API route in Next.js?",
id:"https://stackoverflow.com/questions/76743001",
body:"<p>I am developing a tiny REST API for a Next.js app. If I place my <code>route.ts</code> in rootDir -&gt; app -&gt; api -&gt; hello -&gt; route.ts that looks like this, then it works:</p>
<pre class=""lang-js prettyprint-override""><code>//route.ts
export async function GET(request: Request) {
  return new Response('Hello, Next.js!')
}
</code></pre>
<p>I can make a successful GET request via Postman to localhost:3000/api/hello.</p>
<p>I change the code now to the following:</p>
<pre class=""lang-js prettyprint-override""><code>import { NextApiRequest, NextApiResponse } from &quot;next&quot;;

export async function GET(request: NextApiRequest, response: NextApiResponse) {
  return response.json({ message: &quot;Hello, Next.js!&quot; });
}
</code></pre>
<p>Now it fails and I get the error message:</p>
<pre><code>error TypeError: response.json is not a function
</code></pre>
<p>The issue is known but the upgrade to the latest lts or the latest node version does not fix my problem: <a href=""https://github.com/vercel/next.js/issues/48524"" rel=""noreferrer"">https://github.com/vercel/next.js/issues/48524</a>.</p>
",
tags:"<javascript><node.js><rest><next.js>",
score:11,
creationDate:2023-07-22 08:51:44,
creationDate:2023-07-22 09:53:43,
score:21,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:363,
Questioner:16475217}
{title:"Read URL dynamic parameter/slug with Next.js in the app folder",
id:"https://stackoverflow.com/questions/76110930",
body:"<p>I have a problem getting the parameter inside Dynamic Routing. I keep getting errors when reading:</p>
<blockquote>
<p>TypeError: Cannot destructure property 'themenID' of 'router.query' as it is undefined.</p>
</blockquote>
<p>In addition, I cannot use <code>next/router</code> but have to integrate the router from <code>next/navigation</code>. But this one does not have the query property. I use Next.js version 13</p>
<p>The path is called like this: <code>http://localhost:3000/MainThema/2</code>.</p>
<p>app/MainThema/[themenID]/page.js:</p>
<pre class=""lang-js prettyprint-override""><code>&quot;use client&quot;;
import { useRouter } from &quot;next/navigation&quot;;
import React from &quot;react&quot;;

export default function MainThema() {
  const router = useRouter();
  console.log(router);

  const { themenID } = router.query;

  return &lt;div&gt;MainThema &lt;/div&gt;;
}
</code></pre>
",
tags:"<javascript><reactjs><next.js>",
score:7,
creationDate:2023-04-26 12:48:06,
creationDate:2023-04-26 16:52:06,
score:21,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:1502,
Questioner:6729603}
{title:"Is it possible to create a ThreadLocal for the carrier thread of a Java virtual thread?",
id:"https://stackoverflow.com/questions/75047540",
body:"<p><a href=""https://openjdk.org/jeps/425"" rel=""noreferrer"">JEP-425: Virtual Threads</a> states that a new virtual thread &quot;should be created for every application task&quot; and makes twice a reference to the possibility of having &quot;millions&quot; of virtual threads running in the JVM.</p>
<p>The same JEP implies that each virtual thread will have access to its own thread-local value:</p>
<blockquote>
<p>Virtual threads support thread-local variables [...] just like platform threads, so they can run existing code that uses thread locals.</p>
</blockquote>
<p>Thread locals are many times used for the purpose of caching an object that is not thread-safe and expensive to create. The JEP warns:</p>
<blockquote>
<p>However, because virtual threads can be very numerous, use thread locals after careful consideration.</p>
</blockquote>
<p>Numerous indeed! Especially given how virtual threads are not pooled (or at least <a href=""https://openjdk.org/jeps/425#Do-not-pool-virtual-threads"" rel=""noreferrer"">shouldn't be</a>). As representative of a short-lived task, using thread locals in a virtual thread for the purpose of caching an expensive object seems to be borderline void of meaning. Unless! We can from a virtual thread create and access thread locals bound to its carrier thread 🤔</p>
<p>For clarification, I would like to go from something like this (which would have been perfectly acceptable when using only native threads capped to the size of a pool, but this is clearly no longer a very effective caching mechanism when running millions of virtual threads continuously re-created:</p>
<pre><code>static final ThreadLocal&lt;DateFormat&gt; CACHED = ThreadLocal.withInitial(DateFormat::getInstance);
</code></pre>
<p>To this (alas this class is not part of the public API):</p>
<pre><code>static final ThreadLocal&lt;DateFormat&gt; CACHED = new jdk.internal.misc.CarrierThreadLocal();
// CACHED.set(...)
</code></pre>
<p>Before we even get there. One must ask, is this a safe practice?</p>
<p>Well, as far as I have understood virtual threads correctly, they are merely logical stages executed on a platform thread (aka. the &quot;carrier thread&quot;) with the ability to unmount instead of being blocked waiting. So I am assuming - please correct me if I am wrong - that 1) the virtual thread will never be interleaved by another virtual thread on the same carrier thread or rescheduled on another carrier thread <em>unless the code would have blocked otherwise</em> and therefore, if 2) the operation we invoke on the cached object never blocks, then the task/virtual thread will simply run from start to finish on the same carrier and so yes, it would be safe to cache the object on a platform thread-local.</p>
<p>With the risk of answering my own question, JEP-425 indicates this is not possible:</p>
<blockquote>
<p>Thread-local variables of the carrier are unavailable to the virtual thread, and vice-versa.</p>
</blockquote>
<p>I could not find a public API to get the carrier thread or allocate thread locals explicitly on a platform thread [from a virtual thread], but that's not to say my humble research is definitive. Maybe there is a way?</p>
<p>Then I read <a href=""https://openjdk.org/jeps/429"" rel=""noreferrer"">JEP-429: Scoped Values</a> which at first glance seems to be a stab by the Java Gods to get rid of the <code>ThreadLocal</code> altogether, or at least provide an alternative for virtual threads. In fact, the JEP uses verbiage such as &quot;migration to scoped values&quot; and says they are &quot;preferred to thread-local variables, especially when using large numbers of virtual threads&quot;.</p>
<p>For all the use cases discussed in the JEP, I can only agree. But towards the bottom of this document, we also find this:</p>
<blockquote>
<p>There are a few scenarios that favor thread-local variables. An example is caching objects that are expensive to create and use, such as instances of java.text.DateFormat. Notoriously, a DateFormat object is mutable, so it cannot be shared between threads without synchronization. Giving each thread its own DateFormat object, via a thread-local variable that persists for the lifetime of the thread, is often a practical approach.</p>
</blockquote>
<p>In light of what was discussed earlier, using a thread-local may be &quot;practical&quot; but not very ideal. In fact, JEP-429 itself actually started off with a very telling remark: &quot;if each of a million virtual threads has mutable thread-local variables, the memory footprint may be significant&quot;.</p>
<p>To summarize:</p>
<p>Have you found a way to allocate thread locals on a carrier thread from the virtual thread?</p>
<p>If not, is it safe to say that for applications using virtual threads, the practice of caching objects in a thread-local is dead and one will have to implement/use a different approach such as a concurrent cache/map/pool/whatever?</p>
",
tags:"<java><caching><thread-local><virtual-threads>",
score:19,
creationDate:2023-01-08 11:56:16,
creationDate:2023-03-17 12:48:47,
score:21,
acceptedResponderReputation:298103,
acceptedResponder:2711488,
QuestionerReputation:19563,
Questioner:1268003}
{title:"React-beautiful-dnd - warning : defaultProps will be removed",
id:"https://stackoverflow.com/questions/75124430",
body:"<p>I don't understand this warning in my console. Can someone tell me if it's library's problem or if it's an error in my side ?
<a href=""https://i.sstatic.net/Mfvr1.png"" rel=""noreferrer"">Warning image</a></p>
<p>Here is my code which trigger the warning</p>
<p>I'm using the version 13.1.1</p>
<pre class=""lang-js prettyprint-override""><code>&lt;DragDropContext onDragEnd={handleDrop}&gt;
   &lt;Droppable droppableId=&quot;list-container&quot; &gt;
      {(providedA: any) =&gt; (
         &lt;div {...providedA.droppableProps} ref={providedA.innerRef}&gt;
            {steps.map((step, index) =&gt; {
               return &lt;Draggable  key={step.id} draggableId={step.id.toString()} index={index}&gt;
                  {(provided: any) =&gt; (
                     &lt;div ref={provided.innerRef} {...provided.dragHandleProps} {...provided.draggableProps}&gt;
                        &lt;div&gt;{step.title}&lt;/div&gt;
                     &lt;/div&gt;
                   )}
                &lt;/Draggable&gt;
              })}
           {providedA.placeholder}
         &lt;/div&gt;
      )}
   &lt;/Droppable&gt;
&lt;/DragDropContext&gt;
</code></pre>
<p>Thanks</p>
<p>I tried to remove the code to find that is the Droppable element which cause the issue. I don't find on the github of React-beautiful-dnd any question on this.</p>
",
tags:"<javascript><reactjs><warnings>",
score:20,
creationDate:2023-01-15 10:39:45,
creationDate:2023-01-15 10:53:59,
score:21,
acceptedResponderReputation:84902,
acceptedResponder:3794812,
QuestionerReputation:203,
Questioner:21011946}
{title:"Mockito is currently self-attaching to enable the inline-mock-maker. This will no longer work in future releases of the JDK",
id:"https://stackoverflow.com/questions/79278490",
body:"<p>I get this warning while testing in Spring Boot:</p>
<pre><code>Mockito is currently self-attaching to enable the inline-mock-maker. This will no longer work in future releases of the JDK. Please add Mockito as an agent to your build what is described in Mockito's documentation: https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#0.3
WARNING: A Java agent has been loaded dynamically (/Users/lcnicolau/.m2/repository/net/bytebuddy/byte-buddy-agent/1.15.10/byte-buddy-agent-1.15.10.jar)
WARNING: If a serviceability tool is in use, please run with -XX:+EnableDynamicAgentLoading to hide this warning
WARNING: If a serviceability tool is not in use, please run with -Djdk.instrument.traceUsage for more information
WARNING: Dynamic loading of agents will be disallowed by default in a future release
OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended
</code></pre>
<p>Following the link at the end of the first line, it will ask you to <a href=""https://javadoc.io/doc/org.mockito/mockito-core/latest/org/mockito/Mockito.html#0.3"" rel=""noreferrer"">add Mockito as an agent to your build</a>:</p>
<pre><code>&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-dependency-plugin&lt;/artifactId&gt;
    &lt;executions&gt;
        &lt;execution&gt;
            &lt;goals&gt;
                &lt;goal&gt;properties&lt;/goal&gt;
            &lt;/goals&gt;
        &lt;/execution&gt;
    &lt;/executions&gt;
&lt;/plugin&gt;
&lt;plugin&gt;
    &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;
    &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;
    &lt;configuration&gt;
        &lt;argLine&gt;@{argLine} -javaagent:${org.mockito:mockito-core:jar}&lt;/argLine&gt;
    &lt;/configuration&gt;
&lt;/plugin&gt;
</code></pre>
<p>However, the warning is still displayed.</p>
<p>Using:</p>
<ul>
<li>Spring Boot 3.4.0</li>
<li>Apache Maven 3.9.9</li>
<li>OpenJDK 21.0.4</li>
</ul>
",
tags:"<java><spring-boot><maven><junit><mockito>",
score:14,
creationDate:2024-12-13 13:33:42,
creationDate:2024-12-24 19:34:32,
score:22,
acceptedResponderReputation:3868,
acceptedResponder:4071001,
QuestionerReputation:3868,
Questioner:4071001}
{title:"Google Secrets in Firebase Function V2 Document Trigger",
id:"https://stackoverflow.com/questions/76360867",
body:"<p>I have a question about Firebase Functions V2, with regards to how to include Google Secrets Manager into the document trigger function.</p>
<p>I know how to do it with OnRequest, the below works fine.</p>
<pre><code>exports.myWebhook = onRequest({secrets: [MY_WEBHOOK_SECRET, MY_TEST_SECRET_KEY]}, async (req, res) =&gt; {
    const safe = STRIPE_TEST_SECRET_KEY.value();
}
</code></pre>
<p>However I can't seem to get it to work with onDocumentCreated...</p>
<pre><code>exports.myUpdate = onDocumentCreated(&quot;/orders/{documentId}&quot;, async (event ) =&gt; {
 const myAPIKey = MY_OTHER_API.value()
}
</code></pre>
<p>Any time I place {secrets: [MY_OTHER_API]} anywhere in this function, it creates an error. If I exclude it then the API key value is just blank.</p>
<p>Any help would be appreciated. Thanks.</p>
<p>Tried placing {secrets: [MY_OTHER_API_KEY]} into the function to allow it access to the Google Secret value.</p>
",
tags:"<javascript><firebase><google-cloud-firestore><google-cloud-functions>",
score:9,
creationDate:2023-05-29 23:50:22,
creationDate:2023-05-30 00:50:09,
score:22,
acceptedResponderReputation:26171,
acceptedResponder:3068190,
QuestionerReputation:125,
Questioner:2920832}
{title:"NextJS 13.1.4 breaks when adding SCSS support ""Cannot find module next/dist/compiled/sass-loader/fibers.js"",
id:"https://stackoverflow.com/questions/75195099",
body:"<p>With a fresh install of NextJS I wanted to add SCSS support. The <a href=""https://nextjs.org/docs/basic-features/built-in-css-support#sass-support"" rel=""noreferrer"">documentation</a> is very clear about it how to do this. When I install as described and add an import of scss as follows:</p>
<pre><code>import &quot;@/styles/styles.scss&quot;;
import type { AppProps } from &quot;next/app&quot;;

export default function App({ Component, pageProps }: AppProps) {
  return &lt;Component {...pageProps} /&gt;;
}
</code></pre>
<p>Then run <code>npm run dev</code>. In the browser my page keeps loading. When I exit the script and remove the line <code>import &quot;@/styles/styles.scss&quot;;</code> and then run the dev command the page will show up in my browser, but when I enable again the scss import again I get a compile error.</p>
<pre><code>error - unhandledRejection: Error: Cannot find module '/...../node_modules/next/dist/compiled/sass-loader/fibers.js'
    at webpackEmptyContext (/...../node_modules/next/dist/compiled/sass-loader/cjs.js:1:11235)
    at getSassOptions (/.....//node_modules/next/dist/compiled/sass-loader/cjs.js:1:5586)
    at Object.loader (/.....//node_modules/next/dist/compiled/sass-loader/cjs.js:1:2683)
    at LOADER_EXECUTION ......
 {
  code: 'MODULE_NOT_FOUND
}
</code></pre>
",
tags:"<javascript><next.js><sass>",
score:12,
creationDate:2023-01-21 17:05:45,
creationDate:2023-01-22 12:45:35,
score:22,
acceptedResponderReputation:4698,
acceptedResponder:388073,
QuestionerReputation:3971,
Questioner:55573}
{title:"How to tell Vite to exclude a subset of files in a directory from build?",
id:"https://stackoverflow.com/questions/75412767",
body:"<p>I created a new Vue app using <code>npm create vue</code>. During runtime this app fetches a configuration and reads a string from it. This string represents the name of a component to render inside the app. Those dynamic components live inside a &quot;pluggable&quot; directory</p>
<pre><code>.
└── src
    ├── App.vue
    └── pluggables
        ├── ThisFoo.vue
        └── ThatBar.vue
</code></pre>
<p>So basically what the App.vue file does is</p>
<pre><code>&lt;script setup lang=&quot;ts&quot;&gt;
import { onMounted, shallowRef, defineAsyncComponent } from &quot;vue&quot;;

const pluggableComponent = shallowRef();

onMounted(() =&gt; {
  // fetch configuration
  const componentName = &quot;ThisFoo&quot;; // extract from configuration

  pluggableComponent.value = defineAsyncComponent(() =&gt; import(`./pluggables/${componentName}.vue`));
});
&lt;/script&gt;

&lt;template&gt;
  &lt;div&gt;Pluggable below:&lt;/div&gt;
  &lt;component :is=&quot;pluggableComponent&quot; /&gt;
&lt;/template&gt;
</code></pre>
<p>I have access to the configuration file during build time and know which components I need during runtime and which ones to consider as &quot;dead code&quot; based on this configuration. Is there a way to tell Vite to exclude the unused components from the build?</p>
<p>E.g. exclude the whole pluggables directory but include the required components from the pluggables directory</p>
<blockquote>
<p>vite build --exclude ./src/pluggables/** --include ./src/pluggables/ThisFoo.vue</p>
</blockquote>
<p>or by creating a custom Vite build function I can call during CI/CD and pass in an array of component names.</p>
",
tags:"<javascript><vue.js><vite><rollup>",
score:18,
creationDate:2023-02-10 15:01:12,
creationDate:2023-02-17 04:19:39,
score:22,
acceptedResponderReputation:8726,
acceptedResponder:4254681,
QuestionerReputation:893,
Questioner:19698303}
{title:"org.springframework.boot.loader.JarLauncher cannot be found, but org.springframework.boot.loader.launch.JarLauncher can",
id:"https://stackoverflow.com/questions/77279480",
body:"<p>Trying to deploy a <strong>Spring Boot 3.2</strong> app in a layered docker I basically followed <a href=""https://spring.io/blog/2020/01/27/creating-docker-images-with-spring-boot-2-3-0-m1"" rel=""noreferrer"">this blogpost</a> and specifically, my docker entrypoint was:</p>
<pre><code>ENTRYPOINT [&quot;java&quot;, &quot;org.springframework.boot.loader.JarLauncher&quot;]
</code></pre>
<p>Yet the docker doesn't start and display the usual</p>
<pre><code>Error: Could not find or load main class org.springframework.boot.loader.JarLauncher
Caused by: java.lang.ClassNotFoundException: org.springframework.boot.loader.JarLauncher
</code></pre>
<p>After some digging in the initial jar file, I found out that the JarLauncher class is actually under <code>org.springframework.boot.loader.launch.JarLauncher</code>.</p>
<p>and if I replace the entrypoint by this one:</p>
<pre><code>ENTRYPOINT [&quot;java&quot;, &quot;org.springframework.boot.loader.launch.JarLauncher&quot;]
</code></pre>
<p>The app actually starts.</p>
<p>Jumping back in the <a href=""https://docs.spring.io/spring-boot/docs/current/reference/html/executable-jar.html#appendix.executable-jar.launching.manifest"" rel=""noreferrer"">Spring Doc</a> the package should still be <code>org.springframework.boot.loader.JarLauncher</code> (according to the doc, I mean)</p>
<p>So... has the class JarLauncher been moved, and the documentation is outdated, or is it some mistake in my configuration?
Since I can't find any documentation about this change (witch seems to be fairly important)</p>
<p>Of course the usual <code>java -jar</code> command runs correctly since the manifest file is alright.</p>
<p>I double checked by starting a new project with a Spring Boot 2.7, and the JarLauncher class is indeed in the <code>org.springframework.boot.loader</code> package</p>
",
tags:"<java><spring><spring-boot>",
score:27,
creationDate:2023-10-12 09:44:23,
creationDate:2023-10-12 10:11:50,
score:22,
acceptedResponderReputation:124441,
acceptedResponder:2696260,
QuestionerReputation:848,
Questioner:2546702}
{title:"How to pass data from a layout to the children in the app folder of Next.js?",
id:"https://stackoverflow.com/questions/75238942",
body:"<p>A common use case I run across is having a button in a layout toggle something in the children. For example, you could have a notifications button in a persisted layout that opens a side pane in the main app.</p>
<p>Ideally, you would be able to pass an <code>isNotificationsPaneOpen</code> state down to the children and have them render the pane. However,<a href=""https://beta.nextjs.org/docs/routing/pages-and-layouts#layouts"" rel=""noreferrer"">the Next 13 beta docs</a> say this isn't possible:</p>
<blockquote>
<p>Passing data between a parent layout and its children is not possible. However, you can fetch the same data in a route more than once, and React will automatically dedupe the requests without affecting performance.</p>
</blockquote>
<p>Persisting this toggle state in the backend seems like a major overkill and feels unnatural. The backend shouldn't have to know about the frontend opening or closing a notifications panel.</p>
<p>It seems to me that this is a common enough use case that people will run into this issue often.</p>
<p>How should one generally think about this?</p>
<p><strong>Concrete example:</strong></p>
<pre><code>// in layout.tsx

export default function NavbarLayout({
  children, 
}: {
  children: React.ReactNode,
}) {
  const [isNotificationsPaneOpen, setIsNotificationsPaneOpen]= useState(false);
  return (
    &lt;div&gt;
      &lt;nav&gt;
        &lt;button onClick={()=&gt;setIsNotificationsPanelOpen((prevValue)=&gt;!prevValue)}&gt;Notifications&lt;/button&gt;
      &lt;/nav&gt;
      {/* How do I pass isNotificationsPaneOpen to children? */}
      {children}
    &lt;/div&gt;
  );
}
</code></pre>
<p>So that in the page:</p>
<pre><code>// in page.tsx
interface PageProps {
  isNotificationsPaneOpen: boolean;
}

function Page({isNotificationsPaneOpen}:PageProps):JSX.Element {
    // render something conditionally with isNotificationsPaneOpen
    ...
}

</code></pre>
<p><strong>Current solutions</strong></p>
<ol>
<li>Include the pane to toggle in the layout (best candidate IMO)</li>
</ol>
<p>If the component that depends on the layout's state remains the same across pages (like the notifications panel example), it makes sense to include it here. But other examples - like toggling light/dark mode in the layout - render different things on each page so this is not a general solution.</p>
<ol start=""2"">
<li>External storage like <code>localstorage</code> to pass data</li>
</ol>
<p>More of a hack but you could have the layout send data to an external data source (ideally within the browser) and then query that data source from the main app to determine if the panel should be open or not.</p>
",
tags:"<javascript><reactjs><next.js>",
score:20,
creationDate:2023-01-25 19:29:26,
creationDate:2023-01-25 20:59:20,
score:22,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:445,
Questioner:10296312}
{title:"Understanding parallelStream and collector order",
id:"https://stackoverflow.com/questions/78829360",
body:"<p>I'm trying to understand why there is a different when I change from <code>y.addAll(x)</code> to <code>x.addAll(y)</code> in code snippet below:</p>
<pre class=""lang-java prettyprint-override""><code>List&lt;Integer&gt; result = List.of(1, 2)
    .parallelStream() 
    .collect(
        ArrayList::new,
        (x, y) -&gt; x.add(y),
        (x, y) -&gt; y.addAll(x)
    );
System.out.println(result);
</code></pre>
<p>I know, when I use <code>parallelStream</code>, there is more than one thread run at a time.</p>
<p><code>collect</code> has three parameters; the first two parameters I understand. With the third parameter, I know x, y are substreams and they are <code>ArrayList</code>s, but I don't understand why the results are different in each case. I expected them to be the same.</p>
<ul>
<li><p><code>(x, y) -&gt; y.addAll(x) // output: [1]</code></p>
</li>
<li><p><code>(x, y) -&gt; x.addAll(y) // output: [1, 2]</code></p>
</li>
</ul>
",
tags:"<java><java-stream><java-11>",
score:16,
creationDate:2024-08-03 17:39:43,
creationDate:2024-08-03 17:52:03,
score:23,
acceptedResponderReputation:16338,
acceptedResponder:10871900,
QuestionerReputation:525,
Questioner:22963183}
{title:"Can't use latest Java Version (JDK 21) in IntelliJ IDEA",
id:"https://stackoverflow.com/questions/77141340",
body:"<p>I'm using macOS and I want to try Java 21 in IntelliJ IDEA. I believe I have done all the required steps to change Java version of a project / module. Nevertheless I still can't use new Java 21 Features, such as <a href=""https://openjdk.org/jeps/430"" rel=""nofollow noreferrer"">String Templates</a>. How to be able to use Java 21 in IntelliJ?</p>
<p><a href=""https://i.sstatic.net/btA2f.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/btA2f.png"" alt=""enter image description here"" /></a></p>
<p>I have changed:</p>
<ul>
<li><p>Project SDK to 21</p>
</li>
<li><p>Module SDK to 21</p>
</li>
<li><p>OS java version to 21. Typing <code>java -version</code> in terminal outputs:</p>
<blockquote>
<p>java version &quot;21&quot; 2023-09-19 LTS</p>
<p>Java(TM) SE Runtime Environment (build 21+35-LTS-2513)</p>
<p>Java HotSpot(TM) 64-Bit Server VM (build 21+35-LTS-2513, mixed mode, sharing)</p>
</blockquote>
</li>
<li><p>I have also updated IntelliJ to version 2023.2</p>
</li>
</ul>
",
tags:"<java><intellij-idea><sdk><java-21>",
score:20,
creationDate:2023-09-20 10:02:18,
creationDate:2023-09-20 11:03:05,
score:23,
acceptedResponderReputation:763,
acceptedResponder:10374965,
QuestionerReputation:763,
Questioner:10374965}
{title:".toSorted() works only in a browser",
id:"https://stackoverflow.com/questions/76006398",
body:"<p>I am working on a LeetCode problem, I want to assign a variable to a sorted copy of an array.</p>
<pre><code>sortedHeights = heights.toSorted()
</code></pre>
<p>However, this returns the following error <code>heights.toSorted is not a function</code>.
I looked up the issue on <a href=""https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/toSorted"" rel=""noreferrer"">MDN</a>, and found the following code snippet:</p>
<pre><code>const months = [&quot;Mar&quot;, &quot;Jan&quot;, &quot;Feb&quot;, &quot;Dec&quot;];
const sortedMonths = months.toSorted();
console.log(sortedMonths); // ['Dec', 'Feb', 'Jan', 'Mar']
console.log(months); // ['Mar', 'Jan', 'Feb', 'Dec']
</code></pre>
<p>I try to run this code snippet as well on WebStorm and I get the same error, however, when I run it in a browser it works. Why is that?</p>
",
tags:"<javascript><browser>",
score:23,
creationDate:2023-04-13 14:05:00,
creationDate:2023-04-13 14:09:17,
score:24,
acceptedResponderReputation:284,
acceptedResponder:15236044,
QuestionerReputation:546,
Questioner:16775568}
{title:"Why does “var” in Java 11 bypass the “protected” access restriction?",
id:"https://stackoverflow.com/questions/79315298",
body:"<p>Today, while working on a project for a college “Design Patterns” course (Java 11 required), I discovered a problem with the access restriction of the access modifier that can be bypassed by declaring var. I know how var is used, it's just a syntactic sugar that leaves the type inference to the compiler.</p>
<p>I can't figure out what type of alias the var is actually here:</p>
<ul>
<li>is it &quot;Child.InnerChild&quot;? Wouldn't that be a type mismatch?</li>
<li>&quot;InnerParent&quot;? Doesn't this bypass the protected access restrictor?</li>
</ul>
<p>Here is my simplified code:</p>
<pre class=""lang-java prettyprint-override""><code>public abstract class Parent {
    protected abstract static class InnerParent {
        public InnerParent self() {
            return this;
        }
    }
}
</code></pre>
<pre class=""lang-java prettyprint-override""><code>public class Child extends Parent {
    public static class InnerChild extends InnerParent {}
}
</code></pre>
<pre class=""lang-java prettyprint-override""><code>import anotherpackage.Child;

/**
 * Compiling with Java 11:
 */
public class Main {
    public static void main(String[] args) {
        // As we expected a compilation error: The returned static type does not match the expected type
        // Child.InnerChild innerChild = new Child.InnerChild().self();

        // As we expected a compilation error: Parent.InnerParent is package visible (protected)
        // Parent.InnerParent innerChild = new Child.InnerChild().self();

        // Why does it compile and run correctly here?
        // var is just syntactic sugar for the compiler type, it should be a Parent.InnerParent alias here,
        // why is var allowed to transgress the protected access restriction?
        var innerChild = new Child.InnerChild().self(); // perhce' non da' errore ? var e' un alias di cosa ?
        System.out.println(innerChild);
        System.out.println(innerChild.getClass().getName());
    }
}
</code></pre>
<p>I've also asked ChatGPT, but it's not responding as well as I'd like, and I'm not sure it's correct:</p>
<blockquote>
<p>Why <code>var</code> Works</p>
<ul>
<li><strong>Inferred Type</strong>: The inferred type for <code>var innerChild</code> is <code>Parent.InnerParent</code>.</li>
<li><strong>Access Rules</strong>: Since the type is inferred and not explicitly written in the code, the compiler doesn't enforce access restrictions for the declared variable.</li>
</ul>
</blockquote>
<p>I found a new problem: why can't I access <code>getClass()</code>?</p>
<p><a href=""https://i.sstatic.net/gYAxY4dI.png"" rel=""nofollow noreferrer""><img src=""https://i.sstatic.net/gYAxY4dI.png"" alt=""Unable to access getClass() issue"" /></a></p>
<p>However it is possible to compile this way.</p>
<pre class=""lang-java prettyprint-override""><code>System.out.println(((Object) innerChild).getClass().getName());
// OUTPUT: com.github.lorenzoyang.anotherpackage.Child$InnerChild
</code></pre>
",
tags:"<java><java-11>",
score:7,
creationDate:2024-12-29 09:20:00,
creationDate:2024-12-29 12:37:16,
score:24,
acceptedResponderReputation:102795,
acceptedResponder:768644,
QuestionerReputation:327,
Questioner:19196249}
{title:"CORS in Spring Security (Spring Boot 3)",
id:"https://stackoverflow.com/questions/76987080",
body:"<p>I am currently struggling with Spring Security in my Spring Boot 3 applications. It was working in Spring Boot 2 but not since I tried to upgrade to version 3.</p>
<p>My authentication seems to work properly and the stuff that needs to be authenticated works. However when I do a preflight (OPTIONS) check it still returns me a 401 error.</p>
<p>My WebSecurityConfig:</p>
<pre><code>@Configuration
@EnableWebSecurity
@EnableMethodSecurity(prePostEnabled = true)
public class WebSecurityConfig {

@Bean
    public SecurityFilterChain configure(HttpSecurity httpSecurity) throws Exception {
        httpSecurity
                .cors(Customizer.withDefaults())
                .csrf(c -&gt; c.disable())
                .authorizeHttpRequests(requests -&gt; requests
                        .requestMatchers(
                            AntPathRequestMatcher.antMatcher(&quot;/comments/**&quot;), 
                            AntPathRequestMatcher.antMatcher(&quot;/requests/admin/**&quot;)
                        ).authenticated()
                        .anyRequest().permitAll())
                .authenticationProvider(authenticationProvider())
                .exceptionHandling(r -&gt; r.authenticationEntryPoint(jwtAuthenticationEntryPoint))
                .sessionManagement(r -&gt; r.sessionCreationPolicy(SessionCreationPolicy.STATELESS))
                // Add a filter to validate the tokens with every request
                .addFilterBefore(jwtRequestFilter, UsernamePasswordAuthenticationFilter.class)
                ;
        return httpSecurity.build();
    }
}
</code></pre>
<p>I tried using a CorsConfigurationSource bean, but with no luck</p>
<pre><code>@Bean
public CorsConfigurationSource corsConfigurationSource() {
    CorsConfiguration corsConfig = new CorsConfiguration();
    corsConfig.applyPermitDefaultValues();
    corsConfig.setAllowCredentials(true);
    corsConfig.addAllowedMethod(&quot;GET&quot;);
    corsConfig.addAllowedMethod(&quot;PATCH&quot;);
    corsConfig.addAllowedMethod(&quot;POST&quot;);
    corsConfig.addAllowedMethod(&quot;OPTIONS&quot;);
    corsConfig.setAllowedOrigins(Arrays.asList(&quot;*&quot;));
    corsConfig.setAllowedHeaders(Arrays.asList(&quot;*&quot;));

    UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();
    source.registerCorsConfiguration(&quot;/**&quot;, corsConfig);
    return source;
}
</code></pre>
<p>And changed the <code>.cors(Customizer.withDefaults())</code> to <code>.cors(c -&gt; c.configurationSource(corsConfigurationSource())))</code> in the SecutiryFilterChain.</p>
<p>A lot of links on the internet provide help on the issue but for SB2 instead of 3.</p>
",
tags:"<java><spring-boot><spring-security><spring-boot-3>",
score:21,
creationDate:2023-08-27 12:19:09,
creationDate:2023-10-09 09:18:29,
score:24,
acceptedResponderReputation:366,
acceptedResponder:20807930,
QuestionerReputation:1088,
Questioner:5094160}
{title:"Property 'env' does not exist on type 'ImportMeta'.ts(2339)",
id:"https://stackoverflow.com/questions/78114219",
body:"<p>Recently i begin a project using vue.js and vite, everything run normal when using <code>npm run dev</code> but when <code>npm run build</code> its keep give me error <code>Property 'env' does not exist on type 'ImportMeta'.ts(2339)</code></p>
<pre><code>import { createRouter, createWebHistory } from 'vue-router'
import HomeView from '../views/HomeView.vue'

const router = createRouter({
  history: createWebHistory(import.meta.env.BASE_URL),
  routes: [
    {
      path: '/',
      name: 'home',
      component: HomeView
    },
    {
      path: '/about',
      name: 'about',
      // route level code-splitting
      // this generates a separate chunk (About.[hash].js) for this route
      // which is lazy-loaded when the route is visited.
      component: () =&gt; import('../views/AboutView.vue')
    }
 ]
})

// test access to Vite environment variable
console.log(import.meta.env.BASE_URL);

export default router
</code></pre>
<p>Here is my <code>env.d.ts</code></p>
<pre><code>/// &lt;reference types=&quot;vite/client&quot; /&gt;
interface ImportMeta {
  readonly env: Record&lt;string, string&gt;;
}
</code></pre>
<p>here is my <code>tsconfig.json</code></p>
<pre><code>{
  &quot;files&quot;: [],
  &quot;references&quot;: [
    {
      &quot;path&quot;: &quot;./tsconfig.node.json&quot;
    },
    {
      &quot;path&quot;: &quot;./tsconfig.app.json&quot;
    },
    {
      &quot;path&quot;: &quot;./tsconfig.vitest.json&quot;
    }
  ],
  &quot;compilerOptions&quot;: {
    &quot;module&quot;: &quot;NodeNext&quot;,
    &quot;allowJs&quot;: true,
    &quot;types&quot;: [&quot;vite/client&quot;]
  }
}
</code></pre>
<p>I have added compiler options, for vite/client but still resulting the same, any guidance or tips will be really useful. I appreciate any response.</p>
",
tags:"<javascript><typescript><vue.js><vite>",
score:9,
creationDate:2024-03-06 12:04:50,
creationDate:2024-07-17 14:11:04,
score:24,
acceptedResponderReputation:551,
acceptedResponder:5033801,
QuestionerReputation:491,
Questioner:10191136}
{title:"How to correctly use the API routes in the Next JS 13 Using App Router framework",
id:"https://stackoverflow.com/questions/76409677",
body:"<p>I'm fairly new to React JS and Next.js. I was previously using the Page Router API in Next.js but then switched to use the new App Router in Next.js 13.</p>
<p>Previously, using the Page Router, the structure to create a single GET request was to nest your &quot;JS&quot; file under the <code>page\api</code>. The server automatically creates the route and returns the methods + data. For example, I would export the following function:</p>
<p><a href=""https://i.sstatic.net/CUdpe.jpg"" rel=""noreferrer""><img src=""https://i.sstatic.net/CUdpe.jpg"" alt=""enter image description here"" /></a></p>
<pre><code>export default (req, res) =&gt; {
  res.statusCode = 200
  res.json({ name: 'John Doe' })
}
</code></pre>
<p>Now, using the App Router and TS on Next.js 13, I understand that the mechanism is different. The API folder is nested under the app folder and you have to define a &quot;route.ts&quot; file with all the different GET, POST (etc..) methods:</p>
<p><a href=""https://i.sstatic.net/sI91v.jpg"" rel=""noreferrer""><img src=""https://i.sstatic.net/sI91v.jpg"" alt=""enter image description here"" /></a></p>
<pre><code>import { NextApiRequest } from 'next';
import React from 'react';


export async function GET (request:NextApiRequest){
    return new Response('John Doe')
} 

</code></pre>
<p>I have some problems understanding how to use this <code>Response</code> object. How to you specify the structure of what you return, in my case <code>{ name: 'John Doe' }</code> ? I want to change the response status to 400, how do I do that?</p>
<p>Going forward, I have to deal with a POST request.</p>
<pre><code>import type {NextApiRequest, NextApiResponse} from 'next'

type MyData ={
    name:string
}

export async function POST(
    req: NextApiRequest, 
    res: NextApiResponse&lt;Data&gt;
){
    
    const {nameLookup} = req.body
    if(!nameLookup){
        
        //WHAT I WOULD LIKE TO DO IF I WAS USING THE PAGE ROUTER 
        //BUT THIS IS NOT WORKING WITH THE APP ROUTER

        res.statusCode = 400
        //- error TypeError: res.json is not a function
        res.json({name:'Please provide something to search for'})
        return res
    }

     //WHAT I WOULD LIKE TO DO IF I WAS USING THE PAGE ROUTER 
     //BUT THIS IS NOT WORKING WITH THE APP ROUTER
     //- error TypeError: res.status is not a function
     return res.status(200).json({anwser:'John Doe'})
})
</code></pre>
<p>Thanks for helping, the learning curve is a bit steep having to deal with everything at the same time (TS, Next.js 13)</p>
",
tags:"<javascript><typescript><next.js><app-router>",
score:21,
creationDate:2023-06-05 20:07:45,
creationDate:2023-06-06 08:21:01,
score:24,
acceptedResponderReputation:2853,
acceptedResponder:8003058,
QuestionerReputation:3108,
Questioner:1835225}
{title:"Why are random integers generated by multiplying by MAX_SAFE_INTEGER not evenly distributed between odd and even?",
id:"https://stackoverflow.com/questions/78404454",
body:"<p>Trying to generate a number using MAX_SAFE_INTEGER I noticed something strange, I'm sure it has to do with the way numbers are stored in JavaScript, but I don't understand what exactly it is.</p>
<pre><code>// Always returns an odd number
Math.floor(Math.random() * Number.MAX_SAFE_INTEGER)

// Returns an odd number 75% of the time
Math.floor(Math.random() * (Number.MAX_SAFE_INTEGER - 1))

// Has a 50/50 chance to return odd or even
Math.ceil(Math.random() * Number.MAX_SAFE_INTEGER)
</code></pre>
<p>How can this behavior be explained and what would be the largest integer you can use in <code>Math.floor</code> to get a 50/50 ratio?</p>
<p><div class=""snippet"" data-lang=""js"" data-hide=""false"" data-console=""true"" data-babel=""false"">
<div class=""snippet-code"">
<pre class=""snippet-code-js lang-js prettyprint-override""><code>let evenCount = 0, oddCount = 0;

for (let i = 0; i &lt; 10000; i++) {
  const randomNumber = Math.floor(Math.random() * Number.MAX_SAFE_INTEGER);
  if (randomNumber % 2 === 0) {
    evenCount++;
  } else {
    oddCount++;
  }
}

console.log(""Number of even numbers:"", evenCount);
console.log(""Number of odd numbers:"", oddCount);</code></pre>
</div>
</div>
</p>
",
tags:"<javascript><v8>",
score:29,
creationDate:2024-04-29 18:06:33,
creationDate:2024-04-29 19:10:34,
score:25,
acceptedResponderReputation:224862,
acceptedResponder:707111,
QuestionerReputation:597,
Questioner:17490497}
{title:"How to validate a field in Zod depending on the value of another field?",
id:"https://stackoverflow.com/questions/76842580",
body:"<p>I have a schema and I need to make it so that the <strong>role</strong> field is only validated when the value of the <strong>subject</strong> field is 1, otherwise the <strong>role</strong> should not be validated at all</p>
<pre><code>const schema = z.object({
  subject: z.number().default(0),
  gender: z.object({
    owner: z.number(),
    stranger: z.number().array().min(1),
  }),
  age: z.object({
    owner: z.number(),
    stranger: z.number().array().min(1),
  }),
  role: z.object({
    owner: z.number(),
    stranger: z.number(),
  }),
});
</code></pre>
<p>I tried to use the refine method but it was unsuccessful. In all the code examples that I looked at, the refine only processed the field on which this method was called. In my case, I need to process another field</p>
",
tags:"<javascript><reactjs><typescript><zod>",
score:17,
creationDate:2023-08-05 16:31:11,
creationDate:2023-08-05 16:35:43,
score:25,
acceptedResponderReputation:4546,
acceptedResponder:1020254,
QuestionerReputation:173,
Questioner:22344264}
{title:"Error ""IllegalStateException: No target Validator set"" after upgrade from Spring Boot 3.1.5 to 3.2.0",
id:"https://stackoverflow.com/questions/77545551",
body:"<p>After upgrading a reactive application from Spring Boot 3.1.5 to Spring Boot 3.2.0, I get the following error:</p>
<pre class=""lang-plaintext prettyprint-override""><code>java.lang.IllegalStateException: No target Validator set
    at org.springframework.util.Assert.state(Assert.java:76)
    at org.springframework.validation.beanvalidation.SpringValidatorAdapter.forExecutables(SpringValidatorAdapter.java:396)
    at org.springframework.validation.beanvalidation.MethodValidationAdapter.invokeValidatorForArguments(MethodValidationAdapter.java:257)
    at org.springframework.validation.beanvalidation.MethodValidationAdapter.validateArguments(MethodValidationAdapter.java:240)
    at org.springframework.web.method.annotation.HandlerMethodValidator.validateArguments(HandlerMethodValidator.java:115)
    at org.springframework.web.method.annotation.HandlerMethodValidator.applyArgumentValidation(HandlerMethodValidator.java:83)
    at org.springframework.web.reactive.result.method.InvocableHandlerMethod.lambda$invoke$0(InvocableHandlerMethod.java:164)
    ...
</code></pre>
<p>There is no other change in the code, the exception did not occur before in Spring Boot 3.1.5.</p>
",
tags:"<java><spring-boot><validation><web-services><upgrade>",
score:12,
creationDate:2023-11-24 20:33:48,
creationDate:2023-11-24 20:33:48,
score:25,
acceptedResponderReputation:19886,
acceptedResponder:2886891,
QuestionerReputation:19886,
Questioner:2886891}
{title:"How to use virtual threads with ScheduledExecutorService",
id:"https://stackoverflow.com/questions/76587253",
body:"<p>I want to use virtual threads introduced in Java 19 and ScheduledExecutorService.
I need to schedule some threads to be run every minute. I know that I can use something like this: <code>ScheduledExecutorService executor = Executors.newScheduledThreadPool(100, Thread.ofVirtual().factory());</code> But it looks like I'm forced to set pool size.</p>
<p>I'm looking for a fabric method similar to this: <code>ScheduledExecutorService executor = Executors.newScheduledThreadPool(Thread.ofVirtual().factory());</code>
But I can't find it. I would like to follow &quot;one virtual thread per task&quot; principle and not be forced to set a fixed number of threads in the pool.
Do you know if I can use ScheduledExecutorService in that way? Or some alternative exists which are adapted to virtual threads?</p>
<p><strong>UPDATE</strong></p>
<p>Let me elaborate on what problem I try to solve.
So I need to create more than 1000 tasks (I don't know the exact number, I can only estimate it). Which should be run periodically. Some need to be run every minute, some every two minutes, etc.</p>
<p>Those tasks will perform I/O operations (network requests). So virtual threads look like a good choice.
But I need some scheduling functionality to achieve it.
By choosing ScheduledExecutorService I can use methods like:
<code>scheduledThreadPoolExecutor.scheduleAtFixedRate(runnableTask, 60, 60, TimeUnit.SECONDS )</code></p>
<p>If I would not need scheduling I would simply create an executor like that: <code>var executor = Executors.newVirtualThreadPerTaskExecutor()</code>
But plain ExecutorService doesn't provide any scheduling functionality.
And I would be forced to implement scheduling on my own.</p>
<p>So for now the best solution I found is: <code>Executors.newScheduledThreadPool(1000, Thread.ofVirtual().factory());</code>
This generally looks good but I wonder if some other solution in Java API exists which allows me to create ScheduledExecutor but I will not be forced to set the size of a thread pool. Which for me looks a little bit strange when we consider virtual threads.</p>
",
tags:"<java><multithreading><scheduled-tasks><executorservice><virtual-threads>",
score:18,
creationDate:2023-06-30 08:26:15,
creationDate:2023-07-02 13:27:36,
score:25,
acceptedResponderReputation:12337,
acceptedResponder:2067492,
QuestionerReputation:246,
Questioner:8780513}
{title:"What is the solution for 'getter for buildDir: File!' is deprecated",
id:"https://stackoverflow.com/questions/77684908",
body:"<p>I am trying to upgrade gradle version and getting the following error</p>
<pre><code>'getter for buildDir: File!' is deprecated. Deprecated in Java
</code></pre>
<p>But not able to find an alternate solution to this anywhere.</p>
<p>My code that is using buildDir is like this</p>
<pre><code>&quot;${this@allprojects.buildDir/path}&quot;
</code></pre>
",
tags:"<java><android><gradle><build.gradle>",
score:13,
creationDate:2023-12-19 11:39:01,
creationDate:2023-12-19 12:03:34,
score:26,
acceptedResponderReputation:6463,
acceptedResponder:10928439,
QuestionerReputation:1786,
Questioner:7316675}
{title:"Java 21 built-in HTTP client pins the carrier thread",
id:"https://stackoverflow.com/questions/77315894",
body:"<p>I'm using Java <em>Corretto 21.0.0.35.1 build 21+35-LTS</em>, and the built-in Java HTTP client to retrieve a response as an <code>InputStream</code>. I'm making parallel requests using virtual threads, and for the most part, it's working well. However, occasionally, my testing encounters a &quot;Pinning&quot; event, as seen in the stack trace below.</p>
<p>I believed that the JDK had been updated to fully support virtual threads, and in my understanding, the HTTP client shouldn't be pinning a carrier thread at all. However, it appears that this pinning event occurs sometimes when reading and (automatically) closing an <code>InputStream</code>.</p>
<p>Is this behavior expected, or could it still be a bug in the JDK?</p>
<p>The code:</p>
<pre><code>HttpResponse&lt;InputStream&gt; response = httpClient.send(request, HttpResponse.BodyHandlers.ofInputStream());
try (InputStream responseBody = response.body()) {
  return parser.parse(responseBody); // LINE 52 in the trace below
}
</code></pre>
<p>The trace</p>
<pre><code>* Pinning event captured:
  java.lang.VirtualThread.parkOnCarrierThread(java.lang.VirtualThread.java:687)
  java.lang.VirtualThread.park(java.lang.VirtualThread.java:603)
  java.lang.System$2.parkVirtualThread(java.lang.System$2.java:2639)
  jdk.internal.misc.VirtualThreads.park(jdk.internal.misc.VirtualThreads.java:54)
  java.util.concurrent.locks.LockSupport.park(java.util.concurrent.locks.LockSupport.java:219)
  java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(java.util.concurrent.locks.AbstractQueuedSynchronizer.java:754)
  java.util.concurrent.locks.AbstractQueuedSynchronizer.acquire(java.util.concurrent.locks.AbstractQueuedSynchronizer.java:990)
  java.util.concurrent.locks.ReentrantLock$Sync.lock(java.util.concurrent.locks.ReentrantLock$Sync.java:153)
  java.util.concurrent.locks.ReentrantLock.lock(java.util.concurrent.locks.ReentrantLock.java:322)
  sun.nio.ch.SocketChannelImpl.implCloseNonBlockingMode(sun.nio.ch.SocketChannelImpl.java:1091)
  sun.nio.ch.SocketChannelImpl.implCloseSelectableChannel(sun.nio.ch.SocketChannelImpl.java:1124)
  java.nio.channels.spi.AbstractSelectableChannel.implCloseChannel(java.nio.channels.spi.AbstractSelectableChannel.java:258)
  java.nio.channels.spi.AbstractInterruptibleChannel.close(java.nio.channels.spi.AbstractInterruptibleChannel.java:113)
  jdk.internal.net.http.PlainHttpConnection.close(jdk.internal.net.http.PlainHttpConnection.java:427)
  jdk.internal.net.http.PlainHttpConnection.close(jdk.internal.net.http.PlainHttpConnection.java:406)
  jdk.internal.net.http.Http1Response.lambda$readBody$1(jdk.internal.net.http.Http1Response.java:355)
  jdk.internal.net.http.Http1Response$$Lambda+0x00007f4cb5e6c438.749276779.accept(jdk.internal.net.http.Http1Response$$Lambda+0x00007f4cb5e6c438.749276779.java:-1)
  jdk.internal.net.http.ResponseContent$ChunkedBodyParser.onError(jdk.internal.net.http.ResponseContent$ChunkedBodyParser.java:185)
  jdk.internal.net.http.Http1Response$BodyReader.onReadError(jdk.internal.net.http.Http1Response$BodyReader.java:677)
  jdk.internal.net.http.Http1AsyncReceiver.checkForErrors(jdk.internal.net.http.Http1AsyncReceiver.java:302)
  jdk.internal.net.http.Http1AsyncReceiver.flush(jdk.internal.net.http.Http1AsyncReceiver.java:268)
  jdk.internal.net.http.Http1AsyncReceiver$$Lambda+0x00007f4cb5e31228.555093431.run(jdk.internal.net.http.Http1AsyncReceiver$$Lambda+0x00007f4cb5e31228.555093431.java:-1)
  jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.run(jdk.internal.net.http.common.SequentialScheduler$LockingRestartableTask.java:182)
  jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.run(jdk.internal.net.http.common.SequentialScheduler$CompleteRestartableTask.java:149)
  jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.run(jdk.internal.net.http.common.SequentialScheduler$SchedulableTask.java:207)
  jdk.internal.net.http.HttpClientImpl$DelegatingExecutor.execute(jdk.internal.net.http.HttpClientImpl$DelegatingExecutor.java:177)
  jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(jdk.internal.net.http.common.SequentialScheduler.java:282)
  jdk.internal.net.http.common.SequentialScheduler.runOrSchedule(jdk.internal.net.http.common.SequentialScheduler.java:251)
  jdk.internal.net.http.Http1AsyncReceiver.onReadError(jdk.internal.net.http.Http1AsyncReceiver.java:516)
  jdk.internal.net.http.Http1AsyncReceiver.lambda$handlePendingDelegate$3(jdk.internal.net.http.Http1AsyncReceiver.java:380)
  jdk.internal.net.http.Http1AsyncReceiver$$Lambda+0x00007f4cb5e33ca0.84679411.run(jdk.internal.net.http.Http1AsyncReceiver$$Lambda+0x00007f4cb5e33ca0.84679411.java:-1)
  jdk.internal.net.http.Http1AsyncReceiver$Http1AsyncDelegateSubscription.cancel(jdk.internal.net.http.Http1AsyncReceiver$Http1AsyncDelegateSubscription.java:163)
  jdk.internal.net.http.common.HttpBodySubscriberWrapper$SubscriptionWrapper.cancel(jdk.internal.net.http.common.HttpBodySubscriberWrapper$SubscriptionWrapper.java:92)
  jdk.internal.net.http.ResponseSubscribers$HttpResponseInputStream.close(jdk.internal.net.http.ResponseSubscribers$HttpResponseInputStream.java:653)

  com.acme.service.server.StatusClient.getResponse(com.acme.service.server.StatusClient.java:52)
  com.acme.service.server.StatusClient_ClientProxy.getResponse(com.acme.service.server.StatusClient_ClientProxy.java:-1)
  com.acme.client.Request.execute(com.acme.client.Request.java:96)
  com.acme.service.server.serviceStatusProvider.getStatusHistorys(com.acme.service.server.serviceStatusProvider.java:237)
  com.acme.service.api.RemoteStatusCheck.getStatusHistory(com.acme.service.api.RemoteStatusCheck.java:163)
  com.acme.service.api.RemoteStatusCheck.lambda$doChecks$0(com.acme.service.api.RemoteStatusCheck.java:132)
  com.acme.service.api.RemoteStatusCheck$$Lambda+0x00007f4cb9f0d8d0.979953307.call(com.acme.service.api.RemoteStatusCheck$$Lambda+0x00007f4cb9f0d8d0.979953307.java:-1)
  java.util.concurrent.FutureTask.run(java.util.concurrent.FutureTask.java:317)
  java.lang.VirtualThread.runWith(java.lang.VirtualThread.java:341)
  java.lang.VirtualThread.run(java.lang.VirtualThread.java:311)
  java.lang.VirtualThread$VThreadContinuation$1.run(java.lang.VirtualThread$VThreadContinuation$1.java:192)
  jdk.internal.vm.Continuation.enter0(jdk.internal.vm.Continuation.java:320)
  jdk.internal.vm.Continuation.enter(jdk.internal.vm.Continuation.java:312)
  jdk.internal.vm.Continuation.enterSpecial(jdk.internal.vm.Continuation.java:-1)
</code></pre>
",
tags:"<java><java-http-client><project-loom><java-21><virtual-threads>",
score:20,
creationDate:2023-10-18 11:28:40,
creationDate:2023-10-18 12:23:14,
score:26,
acceptedResponderReputation:108941,
acceptedResponder:466862,
QuestionerReputation:253,
Questioner:11922671}
{title:"planebuffergeometry is not part of the three namespace",
id:"https://stackoverflow.com/questions/76790629",
body:"<p>I am building a three.js project with next.js but I am getting this error:</p>
<p>'planeBufferGeometry is not part of the THREE namespace. did you forget to extend? see:
<a href=""https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively"" rel=""noreferrer"">https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively</a></p>
<p>I am new in three.js I don't know what is the problem</p>
<p>in page.js(for app.js):</p>
<pre><code>&quot;use client&quot;
import Image from 'next/image'
import styles from './page.module.css'
import { Canvas } from '@react-three/fiber'
import { Sky } from '@react-three/drei'
import Ground from './components/Ground'
import { Physics } from '@react-three/cannon'

export default function Home() {
  return (
    &lt;&gt;
      &lt;Canvas&gt;
        &lt;Sky sunPosition={[100, 20, 100]} /&gt;
        &lt;ambientLight intensity={0.5} /&gt;
        &lt;Physics&gt;
          &lt;Ground /&gt;
        &lt;/Physics&gt;
      &lt;/Canvas&gt;
    &lt;/&gt;
  )
}

</code></pre>
<p>in Ground.js:</p>
<pre><code>import { usePlane } from &quot;@react-three/cannon&quot;;
import { groundTexture } from &quot;../images/textures&quot;
import * as THREE from &quot;three&quot;;

const Ground = (props) =&gt; {
    const [ref] = usePlane(() =&gt; ({
        rotation: [-Math.PI / 4, 0, 0], position: [0, 0, 0]
    }))
    groundTexture.magFilter = THREE.NearestFilter;
    groundTexture.wrapS = groundTexture.wrapT = THREE.RepeatWrapping;
    groundTexture.repeat.set(100, 100);

    return (
        &lt;mesh ref={ref}&gt;
            &lt;planeBufferGeometry attach=&quot;geometry&quot; args={[100, 100]} /&gt;
            &lt;meshStandardMaterial attach=&quot;material&quot; map={groundTexture} /&gt;
        &lt;/mesh&gt;
    )
}

export default Ground
</code></pre>
<p>I am new in three.js I don't know what is the problem</p>
",
tags:"<javascript><next.js><three.js><react-three-fiber>",
score:9,
creationDate:2023-07-28 19:43:32,
creationDate:2023-07-29 08:48:56,
score:26,
acceptedResponderReputation:31026,
acceptedResponder:5250847,
QuestionerReputation:130,
Questioner:18291291}
{title:"Standard Commons Logging discovery in action with spring-jcl",
id:"https://stackoverflow.com/questions/76706612",
body:"<p>I have a springBoot all with these dependencies:</p>
<pre><code>&lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;
        &lt;/dependency&gt;

        &lt;!-- https://mvnrepository.com/artifact/org.projectlombok/lombok --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;
            &lt;artifactId&gt;lombok&lt;/artifactId&gt;
            &lt;version&gt;1.18.28&lt;/version&gt;
            &lt;scope&gt;provided&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;!-- https://mvnrepository.com/artifact/com.mashape.unirest/unirest-java --&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;com.mashape.unirest&lt;/groupId&gt;
            &lt;artifactId&gt;unirest-java&lt;/artifactId&gt;
            &lt;version&gt;1.4.9&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;com.mysql&lt;/groupId&gt;
            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;
            &lt;artifactId&gt;jjwt-api&lt;/artifactId&gt;
            &lt;version&gt;0.11.5&lt;/version&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;
            &lt;artifactId&gt;jjwt-impl&lt;/artifactId&gt;
            &lt;version&gt;0.11.5&lt;/version&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;io.jsonwebtoken&lt;/groupId&gt;
            &lt;artifactId&gt;jjwt-jackson&lt;/artifactId&gt;
            &lt;version&gt;0.11.5&lt;/version&gt;
            &lt;scope&gt;runtime&lt;/scope&gt;
        &lt;/dependency&gt;


        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;
            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;

        &lt;dependency&gt;
            &lt;groupId&gt;org.springframework.security&lt;/groupId&gt;
            &lt;artifactId&gt;spring-security-test&lt;/artifactId&gt;
            &lt;scope&gt;test&lt;/scope&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
</code></pre>
<p>but I have this message on the console:</p>
<pre><code>Standard Commons Logging discovery in action with spring-jcl: please remove commons-logging.jar from classpath in order to avoid potential conflicts
</code></pre>
<p>Here the mvn dependency:tree :</p>
<pre><code>[INFO] Scanning for projects...
[INFO] 
[INFO] ----------------&lt; com.planets:com.planets &gt;-----------------
[INFO] Building planets 0.0.1-SNAPSHOT
[INFO]   from pom.xml
[INFO] --------------------------------[ jar ]---------------------------------
[INFO] 
[INFO] --- dependency:3.5.0:tree (default-cli) @ com.planets ---
[INFO] com.planets:com.planets:jar:0.0.1-SNAPSHOT
[INFO] +- org.springframework.boot:spring-boot-starter-data-jpa:jar:3.1.1:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter-aop:jar:3.1.1:compile
[INFO] |  |  \- org.aspectj:aspectjweaver:jar:1.9.19:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter-jdbc:jar:3.1.1:compile
[INFO] |  |  +- com.zaxxer:HikariCP:jar:5.0.1:compile
[INFO] |  |  \- org.springframework:spring-jdbc:jar:6.0.10:compile
[INFO] |  +- org.hibernate.orm:hibernate-core:jar:6.2.5.Final:compile
[INFO] |  |  +- jakarta.persistence:jakarta.persistence-api:jar:3.1.0:compile
[INFO] |  |  +- jakarta.transaction:jakarta.transaction-api:jar:2.0.1:compile
[INFO] |  |  +- org.jboss.logging:jboss-logging:jar:3.5.1.Final:compile
[INFO] |  |  +- org.hibernate.common:hibernate-commons-annotations:jar:6.0.6.Final:runtime
[INFO] |  |  +- io.smallrye:jandex:jar:3.0.5:runtime
[INFO] |  |  +- com.fasterxml:classmate:jar:1.5.1:compile
[INFO] |  |  +- net.bytebuddy:byte-buddy:jar:1.14.5:runtime
[INFO] |  |  +- org.glassfish.jaxb:jaxb-runtime:jar:4.0.3:runtime
[INFO] |  |  |  \- org.glassfish.jaxb:jaxb-core:jar:4.0.3:runtime
[INFO] |  |  |     +- org.eclipse.angus:angus-activation:jar:2.0.1:runtime
[INFO] |  |  |     +- org.glassfish.jaxb:txw2:jar:4.0.3:runtime
[INFO] |  |  |     \- com.sun.istack:istack-commons-runtime:jar:4.1.2:runtime
[INFO] |  |  +- jakarta.inject:jakarta.inject-api:jar:2.0.1:runtime
[INFO] |  |  \- org.antlr:antlr4-runtime:jar:4.10.1:compile
[INFO] |  +- org.springframework.data:spring-data-jpa:jar:3.1.1:compile
[INFO] |  |  +- org.springframework.data:spring-data-commons:jar:3.1.1:compile
[INFO] |  |  +- org.springframework:spring-orm:jar:6.0.10:compile
[INFO] |  |  +- org.springframework:spring-context:jar:6.0.10:compile
[INFO] |  |  +- org.springframework:spring-tx:jar:6.0.10:compile
[INFO] |  |  +- org.springframework:spring-beans:jar:6.0.10:compile
[INFO] |  |  +- jakarta.annotation:jakarta.annotation-api:jar:2.1.1:compile
[INFO] |  |  \- org.slf4j:slf4j-api:jar:2.0.7:compile
[INFO] |  \- org.springframework:spring-aspects:jar:6.0.10:compile
[INFO] +- org.springframework.boot:spring-boot-starter-security:jar:3.1.1:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter:jar:3.1.1:compile
[INFO] |  |  +- org.springframework.boot:spring-boot:jar:3.1.1:compile
[INFO] |  |  +- org.springframework.boot:spring-boot-autoconfigure:jar:3.1.1:compile
[INFO] |  |  +- org.springframework.boot:spring-boot-starter-logging:jar:3.1.1:compile
[INFO] |  |  |  +- ch.qos.logback:logback-classic:jar:1.4.8:compile
[INFO] |  |  |  |  \- ch.qos.logback:logback-core:jar:1.4.8:compile
[INFO] |  |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.20.0:compile
[INFO] |  |  |  |  \- org.apache.logging.log4j:log4j-api:jar:2.20.0:compile
[INFO] |  |  |  \- org.slf4j:jul-to-slf4j:jar:2.0.7:compile
[INFO] |  |  \- org.yaml:snakeyaml:jar:1.33:compile
[INFO] |  +- org.springframework:spring-aop:jar:6.0.10:compile
[INFO] |  +- org.springframework.security:spring-security-config:jar:6.1.1:compile
[INFO] |  \- org.springframework.security:spring-security-web:jar:6.1.1:compile
[INFO] |     \- org.springframework:spring-expression:jar:6.0.10:compile
[INFO] +- org.springframework.boot:spring-boot-starter-validation:jar:3.1.1:compile
[INFO] |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.10:compile
[INFO] |  \- org.hibernate.validator:hibernate-validator:jar:8.0.0.Final:compile
[INFO] |     \- jakarta.validation:jakarta.validation-api:jar:3.0.2:compile
[INFO] +- org.springframework.boot:spring-boot-starter-web:jar:3.1.1:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter-json:jar:3.1.1:compile
[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.15.2:compile
[INFO] |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.15.2:compile
[INFO] |  |  \- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.15.2:compile
[INFO] |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:3.1.1:compile
[INFO] |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:10.1.10:compile
[INFO] |  |  \- org.apache.tomcat.embed:tomcat-embed-websocket:jar:10.1.10:compile
[INFO] |  +- org.springframework:spring-web:jar:6.0.10:compile
[INFO] |  |  \- io.micrometer:micrometer-observation:jar:1.11.1:compile
[INFO] |  |     \- io.micrometer:micrometer-commons:jar:1.11.1:compile
[INFO] |  \- org.springframework:spring-webmvc:jar:6.0.10:compile
[INFO] +- com.fasterxml.jackson.core:jackson-annotations:jar:2.15.2:compile
[INFO] +- org.projectlombok:lombok:jar:1.18.28:provided
[INFO] +- com.mashape.unirest:unirest-java:jar:1.4.9:compile
[INFO] |  +- org.apache.httpcomponents:httpclient:jar:4.5.2:compile
[INFO] |  |  +- org.apache.httpcomponents:httpcore:jar:4.4.16:compile
[INFO] |  |  +- commons-logging:commons-logging:jar:1.2:compile
[INFO] |  |  \- commons-codec:commons-codec:jar:1.15:compile
[INFO] |  +- org.apache.httpcomponents:httpasyncclient:jar:4.1.5:compile
[INFO] |  |  \- org.apache.httpcomponents:httpcore-nio:jar:4.4.16:compile
[INFO] |  +- org.apache.httpcomponents:httpmime:jar:4.5.2:compile
[INFO] |  \- org.json:json:jar:20160212:compile
[INFO] +- com.itextpdf:itextpdf:jar:5.5.13.3:compile
[INFO] +- com.mysql:mysql-connector-j:jar:8.0.33:runtime
[INFO] +- io.jsonwebtoken:jjwt-api:jar:0.11.5:compile
[INFO] +- io.jsonwebtoken:jjwt-impl:jar:0.11.5:runtime
[INFO] +- io.jsonwebtoken:jjwt-jackson:jar:0.11.5:runtime
[INFO] |  \- com.fasterxml.jackson.core:jackson-databind:jar:2.15.2:compile
[INFO] |     \- com.fasterxml.jackson.core:jackson-core:jar:2.15.2:compile
[INFO] +- org.springframework.boot:spring-boot-starter-test:jar:3.1.1:test
[INFO] |  +- org.springframework.boot:spring-boot-test:jar:3.1.1:test
[INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:3.1.1:test
[INFO] |  +- com.jayway.jsonpath:json-path:jar:2.8.0:test
[INFO] |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:4.0.0:runtime
[INFO] |  |  \- jakarta.activation:jakarta.activation-api:jar:2.1.2:runtime
[INFO] |  +- net.minidev:json-smart:jar:2.4.11:test
[INFO] |  |  \- net.minidev:accessors-smart:jar:2.4.11:test
[INFO] |  |     \- org.ow2.asm:asm:jar:9.3:test
[INFO] |  +- org.assertj:assertj-core:jar:3.24.2:test
[INFO] |  +- org.hamcrest:hamcrest:jar:2.2:test
[INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.9.3:test
[INFO] |  |  +- org.junit.jupiter:junit-jupiter-api:jar:5.9.3:test
[INFO] |  |  |  +- org.opentest4j:opentest4j:jar:1.2.0:test
[INFO] |  |  |  +- org.junit.platform:junit-platform-commons:jar:1.9.3:test
[INFO] |  |  |  \- org.apiguardian:apiguardian-api:jar:1.1.2:test
[INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.9.3:test
[INFO] |  |  \- org.junit.jupiter:junit-jupiter-engine:jar:5.9.3:test
[INFO] |  |     \- org.junit.platform:junit-platform-engine:jar:1.9.3:test
[INFO] |  +- org.mockito:mockito-core:jar:5.3.1:test
[INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.14.5:test
[INFO] |  |  \- org.objenesis:objenesis:jar:3.3:test
[INFO] |  +- org.mockito:mockito-junit-jupiter:jar:5.3.1:test
[INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.1:test
[INFO] |  |  \- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:test
[INFO] |  +- org.springframework:spring-core:jar:6.0.10:compile
[INFO] |  |  \- org.springframework:spring-jcl:jar:6.0.10:compile
[INFO] |  +- org.springframework:spring-test:jar:6.0.10:test
[INFO] |  \- org.xmlunit:xmlunit-core:jar:2.9.1:test
[INFO] \- org.springframework.security:spring-security-test:jar:6.1.1:test
[INFO]    \- org.springframework.security:spring-security-core:jar:6.1.1:compile
[INFO]       \- org.springframework.security:spring-security-crypto:jar:6.1.1:compile
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
</code></pre>
",
tags:"<java><spring-boot><logging>",
score:45,
creationDate:2023-07-17 16:55:41,
creationDate:2023-12-05 10:48:46,
score:26,
acceptedResponderReputation:2344,
acceptedResponder:8524584,
QuestionerReputation:2056,
Questioner:4450024}
{title:"How to match only specific characters in a given string with regex?",
id:"https://stackoverflow.com/questions/75072749",
body:"<p>I want a specific value, the value be only numbers and:</p>
<ul>
<li><p>the length should be 11.</p>
</li>
<li><p>the first digit should be 0.</p>
</li>
<li><p>the second digit should be 1.</p>
</li>
<li><p>the third digit should be 0, 1, 2, 5.</p>
</li>
<li><p>then match any digit from the forth digit to the end.</p>
</li>
<li><p>if the third digit is 1, then the last two digits(10th, 11th) should be the same.</p>
</li>
<li><p>if the third digit is 2, the 8th, 9th digits should be the same.</p>
</li>
</ul>
<p>Input string, and expected result.</p>
<pre><code>01012345678          -----&gt; allowed.
0101234a5678         -----&gt; not allowed., letter exists.
01112345688          -----&gt; allowed, 10th, 11st are the same
01112345677          -----&gt; allowed, 10th, 11st are the same
01112345666          -----&gt; allowed, 10th, 11st are the same
01112345689          -----&gt; not allowed..10th, 11st different
01112345-678         -----&gt; not allowed..hyphen exists.
01298765532          -----&gt; allowed..8th, 9th are the same.
01298765732          -----&gt; not allowed, 8th, 9th different.
01298765mm432        -----&gt; not allowed, letter exists.
01500011122          -----&gt; allowed..
020132156456136      -----&gt; not allowed..more than 11 digit.
01530126453333       -----&gt; not allowed..more than 11 digit.
00123456789          -----&gt; not allowed.. second digit not 1.

</code></pre>
<p>This is my attempt at regex101,<code>^01[0125][0-9]{8}$</code> <code>https://regex101.com/r/cIcD0R/1</code> but it ignore specific cases also it works for specific cases.</p>
",
tags:"<javascript><regex>",
score:21,
creationDate:2023-01-10 16:09:01,
creationDate:2023-01-10 16:13:41,
score:27,
acceptedResponderReputation:163207,
acceptedResponder:5424988,
QuestionerReputation:245,
Questioner:20973971}
{title:"Get url params in API route handler in Next.js",
id:"https://stackoverflow.com/questions/76974324",
body:"<p>I have a client component <code>GetUserInfoButton</code>. In that component, I send a GET request on url <code>http://localhost:3000/test/users/[id]</code> where <code>[id]</code> is a MongoDb-like alphanumeric sequence.</p>
<p>Inside <code>app/api/users/[id]/route.ts</code>, I want to receive that request and work with that <code>[id]</code>. Here's my <code>GetUserInfoButton</code> component:</p>
<pre><code>'use client';

export default function GetUserInfoButton({ id }: { id: string }) {
    const contentType = &quot;application/json&quot;;
    const handleClick = async (id: string) =&gt; {
        try {
            const res = await fetch(`/api/users/${id}`, {
                method: &quot;GET&quot;,
                headers: {
                    &quot;Content-Type&quot;: contentType,
                }
            });
            if (!res.ok) {
                throw new Error(res.status.toString());
            }
        } catch (error) {
            console.log(&quot;error ===&gt; &quot;, error);
        }
    };

    return (
        &lt;button onClick={() =&gt; handleClick(id)}&gt;
            Get
        &lt;/button&gt;
    );
}
</code></pre>
<p>Here's my <code>route.ts</code> file:</p>
<pre><code>import { NextRequest, NextResponse } from &quot;next/server&quot;;

export async function GET(req: NextRequest) {
    const id = req.url.split(&quot;http://localhost:3000/api/users/&quot;)[1];
    return NextResponse.json({
        success: true,
        id: id
    }, {
        status: 200,
    })
}
</code></pre>
<p>Back when it was the pages router, I could use <code>useRouter(</code>) on the client and get id on the server like this:
<code>const { query: { id } } = req</code>.</p>
<p>How do I get id params in server component?</p>
<p>I'm using  Next.js <code>13.4.16</code>.</p>
",
tags:"<javascript><next.js>",
score:11,
creationDate:2023-08-25 04:46:24,
creationDate:2023-08-25 08:11:50,
score:27,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:911,
Questioner:5184474}
{title:"Type error: Page ""..."" has an invalid ""default"" export: Type ""..."" is not valid in Next.js",
id:"https://stackoverflow.com/questions/76404674",
body:"<p>I've got a functional component for the Signup page. I'm trying to declare props for this component so I can pass appropriate values to it from another component. This is what I'm doing:</p>
<pre class=""lang-typescript prettyprint-override""><code>export default function SignupPage({mode = 'patient'} : {mode: 'patient' | 'doctor'}) {
 {/* CODE FOR SIGNUP PAGE HERE */}
}
</code></pre>
<p>As the code shows, I want the default value of <code>mode</code> to be <code>patient</code>. It should always be one of either <code>patient</code> or <code>doctor</code>.</p>
<p>When I'm running this code with <code>npm run dev</code>, everything works fine. The minute I try to build with <code>npm run build</code>, I get the following error:</p>
<pre><code>- info Linting and checking validity of types ...Failed to compile.

app/signup/page.tsx
Type error: Page &quot;app/signup/page.tsx&quot; has an invalid &quot;default&quot; export:
  Type &quot;{ mode: &quot;patient&quot; | &quot;doctor&quot;; }&quot; is not valid.
</code></pre>
<p>I've tried multiple things like declaring an <code>interface</code> and <code>type</code> with <code>mode: 'patient' | 'doctor';</code> as well. It always gives the same error.</p>
<p>Any help and guidance will be highly appreciated 🙏🏼</p>
",
tags:"<javascript><reactjs><typescript><next.js><types>",
score:17,
creationDate:2023-06-05 08:27:56,
creationDate:2023-06-05 09:48:40,
score:27,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:349,
Questioner:19353921}
{title:"Why is my regex valid with the RegExp u flag, but not with the v flag and does not work in HTML pattern attribute?",
id:"https://stackoverflow.com/questions/76285652",
body:"<p>I am getting the below console warning for this regex pattern:</p>
<pre><code>^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9]+\\.[a-zA-Z0-9]+$
</code></pre>
<blockquote>
<p>Pattern attribute value <code>^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9]+\.[a-zA-Z0-9]+$</code> is valid with the RegExp <code>u</code> flag, but not with the <code>v</code> flag:<br />
Uncaught SyntaxError: Invalid regular expression: <code>/^[a-zA-Z0-9+_.-]+@[a-zA-Z0-9]+\.[a-zA-Z0-9]+$/v:</code> Invalid character in character class.</p>
</blockquote>
<p>I cannot see how to create a valid regex pattern for this warning. Please, could somebody explain the error and how to resolve it?</p>
<p>I tried looking at documentation, but could not see how to make it valid for the <code>v</code> flag</p>
",
tags:"<javascript><html><regex><html-input><ecmascript-next>",
score:16,
creationDate:2023-05-19 02:33:53,
creationDate:2023-05-19 08:15:11,
score:28,
acceptedResponderReputation:626691,
acceptedResponder:3832970,
QuestionerReputation:189,
Questioner:15836839}
{title:"TailwindCSS not working with Vite + React",
id:"https://stackoverflow.com/questions/74987006",
body:"<p>I am initializing TailWindCSS using <a href=""https://tailwindcss.com/docs/guides/create-react-app"" rel=""noreferrer"">https://tailwindcss.com/docs/guides/create-react-app</a> on a Vite + React + JavaScript project but cant get it to work, It seems like postcss and autoprefixer is not getting installed, when I try to install manually it gives the following error</p>
<pre><code>warning Pattern [&quot;postcss@^8.4.20&quot;] is trying to unpack in the same destination &quot;C:\\Users\\NUR\\AppData\\Local\\Yarn\\Cache\\v6\\npm-postcss-8.4.20-64c52f509644cecad8567e949f4081d98349dc56-integrity\\node_modules\\postcss&quot; as pattern [&quot;postcss@^8.4.18&quot;,&quot;postcss@^8.4.20&quot;]. This could result in non-deterministic behavior, skipping.
[3/4] Linking dependencies...
warning &quot; &gt; tailwindcss@3.2.4&quot; has unmet peer dependency &quot;postcss@^8.0.9&quot;.
</code></pre>
",
tags:"<javascript><reactjs><tailwind-css><vite>",
score:17,
creationDate:2023-01-02 20:58:39,
creationDate:2023-01-02 21:53:09,
score:28,
acceptedResponderReputation:1487,
acceptedResponder:8998480,
QuestionerReputation:461,
Questioner:14309736}
{title:"How to use pinia store getters on v-model of an input?",
id:"https://stackoverflow.com/questions/76370713",
body:"<p>In my application, i am working on storing user form responses. I have created pinia store and created each forms object. Using this store into my component and passing the getter function of that store into variable,</p>
<p>That variable, i am using as a v-model. After giving input also it is not returning anything. As well as i am not getting any error for this. Did i follow any wrong approach?</p>
<p><strong>Userstore.js</strong></p>
<pre class=""lang-js prettyprint-override""><code>    import { defineStore } from 'pinia';
    
    export const userResponses = {
      formsResponses: {
        form1: {
          input1: '',
        },
      },
    };
    
    export default defineStore('userStore', {
      state() { return userResponses; },
    
      getters: {
        getFormsInput: (state) =&gt; state.formsResponses.form1,
      },
      actions: {
        setFormsResponses(formResponses) {
          this.formsResponses.form1 = formResponses;
        },
      },
    });
</code></pre>
<p><strong>Form1.vue</strong></p>
<pre class=""lang-html prettyprint-override""><code>  &lt;template&gt;
    &lt;input type=&quot;text&quot; name=&quot;input_form&quot; v-model=&quot;input&quot;/&gt;
    &lt;button type=&quot;Primary&quot; @click=&quot;submit&quot;&gt;submit&lt;/button&gt;
  &lt;/template&gt;
    
    &lt;script setup&gt;
    import { computed, ref } from 'vue';
    import useUserStore from '@/store/userStore';
    
    
    const userStore = useUserStore();
    
    const input = ref('');
    const responses = computed(() =&gt; userStore.getFormsInput);
    
    reponses.value.input1 = input.value;
    
    function submit() {
      console.log(reponses.value.input1); // it is giving nothing
    }
    
    &lt;/script&gt;
</code></pre>
<p>Why i am not able to use getters or not updating the value? Shall i directly can use getters into v-model?</p>
",
tags:"<javascript><vue.js><vuejs3><pinia>",
score:14,
creationDate:2023-05-31 06:30:55,
creationDate:2023-06-01 09:25:49,
score:28,
acceptedResponderReputation:90013,
acceptedResponder:1891677,
QuestionerReputation:1391,
Questioner:7411584}
{title:"Spring Boot application fails to start with error java.lang.ClassNotFoundException: ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP",
id:"https://stackoverflow.com/questions/79018382",
body:"<p>Spring Boot (3.3.4) application fails to start with error java.lang.ClassNotFoundException: ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP</p>
<pre><code>ERROR in ch.qos.logback.core.model.processor.ImplicitModelHandler - Could not create component [timeBasedFileNamingAndTriggeringPolicy] of type [ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP] java.lang.ClassNotFoundException: ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP```
</code></pre>
",
tags:"<java><spring-boot><logging>",
score:7,
creationDate:2024-09-24 11:26:10,
creationDate:2024-09-24 11:26:10,
score:28,
acceptedResponderReputation:2052,
acceptedResponder:3093796,
QuestionerReputation:2052,
Questioner:3093796}
{title:"How to use env in index.html within a react vite application",
id:"https://stackoverflow.com/questions/76689458",
body:"<p>I'm trying to access an env variable from my index.html file.</p>
<p>The code below seems to work in CRA but doesnt work with my vite, react project setup</p>
<p><code>const APP_ID = '%REACT_APP_ID%'</code></p>
<pre><code>    &lt;script&gt;
      //Set your APP_ID
      const APP_ID = '%REACT_APP_ID%'

     ....

    &lt;/script&gt;

</code></pre>
<p>my vite config file</p>
<pre><code>import { defineConfig, splitVendorChunkPlugin } from 'vite'
import react from '@vitejs/plugin-react'
import EnvironmentPlugin from 'vite-plugin-environment'

// https://vitejs.dev/config/
export default defineConfig({
  plugins: [
    splitVendorChunkPlugin(),
    react(),
    EnvironmentPlugin('all', { prefix: 'REACT_APP_' }),
  ],
})

</code></pre>
",
tags:"<javascript><reactjs><environment-variables><vite>",
score:21,
creationDate:2023-07-14 16:10:27,
creationDate:2023-07-14 18:11:37,
score:29,
acceptedResponderReputation:89139,
acceptedResponder:9513184,
QuestionerReputation:231,
Questioner:10007799}
{title:"java.lang.ClassNotFoundException: org.apache.xml.serializer.OutputPropertiesFactory is thrown after upgrading xalan to 2.7.3",
id:"https://stackoverflow.com/questions/76555759",
body:"<p>I have java code that exports some data into an excel file. ( I only included below what I think are the relevant parts in the code)</p>
<p>Everything worked fine but then I upgraded my xalan from 2.7.2 to 2.7.3 and it stoped working.
the reason - java.lang.ClassNotFoundException: org.apache.xml.serializer.OutputPropertiesFactory</p>
<p>The exception is thrown at the 'wb.write(fileOutputStream);' line under the export() method</p>
<pre><code>import org.apache.logging.log4j.Level;
import org.apache.poi.ss.usermodel.*;
import org.apache.poi.xssf.streaming.SXSSFSheet;
import org.apache.poi.xssf.streaming.SXSSFWorkbook;
     
private Workbook wb;

            private void init(String targetPath, String fileName, ExcelExportType exportType) {
                exportedFile = new File(Paths.get(targetPath, fileName  + FILE_EXTENSION).toString());
                try {
                    fileOutputStream = new FileOutputStream(exportedFile);
                    // if file doesn't exists, then create it
                    if (!exportedFile.exists()) {
                        exportedFile.createNewFile();
                    }
                } catch (Exception e) {
                    throw new RuntimeException(&quot;Init failed. File &quot; + exportedFile.getName() + &quot; cannot be found&quot;);
                }
        
                switch (exportType) {
                    case MS_EXCEL_2007_AND_UP_STREAMING:
                        wb = new SXSSFWorkbook();
                        break;
                    default:
                        throw new RuntimeException(&quot;Unsupported export type&quot;);
                }
        
                wb.setMissingCellPolicy(Row.MissingCellPolicy.CREATE_NULL_AS_BLANK);
                creationHelper = wb.getCreationHelper();
                sheet = wb.createSheet(getSheetName());
                Font font = wb.createFont();
                font.setFontName(DEFAULT_FONT_NAME);
        
                if(sheet instanceof SXSSFSheet) {
                    ((SXSSFSheet) sheet).trackAllColumnsForAutoSizing();
                }
        
                format = wb.createDataFormat();
        
                headerFont = wb.createFont();
                headerFont.setFontName(DEFAULT_FONT_NAME);
                headerFont.setBold(true);
        
                cellFont = wb.createFont();
                cellFont.setFontName(DEFAULT_FONT_NAME);
        
            }
        
        public File export() {
            double factor = 390;
            for (int i = 0; i &lt; numOfColumns; i++) {
                sheet.autoSizeColumn(i);
                sheet.setColumnWidth(i, getWidth((int)(maxColumnWidth.get(i) * factor)));
            }
        
            sheet.createFreezePane(0,1);
        
            try {
                wb.write(fileOutputStream);
                fileOutputStream.close();
                wb.close();
            } catch (IOException e) {
                e.printStackTrace();
            }
        
            return exportedFile;
        }
</code></pre>
<p>according to the link,
<a href=""https://xalan%202.7.3"" rel=""noreferrer"">https://xalan.apache.org/xalan-j/</a></p>
<p>Xalan-Java Version 2.7.3 works with Xerces-Java, and the distribution includes xercesImpl.jar from Xerces-Java 2.12.2.</p>
<p>The Xalan-Java implementation is in xalan.jar and serializer.jar. The SAX, DOM, and JAXP 1.3 interfaces are in xml-apis.jar.</p>
<p>so maybe I need to implement the code in a different way?
any idea how can I solve this?</p>
",
tags:"<java><excel><xalan>",
score:13,
creationDate:2023-06-26 10:20:23,
creationDate:2023-06-26 11:19:39,
score:29,
acceptedResponderReputation:815,
acceptedResponder:7523723,
QuestionerReputation:815,
Questioner:7523723}
{title:"How to make /usr/libexec/java_home find JDK installed using SDKMAN on MacOS?",
id:"https://stackoverflow.com/questions/76523553",
body:"<p>I am making iOS apps in Kotlin, which relies on having a Script Build Phase calling Gradle from XCode. With a JDK installed using SDKMAN, it does not work and produces this error:</p>
<pre><code>The operation couldn’t be completed. Unable to locate a Java Runtime.
Please visit http://www.java.com for information on installing Java.
</code></pre>
<p>The JDK installed with SDKMAN is working correctly on my system, SDKMAN sets <code>JAVA_HOME</code> to <code>/Users/{user}/.sdkman/candidates/java/current</code> by sourcing its <code>sdkman-init.sh</code> script from <code>.bash_profile</code> or <code>.zshrc</code>. But XCode Script Phase uses <code>/bin/sh</code>, and it does not seem to read these kinds of files.</p>
<p>I tried exporting <code>JAVA_HOME</code> in files like <code>~/.profile</code>, <code>/etc/profile</code>, etc. with no result.</p>
<p>After some research, I found that this output is from a call to <code>/usr/libexec/java_home</code> producing no result. I also found that manually calling <code>/usr/libexec/java_home</code> inside a Terminal where <code>JAVA_HOME</code> is set correctly does not pick it up, so toying with <code>JAVA_HOME</code> is useless in this case: it just doesn't read it.</p>
<p>So, how do you make the <code>/usr/libexec/java_home</code> command find JDK installed using SDKMAN on MacOS?</p>
",
tags:"<xcode><sh><java-home><sdkman>",
score:13,
creationDate:2023-06-21 12:58:49,
creationDate:2023-06-21 12:58:49,
score:30,
acceptedResponderReputation:768,
acceptedResponder:4996236,
QuestionerReputation:768,
Questioner:4996236}
{title:"x = x*0.90; gives lossy conversion error. x*=0.90; does not. Why?",
id:"https://stackoverflow.com/questions/77624311",
body:"<p>I have written the code:</p>
<pre><code>int x = 18;
x *= 0.90; 
System.out.println(x);
</code></pre>
<p>This code printed <code>16</code></p>
<p>However, when I wrote</p>
<pre><code>int x = 18;
x = x * 0.90; 
System.out.println(x);
</code></pre>
<p>it gave me the following error: <code>incompatible types: possible lossy conversion from double to int </code></p>
<p>I expected both of these code examples to result in the exact same error as <code>x *= y;</code> is the same as <code>x = x * y;</code>, but <code>x *= 0.90;</code> somehow works and <code>x = x * 0.90;</code> does not. Why is this the case?</p>
",
tags:"<java><integer><double><multiplication><assignment-operator>",
score:25,
creationDate:2023-12-08 04:15:23,
creationDate:2023-12-08 04:23:42,
score:30,
acceptedResponderReputation:102795,
acceptedResponder:768644,
QuestionerReputation:269,
Questioner:23063283}
{title:"Why does pattern matching with switch on InetAddress fail with 'does not cover all possible input values'?",
id:"https://stackoverflow.com/questions/79301858",
body:"<p>In Java 21 and 23, <a href=""https://docs.oracle.com/en/java/javase/23/docs/api/java.base/java/net/InetAddress.html"" rel=""noreferrer""><code>java.net.InetAddress</code></a> is declared</p>
<pre class=""lang-java prettyprint-override""><code>public sealed class InetAddress implements Serializable permits Inet4Address, Inet6Address {
</code></pre>
<p>However, the following code:</p>
<pre><code>switch (addr) {
     case Inet4Address a -&gt; ...;
     case Inet6Address a -&gt; ...;
};
</code></pre>
<p>does not compile with:</p>
<pre><code>the switch expression does not cover all possible input values
</code></pre>
<p>Am I missing something, or is this a Java bug?</p>
",
tags:"<java><java-21><java-23>",
score:21,
creationDate:2024-12-22 22:56:21,
creationDate:2024-12-22 23:07:06,
score:31,
acceptedResponderReputation:20185,
acceptedResponder:4216641,
QuestionerReputation:23505,
Questioner:1151521}
{title:"Next.js always fail at downloading fonts from Google Fonts",
id:"https://stackoverflow.com/questions/76478043",
body:"<p>I've created a new Next.js project for the first time using <code>create-next-app</code>, and I've successfully run it with <code>npm run dev</code>.</p>
<p>The problem is that everytime Next.js starts, it says:</p>
<pre><code>FetchError: request to https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2 failed, reason: 
    at ClientRequest.&lt;anonymous&gt; (C:\Users\user\Desktop\documents\node_modules\next\dist\compiled\node-fetch\index.js:1:65756)
    at ClientRequest.emit (node:events:511:28)
    at TLSSocket.socketErrorListener (node:_http_client:495:9)
    at TLSSocket.emit (node:events:511:28)
    at emitErrorNT (node:internal/streams/destroy:151:8)
    at emitErrorCloseNT (node:internal/streams/destroy:116:3)
    at process.processTicksAndRejections (node:internal/process/task_queues:82:21) {
  type: 'system',
  errno: 'ENETUNREACH',
  code: 'ENETUNREACH'
}
- error Failed to download `Inter` from Google Fonts. Using fallback font instead.
</code></pre>
<p>My goal is to make Next.js use the actual font not the fallback one.</p>
<p>I don't know why this happens as I didn't change anything in Next.js yet. Even opening the URL <code>https://fonts.gstatic.com/s/inter/v12/UcC73FwrK3iLTeHuS_fvQtMwCp50KnMa1ZL7W0Q5nw.woff2</code> in my browser works well so I guess it's not a networking issue.</p>
<p>I tried to search in <a href=""https://nextjs.org/docs"" rel=""noreferrer"">Next.js</a> documentation and I didn't find any duplicates here.</p>
<p>Here's <code>layout.tsx</code> that's located inside <code>src/app/</code>:</p>
<pre class=""lang-tsx prettyprint-override""><code>import './globals.css'
import { Inter } from 'next/font/google'

const inter = Inter({ subsets: ['latin'] })

export const metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
}

export default function RootLayout({
  children,
}: {
  children: React.ReactNode
}) {
  return (
    &lt;html lang=&quot;en&quot;&gt;
      &lt;body className={inter.className}&gt;{children}&lt;/body&gt;
    &lt;/html&gt;
  )
}
</code></pre>
<p>Also, I'm running Node version <code>20.3.0</code> and npm version <code>9.4.1</code> with Next.js <code>13.4</code>. Basically the latest at the time of writing this question.</p>
",
tags:"<javascript><typescript><next.js><google-fonts>",
score:20,
creationDate:2023-06-14 22:50:24,
creationDate:2023-06-15 17:30:17,
score:31,
acceptedResponderReputation:5009,
acceptedResponder:14945696,
QuestionerReputation:5009,
Questioner:14945696}
{title:"Decode ReadableStream object nextjs 13 api route",
id:"https://stackoverflow.com/questions/75899415",
body:"<p>I'm sending a value to my server side code that isn't being read correctly. I'm using the NextJS experimental App directory</p>
<pre><code>//src/app/api/auth/route.js

export async function POST(req, res) {
  console.log(req.body);
  const { address } = req.body;
  const isAuthenticated = await checkBalance(address, threshold);
  if (isAuthenticated) {
    return new Response(&quot;Authorized&quot;, { status: 200 });
  } else if (isAuthenticated == false) {
    return new Response(&quot;Unauthorized&quot;, { status: 401 });
  } else if (isAuthenticated == undefined) {
    return new Response(&quot;Error&quot;, { status: 500 });
  }
}
</code></pre>
<p>console log is: <code>ReadableStream { locked: false, state: 'readable', supportsBYOB: false }</code></p>
<p>const address is <code>undefined</code>.</p>
<p>This is the api call:</p>
<pre><code>const response = await fetch(&quot;/api/auth&quot;, {
          method: &quot;POST&quot;,
          headers: {
            &quot;Content-Type&quot;: &quot;application/json&quot;,
          },
          body: JSON.stringify({ address: walletAddress }),
        });
        const data = await response.json();
</code></pre>
<p>I read in another answer to a similar question that nextjs12+ is supposed to parse the request automatically- what am I doing wrong? I'm assuming that nextjs has a protocol in place for decoding the ReadableStream but I can't find anything in the docs or examples for this, maybe because there is a framework agnostic method for decoding the object that is unknown to me?</p>
<p>Thank you in advance.</p>
",
tags:"<javascript><next.js><fetch-api><next.js13>",
score:8,
creationDate:2023-03-31 14:00:48,
creationDate:2023-04-19 00:42:50,
score:31,
acceptedResponderReputation:326,
acceptedResponder:19756313,
QuestionerReputation:618,
Questioner:15214059}
{title:"How to fetch data server-side in the latest Next.js? Tried getStaticProps but it's not running and getting undefined",
id:"https://stackoverflow.com/questions/76267351",
body:"<p>I am working on a Django Rest Framework with Next.js, and I am getting stuck with fetching data from the API. I have data in this url <code>http://127.0.0.1:8000/api/campaigns</code> and when I visit the url I see the data.</p>
<p>The problem is when I fetch and console the data with Next.js, I get <code>undefined</code>. Also when I try mapping the data, I get the error:</p>
<blockquote>
<p>Unhandled Runtime Error</p>
<p>Error: Cannot read properties of undefined (reading 'map')</p>
</blockquote>
<p>Here is my <code>Index.js</code> file where the data fetching is done:</p>
<pre><code>import React from 'react'

export default function Index ({data}) {
  console.log(data)
  return (
    &lt;div&gt;
      &lt;main&gt;
        &lt;h1&gt;Available Campaigns&lt;/h1&gt;
        {data.map((element) =&gt; &lt;div key={element.slug}&gt;
          &lt;div&gt;
            &lt;div&gt;
              &lt;img src={element.logo} height={120} width={100} alt=&quot;image&quot; /&gt;
            &lt;/div&gt;
            &lt;div&gt;&lt;/div&gt;
          &lt;/div&gt;

        &lt;/div&gt;)}
      &lt;/main&gt;
    &lt;/div&gt;
  );
}

export async function getStaticProps() {
  const response = await fetch(&quot;http://127.0.0.1:8000/api/campaigns&quot;);
  const data = await response.json();
  return {
    props: {
      data: data
    },
  }
}
</code></pre>
<p>Here is a screenshot of the data I am getting when I visit the URL:</p>
<p><a href=""https://i.sstatic.net/4vU7y.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/4vU7y.png"" alt=""Image"" /></a></p>
<p>Here is the file structure for the Next.js app inside the front end:</p>
<p><a href=""https://i.sstatic.net/MnfjC.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/MnfjC.png"" alt=""File Structure"" /></a></p>
<p>Also, note that I am using the latest version of Next.js. Any help will be highly appreciated. Thanks.</p>
",
tags:"<javascript><reactjs><django><rest><next.js>",
score:27,
creationDate:2023-05-16 22:04:28,
creationDate:2023-05-17 13:38:35,
score:31,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:436,
Questioner:20947319}
{title:"Does 'use client' in Next.js 13 root layout make whole routes client component?",
id:"https://stackoverflow.com/questions/74992326",
body:"<p>I was trying Nextjs 13 with Next-auth and Apollo Client. For that we wrap the root layout with the providers but we also need <code>'use client'</code> to be specified. I have no problem with the libraries.</p>
<p><strong>But what is confusing to me is that nextjs 13 app dir uses a server-first approach by default, and if I treat the root layout as a client, does it make all the pages client? Because, afak, the root layout is the parent of whole routes</strong></p>
<p><a href=""https://github.com/vercel/next.js/discussions/44648"" rel=""noreferrer"">Github discussion</a></p>
",
tags:"<javascript><reactjs><next.js><server-side-rendering><next.js13>",
score:28,
creationDate:2023-01-03 10:49:12,
creationDate:2023-02-17 06:17:04,
score:32,
acceptedResponderReputation:49182,
acceptedResponder:10262805,
QuestionerReputation:1469,
Questioner:16945230}
{title:"TypeError: createContext only works in Client Components. Add the ""use client"" directive at the top of the file to use it",
id:"https://stackoverflow.com/questions/76181096",
body:"<p>I created a brand new Next.js application that uses the <code>app</code> folder. I then installed Materiel UI and started using the <a href=""https://mui.com/material-ui/getting-started/usage/"" rel=""noreferrer"">example given on the doc</a>. But I'm getting this error:</p>
<blockquote>
<p>TypeError: createContext only works in Client Components. Add the &quot;use client&quot; directive at the top of the file to use it.</p>
</blockquote>
<p>Here is the example from the doc in my code:</p>
<pre class=""lang-js prettyprint-override""><code>import Button from &quot;@mui/material/Button&quot;;

export default function Home() {
  return (
    &lt;div&gt;
      &lt;Button variant=&quot;contained&quot;&gt;Hello World&lt;/Button&gt;
    &lt;/div&gt;
  );
}
</code></pre>
<p>I'm expecting to have the button displayed on my page. I understand that adding <code>&quot;use client&quot;</code> at the top will fix the error, but I want my page to be rendred on the server.</p>
",
tags:"<javascript><reactjs><next.js><material-ui>",
score:20,
creationDate:2023-05-05 10:12:43,
creationDate:2023-05-05 11:25:57,
score:32,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:203,
Questioner:21824922}
{title:"Mongoose stopped accepting callbacks for some of its functions",
id:"https://stackoverflow.com/questions/75586474",
body:"<p>I've been using callbacks for .save() and .findOne() for a few days now and just today I encounter these errors:</p>
<pre><code>throw new MongooseError('Model.prototype.save() no longer accepts a callback')

MongooseError: Model.prototype.save() no longer accepts a callback
</code></pre>
<p>and</p>
<p><code>MongooseError: Model.findOne() no longer accepts a callback</code></p>
<p>It's really awkward given that callbacks are still accepted in the docs at least for <a href=""https://mongoosejs.com/docs/api/model.html#model_Model-findOne"" rel=""noreferrer"">.findOne()</a>.</p>
<pre><code>app.post(&quot;/register&quot;, (req, res) =&gt; {
    const newUser = new User({
        email: req.body.username,
        password: req.body.password
    });

    newUser.save((err) =&gt; {
        if (err) console.log(err)
        else res.render(&quot;secrets&quot;);
    });
});
</code></pre>
<p>This is what used to work for me, using express and mongoose. Please let me know how to fix it.</p>
",
tags:"<javascript><mongodb><express><mongoose>",
score:22,
creationDate:2023-02-27 23:18:28,
creationDate:2023-02-28 11:38:58,
score:33,
acceptedResponderReputation:461,
acceptedResponder:12786680,
QuestionerReputation:382,
Questioner:20976629}
{title:"enablePendingPurchases was deprecated in version 7 of the google billing library",
id:"https://stackoverflow.com/questions/78604015",
body:"<p>When updating the Google Billing Library to version 7 it marks the <code>enablePendingPurchases()</code> method as obsolete.</p>
<p>Reading <a href=""https://developer.android.com/reference/com/android/billingclient/api/BillingClient.Builder#enablePendingPurchases(com.android.billingclient.api.PendingPurchasesParams)"" rel=""noreferrer"">the documentation</a> it seems we now need to pass a <code>PendingPurchasesParams</code> object as a parameter to the new <code>enablePurchases()</code> method.</p>
<p>Reading <a href=""https://developer.android.com/reference/com/android/billingclient/api/PendingPurchasesParams"" rel=""noreferrer"">the documentation for <code>PendingPurchasesParams</code></a> it only has the <code>newBuilder</code> method so I don't know if I could simply use:</p>
<pre><code>billingClient = BillingClient.newBuilder(Settings.this)
                    .setListener(purchasesUpdatedListener)
                    .enablePendingPurchases(PendingPurchasesParams.newBuilder().build())
                    .build();
</code></pre>
<p>Or how should I handle this situation?</p>
",
tags:"<java><android><android-billing><play-billing-library>",
score:11,
creationDate:2024-06-10 18:38:26,
creationDate:2024-06-12 07:15:17,
score:33,
acceptedResponderReputation:1057,
acceptedResponder:3572108,
QuestionerReputation:695,
Questioner:13452141}
{title:"Not able to change the title with metadata when using 'use client' in Next.js",
id:"https://stackoverflow.com/questions/76445050",
body:"<p>I have a <code>/demo</code> route in my Next.js <code>13</code> application, and it is using the <code>App Router</code>. But I am unable to change the title of the page (the current title I am getting is localhost:3000/demo).</p>
<p>I have the following code.</p>
<p><code>/demo/page.js</code>:</p>
<pre><code>'use client'

 ....

export const metadata = {
  title: 'Demo - ModalJS',
};

export default Demo(){
 return ...
}
</code></pre>
<p>The <code>'use client'</code> is creating the problem, because when I remove it Title changes, but the problem is that I cannot remove it because this component uses <code>onClick</code> which gives an error without ''use client`'</p>
<p>The code inside <code>Demo</code> is as follows:</p>
<pre><code>export default function Demo() {
    

    const [title, setTitle] = useState(&quot;Title of your modal&quot;);
    const [desc, setDesc] = useState(&quot;You description goes here&quot;);
    const [theme, setTheme] = useState(&quot;light&quot;);

    const handleclick = ()=&gt;{
        const modal = new ModalJS( ... stuff related to this library)
        
        modal.show()       //trigger this when you want to show modal
    }


    return &lt;section id={styles.demosection}&gt;
        &lt;div className={styles.demotitle}&gt;Demo&lt;/div&gt;
        &lt;div className={styles.form}&gt;
            &lt;label htmlFor=&quot;title&quot; className={styles.label}&gt;Title:&lt;/label&gt; &lt;br /&gt;
            &lt;input type=&quot;text&quot; name=&quot;title&quot; id={styles.title} className={styles.input} value={title} onChange={(e)=&gt;setTitle(e.target.value)}/&gt;
&lt;br /&gt;&lt;br /&gt;
            &lt;label htmlFor=&quot;desc&quot; className={styles.label}&gt;Description:&lt;/label&gt; &lt;br /&gt;
            &lt;input type=&quot;text&quot; name=&quot;desc&quot; id={styles.desc} className={styles.input} value={desc} onChange={(e)=&gt;setDesc(e.target.value)}/&gt;
&lt;br /&gt;&lt;br /&gt;
            &lt;label htmlFor=&quot;theme&quot; className={styles.label}&gt;Theme:&lt;/label&gt; &lt;br /&gt;
            &lt;select type=&quot;select&quot; name=&quot;theme&quot; id={styles.theme} className={styles.input} onChange={(e)=&gt;setTheme(e.target.value)}&gt;
                &lt;option value=&quot;light&quot;&gt;light&lt;/option&gt;
                &lt;option value=&quot;dark&quot;&gt;dark&lt;/option&gt;
            &lt;/select&gt;
&lt;br /&gt;&lt;br /&gt;

        &lt;/div&gt;
        &lt;div className={styles.showbtndiv}&gt;
            &lt;button className={styles.showbtn} onClick={()=&gt;handleclick()}&gt;Show Modal&lt;/button&gt;
        &lt;/div&gt;
    &lt;/section&gt;
}
</code></pre>
",
tags:"<javascript><reactjs><next.js>",
score:25,
creationDate:2023-06-10 06:51:30,
creationDate:2023-06-10 08:23:32,
score:33,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:444,
Questioner:18285042}
{title:"gradle clean fails with ""GradleException: Failed to create Jar file"",
id:"https://stackoverflow.com/questions/77225378",
body:"<p>I'm seeing a very strange problem with gradle.</p>
<p>When I run any command (see clean below), gradle fails with a concurrent exception.</p>
<p>This is happening since my latest changes.  Rolling back to a previous commit works fine.</p>
<p>The changes are too numerous to describe here but in summary I've restructured the build a bit, based on another project which is working.  And when I say based on, I mean I have simply copied build.gradle, settings.gradle and gradle.properties from that other project.  None of the changes relate to jackson core.</p>
<pre><code>$ ./gradlew clean

FAILURE: Build failed with an exception.

* What went wrong:
A problem occurred configuring root project 'myservice'.
&gt; java.util.concurrent.ExecutionException: org.gradle.api.GradleException: Failed to create Jar file C:\Users\me\.gradle\caches\jars-9\b868ab677410c01cf9b5a0e29a035e73\jackson-core-2.15.2.jar.
    
BUILD FAILED in 2s
</code></pre>
<p>I tried removing the lock file but that failed:</p>
<pre><code>$ rm -rf ~/.gradle/caches/jars-9/*lock
rm: cannot remove '/c/Users/me/.gradle/caches/jars-9/jars-9.lock': Device or resource busy
</code></pre>
<p>So I ran <code>./gradlew --stop</code> which stopped 2 daemons, and I was able to remove the lock file.  But the <code>clean</code> still fails with the same error.</p>
<p>I've tried cleaning the <code>.gradle</code> directory in the project, and I've also tried checking out a new copy of the project.  Same result.</p>
<p>So although it seems like a cache error, I can fix it by rolling back to a previous commit (without touching the cache) and if I clear the cache, that doesn't fix it.</p>
<p>What's going wrong and how do I fix it?</p>
",
tags:"<java><gradle>",
score:22,
creationDate:2023-10-03 20:34:48,
creationDate:2023-10-04 09:59:13,
score:33,
acceptedResponderReputation:2384,
acceptedResponder:1107537,
QuestionerReputation:2384,
Questioner:1107537}
{title:"Stripe - Webhook payload must be provided as a string or a Buffer",
id:"https://stackoverflow.com/questions/76281195",
body:"<p>I am trying to code a subscription system with stripe. My following code is mostly copied from the stripe docs, but it always shows me this error:</p>
<pre><code>Webhook signature verification failed. Webhook payload must b
e provided as a string or a Buffer (https://nodejs.org/api/buffer.html) instance representing the _raw_ request body.Payload was provided as a parsed JavaScript object instead.
Signature verification is impossible without access to the original signed material.
Learn more about webhook signing and explore webhook integration 
examples for various frameworks at https://github.com/stripe/stripe-node#webhook-signing
</code></pre>
<p>This is my code written in javascript:</p>
<pre><code>app.post(
  '/webhook',
  express.raw({ type: 'application/json' }),
  (request, response) =&gt; {
    let event = request.body;

    const endpointSecret = 'whsec_.....';

    if (endpointSecret) {

      const signature = request.headers['stripe-signature'];
      try {
        event = stripe.webhooks.constructEvent(
          request.body,
          signature,
          endpointSecret
        );
      } catch (err) {
        console.log(`⚠️  Webhook signature verification failed.`, err.message);
        return response.sendStatus(400);
      }
    }
    let subscription;
    let status;

    switch (event.type) {
      case 'customer.subscription.created':
        subscription = event.data.object;
        status = subscription.status;
        console.log(`Subscription status is ${status}.`);

        break;
      default:
        console.log(`Unhandled event type ${event.type}.`);
    }
    response.send();
  }
);
</code></pre>
<p>Does anyone know what I am doing wrong? I have literally been searching the internet for an hour now and cant find anything. Thanks in advance!</p>
",
tags:"<javascript><node.js><express><stripe-payments>",
score:26,
creationDate:2023-05-18 13:14:26,
creationDate:2023-05-19 10:06:46,
score:34,
acceptedResponderReputation:401,
acceptedResponder:16242713,
QuestionerReputation:397,
Questioner:15216009}
{title:"Angular NG5002: @for loop must have a ""track"" expression",
id:"https://stackoverflow.com/questions/77447092",
body:"<p>Angular 17 introduced a new control flow syntax moving from</p>
<pre class=""lang-html prettyprint-override""><code>&lt;div *ngFor=&quot;let item of items&quot;&gt;&lt;/div&gt;
</code></pre>
<p>to</p>
<pre class=""lang-js prettyprint-override""><code>@for (item of items) {
    &lt;div&gt;&lt;/div&gt;
}
</code></pre>
<p>When directly translating my loops, I get the following error:</p>
<pre><code> NG5002: @for loop must have a &quot;track&quot; expression
</code></pre>
",
tags:"<javascript><angular>",
score:26,
creationDate:2023-11-08 15:54:05,
creationDate:2023-11-08 15:54:05,
score:35,
acceptedResponderReputation:2859,
acceptedResponder:4374616,
QuestionerReputation:2859,
Questioner:4374616}
{title:"Exclude a page from the Next.js root layout in the app folder",
id:"https://stackoverflow.com/questions/76251099",
body:"<p>I have a root layout <code>/app/layout.tsx</code> and authentication pages. I want the authentication pages NOT to get the root layout, and I defined a custom layout for them in the <code>/app/auth/layout.tsx</code> file.</p>
<p>But the root layout(<code>/app/layout.tsx</code>) wraps the custom layout(<code>/app/auth/layout.tsx</code>). How can I exclude the auth pages and sub-pages from getting the root layout?</p>
<p>I tried putting the auth dir name in <code>()</code> as <code>(auth)</code> but not working. Most of the solution are for the <strong>Pages Router</strong> and doesn't work for <strong>App Router</strong>.</p>
<p>I'm using Next.js <code>13.4</code>.</p>
",
tags:"<javascript><reactjs><next.js>",
score:35,
creationDate:2023-05-15 05:29:14,
creationDate:2023-05-15 06:58:06,
score:35,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:2402,
Questioner:12539935}
{title:"How to replace the deprecated kotlinOptions in a java-library & kotlin module?",
id:"https://stackoverflow.com/questions/77363060",
body:"<p>Within my Android application project I am using the following <a href=""https://github.com/EventFahrplan/EventFahrplan/blob/dd9132cda0d4fd89935291ec0edcbb732b641fef/engelsystem/build.gradle"" rel=""noreferrer"">Gradle (Groovy) configuration</a> for a library module:</p>
<pre><code>// build.gradle

apply plugin: &quot;java-library&quot;
apply plugin: &quot;kotlin&quot;

dependencies {
    api Libs.engelsystem
    implementation(Libs.retrofit) {
        exclude group: &quot;com.squareup.okio&quot;, module: &quot;okio&quot;
    }

    testImplementation Libs.junit
    testImplementation Libs.kotlinCoroutinesTest
    testImplementation Libs.mockitoKotlin
    testImplementation Libs.okhttpMockWebServer
    testImplementation Libs.retrofitConverterMoshi
    testImplementation Libs.truth
}

sourceCompatibility = Config.compatibleJavaVersion
targetCompatibility = Config.compatibleJavaVersion

compileKotlin {
    kotlinOptions {
        jvmTarget = Config.compatibleJavaVersion // is set to JavaVersion.VERSION_11
        freeCompilerArgs += [
                &quot;-opt-in=kotlin.RequiresOptIn&quot;
        ]
    }
}
</code></pre>
<p>Android Studio Giraffe / Lint notifies me that <code>kotlinOptions</code> is <strong>deprecated</strong>.</p>
<p><a href=""https://i.sstatic.net/o83ec.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/o83ec.png"" alt=""Screenshot of the quick tip"" /></a></p>
<p>There is no quick fix to apply. How can I replace the notation correctly? It seems there is a different syntax for this kind of library module. There is no deprecation warning in a <code>com.android.library</code> module nor in a <code>com.android.application</code> module. Both use the <code>kotlin-android</code> plugin if that is an important difference.</p>
<h1>Potential answer</h1>
<blockquote>
<p>... consider them as non-officially deprecated ...</p>
</blockquote>
<p>Source: <a href=""https://youtrack.jetbrains.com/issue/KT-27301/Expose-compiler-flags-via-Gradle-lazy-properties#focus=Comments-27-6565858.0-0"" rel=""noreferrer"">https://youtrack.jetbrains.com/issue/KT-27301/Expose-compiler-flags-via-Gradle-lazy-properties#focus=Comments-27-6565858.0-0</a></p>
<h1>Related</h1>
<ul>
<li><a href=""https://github.com/JetBrains/kotlin/commit/a3ac5b91f62b095f6dac40837e4636980f26ebde"" rel=""noreferrer"">JetBrains/kotlin: Update Gradle plugin api to use compiler options (19.09.2022)</a></li>
<li><a href=""https://youtrack.jetbrains.com/issue/KT-27301"" rel=""noreferrer"">JetBrains/YouTrack/KT-27301: Expose compiler flags via Gradle lazy properties</a></li>
<li><a href=""https://stackoverflow.com/questions/41113268/how-to-set-up-kotlins-byte-code-version-in-gradle-project-to-java-8"">How to set up Kotlin&#39;s byte code version in Gradle project to Java 8?</a></li>
</ul>
",
tags:"<android><kotlin><groovy><deprecated><java-module>",
score:20,
creationDate:2023-10-25 21:43:30,
creationDate:2024-01-30 01:12:57,
score:35,
acceptedResponderReputation:55517,
acceptedResponder:950427,
QuestionerReputation:51804,
Questioner:356895}
{title:"android 13 Bad notification for startForeground",
id:"https://stackoverflow.com/questions/76149005",
body:"<p>Each time I execute my app I obtain a &quot;Bad notification for startForeground&quot; error</p>
<pre><code>E/AndroidRuntime: FATAL EXCEPTION: main
    Process: com.example.pennskanvtic, PID: 17447
    android.app.RemoteServiceException$CannotPostForegroundServiceNotificationException:
Bad notification for startForeground
        at android.app.ActivityThread.throwRemoteServiceException(ActivityThread.java:1978)
        at android.app.ActivityThread.-$$Nest$mthrowRemoteServiceException(Unknown Source:0)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2237)
        at android.os.Handler.dispatchMessage(Handler.java:106)
        at android.os.Looper.loopOnce(Looper.java:201)
        at android.os.Looper.loop(Looper.java:288)
        at android.app.ActivityThread.main(ActivityThread.java:7884)
        at java.lang.reflect.Method.invoke(Native Method)
        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:936)`
</code></pre>
<p>My service only start a timer and display notification (I try with setChannelId inside NotificationCompat.Builder without any change) :</p>
<pre class=""lang-java prettyprint-override""><code>public class MyService extends Service {

    private int i_NotifID = 1336;
    private String CHANNEL_ID = &quot;MyServiceChannel&quot;;


    private CountDownTimer mCptRebours;
    private Notification notification;
    private NotificationCompat.Builder builder;
    private NotificationManagerCompat notificationManager;

    private long l_TimerTime_ms;

    private MainActivity mainActivity;

    @Override
    public void onCreate() {

        super.onCreate();

        //Resources res = this.getResources();

        builder = new NotificationCompat.Builder(this, CHANNEL_ID);
        builder.setSmallIcon(R.drawable.ic_launcher);
        builder.setContentTitle(&quot;PennSkanvTic...Tac...&quot;);
        builder.setContentText(&quot;waiting for start...&quot;);
        //builder.setChannelId(CHANNEL_ID);
        //builder.setOngoing(true);
        //builder.setPriority(Notification.PRIORITY_HIGH);

        notificationManager = NotificationManagerCompat.from(this);
        //notificationManager.notify(i_NotifID, builder.build());

        try {
            Thread.sleep(1000);
        } catch (InterruptedException e) {
            e.printStackTrace();
        }
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) {

        l_TimerTime_ms = intent.getLongExtra(&quot;l_TimerTime_ms&quot;, 55000);
        builder.setContentText(Long.toString(l_TimerTime_ms / 1000));

        mainActivity = MainActivity.getMainActivity();

        startForeground(i_NotifID, builder.build());
        startTimer();

        return START_NOT_STICKY;
    }

    @Override
    public void onDestroy() {

        super.onDestroy();
    }

    @Nullable
    @Override
    public IBinder onBind(Intent intent) {

        return null;
    }

    private void startTimer() {

        mCptRebours = new CountDownTimer(l_TimerTime_ms, 1000) {
            @Override
            public void onTick(long l_RemainingTime_ms) {

                // Update notification content
                builder.setContentText(Long.toString(l_RemainingTime_ms / 1000));
                notificationManager.notify(i_NotifID, builder.build());

                // Update frontend (MainActivity value)
                mainActivity.UpdateFrontend(l_RemainingTime_ms);
            }

            @Override
            public void onFinish() {

                //Log.d(&quot;MonApplication&quot;, &quot;MyForegroundService onFinish&quot;);
            }
        }.start();
    }
}
</code></pre>
<p>My MainActivity ask for permission inside onStart() :</p>
<pre class=""lang-java prettyprint-override""><code>        String[] permissionArray = {Manifest.permission.FOREGROUND_SERVICE, Manifest.permission.VIBRATE, Manifest.permission.POST_NOTIFICATIONS};
        ActivityCompat.requestPermissions(this, permissionArray, 0);
</code></pre>
<p>and start the service :</p>
<pre class=""lang-java prettyprint-override""><code>        Intent serviceIntent = new Intent(MainActivity.this, MyService.class);
        serviceIntent.putExtra(&quot;l_TimerTime_ms&quot;, mValCompteReboursConfig);
        ContextCompat.startForegroundService(MainActivity.this, serviceIntent);`
</code></pre>
<p>My AndroidManifest.xml declare the service and permission :</p>
<pre class=""lang-xml prettyprint-override""><code>    &lt;uses-permission android:name=&quot;android.permission.FOREGROUND_SERVICE&quot; /&gt;
    &lt;uses-permission android:name=&quot;android.permission.VIBRATE&quot; /&gt;
    &lt;uses-permission android:name=&quot;Manifest.permission.POST_NOTIFICATIONS&quot;/&gt;

        &lt;service
            android:name=&quot;.MyService&quot;
            android:enabled=&quot;true&quot;
            android:exported=&quot;true&quot;/&gt;`
</code></pre>
<p>And I ask for a SDK version 33 on my build.gradle file :</p>
<pre><code>   defaultConfig {
        applicationId &quot;com.example.pennskanvtic&quot;
        minSdk 21
        targetSdk 33
        compileSdk 33
        targetSdkVersion 33
        compileSdkVersion 33
        versionCode 1
        versionName &quot;1.0&quot;

        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;
    }
</code></pre>
<p>It is all what I find to try. I have now no idea why I still have an error when launching my foreground service.</p>
",
tags:"<java><android-notifications><android-13>",
score:11,
creationDate:2023-05-01 17:47:39,
creationDate:2023-05-07 09:56:12,
score:35,
acceptedResponderReputation:587,
acceptedResponder:9649214,
QuestionerReputation:587,
Questioner:9649214}
{title:"In TypeScript 5.6+, `Buffer` is not assignable to `ArrayBufferView` or `Uint8Array | DataView`",
id:"https://stackoverflow.com/questions/78790943",
body:"<p>Trying to upgrade to TypeScript 5.6 Beta, I get the following error messages in <code>node_modules</code>. I didn't make any other change, so what should I do to fix these errors?</p>
<pre><code>node_modules/@types/node/buffer.d.ts:632:19 - error TS2430: Interface 'Buffer' incorrectly extends interface 'Uint8Array'.
  The types returned by 'reverse()' are incompatible between these types.
    Type 'this' is not assignable to type 'Uint8Array'.
      Type 'Buffer' is not assignable to type 'Uint8Array'.
        The types returned by 'slice(...).entries()' are incompatible between these types.
          Type 'IterableIterator&lt;[number, number]&gt;' is missing the following properties from type 'BuiltinIterator&lt;[number, number], undefined, any&gt;': map, filter, take, drop, and 8 more.

632         interface Buffer extends Uint8Array {
                      ~~~~~~
</code></pre>
<pre><code>node_modules/@types/node/fs/promises.d.ts:56:66 - error TS2344: Type 'Buffer' does not satisfy the constraint 'ArrayBufferView'.
  Type 'Buffer' is not assignable to type 'Uint8Array | DataView'.
    Type 'Buffer' is not assignable to type 'Uint8Array'.
      The types returned by 'entries()' are incompatible between these types.
        Type 'IterableIterator&lt;[number, number]&gt;' is missing the following properties from type 'BuiltinIterator&lt;[number, number], undefined, any&gt;': map, filter, take, drop, and 8 more.

56     interface FileReadOptions&lt;T extends NodeJS.ArrayBufferView = Buffer&gt; {
                                                                    ~~~~~~
</code></pre>
<pre><code>node_modules/@types/node/fs/promises.d.ts:238:49 - error TS2344: Type 'Buffer' does not satisfy the constraint 'ArrayBufferView'.
  Type 'Buffer' is not assignable to type 'Uint8Array | DataView'.
    Type 'Buffer' is not assignable to type 'Uint8Array'.
      The types returned by 'entries()' are incompatible between these types.
        Type 'IterableIterator&lt;[number, number]&gt;' is missing the following properties from type 'BuiltinIterator&lt;[number, number], undefined, any&gt;': map, filter, take, drop, and 8 more.

238         read&lt;T extends NodeJS.ArrayBufferView = Buffer&gt;(options?: FileReadOptions&lt;T&gt;): Promise&lt;FileReadResult&lt;T&gt;&gt;;
                                                    ~~~~~~
</code></pre>
<p>Note: when I used a newer version of TypeScript 5.6, mentions of <code>BuiltinIterator&lt;[number, number], ...&gt;</code> seem replaced with <code>ArrayIterator&lt;number&gt;</code>.</p>
",
tags:"<javascript><node.js><typescript><upgrade>",
score:22,
creationDate:2024-07-24 23:26:24,
creationDate:2024-07-24 23:26:24,
score:37,
acceptedResponderReputation:23433,
acceptedResponder:4386952,
QuestionerReputation:23433,
Questioner:4386952}
{title:"How can I solve the issue of 'failed to resolve import in '@/...'"" vitest?",
id:"https://stackoverflow.com/questions/75798479",
body:"<p>This is the error I got. There is a problem with the file path I defined in the &quot;vite.config.ts&quot; file. Can you help me?</p>
<p><a href=""https://i.sstatic.net/la3lT.png"" rel=""noreferrer"">Error Log</a></p>
<p>Error Message:</p>
<pre class=""lang-js prettyprint-override""><code>FAIL  tests/utils/ConvertFromDomainToCountryCode.test.ts [ tests/utils/ConvertFromDomainToCountryCode.test.ts ]
Error: Failed to resolve import &quot;@/constant&quot; from &quot;src/assets/ts/_utils/ConvertFromDomainToCountryCode.ts&quot;. Does the file exist?
</code></pre>
<p><code>ConvertFromDomainToCountryCode.test.ts</code> file</p>
<pre class=""lang-js prettyprint-override""><code>import { describe, expect } from &quot;vitest&quot;;
import { SetFlags } from &quot;../../src/assets/ts/_utils/ConvertFromDomainToCountryCode.ts&quot;;

describe(&quot;Convert From Domain To CountryCode&quot;, () =&gt; {
  test(&quot;function defined&quot;, () =&gt; {
    expect(SetFlags).toBeDefined();
  });
});
</code></pre>
<p>Here it works fine when I make the file path &quot;../../../constant/index&quot;.</p>
<p><code>ConvertFromDomainToCountryCode.ts</code> file</p>
<pre class=""lang-js prettyprint-override""><code>import { COUNTRY_INFO } from &quot;@/constant&quot;;
</code></pre>
<p>Here i added &quot;alias&quot;</p>
<p><code>vite.config.ts</code> file</p>
<pre class=""lang-js prettyprint-override""><code>import { fileURLToPath, URL } from &quot;node:url&quot;;

import { defineConfig } from &quot;vite&quot;;
import vue from &quot;@vitejs/plugin-vue&quot;;
import { resolve, dirname } from &quot;node:path&quot;;
import vueJsx from &quot;@vitejs/plugin-vue-jsx&quot;;

export default defineConfig({
  plugins: [
    vue(),
    vueJsx()
  ],
  resolve: {
    alias: {
      &quot;@&quot;: fileURLToPath(new URL(&quot;./src&quot;, import.meta.url))
    }
  },
  base: &quot;/&quot;
});
</code></pre>
<h3>System</h3>
<pre><code>OS: macOS 13.2.1
CPU: (8) arm64 Apple M1 Pro
Memory: 91.50 MB / 16.00 GB
Shell: 5.8.1 - /bin/zsh
Binaries:
Node: 16.18.1 - ~/.nvm/versions/node/v16.18.1/bin/node
Yarn: 1.22.19 - ~/.nvm/versions/node/v16.18.1/bin/yarn
npm: 8.19.2 - ~/.nvm/versions/node/v16.18.1/bin/npm
Browsers:
Chrome: 111.0.5563.64
Safari: 16.3
npmPackages:
@vitejs/plugin-vue: ^3.1.2 =&gt; 3.2.0
@vitejs/plugin-vue-jsx: ^3.0.0 =&gt; 3.0.0
@vitest/coverage-istanbul: ^0.29.3 =&gt; 0.29.3
vite: ^3.1.8 =&gt; 3.2.5
vitest: ^0.29.3 =&gt; 0.29.3
</code></pre>
<p>Just waiting for the path of the file to be found</p>
",
tags:"<javascript><typescript><vue.js><vite><vitest>",
score:29,
creationDate:2023-03-21 07:47:49,
creationDate:2023-03-21 08:57:24,
score:37,
acceptedResponderReputation:661,
acceptedResponder:12113266,
QuestionerReputation:661,
Questioner:12113266}
{title:"Fetching Next.js API Route in the app directory gives 404 Not Found",
id:"https://stackoverflow.com/questions/76336930",
body:"<p>I am struggling with Next.js 13's <code>app</code> routing. It always gives me a 404 Not Found when I try to access, for example from Postmann.</p>
<p>I have this file structure:</p>
<p><a href=""https://i.sstatic.net/ZWrlb.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/ZWrlb.png"" alt=""enter image description here"" /></a></p>
<p>And for example, one of my API files is:</p>
<pre><code>import { PrismaClient } from '@prisma/client';

const prisma = new PrismaClient();

export default async function all(req, res) {
    if (req.method !== 'GET') {
        return res.status(405).json({ error: 'Method not allowed' });
    }

    try {
        // Get all admins using Prisma
        const admins = await prisma.admin.findMany();

        return res.status(200).json(admins);
    }
    catch (error) {
        return res.status(500).json({ error: 'Failed to get admins' });
    }
}
</code></pre>
<p>When I send a <code>GET localhost:3000/api/admin/all</code> it always responds with a 404. Couldn't find where is the error.</p>
<p>I tried other file or folder namings. Calling from my own app, using the curl command, or using Postman. My other API routes give the same 404.</p>
",
tags:"<javascript><reactjs><next.js><prisma>",
score:26,
creationDate:2023-05-26 00:19:14,
creationDate:2023-05-26 07:05:50,
score:37,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:617,
Questioner:11909334}
{title:"Proto datastore jetpack compose - gradle dependencies exception",
id:"https://stackoverflow.com/questions/76175068",
body:"<p>I followed this codelab from the android developer platform: <a href=""https://developer.android.com/codelabs/android-proto-datastore#4"" rel=""noreferrer"">https://developer.android.com/codelabs/android-proto-datastore#4</a></p>
<p>Added the same exact dependencies as shown in the codelab and I get the following gradle exception when trying to sync</p>
<pre><code>A problem occurred configuring project ':app'.

Could not get unknown property 'source' for generate-proto-generateDebugProto of type org.gradle.api.internal.file.DefaultSourceDirectorySet.
  at org.jetbrains.plugins.gradle.model.ProjectImportAction.execute(ProjectImportAction.java:125)
  at org.jetbrains.plugins.gradle.model.ProjectImportAction.execute(ProjectImportAction.java:42)

Caused by: groovy.lang.MissingPropertyException: Could not get unknown property 'source' for generate-proto-generateDebugProto of type org.gradle.api.internal.file.DefaultSourceDirectorySet.
  at com.google.protobuf.gradle.ProtobufPlugin$_linkGenerateProtoTasksToSourceCompile_closure25$_closure39.doCall(ProtobufPlugin.groovy:472)
  at com.google.protobuf.gradle.ProtobufPlugin$_linkGenerateProtoTasksToSourceCompile_closure25.doCall(ProtobufPlugin.groovy:469)
  at com.google.protobuf.gradle.ProtobufPlugin.linkGenerateProtoTasksToSourceCompile(ProtobufPlugin.groovy:468)
  at com.google.protobuf.gradle.ProtobufPlugin$_doApply_closure5.doCall(ProtobufPlugin.groovy:153)
  at jdk.proxy1/jdk.proxy1.$Proxy56.afterEvaluate(Unknown Source)
  at org.jetbrains.plugins.gradle.model.ProjectImportAction.execute(ProjectImportAction.java:125)
  at org.jetbrains.plugins.gradle.model.ProjectImportAction.execute(ProjectImportAction.java:42)
</code></pre>
<p>I have no idea what the issue could be, tried to upgrade the versions shown in the codelab, looked up the issue everywhere, but can't seem to find anyone that experienced the same thing.
Any idea?</p>
",
tags:"<android-gradle-plugin><android-jetpack-compose><protobuf-java><android-jetpack-datastore>",
score:19,
creationDate:2023-05-04 15:52:48,
creationDate:2023-05-05 08:42:12,
score:38,
acceptedResponderReputation:1187,
acceptedResponder:10050576,
QuestionerReputation:1187,
Questioner:10050576}
{title:"java.lang.NoSuchMethodError: 'org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream$Builder org.apache.poi-poi-ooxml-5.2.4",
id:"https://stackoverflow.com/questions/77256330",
body:"<p>I have upgraded from <code>org.apache.poi-poi-ooxml-5.2.3</code> to <code>org.apache.poi-poi-ooxml-5.2.4</code> due to <strong>Security Violation Threat</strong> in <code>5.2.3</code></p>
<p>Now, I am facing run time exception as <code>java.lang.NoSuchMethodError</code></p>
<p><strong>Exception:</strong></p>
<pre><code>[ERROR] ErrorPageFilter - Forwarding to error page from request [/reports/myapp/myreport] due to exception ['org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream$Builder org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream.builder()']
java.lang.NoSuchMethodError: 'org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream$Builder org.apache.commons.io.output.UnsynchronizedByteArrayOutputStream.builder()'
    at org.apache.poi.xssf.usermodel.XSSFWorkbook.newPackage(XSSFWorkbook.java:521) ~[poi-ooxml-5.2.4.jar:5.2.4]
    at org.apache.poi.xssf.usermodel.XSSFWorkbook.&lt;init&gt;(XSSFWorkbook.java:231) ~[poi-ooxml-5.2.4.jar:5.2.4]
    at org.apache.poi.xssf.usermodel.XSSFWorkbook.&lt;init&gt;(XSSFWorkbook.java:227) ~[poi-ooxml-5.2.4.jar:5.2.4]
    at org.apache.poi.xssf.usermodel.XSSFWorkbook.&lt;init&gt;(XSSFWorkbook.java:215) ~[poi-ooxml-5.2.4.jar:5.2.4]
    at myapp.reports.service.impl.MyReportsExcelExporter.&lt;init&gt;(MyReportsExcelExporter.java:37) ~[classes/:0.0.1-SNAPSHOT]
</code></pre>
<p><strong>Code:</strong></p>
<pre class=""lang-java prettyprint-override""><code>import org.apache.poi.xssf.usermodel.XSSFWorkbook;

public class MyReportsExcelExporter {
    protected XSSFWorkbook workbook;
    ...
    public MyReportsExcelExporter() {
        this.workbook = new XSSFWorkbook(); //Facing issue here, while initializing the workbook.
    }
    ...
}
</code></pre>
<p>Looking at the version change, it seems like a minor upgrade but now existing code has stopped working.</p>
<p>What's probably wrong?</p>
",
tags:"<java><spring><spring-boot><apache-poi>",
score:30,
creationDate:2023-10-09 04:51:29,
creationDate:2023-10-09 05:51:47,
score:38,
acceptedResponderReputation:16439,
acceptedResponder:8340997,
QuestionerReputation:628,
Questioner:4643632}
{title:"Adding Favicon to NextJs App router application",
id:"https://stackoverflow.com/questions/75674866",
body:"<p>I have an issue with the new Next.js <a href=""https://nextjs.org/docs/app"" rel=""noreferrer"">App Router</a>. They removed head.js files and now (as it is written in the doc) I have to use <a href=""https://nextjs.org/docs/app/building-your-application/optimizing/metadata"" rel=""noreferrer"">metadata</a> in layout.ts. My favicon name is <code>favicon.png</code>.</p>
<p>How do i specify it here:</p>
<pre><code>export const metadata = {
  title: 'Create Next App',
  description: 'Generated by create next app',
}
</code></pre>
",
tags:"<javascript><reactjs><next.js><next.js13>",
score:38,
creationDate:2023-03-08 15:14:49,
creationDate:2023-03-08 16:07:53,
score:39,
acceptedResponderReputation:933,
acceptedResponder:9632809,
QuestionerReputation:573,
Questioner:20185192}
{title:"Dynamic server usage: Page couldn't be rendered statically because it used `nextUrl.searchParams` in Next.js version 14",
id:"https://stackoverflow.com/questions/78010331",
body:"<p>I am creating a full stack application with next js 13,
I have created an API that is perfectly working in dev(npm run dev) mode but the problem is when I give the build command(npm run build) then it shows the flowing error.
Please anybody bring me out of the problem.
Error Screenshot - <a href=""https://prnt.sc/VaN1wHifqK_2"" rel=""noreferrer"">https://prnt.sc/VaN1wHifqK_2</a></p>
<pre class=""lang-none prettyprint-override""><code> [Error]: Dynamic server usage: Page couldn't be rendered statically because it used `nextUrl.searchParams`. See more info here: https://nextjs.org/docs/messages/dynamic-server-error
</code></pre>
<p>Here is my code.
This is the API function for getting users from the database using url searchParams</p>
<pre><code>// /backend/apiControllers/getUsers.js

import prisma from &quot;@/prisma/prismaClient&quot;;

export const getUsers = async (request) =&gt; {
  const { nextUrl } = request; // here is the problem, this is working for dev mode but not in production build mode.
  const email = nextUrl.searchParams.get(&quot;email&quot;) || &quot;&quot;;
  const phone = nextUrl.searchParams.get(&quot;phone&quot;) || &quot;&quot;;
  const id = nextUrl.searchParams.get(&quot;id&quot;) || &quot;&quot;;

  let queryParam = {};

  if (email) {
    queryParam = {
      where: {
        ...queryParam.where,
        email: {
          equals: email,
          mode: &quot;insensitive&quot;,
        },
      },
    };
  }
  if (phone) {
    queryParam = {
      where: {
        ...queryParam.where,
        phone: {
          equals: phone,
        },
      },
    };
  }
  if (id) {
    queryParam = {
      where: {
        ...queryParam.where,
        id: {
          equals: id,
        },
      },
    };
  }

  try {
    const users = await prisma.users.findMany(queryParam);
    return users;
  } catch (error) {
    return { apiMessage: { errorMsg: &quot;Unable to find User details&quot; } };
  }
};

</code></pre>
<p>And I have called that function into /app/api/armies/route.js</p>
<pre><code>// /app/api/armies/route.js

import { getUsers } from &quot;@/backend/apiControllers/getUsers&quot;;
import { connectDB } from &quot;@/backend/utils/dbConnect&quot;;
import { NextResponse } from &quot;next/server&quot;;

export const GET = async (request) =&gt; {
  try {
    await connectDB();
    const users = await getUsers(request); //called here
    return NextResponse.json(users);
  } catch (error) {
    console.log(error);
    return NextResponse.json({
      apiMessage: { errorMsg: &quot;Internal Server Error, Please try again later&quot; },
    });
  }
};

</code></pre>
<p>I have tried the following method also &quot;const url = new URL(request.url);&quot; but the same error, Here is the error screenshot - <a href=""https://prnt.sc/Z3D317lDQ3CP"" rel=""noreferrer"">https://prnt.sc/Z3D317lDQ3CP</a></p>
<pre><code>import prisma from &quot;@/prisma/prismaClient&quot;;

export const getUsers = async (request) =&gt; {
  const url = new URL(request.url); // here is the problem, this is working for dev mode but not in production build mode.
  const email = url.searchParams.get(&quot;email&quot;) || &quot;&quot;;
  const phone = url.searchParams.get(&quot;phone&quot;) || &quot;&quot;;
  const id = url.searchParams.get(&quot;id&quot;) || &quot;&quot;;

  let queryParam = {};

  if (email) {
    queryParam = {
      where: {
        ...queryParam.where,
        email: {
          equals: email,
          mode: &quot;insensitive&quot;,
        },
      },
    };
  }
  if (phone) {
    queryParam = {
      where: {
        ...queryParam.where,
        phone: {
          equals: phone,
        },
      },
    };
  }
  if (id) {
    queryParam = {
      where: {
        ...queryParam.where,
        id: {
          equals: id,
        },
      },
    };
  }

  try {
    const users = await prisma.users.findMany(queryParam);
    return users;
  } catch (error) {
    return { apiMessage: { errorMsg: &quot;Unable to find User details&quot; } };
  }
};

</code></pre>
<p>But again the same error</p>
",
tags:"<javascript><next.js>",
score:21,
creationDate:2024-02-16 22:46:14,
creationDate:2024-02-16 23:42:42,
score:39,
acceptedResponderReputation:4728,
acceptedResponder:18079514,
QuestionerReputation:271,
Questioner:14052917}
{title:"Shadcn Dialog inside of Dropdown closes automatically",
id:"https://stackoverflow.com/questions/77185827",
body:"<p>I use shadcn in my next.js 13 project. I want to have a dropdown with the option to edit or delete an entry. When the user clicks on &quot;delete&quot; a dialog should pop up and ask them for a confirmation. However, the dialog only shows for about 0.5 seconds before it closes together with the dropdown. How can I prevent that from happening?</p>
<p>Here is the example on codesandbox: <a href=""https://codesandbox.io/p/sandbox/shadcn-playground-3gs3v6?file=%2Fsrc%2Flib%2Futils.js%3A1%2C1"" rel=""noreferrer"">Codesandbox</a></p>
<p>This is the code:</p>
<pre class=""lang-html prettyprint-override""><code>    &lt;DropdownMenu&gt;
      &lt;DropdownMenuTrigger&gt;
        &lt;p&gt;Trigger&lt;/p&gt;
      &lt;/DropdownMenuTrigger&gt;
      &lt;DropdownMenuContent&gt;
        &lt;Dialog&gt;
          &lt;DropdownMenuLabel&gt;Edit Entry&lt;/DropdownMenuLabel&gt;
          &lt;DropdownMenuSeparator /&gt;
          &lt;DropdownMenuItem
            onClick={() =&gt; conosle.log(&quot;Navigate to edit page&quot;)}
          &gt;
            Edit
          &lt;/DropdownMenuItem&gt;
          &lt;DialogTrigger&gt;
            &lt;DropdownMenuItem&gt;Delete&lt;/DropdownMenuItem&gt;
          &lt;/DialogTrigger&gt;
          &lt;DialogContent&gt;
            &lt;DialogHeader&gt;
              &lt;DialogTitle&gt;Are you sure?&lt;/DialogTitle&gt;
              &lt;DialogDescription&gt;
                Do you want to delete the entry? Deleting this entry cannot be
                undone.
              &lt;/DialogDescription&gt;
            &lt;/DialogHeader&gt;
            &lt;DialogFooter&gt;
              &lt;DialogClose asChild&gt;
                &lt;Button variant=&quot;outline&quot;&gt;Cancel&lt;/Button&gt;
              &lt;/DialogClose&gt;
              &lt;Button&gt;Delete&lt;/Button&gt;
            &lt;/DialogFooter&gt;
          &lt;/DialogContent&gt;
        &lt;/Dialog&gt;
      &lt;/DropdownMenuContent&gt;
    &lt;/DropdownMenu&gt;
</code></pre>
",
tags:"<javascript><reactjs><next.js>",
score:21,
creationDate:2023-09-27 08:37:56,
creationDate:2023-09-27 11:11:31,
score:39,
acceptedResponderReputation:4728,
acceptedResponder:18079514,
QuestionerReputation:405,
Questioner:17760960}
{title:"Zod - Property 'infer' does not exist on type 'typeof import(.../node_modules/zod/lib/external)",
id:"https://stackoverflow.com/questions/76111305",
body:"<p>I got the Typescript error:</p>
<p><code>Property 'infer' does not exist on type 'typeof import(.../node_modules/zod/lib/external)</code></p>
<p>on the code:
<code>const CampaignForm = z.infer&lt;typeof CampaignSchema&gt;;</code></p>
<p>Looking at the docs and node_modules the property is there.</p>
",
tags:"<javascript><typescript><zod>",
score:14,
creationDate:2023-04-26 13:24:47,
creationDate:2023-04-26 13:24:47,
score:39,
acceptedResponderReputation:1659,
acceptedResponder:9608006,
QuestionerReputation:1659,
Questioner:9608006}
{title:"Custom Spring Boot 3 Starter does not create ConfigurationProperties beans",
id:"https://stackoverflow.com/questions/75044304",
body:"<p>I am creating a Maven artifact with following classes and configuration in custom Spring Starter project:</p>
<pre class=""lang-java prettyprint-override""><code>@ConfigurationProperties(prefix = &quot;commons.time.formats&quot;)
@Getter
@Setter
public class TimeFormatConf {
... fields
}
</code></pre>
<pre class=""lang-java prettyprint-override""><code>@Component
@Configuration
@AllArgsConstructor
@EnableConfigurationProperties(TimeFormatConf.class)
@AutoConfigureOrder(Ordered.HIGHEST_PRECEDENCE)
public class DateTimeConfigurer {
  private final TimeFormatConf timeFormatConf;

  @EventListener(ApplicationReadyEvent.class)
  public void configureTimeFormat() {
    TimeZone.setDefault(TimeZone.getTimeZone(timeFormatConf.getDynamicZone()));
    System.setProperty(&quot;user.timezone&quot;, timeFormatConf.getDynamicZone());
  }
}
</code></pre>
<p>And spring.factories (<code>src/main/resources/META-INF/spring.factories</code>):</p>
<pre><code>org.springframework.boot.autoconfigure.EnableAutoConfiguration=\
[package].DateTimeConfigurer,\
...
</code></pre>
<p>When I try to autowire a TimeFormatConf class my spring application crashes at start up as it cannot find a bean of TimeFormatConf class:</p>
<blockquote>
<p>Parameter 0 of constructor in com.some.package.b.Class required a bean
of type 'com.some.package.a.TimeFormatConf' that could not be found.</p>
</blockquote>
<p>The artifact is present with correct configuration on classpath. So it has to do something with either declaration or configuration of Spring.</p>
<p>I have also tried adding <code>@Component</code> on properties class and <code>@ComponentScan</code> on configuration class does not have any effect.</p>
<p>Reverting to Spring Boot 2.7.7 on both projects fixed the problem. So it seems to be a bug or at least lack of documentation. I have opened an issue to follow this up with spring team: <a href=""https://github.com/spring-projects/spring-boot/issues/33720"" rel=""noreferrer"">https://github.com/spring-projects/spring-boot/issues/33720</a></p>
",
tags:"<java><spring-boot><spring-boot-starter><configurationproperties>",
score:17,
creationDate:2023-01-07 22:45:27,
creationDate:2023-01-15 11:30:45,
score:39,
acceptedResponderReputation:940,
acceptedResponder:11656070,
QuestionerReputation:940,
Questioner:11656070}
{title:"How can I fix warning that Class 'Shape' is exposed outside its defined visibility scope?",
id:"https://stackoverflow.com/questions/77125667",
body:"<p>I made function 'warn' in line 17 whose parameter is enum Shape. Why is it warning about visibility scope and how can I fix it?</p>
<pre><code>import java.util.Scanner;

public class AreaCalculator {

    enum Shape {TRIANGLE, RECTANGLE, CIRCLE}
    static Scanner scanner = new Scanner(System.in);

    public static void main(String[] args) {
        String str = scanner.next();

        while (!str.equals(&quot;quit&quot;)){
            str = str.toUpperCase();
            warn(Shape.valueOf(str));
        }
    }

    public static void warn(Shape shape) { //warning

    }
</code></pre>
<p>IntelliJ recommends generate overloaded method with default parameter values like following code.</p>
<pre><code>public static void warn(){
    warn(null);
}
</code></pre>
<p>But I think it doesn't look intuitive.</p>
",
tags:"<java><function><enums><warnings><visibility>",
score:25,
creationDate:2023-09-18 08:43:00,
creationDate:2023-09-18 08:53:36,
score:42,
acceptedResponderReputation:11401,
acceptedResponder:11002,
QuestionerReputation:263,
Questioner:22583436}
{title:"Spring initializr project results in Unsupported class file major version 64",
id:"https://stackoverflow.com/questions/75878942",
body:"<p>When I create a new project using the <a href=""https://start.spring.io/"" rel=""noreferrer"">Spring initializr</a> Gradle won't build the project. I use IntelliJ IDEA.</p>
<p>The error message is</p>
<pre><code>* Exception is:
org.gradle.cache.CacheOpenException: Could not open init generic class cache for initialization script '/tmp/ijmapper.gradle' (/home/julius/.gradle/caches/7.6.1/scripts/dnnmnny7cynyzgkf00s30jlld).
    at org.gradle.cache.internal.DefaultPersistentDirectoryStore.open(DefaultPersistentDirectoryStore.java:91)
    ... 166+ more
Caused by: java.lang.IllegalArgumentException: Unsupported class file major version 64
</code></pre>
<p>I looked it up using <a href=""https://javaalmanac.io/bytecode/versions/"" rel=""noreferrer"">this table</a>, it's java 20. The issue is, that I didn't select Java-20, I chose Java-17. On top of that, I'm not able to install Java-20 on my Linux machine yet.</p>
",
tags:"<java><spring><kotlin><gradle><spring-initializr>",
score:21,
creationDate:2023-03-29 14:59:32,
creationDate:2023-03-29 15:27:49,
score:44,
acceptedResponderReputation:1861,
acceptedResponder:16682019,
QuestionerReputation:1861,
Questioner:16682019}
{title:"Flutter 3.24.3 problem with Android Studio Ladybug | 2024.2.1",
id:"https://stackoverflow.com/questions/79067849",
body:"<p>When I update Android studio to last version &quot;Ladybug 2024.2.1&quot; an error occur whenever I run application in android emulator or physical phone, this problem shows an error with a specific library but in fact it occur with all libraries, I know that because every library tell me there is an error with, I just try to remove it then try running the code again.</p>
<p>This is the error:</p>
<blockquote>
<p>FAILURE: Build failed with an exception.</p>
<p>What went wrong:
Execution failed for task ':google_sign_in_android:compileDebugJavaWithJavac'.
Could not resolve all files for configuration ':google_sign_in_android:androidJdkImage'.
Failed to transform core-for-system-modules.jar to match attributes {artifactType=_internal_android_jdk_image, org.gradle.libraryelements=jar, org.gradle.usage=java-runtime}.
Execution failed for JdkImageTransform: /Users/zaydahmad/Library/Android/sdk/platforms/android-34/core-for-system-modules.jar.
Error while executing process /Applications/Android Studio.app/Contents/jbr/Contents/Home/bin/jlink with arguments {--module-path /Users/zaydahmad/.gradle/caches/transforms-3/fd4e2b69c2691a24d99d2b3c10c60f94/transformed/output/temp/jmod --add-modules java.base --output /Users/zaydahmad/.gradle/caches/transforms-3/fd4e2b69c2691a24d99d2b3c10c60f94/transformed/output/jdkImage --disable-plugin system-modules}</p>
<p>Try:
Run with --stacktrace option to get the stack trace.
Run with --info or --debug option to get more log output.
Run with --scan to get full insights.
Get more help at <a href=""https://help.gradle.org"" rel=""noreferrer"">https://help.gradle.org</a>.</p>
<p>BUILD FAILED in 9s
Error: Gradle task assembleDebug failed with exit code 1</p>
</blockquote>
<p>I have update all the libraries to the last version.
I have remove every library appear with that error, it doesn't work.</p>
<p>maybe these files help you solve the problem:</p>
<p><strong>android/app/build.gradle</strong></p>
<pre><code>android {
    compileOptions {
        sourceCompatibility = JavaVersion.VERSION_1_8
        targetCompatibility = JavaVersion.VERSION_1_8
    }
}
</code></pre>
<p><strong>android/gradle/wrapper/gradle-wrapper.properties</strong></p>
<pre><code>distributionBase=GRADLE_USER_HOME
distributionPath=wrapper/dists
zipStoreBase=GRADLE_USER_HOME
zipStorePath=wrapper/dists
distributionUrl=https\://services.gradle.org/distributions/gradle-8.3-all.zip
</code></pre>
<p><strong>android/build.gradle</strong></p>
<pre><code>allprojects {
    repositories {
        google()
        mavenCentral()
    }
}

rootProject.buildDir = &quot;../build&quot;
subprojects {
    project.buildDir = &quot;${rootProject.buildDir}/${project.name}&quot;
}
subprojects {
    project.evaluationDependsOn(&quot;:app&quot;)
}

tasks.register(&quot;clean&quot;, Delete) {
    delete rootProject.buildDir
}
</code></pre>
",
tags:"<java><flutter><dart><android-studio>",
score:19,
creationDate:2024-10-08 21:33:31,
creationDate:2024-10-08 21:48:22,
score:45,
acceptedResponderReputation:24606,
acceptedResponder:1255873,
QuestionerReputation:418,
Questioner:19262492}
{title:"I get an error export 'default' (imported as 'thunk') was not found in 'redux-thunk' (possible exports: thunk, withExtraArgument)",
id:"https://stackoverflow.com/questions/77707149",
body:"<p>I use
&quot;react-redux&quot;: &quot;^9.0.4&quot;,
&quot;react-router-dom&quot;: &quot;^6.21.1&quot;,
&quot;react-scripts&quot;: &quot;5.0.1&quot;,
&quot;redux&quot;: &quot;^5.0.0&quot;,
&quot;redux-thunk&quot;: &quot;^3.1.0&quot;
I want to create login with middleware in React.js with React-Redux, here is my code.</p>
<pre><code>// src/middleware/store.js
import { createStore, applyMiddleware } from 'redux';
import thunk from 'redux-thunk';
import rootReducer from './reducers';

const guard = createStore(rootReducer, applyMiddleware(thunk));

export default guard;

</code></pre>
<pre><code>// src/middleware/actions.js
import axios from 'axios';

export const login = (username, password, history) =&gt; async (dispatch) =&gt; {
  try {
    const response = await axios.post('https://xxx-api.xxx-xxxxxxx.com/users/login', {
      username,
      password,
    });

    dispatch({
      type: 'LOGIN_SUCCESS',
      payload: {
        user: response.data.user,
      },
    });

    localStorage.setItem('token', response.data.data.token);
    
    history.push('/admin/dashboard');
  } catch (error) {
    console.error('Login error:', error);
    console.log('Gagal login');
  }
};

export const logout = () =&gt; (dispatch) =&gt; {
  localStorage.removeItem('token');

  dispatch({
    type: 'LOGOUT',
  });
};

</code></pre>
<pre><code>// src/middleware/reducers.js
import { combineReducers } from 'redux';

const initialState = {
  user: null,
  isAuthenticated: false,
};

const authReducer = (state = initialState, action) =&gt; {
  switch (action.type) {
    case 'LOGIN_SUCCESS':
      return {
        ...state,
        user: action.payload.user,
        isAuthenticated: true,
      };
    case 'LOGIN_FAILURE':
    case 'LOGOUT':
      return {
        ...state,
        user: null,
        isAuthenticated: false,
      };
    default:
      return state;
  }
};

const rootReducer = combineReducers({
  auth: authReducer,
  // ...tambahkan reducer lain jika ada
});

export default rootReducer;

</code></pre>
<pre><code>// src/Router.js
import React from 'react';
import { BrowserRouter as Router, Route, Routes } from 'react-router-dom';
import { Provider } from 'react-redux';
import guard from './middleware/store';

import LoginPage from './pages/login';
import DashboardPage from './pages/dashboard';
import Page404 from './pages/404';

const AppRouter = () =&gt; {
  return (
    &lt;Provider store={guard}&gt;
      &lt;Router&gt;
        &lt;Routes&gt;
          &lt;Route path=&quot;/&quot; element={&lt;LoginPage /&gt;} /&gt;
          &lt;Route path=&quot;/admin/dashboard&quot; element={&lt;DashboardPage /&gt;} /&gt;
          &lt;Route path=&quot;*&quot; element={&lt;Page404 /&gt;} /&gt;
        &lt;/Routes&gt;
      &lt;/Router&gt;
    &lt;/Provider&gt;
  );
};

export default AppRouter;

</code></pre>
<pre><code>// src/pages/login/index.js
import React, { useState } from 'react';
import { useDispatch } from 'react-redux';
import { useNavigate } from 'react-router-dom';
import { login } from './../../middleware/actions';

const LoginPage = () =&gt; {
  const [username, setUsername] = useState('');
  const [password, setPassword] = useState('');
  const dispatch = useDispatch();
  const history = useNavigate();

  const handleUsernameChange = (event) =&gt; {
    setUsername(event.target.value);
  };

  const handlePasswordChange = (event) =&gt; {
    setPassword(event.target.value);
  };

  const handleSubmit = (event) =&gt; {
    event.preventDefault();
    dispatch(login(username, password, history));
  };

  return (
    &lt;div&gt;
      &lt;h2&gt;Login Form&lt;/h2&gt;
      &lt;form onSubmit={handleSubmit}&gt;
        &lt;div className=&quot;mb-3&quot;&gt;
          &lt;label htmlFor=&quot;username&quot; className=&quot;form-label&quot;&gt;Username:&lt;/label&gt;
          &lt;input
            type=&quot;text&quot;
            className=&quot;form-control&quot;
            id=&quot;username&quot;
            value={username}
            onChange={handleUsernameChange}
            required
          /&gt;
        &lt;/div&gt;
        &lt;div className=&quot;mb-3&quot;&gt;
          &lt;label htmlFor=&quot;password&quot; className=&quot;form-label&quot;&gt;Password:&lt;/label&gt;
          &lt;input
            type=&quot;password&quot;
            className=&quot;form-control&quot;
            id=&quot;password&quot;
            value={password}
            onChange={handlePasswordChange}
            required
          /&gt;
        &lt;/div&gt;
        &lt;button className='btn btn-success' type=&quot;submit&quot;&gt;Login&lt;/button&gt;
      &lt;/form&gt;
    &lt;/div&gt;
  );
};

export default LoginPage;

</code></pre>
<p>and here is the error from my code
<a href=""https://i.sstatic.net/gnry4.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/gnry4.png"" alt=""enter image description here"" /></a>
<a href=""https://i.sstatic.net/ssXXB.png"" rel=""noreferrer""><img src=""https://i.sstatic.net/ssXXB.png"" alt=""enter image description here"" /></a></p>
<p>Can you guys help me to solve the error in my project? what's wrong in my code?</p>
",
tags:"<javascript><reactjs><redux-thunk>",
score:12,
creationDate:2023-12-23 09:11:50,
creationDate:2023-12-25 16:21:20,
score:46,
acceptedResponderReputation:590,
acceptedResponder:16141966,
QuestionerReputation:350,
Questioner:19596490}
{title:"How to replace the deprecated URL constructors in Java 20?",
id:"https://stackoverflow.com/questions/75966165",
body:"<p><a href=""https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/net/URL.html#constructor-deprecation"" rel=""noreferrer"">All URL constructors are deprecated in Java 20</a>. I replaced <code>new URL(protocol, host, file)</code> by <code>new URI(protocol, host, file, null).toURL()</code> as I have no query and no fragment but I don't know what to do with the others:</p>
<pre><code>/home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/UrlUtils.java:40: warning: [deprecation] URL(String) in URL has been deprecated
        return new URL(new URL(url), relativeLoc);
                       ^
/home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/UrlUtils.java:40: warning: [deprecation] URL(URL,String) in URL has been deprecated
        return new URL(new URL(url), relativeLoc);
               ^
/home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-core/src/main/java/com/ardor3d/util/resource/SimpleResourceLocator.java:94: warning: [deprecation] URL(URL,String) in URL has been deprecated
            final URL rVal = new URL(_baseDir.toURL(), spec);
                             ^
/home/gouessej/Documents/programmation/java/workspace/Ardor3D/ardor3d-audio/src/main/java/com/ardor3d/audio/FilenameURL.java:125: warning: [deprecation] URL(String) in URL has been deprecated
                    url = new URL( filename );
</code></pre>
<p>Would simply <code>new URI(filename).toURL()</code>do the job in the last case?</p>
<p>When I compare the wording in the Java documentation, I understand that an URI scheme means more or less a URL protocol, an URI host is an URL host and an URL file matches with a URI path and an optional URI query. What are the exact equivalent of <code>new URL(spec)</code> and <code>new URL(context, spec)</code>?</p>
<p><a href=""https://jogamp.org/cgit/ardor3d.git/commit/?id=f9690cba75a6bbf352ef9eadf66931a89bc2baa2"" rel=""noreferrer"">I prepared some suggested changes</a> but it doesn't work, an IllegalArgumentException is thrown.</p>
",
tags:"<java><java-20>",
score:30,
creationDate:2023-04-08 15:47:18,
creationDate:2023-04-08 23:35:12,
score:47,
acceptedResponderReputation:338171,
acceptedResponder:642706,
QuestionerReputation:4066,
Questioner:458157}
{title:"""SyntaxError: Unexpected identifier 'assert'"" on JSON import in Node v22",
id:"https://stackoverflow.com/questions/78876691",
body:"<p>A Node program of mine that worked fine in Node v21 now immediately crashes with a syntax error in Node v22. The line that triggers the error looks like this:</p>
<pre><code>import config from &quot;./some-config-file.json&quot; assert { type: &quot;json&quot; };
</code></pre>
<p>and the error says:</p>
<pre class=""lang-none prettyprint-override""><code>SyntaxError: Unexpected identifier 'assert'
    at compileSourceTextModule (node:internal/modules/esm/utils:337:16)
    at ModuleLoader.moduleStrategy (node:internal/modules/esm/translators:166:18)
    at callTranslator (node:internal/modules/esm/loader:436:14)
    at ModuleLoader.moduleProvider (node:internal/modules/esm/loader:442:30)
    at async ModuleJob._link (node:internal/modules/esm/module_job:106:19)
</code></pre>
<p>Why am I getting this error in code that previously worked, and how should I fix it?</p>
",
tags:"<javascript><node.js>",
score:22,
creationDate:2024-08-15 20:09:39,
creationDate:2024-08-15 20:09:39,
score:48,
acceptedResponderReputation:154545,
acceptedResponder:1709587,
QuestionerReputation:154545,
Questioner:1709587}
{title:"Spring boot 3.0.0+ @Override error in ResponseEntityExceptionHandler",
id:"https://stackoverflow.com/questions/75690229",
body:"<p>I am following this <a href=""https://blog.tericcabrel.com/validate-request-body-and-parameter-in-spring-boot/"" rel=""noreferrer"">example</a> (<strong>Validate Request Body and Parameter in Spring Boot</strong> in <strong>medium</strong>) and this <a href=""https://medium.com/@tericcabrel/validate-request-body-and-parameter-in-spring-boot-53ca77f97fe9"" rel=""noreferrer"">example</a> to implement a Handler to handle the correctness of a JSON as a parameter. The concepts are somewhat clear but having reached this point the use of @Override for the <code>handleMethodArgumentNotValid</code> method gives me an error like: <em>Method does not override method from its superclass</em>.</p>
<p>I have searched online to figure out how to solve this problem but I am probably missing something.</p>
<pre><code>package com.tericcabrel.hotel.exceptions;

import java.util.HashMap;
import java.util.List;
import java.util.Map;
import java.util.stream.Collectors;
import org.springframework.context.support.DefaultMessageSourceResolvable;
import org.springframework.http.HttpHeaders;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.MethodArgumentNotValidException;
import org.springframework.web.bind.annotation.ControllerAdvice;
import org.springframework.web.context.request.WebRequest;
import org.springframework.web.servlet.mvc.method.annotation.ResponseEntityExceptionHandler;

@ControllerAdvice
public class GlobalExceptionHandler extends ResponseEntityExceptionHandler {
  @Override
  protected ResponseEntity&lt;Object&gt; handleMethodArgumentNotValid(
      MethodArgumentNotValidException ex, HttpHeaders headers,
      HttpStatus status, WebRequest request) {

    Map&lt;String, List&lt;String&gt;&gt; body = new HashMap&lt;&gt;();

    List&lt;String&gt; errors = ex.getBindingResult()
        .getFieldErrors()
        .stream()
        .map(DefaultMessageSourceResolvable::getDefaultMessage)
        .collect(Collectors.toList());

    body.put(&quot;errors&quot;, errors);

    return new ResponseEntity&lt;&gt;(body, HttpStatus.BAD_REQUEST);
  }
}
</code></pre>
",
tags:"<java><spring-boot><exception>",
score:18,
creationDate:2023-03-09 21:30:23,
creationDate:2023-03-09 21:38:46,
score:48,
acceptedResponderReputation:7924,
acceptedResponder:1493192,
QuestionerReputation:7924,
Questioner:1493192}
{title:"How to fix gradle build failed due to void org.gradle.api.internal.artifacts.dsl.LazyPublishArtifact.<init>(org.gradle.api.provider.Provider) error?",
id:"https://stackoverflow.com/questions/76188050",
body:"<p>I am getting following exception when I try to build the spring boot project using Gradle build command. The code comiples and runs fine in IntelliJ Idea.</p>
<pre><code>PS C:\SVN\Dactyl\IIOTWizards\SCADA\Trunk\source\Services\universal-service&gt; gradle build                                                                                                

FAILURE: Build failed with an exception.

* What went wrong:
'void org.gradle.api.internal.artifacts.dsl.LazyPublishArtifact.&lt;init&gt;(org.gradle.api.provider.Provider)'

* Try:
&gt; Run with --stacktrace option to get the stack trace.
&gt; Run with --info or --debug option to get more log output.
&gt; Run with --scan to get full insights.

* Get more help at https://help.gradle.org

BUILD FAILED in 657ms
</code></pre>
<p>This is my build.gradle file.</p>
<pre><code>plugins {
    id 'org.springframework.boot' version '2.6.4'
    id 'io.spring.dependency-management' version '1.0.11.RELEASE'
    id 'java'
}

group = 'com.iiot.wizards'
version = '0.0.1-SNAPSHOT'
//sourceCompatibility = '1.8'

configurations {
    compileOnly {
        extendsFrom annotationProcessor
    }
}

repositories {
    mavenCentral()
}

dependencies {

    implementation files('lib/connection-manager-2.0.0.1.jar')
    implementation files('lib/dlms-lib-2.0.0.1.jar')
    implementation files('lib/emdb-entities-2.0.0.1.jar')
    implementation files('lib/emdb-model-2.0.0.1.jar')
    implementation files('lib/emflex-ansi-meter-reader-2.0.0.1.jar')
    implementation files('lib/emflex-dlms-meter-reader-2.0.0.1.jar')
    implementation files('lib/iiot-wizards-common-2.0.0.1.jar')
    implementation files('lib/iiot-wizards-communication-2.0.0.1.jar')
    implementation files('lib/iiot-wizards-dnp3-2.0.0.1.jar')
    implementation files('lib/iiot-wizards-dnp3-meter-reader-2.0.0.1.jar')
    implementation files('lib/iiot-wizards-history-data-provider-2.0.0.1.jar')
    implementation files('lib/iiot-wizards-history-data-writers-2.0.0.1.jar')
    implementation files('lib/iiot-wizards-licensing-2.0.0.1.jar')
    implementation files('lib/iiot-wizards-local-data-cache-manager-2.0.0.1.jar')
    implementation files('lib/iiot-wizards-log-manager-2.0.0.1.jar')
    implementation files('lib/iiot-wizards-messaging-2.0.0.1.jar')
    implementation files('lib/iiot-wizards-mio-meter-reader-2.0.0.1.jar')
    implementation files('lib/iiot-wizards-modbus-gprs-read-meter-2.0.0.1.jar')
    implementation files('lib/iiot-wizards-modbus-meter-reader-2.0.0.1.jar')
    implementation files('lib/iiot-wizards-scheduler-2.0.0.1.jar')
    implementation files('lib/modbus-master-2.0.0.1.jar')
    implementation files('lib/TinyLog-2.0.0.1.jar')
    implementation files('lib/Utils-2.0.0.1.jar')
    implementation files('lib/jniwrap-3.12.jar')
    implementation files('lib/GoogleProtocolBuffer_2.6.1.jar')
    implementation files('lib/comm.jar')
    implementation files('lib/RXTXcomm.jar')
    implementation files('lib/iiot-wizards-history-entities-2.0.0.1.jar')

    // https://mvnrepository.com/artifact/commons-io/commons-io
    implementation group: 'commons-io', name: 'commons-io', version: '2.11.0'

    // https://mvnrepository.com/artifact/org.apache.commons/commons-lang3
    implementation group: 'org.apache.commons', name: 'commons-lang3', version: '3.12.0'

    // https://mvnrepository.com/artifact/org.eclipse.paho/org.eclipse.paho.client.mqttv3
    implementation group: 'org.eclipse.paho', name: 'org.eclipse.paho.client.mqttv3', version: '1.2.5'

    // https://mvnrepository.com/artifact/com.rabbitmq/amqp-client
    implementation group: 'com.rabbitmq', name: 'amqp-client', version: '5.13.1'

    // https://mvnrepository.com/artifact/org.apache.commons/commons-compress
    implementation group: 'org.apache.commons', name: 'commons-compress', version: '1.21'

    // https://mvnrepository.com/artifact/commons-beanutils/commons-beanutils
    implementation group: 'commons-beanutils', name: 'commons-beanutils', version: '1.9.4'

    // https://mvnrepository.com/artifact/commons-cli/commons-cli
    implementation group: 'commons-cli', name: 'commons-cli', version: '1.4'

    // https://mvnrepository.com/artifact/org.apache.commons/commons-collections4
    implementation group: 'org.apache.commons', name: 'commons-collections4', version: '4.4'

    // https://mvnrepository.com/artifact/commons-logging/commons-logging
    implementation group: 'commons-logging', name: 'commons-logging', version: '1.2'

    // https://mvnrepository.com/artifact/org.apache.commons/commons-math3
    implementation group: 'org.apache.commons', name: 'commons-math3', version: '3.6.1'

    // https://mvnrepository.com/artifact/org.apache.commons/commons-text
    implementation group: 'org.apache.commons', name: 'commons-text', version: '1.9'

//    // https://mvnrepository.com/artifact/gnu.io/rxtx
//    implementation group: 'gnu.io', name: 'rxtx', version: '2.1.7'

    // https://mvnrepository.com/artifact/org.hibernate/hibernate-core
    implementation group: 'org.hibernate', name: 'hibernate-core', version: '5.5.7.Final'

    // https://mvnrepository.com/artifact/org.apiguardian/apiguardian-api
    implementation group: 'org.apiguardian', name: 'apiguardian-api', version: '1.1.2'

    // https://mvnrepository.com/artifact/org.dom4j/dom4j
    implementation group: 'org.dom4j', name: 'dom4j', version: '2.1.3'

    // https://mvnrepository.com/artifact/com.sun.xml.fastinfoset/FastInfoset
    implementation group: 'com.sun.xml.fastinfoset', name: 'FastInfoset', version: '2.0.0'

    // https://mvnrepository.com/artifact/org.hamcrest/hamcrest-core
    testImplementation group: 'org.hamcrest', name: 'hamcrest-core', version: '2.2'

    // https://mvnrepository.com/artifact/org.hibernate.javax.persistence/hibernate-jpa-2.1-api
    implementation group: 'org.hibernate.javax.persistence', name: 'hibernate-jpa-2.1-api', version: '1.0.2.Final'

//    // https://mvnrepository.com/artifact/org.hibernate.ogm/hibernate-ogm-mongodb
//    implementation group: 'org.hibernate.ogm', name: 'hibernate-ogm-mongodb', version: '5.4.1.Final'

    // https://mvnrepository.com/artifact/com.sun.istack/istack-commons-runtime
    implementation group: 'com.sun.istack', name: 'istack-commons-runtime', version: '4.1.0-M1'

    // https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-annotations
    implementation 'com.fasterxml.jackson.core:jackson-annotations:2.13.0'

    // https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-core
    implementation 'com.fasterxml.jackson.core:jackson-core:2.13.0'

    // https://mvnrepository.com/artifact/com.fasterxml.jackson.core/jackson-databind
    implementation 'com.fasterxml.jackson.core:jackson-databind:2.13.0'

    // https://mvnrepository.com/artifact/org.javassist/javassist
    implementation 'org.javassist:javassist:3.28.0-GA'

    // https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api
    implementation 'javax.annotation:javax.annotation-api:1.3.2'

    // https://mvnrepository.com/artifact/io.dropwizard.metrics/metrics-core
    implementation 'io.dropwizard.metrics:metrics-core:4.2.4'

    // https://mvnrepository.com/artifact/org.jboss.narayana.jta/narayana-jta
    testImplementation 'org.jboss.narayana.jta:narayana-jta:5.12.1.Final'

    // https://mvnrepository.com/artifact/io.netty/netty-all
    implementation 'io.netty:netty-all:4.1.67.Final'

    // https://mvnrepository.com/artifact/com.rabbitmq/amqp-client
    implementation 'com.rabbitmq:amqp-client:5.13.1'

//    // https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-core
//    implementation 'org.apache.logging.log4j:log4j-core:2.14.1'
//
//    // https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-slf4j-impl
//    testImplementation 'org.apache.logging.log4j:log4j-slf4j-impl:2.14.1'
//
//    // https://mvnrepository.com/artifact/org.apache.logging.log4j/log4j-api
//    implementation 'org.apache.logging.log4j:log4j-api:2.14.1'

//    // https://mvnrepository.com/artifact/org.slf4j/slf4j-api
//    implementation 'org.slf4j:slf4j-api:1.7.32'

//    // https://mvnrepository.com/artifact/org.slf4j/slf4j-log4j12
//    testImplementation 'org.slf4j:slf4j-log4j12:1.7.32'

//    // https://mvnrepository.com/artifact/org.slf4j/slf4j-simple
//    testImplementation 'org.slf4j:slf4j-simple:1.7.32'

    // https://mvnrepository.com/artifact/org.xerial/sqlite-jdbc
    implementation 'org.xerial:sqlite-jdbc:3.36.0.3'

    // https://mvnrepository.com/artifact/org.jvnet.staxex/stax-ex
    implementation 'org.jvnet.staxex:stax-ex:2.1.0-M1'

    // https://mvnrepository.com/artifact/org.glassfish.jaxb/txw2
    implementation 'org.glassfish.jaxb:txw2:3.0.2'

    // https://mvnrepository.com/artifact/com.googlecode.json-simple/json-simple
    implementation 'com.googlecode.json-simple:json-simple:1.1.1'


    implementation 'org.springframework.boot:spring-boot-starter-data-jdbc:2.5.6'
    implementation 'org.springframework.boot:spring-boot-starter-data-jpa:2.5.6'
//    implementation 'org.springframework.boot:spring-boot-starter-data-mongodb:2.5.4'
    implementation 'org.springframework.boot:spring-boot-starter-jdbc:2.5.6'
    implementation 'org.springframework.boot:spring-boot-starter-oauth2-client:2.5.6'
    implementation 'org.springframework.boot:spring-boot-starter-security:2.5.6'
    implementation 'org.springframework.boot:spring-boot-starter-web:2.5.6'
    compileOnly 'org.projectlombok:lombok:1.18.22'
    runtimeOnly 'com.h2database:h2:1.4.200'
    runtimeOnly 'com.microsoft.sqlserver:mssql-jdbc'
    runtimeOnly 'com.oracle.database.jdbc:ojdbc8:21.1.0.0'
    runtimeOnly 'mysql:mysql-connector-java:8.0.28'
    runtimeOnly 'org.postgresql:postgresql:42.3.8'
    annotationProcessor 'org.projectlombok:lombok:1.18.22'
    testImplementation 'org.springframework.boot:spring-boot-starter-test:2.5.6'
    testImplementation 'org.springframework.security:spring-security-test:5.5.1'

}

//jar {
//    manifest {
//        attributes(
//                'Class-Path': 'comm.jar jdom.jar optra.jar jxl-2.6.jar RXTXcomm.jar javax.ejb.jar javax.jms.jar sqljdbc42.jar guava-16.0.jar hamcrest-core.jar javax.servlet.jar commons-io-2.7.jar javax.resource.jar commons-cli-1.4.jar log4j-api-2.9.0.jar rabbitmq-client.jar javax.annotation.jar log4j-core-2.9.0.jar portmapper-2.0.0.jar javax.servlet.jsp.jar javax.transaction.jar netty-3.9.0.Final.jar sqlite-jdbc-3.7.2.jar metrics-core-2.2.0.jar metrics-core-3.1.2.jar poi-3.10.1-20140818.jar javax.servlet.jsp.jstl.jar poi-ooxml-3.10.1-20140818.jar GoogleProtocolBuffer_2.6.1.jar poi-ooxml-schemas-3.10.1-20140818.jar hibernate-jpa-2.1-api-1.0.2.Final.jar apiguardian-api-1.0.0.jar opentest4j-1.1.1.jar byte-buddy-1.10.7.jar hibernate-core-5.4.11.Final.jar classmate-1.5.1.jar antlr-2.7.7.jar dom4j-2.1.1.jar hibernate-commons-annotations-5.1.0.Final.jar FastInfoset-1.2.15.jar istack-commons-runtime-3.0.7.jar jandex-2.1.1.Final.jar javassist-3.24.0-GA.jar jaxb-api-2.3.1.jar javax.activation-api-1.2.0.jar javax.persistence-api-2.2.jar jaxb-runtime-2.3.1.jar jboss-logging-3.3.2.Final.jar jboss-transaction-api_1.2_spec-1.1.1.Final.jar stax-ex-1.8.jar txw2-2.3.1.jar commons-compress-1.19.jar javax.jms.jar javax.annotation.jar javax.ejb.jar javax.transaction.jar javax.resource.jar javax.servlet.jar javax.servlet.jsp.jar javax.servlet.jsp.jstl.jar comm.jar jdom.jar optra.jar lombok.jar ojdbc7.jar jxl-2.6.jar comm-2.0.jar RXTXcomm.jar javax.ejb.jar javax.jms.jar seroUtils.jar sqljdbc42.jar guava-16.0.jar h2-1.4.200.jar junit-4.10.jar txw2-2.3.1.jar antlr-2.7.7.jar dom4j-2.1.1.jar stax-ex-1.8.jar jniwrap-3.12.jar hamcrest-core.jar javax.servlet.jar commons-io-2.7.jar javax.resource.jar jaxb-api-2.3.1.jar classmate-1.5.1.jar commons-cli-1.4.jar log4j-api-2.9.0.jar rabbitmq-client.jar javax.annotation.jar log4j-core-2.9.0.jar opentest4j-1.1.1.jar portmapper-2.0.0.jar slf4j-api-1.7.30.jar byte-buddy-1.10.2.jar byte-buddy-1.10.7.jar javax.servlet.jsp.jar javax.transaction.jar json-simple-1.1.1.jar netty-3.9.0.Final.jar sqlite-jdbc-3.7.2.jar commons-lang3-3.11.jar FastInfoset-1.2.15.jar jandex-2.1.1.Final.jar jaxb-runtime-2.3.1.jar metrics-core-2.2.0.jar metrics-core-3.1.2.jar jackson-core-2.11.1.jar javassist-3.24.0-GA.jar junit-jupiter-5.4.2.jar poi-3.10.1-20140818.jar sqlite-jdbc-3.27.2.1.jar apiguardian-api-1.0.0.jar commons-compress-1.19.jar javax.servlet.jsp.jstl.jar jackson-databind-2.11.1.jar junit-jupiter-api-5.4.2.jar javax.persistence-api-2.2.jar jboss-logging-3.3.2.Final.jar poi-ooxml-3.10.1-20140818.jar GoogleProtocolBuffer_2.6.1.jar jackson-annotations-2.11.1.jar javax.activation-api-1.2.0.jar junit-jupiter-engine-5.4.2.jar junit-jupiter-params-5.4.2.jar hibernate-core-5.4.11.Final.jar junit-platform-engine-1.4.2.jar mysql-connector-java-8.0.15.jar istack-commons-runtime-3.0.7.jar junit-platform-commons-1.4.2.jar hibernate-jpa-2.1-api-1.0.2.Final.jar poi-ooxml-schemas-3.10.1-20140818.jar org.eclipse.paho.client.mqttv3-1.2.1.jar hibernate-commons-annotations-5.1.0.Final.jar jboss-transaction-api_1.2_spec-1.1.1.Final.jar'
//        )
//    }
//}
test {
    useJUnitPlatform()
}
</code></pre>
",
tags:"<java><spring-boot><gradle>",
score:26,
creationDate:2023-05-06 09:03:39,
creationDate:2023-05-06 14:21:35,
score:49,
acceptedResponderReputation:116031,
acceptedResponder:1384297,
QuestionerReputation:1497,
Questioner:2756820}
{title:"Maven build failing due to unrecognized `--settings` option",
id:"https://stackoverflow.com/questions/75469591",
body:"<p>In my Java projects building with maven, I have a a <code>.mvn</code> directory that contains a <code>maven.config</code> file. Content of that file is as follows:</p>
<pre><code>--settings ./.mvn/local-settings.xml
</code></pre>
<p>The <code>local-settings.xml</code> holds authentication credentials for pulling from a private registry.<br />
This setup worked fine up until yesterday. Now, the CI build (using <code>maven:3-amazoncorretto-17</code>) is failing with the following error message:</p>
<pre><code>Unable to parse maven.config file options: Unrecognized option: --settings ./.mvn/local-settings.xml
</code></pre>
<p>Has there been a breaking change in the <code>maven</code> image I am using for building?</p>
",
tags:"<java><maven>",
score:19,
creationDate:2023-02-16 08:32:00,
creationDate:2023-02-16 09:04:21,
score:50,
acceptedResponderReputation:2404,
acceptedResponder:891624,
QuestionerReputation:2404,
Questioner:891624}
{title:"Angular 17 Http client injection",
id:"https://stackoverflow.com/questions/77483538",
body:"<p>I am building a new app for testing with angular 17 trying to connect to a simple API rest. I am desperate to get this to work. I have asked chat GPT, reviewed stack's older posts and even download an old application, but with no success.</p>
<p>Here is my app config and the error:</p>
<p><strong>app.module.ts</strong></p>
<pre><code>import {FormsModule, ReactiveFormsModule} from '@angular/forms';
import { BrowserModule } from '@angular/platform-browser';
import { NgModule } from '@angular/core';
import {AppComponent} from &quot;./app.component&quot;;
import {HttpClientModule} from &quot;@angular/common/http&quot;;
import {ClienteService} from &quot;./cliente.service&quot;;
import {ClienteComponent} from &quot;./cliente/cliente.component&quot;;
import {AppRoutingModule} from &quot;./app-routing.module&quot;;



@NgModule({
  declarations: [
    AppComponent,
    ClienteComponent
  ],
  imports: [
    BrowserModule,
    FormsModule,
    ReactiveFormsModule,
    HttpClientModule,
    AppRoutingModule

  ],
  providers: [ClienteService],
  bootstrap: [AppComponent]
})
export class AppModule { }
</code></pre>
<p><strong>app-routing.module.ts</strong></p>
<pre><code>
import { NgModule } from '@angular/core';
import { Routes, RouterModule } from '@angular/router';

import {ClienteComponent} from &quot;./cliente/cliente.component&quot;;

const appRoutes: Routes = [
  { path: '', redirectTo: '/clientes', pathMatch: 'full' },
  { path: 'clientes', component: ClienteComponent}
];

@NgModule({
  imports: [RouterModule.forRoot(appRoutes)],
  exports: [RouterModule]
})
export class AppRoutingModule {

}
</code></pre>
<p><strong>cliente.service.ts</strong></p>
<pre><code>import { Injectable } from '@angular/core';
import { HttpClient } from '@angular/common/http';

@Injectable({
  providedIn: 'root'
})
export class ClienteService {

  private clienteUrl: string;

  constructor(private http: HttpClient) {
    this.clienteUrl = 'http://localhost:8081/clientes';
  }
  getClientes(nombre?: string, telefono?: string, direccion?: string) {
    const params: any = { nombre, telefono, direccion };
    return this.http.get(this.clienteUrl, { params });
  }
</code></pre>
<p><strong>cliente.component.ts</strong></p>
<pre><code>import {Component, OnInit} from '@angular/core';
import { CommonModule } from '@angular/common';
import {ClienteService} from &quot;../cliente.service&quot;;

@Component({
  selector: 'app-cliente',
  standalone: true,
  imports: [CommonModule],
  templateUrl: './cliente.component.html',
  styleUrl: './cliente.component.css'
})
export class ClienteComponent implements OnInit{

  clientes: any[] = [];

  constructor(private clienteService: ClienteService) {

  }

  ngOnInit(): void {
    this.clienteService.getClientes().subscribe((clientesResponse:any) =&gt; {
      console.log('Respuesta del servicio getAllClientes',clientesResponse);
      this.clientes=clientesResponse._embedded.clientes;


    });
  }

}
</code></pre>
<p>The problem is this:</p>
<pre class=""lang-none prettyprint-override""><code>ERROR NullInjectorError: R3InjectorError(Standalone[_AppComponent])[_ClienteService -&gt; _ClienteService -&gt; _HttpClient -&gt; _HttpClient]: 
  NullInjectorError: No provider for _HttpClient!
    at NullInjector.get (core.mjs:5601:27)
    at R3Injector.get (core.mjs:6044:33)
    at R3Injector.get (core.mjs:6044:33)
    at injectInjectorOnly (core.mjs:911:40)
    at Module.ɵɵinject (core.mjs:917:42)
    at Object.ClienteService_Factory [as factory] (cliente.service.ts:7:28)
    at core.mjs:6164:43
    at runInInjectorProfilerContext (core.mjs:867:9)
    at R3Injector.hydrate (core.mjs:6163:17)
    at R3Injector.get (core.mjs:6033:33)
handleError @ core.mjs:11747
</code></pre>
",
tags:"<javascript><angular><rest>",
score:30,
creationDate:2023-11-14 20:09:27,
creationDate:2023-11-15 13:07:52,
score:50,
acceptedResponderReputation:812,
acceptedResponder:8796630,
QuestionerReputation:477,
Questioner:6869483}
{title:"Why does spring-boot-3 give javax.servlet.http.HttpServletRequest ClassNotFoundException",
id:"https://stackoverflow.com/questions/75077401",
body:"<p>When I ran spring-boot-2.7, there is no issue. However when I changed code and tailored it to spring-boot-3.0, there is java.lang.ClassNotFoundException: javax.servlet.http.HttpServletRequest</p>
<p>Could someone help me to download the source code and run on your computer? After run it, and you click &quot;Login using Facebook&quot;, you will see the exception.
<a href=""https://github.com/chuangtc/spring-boot-3.0-security-social-login"" rel=""noreferrer"">https://github.com/chuangtc/spring-boot-3.0-security-social-login</a></p>
<p>I tried adding jarkarta servlet api 6.0, but the exception is still there.</p>
",
tags:"<java><spring-boot>",
score:34,
creationDate:2023-01-11 01:09:15,
creationDate:2023-01-11 01:23:17,
score:54,
acceptedResponderReputation:1276,
acceptedResponder:7739171,
QuestionerReputation:439,
Questioner:16687077}
{title:"""describe is not defined"" in Vitest",
id:"https://stackoverflow.com/questions/75971024",
body:"<p>I'm starting out with Vite for a React application but unable to get jest tests working. I am trying to use Vitest with experimental ES module.</p>
<p>I am getting:</p>
<pre><code>FAIL  src/App.test.tsx [ src/App.test.tsx ]
ReferenceError: describe is not defined
</code></pre>
<p>I have added Jest, Mocha Vite, and Vitest, but it hasn't helped.</p>
<p>My package.json has</p>
<pre><code>  &quot;devDependencies&quot;: {
    &quot;@testing-library/react&quot;: &quot;^14.0.0&quot;,
    &quot;@types/jest&quot;: &quot;^29.5.0&quot;,
    &quot;@types/react&quot;: &quot;^18.0.28&quot;,
    &quot;@types/react-dom&quot;: &quot;^18.0.11&quot;,
    &quot;@vitejs/plugin-react-swc&quot;: &quot;^3.0.0&quot;,
    &quot;jest&quot;: &quot;^29.5.0&quot;,
    &quot;mocha&quot;: &quot;^10.2.0&quot;,
    &quot;typescript&quot;: &quot;^4.9.3&quot;,
    &quot;vite&quot;: &quot;^4.2.0&quot;,
    &quot;vitest&quot;: &quot;^0.29.8&quot;
  }
</code></pre>
<p>My Vite config is:</p>
<pre><code>import { defineConfig } from 'vite'
import react from '@vitejs/plugin-react-swc'

export default defineConfig({
  plugins: [react()],
}
</code></pre>
<p>My Vitest config is:</p>
<pre><code>import react from '@vitejs/plugin-react';
import { defineConfig } from 'vitest/config'

export default defineConfig({
  plugins: [react()],
  test: {
    include: ['**/*.test.tsx'],
  },
})
</code></pre>
<p>This is from running Vitest. If I run Jest directly with</p>
<pre><code>jest
</code></pre>
<p>or</p>
<pre><code>node --experimental-vm-modules node_modules/jest/bin/jest.js 
</code></pre>
<p>I get:</p>
<pre><code> SyntaxError: /home/durrantm/Dropnot/vite/thedeiscorecard-vite/src/App.test.tsx: 
 Support for the experimental syntax 'jsx' isn't currently enabled
</code></pre>
",
tags:"<javascript><jestjs><jsx><vite><vitest>",
score:20,
creationDate:2023-04-09 14:11:09,
creationDate:2023-04-09 15:34:59,
score:54,
acceptedResponderReputation:3898,
acceptedResponder:12342919,
QuestionerReputation:96454,
Questioner:631619}
{title:"How to call Zustand / React hook outside of React component?",
id:"https://stackoverflow.com/questions/75530833",
body:"<p>I have this Zustand store to store authenticaction information about logged in user.</p>
<pre><code>const authStore = (set: any) =&gt; ({
    ...initialState,
    doLogin: async (user: TLoggedInRequest) =&gt; {
        try {
            set(() =&gt; ({status: &quot;pending&quot;}))
            const result = await loginService.login(user)
            set(() =&gt; ({
                status: &quot;resolved&quot;,
                user: result?.data.user,
                error: null
            }))
        } catch (error) {
            console.log(&quot;rejected error&quot;, error)
            set((state: any) =&gt; ({status: &quot;rejected&quot;, error}))
        }
    },
    doLogout: async () =&gt; {
        await loginService.logout()
        set(() =&gt; initialState)
        history.push(&quot;/&quot;)
    }
});
</code></pre>
<p>This is <code>HTTPApiClient</code> that for communication with REST API uses Axios, example of GET method (the rest omitted for brevity).</p>
<pre><code>async get&lt;TResponse&gt;(path: string): Promise&lt;TResponse&gt; {
    try {
        const response = await this.instance.get&lt;TResponse&gt;(path);
        return response.data;
    } catch (error: any) {
        handleServiceError(error);
    }
    return {} as TResponse;
}
</code></pre>
<p>And this piece of code is executed in React component when user is logging out.</p>
<pre><code>const doLogoutSelector = (state: any) =&gt; state.doLogout;
const doLogout = useAuthStore(doLogoutSelector);

const signout = () =&gt; {
        doLogout()
        return &lt;Navigate replace to=&quot;/&quot;/&gt;
}
</code></pre>
<p>I would like to logout user when <code>HTTPApiClient</code> gets <code>401 Unathorized</code> status code from the backend. I am able to recognize the 401 code in client but I don't know how to call logout hook.</p>
<p><strong>Q: How to call React the hook outside of React component?</strong></p>
",
tags:"<javascript><reactjs><axios><zustand>",
score:24,
creationDate:2023-02-22 09:44:31,
creationDate:2023-03-05 22:17:38,
score:55,
acceptedResponderReputation:2545,
acceptedResponder:12900361,
QuestionerReputation:3608,
Questioner:1315357}
{title:"Spring Security deprecated issue",
id:"https://stackoverflow.com/questions/76339307",
body:"<p>Trying to configure JWT configuration. Seems like JWT is deprecated. How can I use <code>OAuth2ResourceServerConfigurer::jwt</code> now?</p>
<p>My code:</p>
<pre class=""lang-java prettyprint-override""><code>@Bean
SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    http.authorizeHttpRequests((requests) -&gt; requests.anyRequest().authenticated());
    http.sessionManagement((session) -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS));
    //http.formLogin(withDefaults());
    http.httpBasic(Customizer.withDefaults());
    http.csrf(csrf -&gt; csrf.disable());
    http.headers(headers -&gt; headers.frameOptions(frameOptionsConfig -&gt; frameOptionsConfig.sameOrigin()));
    http.oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt);
    return http.build();
}
</code></pre>
<p>Also, in Spring Security 6.0, <code>antMatchers()</code> as well as other configuration methods for securing requests (namely <code>mvcMatchers()</code> and <code>regexMatchers()</code>) have been removed from the API.</p>
",
tags:"<java><spring><spring-boot><spring-security>",
score:40,
creationDate:2023-05-26 09:07:15,
creationDate:2023-05-26 13:23:22,
score:57,
acceptedResponderReputation:6248,
acceptedResponder:5454842,
QuestionerReputation:405,
Questioner:15300325}
{title:"Update Server Component after data has been changed by Client Component in Next.js",
id:"https://stackoverflow.com/questions/75124513",
body:"<p>I am still trying to wrap my head around this scenario. Can anyone please suggest what is the correct way to do this in Next.js 13?</p>
<p>I diplay a list of users in a Server Component, for example, like this (using MongoDB):</p>
<pre class=""lang-js prettyprint-override""><code>// UsersList.jsx
const UsersList = () =&gt; {
  const users = await usersCollection.getUsers()

  return (
  &lt;div&gt;
    {users.map(user) =&gt; &lt;div&gt;{user}&lt;/div&gt;}
  &lt;/div&gt;
  )
}
</code></pre>
<p>And on the same page, I have also defined client component for adding users:</p>
<pre class=""lang-js prettyprint-override""><code>// UsersEdit.jsx
'use client'
const UsersEdit = () =&gt; {
  const handleAdd() =&gt; // calls POST to /api/users
  return // render input + button
}
</code></pre>
<p>Both are displayed together like this in a Server Component Page:</p>
<pre class=""lang-js prettyprint-override""><code>// page.jsx
const Users = () =&gt; {
  return (
  &lt;div&gt;
    &lt;UsersList /&gt;
    &lt;UsersEdit /&gt;
  &lt;/div&gt;
  )
}
</code></pre>
<p>How should I &quot;reload&quot; or &quot;notify&quot; <code>UsersList</code> that a new user has been added to the collection to force it to display a new user/updated user?</p>
",
tags:"<javascript><node.js><reactjs><mongodb><next.js>",
score:58,
creationDate:2023-01-15 10:54:28,
creationDate:2023-01-15 17:30:12,
score:67,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:1599,
Questioner:7565335}
{title:"Next.js: TypeError: Failed to parse URL from ... when targeting API route relatively",
id:"https://stackoverflow.com/questions/76309154",
body:"<p>I have this code in my <code>app/page</code> (Server Component):</p>
<pre><code>const getUsers = async () =&gt; {
  const result = await fetch('/api/users', {method: 'GET'});
  if (result.ok) {
    return result.json();
  }
  return [];
}

export default async function IndexPage() {
  const users = await getUsers();
  return (&lt;h1&gt;Users: {users.length}&lt;/h1&gt;);
}
</code></pre>
<p>This gives me the following error:</p>
<pre><code>TypeError: Failed to parse URL from api/users
</code></pre>
<p>How do I refer to the &quot;left side&quot; of the URL from within a Server Side Component? All the Next.js <code>13</code> examples I can find show pointing to some third-party server. The Postgres example project, which uses the old router and client-side fetching, uses the same syntax I used.</p>
",
tags:"<javascript><reactjs><next.js><fetch-api>",
score:44,
creationDate:2023-05-22 18:55:52,
creationDate:2023-05-23 06:31:23,
score:75,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:6961,
Questioner:854556}
{title:"Cannot import `getReactNativePersistence` in `firebase@10.1.0`",
id:"https://stackoverflow.com/questions/76914913",
body:"<p>I cannot import the <code>getReactNativePersistence</code> module from the <code>firebase/auth</code>. I'm using Typescript.</p>
<p>Importing the function as below was possible, but it didn't work when I updated the Firebase SDK from <code>9.22.0</code> to <code>10.1.0</code>.</p>
<pre class=""lang-js prettyprint-override""><code>import { getReactNativePersistence } from &quot;firebase/auth/react-native&quot;;
</code></pre>
<p>It seems like <strong>there is no <code>firebase/auth/react-native</code> anymore.</strong></p>
<p>I also tried the following code, as <a href=""https://firebase.google.com/docs/reference/js/auth"" rel=""noreferrer"">the document</a> indicates,</p>
<pre class=""lang-js prettyprint-override""><code>import { getReactNativePersistence } from &quot;firebase/auth&quot;;
</code></pre>
<p>But it throws an error.</p>
<pre class=""lang-bash prettyprint-override""><code>Module '&quot;firebase/auth&quot;' has no exported member 'getReactNativePersistence'.
</code></pre>
<p>I'm using Expo, which uses Metro as default.</p>
<p>This is my <code>metro.config.js</code></p>
<pre class=""lang-js prettyprint-override""><code>// Learn more https://docs.expo.io/guides/customizing-metro
const { getDefaultConfig } = require('expo/metro-config');

module.exports = getDefaultConfig(__dirname);
</code></pre>
<p>How can I import <code>getReactNativePersistence</code> in <code>firebase@10.1.0</code>?</p>
",
tags:"<javascript><typescript><firebase><react-native>",
score:24,
creationDate:2023-08-16 15:11:27,
creationDate:2023-09-01 07:44:39,
score:81,
acceptedResponderReputation:826,
acceptedResponder:18686921,
QuestionerReputation:435,
Questioner:9320340}
{title:"How do you put api routes in the new app folder of Next.js?",
id:"https://stackoverflow.com/questions/75418329",
body:"<p>I have a test API under: <code>pages\api\accounts\login.js</code>. And I am learning the new <code>app</code> folder, which is still an experimental feature in Next.js (as of today).</p>
<p>Is it possible to move my login script into the <code>app</code> folder? I tried moving/renaming to <code>app\api\accounts\login\pages.js</code>, but when I do this:</p>
<pre><code>async function handler(req, res) {
  console.log(res);
}
export default handler;
</code></pre>
<p>I use the URL: <code>http://localhost:3000/api/accounts/login</code>. I get:</p>
<blockquote>
<p>Server Error</p>
<p>Error: Cannot find module for page: /api/accounts/login</p>
</blockquote>
<p>I also tried moving it to: <code>app/api/accounts/login/page.js</code>. But I get the same error.</p>
",
tags:"<javascript><reactjs><next.js>",
score:44,
creationDate:2023-02-11 05:44:55,
creationDate:2023-02-11 07:34:06,
score:82,
acceptedResponderReputation:45815,
acceptedResponder:15288641,
QuestionerReputation:1514,
Questioner:1270756}
{title:"Android Studio Ladybug: Your build is currently configured to use incompatible Java 21.0.3 and Gradle 8.0. Cannot sync the project",
id:"https://stackoverflow.com/questions/79049863",
body:"<p>After upgrading to Android Studio Ladybug, I get the following error message:</p>
<pre><code> Your build is currently configured to use incompatible Java 21.0.3 and
 Gradle 8.0. Cannot sync the project.
 
 We recommend upgrading to Gradle version 8.9.
 
 The minimum compatible Gradle version is 8.5.
 
 The maximum compatible Gradle JVM version is 19.
 
 Possible solutions:
  - Upgrade to Gradle 8.9 and re-sync
  - Upgrade to Gradle 8.5 and re-sync
</code></pre>
<p>I don't want to upgrade Gradle now. What is the simplest solution to build my project?</p>
",
tags:"<java><android><android-studio><gradle>",
score:50,
creationDate:2024-10-03 09:17:51,
creationDate:2024-10-03 09:17:51,
score:112,
acceptedResponderReputation:18699,
acceptedResponder:2298241,
QuestionerReputation:18699,
Questioner:2298241}
{title:"Can I use npx with pnpm?",
id:"https://stackoverflow.com/questions/75413361",
body:"<p>Can I use <code>npx</code> together with a <code>pnpm</code> install?</p>
<p>It doesn't seem to work and <code>pnpx</code> fetches remote dependencies, it seems more like <code>npm create</code>.</p>
<p>Is there a way to use <code>npx</code> with <code>pnpm</code> to execute local binaries or is there a different <code>pnpm</code> equivalent?</p>
",
tags:"<javascript><npm><npx><pnpm>",
score:99,
creationDate:2023-02-10 15:54:27,
creationDate:2023-02-20 18:36:55,
score:197,
acceptedResponderReputation:10685,
acceptedResponder:1006183,
QuestionerReputation:10685,
Questioner:1006183}
{title:"Compilation error after upgrading to JDK 21 - ""NoSuchFieldError: JCImport does not have member field JCTree qualid"",
id:"https://stackoverflow.com/questions/77171270",
body:"<p>After upgrading to JDK 21, I have the following compilation error in my Spring Boot project:</p>
<pre><code>Fatal error compiling: java.lang.NoSuchFieldError:
Class com.sun.tools.javac.tree.JCTree$JCImport does not have member field 'com.sun.tools.javac.tree.JCTree qualid'
</code></pre>
<h3>Question:</h3>
<p>What shall I do to use <strong>Java 21</strong>+ and still have the application compilable and runnable?</p>
",
tags:"<spring-boot><compiler-errors><upgrade><lombok><java-21>",
score:353,
creationDate:2023-09-25 09:05:11,
creationDate:2023-09-25 09:05:11,
score:564,
acceptedResponderReputation:19886,
acceptedResponder:2886891,
QuestionerReputation:19886,
Questioner:2886891}
]